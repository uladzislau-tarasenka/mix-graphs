"use strict";function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}Object.defineProperty(exports,"__esModule",{value:!0});var _arrayMap=arrayMap,commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{e[symToStringTag]=void 0;var n=!0}catch(e){}var i=nativeObjectToString.call(e);return n&&(t?e[symToStringTag]=r:delete e[symToStringTag]),i}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag(e):_objectToString(e)}var _baseGetTag=baseGetTag;function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=function(){var e=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$2.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$3.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache,Map$1=_getNative(_root,"Map"),_Map=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}var _setCacheAdd=setCacheAdd;function setCacheHas(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas;function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new _MapCache;++t<r;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=_setCacheAdd,SetCache.prototype.has=_setCacheHas;var _SetCache=SetCache;function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var _baseFindIndex=baseFindIndex;function baseIsNaN(e){return e!=e}var _baseIsNaN=baseIsNaN;function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var _strictIndexOf=strictIndexOf;function baseIndexOf(e,t,r){return t==t?_strictIndexOf(e,t,r):_baseFindIndex(e,_baseIsNaN,r)}var _baseIndexOf=baseIndexOf;function arrayIncludes(e,t){return!!(null==e?0:e.length)&&_baseIndexOf(e,t,0)>-1}var _arrayIncludes=arrayIncludes;function arrayIncludesWith(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith;function baseUnary(e){return function(t){return e(t)}}var _baseUnary=baseUnary;function cacheHas(e,t){return e.has(t)}var _cacheHas=cacheHas,nativeMin=Math.min;function baseIntersection(e,t,r){for(var n=r?_arrayIncludesWith:_arrayIncludes,i=e[0].length,o=e.length,a=o,s=Array(o),l=1/0,u=[];a--;){var c=e[a];a&&t&&(c=_arrayMap(c,_baseUnary(t))),l=nativeMin(c.length,l),s[a]=!r&&(t||i>=120&&c.length>=120)?new _SetCache(a&&c):void 0}c=e[0];var h=-1,d=s[0];e:for(;++h<i&&u.length<l;){var f=c[h],p=t?t(f):f;if(f=r||0!==f?f:0,!(d?_cacheHas(d,p):n(u,p,r))){for(a=o;--a;){var g=s[a];if(!(g?_cacheHas(g,p):n(e[a],p,r)))continue e}d&&d.push(p),u.push(f)}}return u}var _baseIntersection=baseIntersection;function identity(e){return e}var identity_1=identity;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply,nativeMax=Math.max;function overRest(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=nativeMax(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),_apply(e,this,s)}}var _overRest=overRest;function constant(e){return function(){return e}}var constant_1=constant,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty=defineProperty,baseSetToString=_defineProperty?function(e,t){return _defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant_1(t),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var t=0,r=0;return function(){var n=nativeNow(),i=HOT_SPAN-(n-r);if(r=n,i>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var _shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString;function baseRest(e,t){return _setToString(_overRest(e,t,identity_1),e+"")}var _baseRest=baseRest,MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}var isLength_1=isLength;function isArrayLike(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike;function isObjectLike(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike;function isArrayLikeObject(e){return isObjectLike_1(e)&&isArrayLike_1(e)}var isArrayLikeObject_1=isArrayLikeObject;function castArrayLikeObject(e){return isArrayLikeObject_1(e)?e:[]}var _castArrayLikeObject=castArrayLikeObject,intersection=_baseRest((function(e){var t=_arrayMap(e,_castArrayLikeObject);return t.length&&t[0]===e[0]?_baseIntersection(t):[]})),intersection_1=intersection,Layouts,ExportTypes,CoseQuality,RankDirection,Rankers;Layouts=exports.Layouts||(exports.Layouts={}),Layouts.Avsdf="avsdf",Layouts.Cose="fcose",Layouts.Dagre="dagre",Layouts.Fa2="fa2",ExportTypes=exports.ExportTypes||(exports.ExportTypes={}),ExportTypes.Png="png",ExportTypes.Jpeg="jpeg",CoseQuality=exports.CoseQuality||(exports.CoseQuality={}),CoseQuality.Default="Default",CoseQuality.Draft="Draft",CoseQuality.Proof="Proof",function(e){e.During="During",e.End="End"}(exports.Animation||(exports.Animation={})),RankDirection=exports.RankDirection||(exports.RankDirection={}),RankDirection.TB="TB",RankDirection.LR="LR",RankDirection.RL="RL",RankDirection.BT="BT",Rankers=exports.Rankers||(exports.Rankers={}),Rankers.NetworkSimplex="network-simplex",Rankers.TightTree="tight-tree",Rankers.LongestPath="longest-path";class GraphHelper{static isFitSubset(e,t){return Object.entries(t).every(([t,r])=>Array.isArray(r)?r.includes(e[t]):e[t]===r)}static getSubsetIds(e,t){const r=[];for(const n of e)GraphHelper.isFitSubset(n,t)&&r.push(n.id);return r}static detectCycle(e){const t=GraphHelper.getConnectedNodesList(e),r=Object.keys(t),n={},i={};for(let e=0;e<r.length;e++){const o=r[e];if(GraphHelper.detectCycleUtil(t,o,n,i))return!0}return!1}static getConnectedNodesList(e){const t={};for(const{source:r,target:n}of e)t[r]||(t[r]=[]),t[n]||(t[n]=[]),t[r].push(n);return t}static detectCycleUtil(e,t,r,n){if(!r[t]){r[t]=!0,n[t]=!0;const i=e[t];for(let o=0;o<i.length;o++){const a=i[o];if(console.log("parent",t,"Child",a),!r[a]&&GraphHelper.detectCycleUtil(e,a,r,n))return!0;if(n[a])return!0}}return n[t]=!1,!1}}const COSE_AVSDF_INTERSECTION_RULE={name:"Avoiding usage of Cose and Avsdf in subgraphs intersection",checkFunction:({node:e})=>!(e.markedLayouts.includes(exports.Layouts.Cose)&&e.markedLayouts.includes(exports.Layouts.Avsdf))},AVSDF_INTERSECTION_RULE={name:"Avoiding case when subgraphs which have nodes intersection use Avsdf",checkFunction:({nodes:e,avsdfSubsets:t})=>{const r=e.filter(e=>e.markedLayouts.includes(exports.Layouts.Avsdf));if(r.length>0)for(const e of r){let r=0;for(const n of t)if(GraphHelper.isFitSubset(e,n)&&r++,r>1)return!1}return!0}},DARGE_AVSDF_INTERSECTION_RULE={name:"Avoiding usage of Dagre and Avsdf in subgraphs intersection which contains more than 1 node",checkFunction:({markedNodes:e,avsdfSubset:t,dagreSubset:r})=>{const n=e.filter(e=>e.markedLayouts.includes(exports.Layouts.Avsdf)&&e.markedLayouts.includes(exports.Layouts.Dagre));if(n.length>1){const e=GraphHelper.getSubsetIds(n,t),i=GraphHelper.getSubsetIds(n,r);if(intersection_1(e,i).length>1)return!1}return!0}},ACYCLE_RULE={name:"Subgraph using Dagre is acyclic",checkFunction:({edges:e})=>!GraphHelper.detectCycle(e)},FA2_LAYOUT_SETTINGS_RULES=[{name:"Follow Spring Length range",checkFunction:({settings:e,subGraph:t})=>{const{springLength:r}=e;return!(r<50||r>200)}}],COSE_LAYOUT_SETTINGS_RULES=[{name:"Follow Nesting Factor range",checkFunction:({settings:e,subGraph:t})=>{const{nestingFactor:r}=e;return!(r>3)}},{name:"Follow Nesting Factor range",checkFunction:({settings:e,subGraph:t})=>{const{nestingFactor:r}=e;return!(r>3)}}],AVSDF_LAYOUT_SETTINGS_RULES=[{name:"Follow Node Separation range",checkFunction:({settings:e,subGraph:t})=>{const{nodeSeparation:r}=e;return!(r<50||r>100)}}],DARGE_LAYOUT_SETTINGS_RULES=[],LayoutSettingsRules={[exports.Layouts.Fa2]:FA2_LAYOUT_SETTINGS_RULES,[exports.Layouts.Cose]:COSE_LAYOUT_SETTINGS_RULES,[exports.Layouts.Avsdf]:AVSDF_LAYOUT_SETTINGS_RULES,[exports.Layouts.Dagre]:DARGE_LAYOUT_SETTINGS_RULES};class FileSaver{static saveCanvasAs(e,t,r=exports.ExportTypes.Png){const n=document.createElement("a");n.href=e.toDataURL("image/"+r),n.download=`${t}.${r}`,n.click()}}var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal$1="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf$1="object"==typeof self&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf$1||Function("return this")(),objectProto$5=Object.prototype,objectToString$1=objectProto$5.toString,nativeMax$1=Math.max,nativeMin$1=Math.min,now=function(){return root$1.Date.now()};function debounce(e,t,r){var n,i,o,a,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);function f(t){var r=n,o=i;return n=i=void 0,u=t,a=e.apply(o,r)}function p(e){return u=e,s=setTimeout(y,t),c?f(e):a}function g(e){var r=e-l;return void 0===l||r>=t||r<0||h&&e-u>=o}function y(){var e=now();if(g(e))return v(e);s=setTimeout(y,function(e){var r=t-(e-l);return h?nativeMin$1(r,o-(e-u)):r}(e))}function v(e){return s=void 0,d&&n?f(e):(n=i=void 0,a)}function m(){var e=now(),r=g(e);if(n=arguments,i=this,l=e,r){if(void 0===s)return p(l);if(h)return s=setTimeout(y,t),f(l)}return void 0===s&&(s=setTimeout(y,t)),a}return t=toNumber(t)||0,isObject$1(r)&&(c=!!r.leading,o=(h="maxWait"in r)?nativeMax$1(toNumber(r.maxWait)||0,t):o,d="trailing"in r?!!r.trailing:d),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=i=s=void 0},m.flush=function(){return void 0===s?a:v(now())},m}function isObject$1(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike$1(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike$1(e)&&objectToString$1.call(e)==symbolTag}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce,heap=createCommonjsModule((function(e,t){(function(){var t,r,n,i,o,a,s,l,u,c,h,d,f,p,g;n=Math.floor,c=Math.min,r=function(e,t){return e<t?-1:e>t?1:0},u=function(e,t,i,o,a){var s;if(null==i&&(i=0),null==a&&(a=r),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);i<o;)a(t,e[s=n((i+o)/2)])<0?o=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(t)),t},a=function(e,t,n){return null==n&&(n=r),e.push(t),p(e,0,e.length-1,n)},o=function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,g(e,0,t)):i=n,i},l=function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,g(e,0,n),i},s=function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],g(e,0,n)),t},i=function(e,t){var i,o,a,s,l,u;for(null==t&&(t=r),l=[],o=0,a=(s=function(){u=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse()).length;o<a;o++)i=s[o],l.push(g(e,i,t));return l},f=function(e,t,n){var i;if(null==n&&(n=r),-1!==(i=e.indexOf(t)))return p(e,0,i,n),g(e,i,n)},h=function(e,t,n){var o,a,l,u,c;if(null==n&&(n=r),!(a=e.slice(0,t)).length)return a;for(i(a,n),l=0,u=(c=e.slice(t)).length;l<u;l++)o=c[l],s(a,o,n);return a.sort(n).reverse()},d=function(e,t,n){var a,s,l,h,d,f,p,g,y;if(null==n&&(n=r),10*t<=e.length){if(!(l=e.slice(0,t).sort(n)).length)return l;for(s=l[l.length-1],h=0,f=(p=e.slice(t)).length;h<f;h++)n(a=p[h],s)<0&&(u(l,a,0,null,n),l.pop(),s=l[l.length-1]);return l}for(i(e,n),y=[],d=0,g=c(t,e.length);0<=g?d<g:d>g;0<=g?++d:--d)y.push(o(e,n));return y},p=function(e,t,n,i){var o,a,s;for(null==i&&(i=r),o=e[n];n>t&&i(o,a=e[s=n-1>>1])<0;)e[n]=a,n=s;return e[n]=o},g=function(e,t,n){var i,o,a,s,l;for(null==n&&(n=r),o=e.length,l=t,a=e[t],i=2*t+1;i<o;)(s=i+1)<o&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],i=2*(t=i)+1;return e[t]=a,p(e,l,t,n)},t=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=a,e.pop=o,e.replace=l,e.pushpop=s,e.heapify=i,e.updateItem=f,e.nlargest=h,e.nsmallest=d,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return s(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e.exports=t}).call(commonjsGlobal)})),heap$1=heap;function _interopDefault$1(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var util=_interopDefault$1(lodash_debounce),Heap=_interopDefault$1(heap$1);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var window$1="undefined"==typeof window?null:window,navigator$1=window$1?window$1.navigator:null,document$1=window$1?window$1.document:null,typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof((function(){})),typeofhtmlele="undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement),instanceStr=function(e){return e&&e.instanceString&&fn(e.instanceString)?e.instanceString():null},string=function(e){return null!=e&&_typeof(e)==typeofstr},fn=function(e){return null!=e&&_typeof(e)===typeoffn},array=function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject=function(e){return null!=e&&_typeof(e)===typeofobj&&!array(e)&&e.constructor===Object},object=function(e){return null!=e&&_typeof(e)===typeofobj},number=function(e){return null!=e&&_typeof(e)===_typeof(1)&&!isNaN(e)},integer=function(e){return number(e)&&Math.floor(e)===e},htmlElement=function(e){return"undefined"===typeofhtmlele?void 0:null!=e&&e instanceof HTMLElement},elementOrCollection=function(e){return element(e)||collection(e)},element=function(e){return"collection"===instanceStr(e)&&e._private.single},collection=function(e){return"collection"===instanceStr(e)&&!e._private.single},core=function(e){return"core"===instanceStr(e)},stylesheet=function(e){return"stylesheet"===instanceStr(e)},event=function(e){return"event"===instanceStr(e)},emptyString=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},domElement=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement},boundingBox=function(e){return plainObject(e)&&number(e.x1)&&number(e.x2)&&number(e.y1)&&number(e.y2)},promise=function(e){return object(e)&&fn(e.then)},ms=function(){return navigator$1&&navigator$1.userAgent.match(/msie|trident|edge/i)},memoize=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var r=function r(){var n,i=this,o=arguments,a=t.apply(i,o),s=r.cache;return(n=s[a])||(n=s[a]=e.apply(i,o)),n};return r.cache={},r},camel2dash=memoize((function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))})),dash2camel=memoize((function(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))})),prependCamel=memoize((function(e,t){return e+t[0].toUpperCase()+t.substring(1)}),(function(e,t){return e+"$"+t})),capitalize=function(e){return emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},number$1="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",rgba="rgb[a]?\\(("+number$1+"[%]?)\\s*,\\s*("+number$1+"[%]?)\\s*,\\s*("+number$1+"[%]?)(?:\\s*,\\s*("+number$1+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number$1+"[%]?)\\s*,\\s*(?:"+number$1+"[%]?)\\s*,\\s*(?:"+number$1+"[%]?)(?:\\s*,\\s*(?:"+number$1+"))?\\)",hsla="hsl[a]?\\(("+number$1+")\\s*,\\s*("+number$1+"[%])\\s*,\\s*("+number$1+"[%])(?:\\s*,\\s*("+number$1+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number$1+")\\s*,\\s*(?:"+number$1+"[%])\\s*,\\s*(?:"+number$1+"[%])(?:\\s*,\\s*(?:"+number$1+"))?\\)",hex3="\\#[0-9a-fA-F]{3}",hex6="\\#[0-9a-fA-F]{6}",ascending=function(e,t){return e<t?-1:e>t?1:0},descending=function(e,t){return-1*ascending(e,t)},extend=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var n=t[r];if(null!=n)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o];e[a]=n[a]}}return e},hex2tuple=function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,n;return 4===e.length?(t=parseInt(e[1]+e[1],16),r=parseInt(e[2]+e[2],16),n=parseInt(e[3]+e[3],16)):(t=parseInt(e[1]+e[2],16),r=parseInt(e[3]+e[4],16),n=parseInt(e[5]+e[6],16)),[t,r,n]}},hsl2tuple=function(e){var t,r,n,i,o,a,s,l;function u(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}var c=new RegExp("^"+hsla+"$").exec(e);if(c){if((r=parseInt(c[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(n=parseFloat(c[2]))<0||n>100)return;if(n/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===n)a=s=l=Math.round(255*i);else{var h=i<.5?i*(1+n):i+n-i*n,d=2*i-h;a=Math.round(255*u(d,h,r+1/3)),s=Math.round(255*u(d,h,r)),l=Math.round(255*u(d,h,r-1/3))}t=[a,s,l,o]}return t},rgb2tuple=function(e){var t,r=new RegExp("^"+rgba+"$").exec(e);if(r){t=[];for(var n=[],i=1;i<=3;i++){var o=r[i];if("%"===o[o.length-1]&&(n[i]=!0),o=parseFloat(o),n[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var a=n[1]||n[2]||n[3],s=n[1]&&n[2]&&n[3];if(a&&!s)return;var l=r[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t},colorname2tuple=function(e){return colors[e.toLowerCase()]},color2tuple=function(e){return(array(e)?e:null)||colorname2tuple(e)||hex2tuple(e)||rgb2tuple(e)||hsl2tuple(e)},colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function(e){for(var t=e.map,r=e.keys,n=r.length,i=0;i<n;i++){var o=r[i];if(plainObject(o))throw Error("Tried to set map with object key");i<r.length-1?(null==t[o]&&(t[o]={}),t=t[o]):t[o]=e.value}},getMap=function(e){for(var t=e.map,r=e.keys,n=r.length,i=0;i<n;i++){var o=r[i];if(plainObject(o))throw Error("Tried to get map with object key");if(null==(t=t[o]))return t}return t},performance=window$1?window$1.performance:null,pnow=performance&&performance.now?function(){return performance.now()}:function(){return Date.now()},raf=function(){if(window$1){if(window$1.requestAnimationFrame)return function(e){window$1.requestAnimationFrame(e)};if(window$1.mozRequestAnimationFrame)return function(e){window$1.mozRequestAnimationFrame(e)};if(window$1.webkitRequestAnimationFrame)return function(e){window$1.webkitRequestAnimationFrame(e)};if(window$1.msRequestAnimationFrame)return function(e){window$1.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout((function(){e(pnow())}),1e3/60)}}(),requestAnimationFrame$1=function(e){return raf(e)},performanceNow=pnow,DEFAULT_SEED=5381,hashIterableInts=function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_SEED,n=r;!(t=e.next()).done;)n=(n<<5)+n+t.value|0;return n},hashInt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_SEED;return(t<<5)+t+e|0},hashIntsArray=function(e,t){var r={value:0,done:!1},n=0,i=e.length;return hashIterableInts({next:function(){return n<i?r.value=e[n++]:r.done=!0,r}},t)},hashString=function(e,t){var r={value:0,done:!1},n=0,i=e.length;return hashIterableInts({next:function(){return n<i?r.value=e.charCodeAt(n++):r.done=!0,r}},t)},hashStrings=function(){return hashStringsArray(arguments)},hashStringsArray=function(e){for(var t,r=0;r<e.length;r++){var n=e[r];t=0===r?hashString(n):hashString(n,t)}return t},warningsEnabled=!0,warnSupported=null!=console.warn,traceSupported=null!=console.trace,MAX_INT=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function(){return!0},falsify=function(){return!1},zeroify=function(){return 0},noop=function(){},error=function(e){throw new Error(e)},warnings=function(e){if(void 0===e)return warningsEnabled;warningsEnabled=!!e},warn=function(e){warnings()&&(warnSupported?console.warn(e):(console.log(e),traceSupported&&console.trace()))},clone=function(e){return extend({},e)},copy=function(e){return null==e?e:array(e)?e.slice():plainObject(e)?clone(e):e},copyArray=function(e){return e.slice()},uuid=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},_staticEmptyObject={},staticEmptyObject=function(){return _staticEmptyObject},defaults=function(e){var t=Object.keys(e);return function(r){for(var n={},i=0;i<t.length;i++){var o=t[i],a=null==r?void 0:r[o];n[o]=void 0===a?e[o]:a}return n}},removeFromArray=function(e,t,r){for(var n=e.length;n>=0&&(e[n]!==t||(e.splice(n,1),r));n--);},clearArray=function(e){e.splice(0,e.length)},push=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.push(n)}},getPrefixedProperty=function(e,t,r){return r&&(t=prependCamel(r,t)),e[t]},setPrefixedProperty=function(e,t,r,n){r&&(t=prependCamel(r,t)),e[t]=n},ObjectMap=function(){function e(){_classCallCheck(this,e),this._obj={}}return _createClass(e,[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),e}(),Map$1$1="undefined"!=typeof Map?Map:ObjectMap,undef="undefined",ObjectSet=function(){function e(t){if(_classCallCheck(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var n=0;n<r.length;n++)this.add(r[n])}}return _createClass(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter((function(t){return e.has(t)}))}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),e}(),Set$1=("undefined"==typeof Set?"undefined":_typeof(Set))!==undef?Set:ObjectSet,Element$1=function(e,t,r){if(r=!(void 0!==r&&!r),void 0!==e&&void 0!==t&&core(e)){var n=t.group;if(null==n&&(n=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===n||"edges"===n){this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===n:!!t.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,a=e.pan(),s=e.zoom();i.position={x:(o.x-a.x)/s,y:(o.y-a.y)/s}}var l=[];array(t.classes)?l=t.classes:string(t.classes)&&(l=t.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var h=l[u];h&&""!==h&&i.classes.add(h)}this.createEmitter();var d=t.style||t.css;d&&(warn("Setting a `style` bypass at element creation is deprecated"),this.style(d)),(void 0===r||r)&&this.restore()}else error("An element must be of type `nodes` or `edges`; you specified `"+n+"`")}else error("An element must have a core reference and parameters set")},defineSearch=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,r,n){var i;plainObject(t)&&!elementOrCollection(t)&&(t=(i=t).roots||i.root,r=i.visit,n=i.directed),n=2!==arguments.length||fn(r)?n:r,r=fn(r)?r:function(){};for(var o,a=this._private.cy,s=t=string(t)?this.filter(t):t,l=[],u=[],c={},h={},d={},f=0,p=this.byGroup(),g=p.nodes,y=p.edges,v=0;v<s.length;v++){var m=s[v],b=m.id();m.isNode()&&(l.unshift(m),e.bfs&&(d[b]=!0,u.push(m)),h[b]=0)}var $=function(){var t=e.bfs?l.shift():l.pop(),i=t.id();if(e.dfs){if(d[i])return"continue";d[i]=!0,u.push(t)}var a,s=h[i],p=c[i],v=null!=p?p.source():null,m=null!=p?p.target():null,b=null==p?void 0:t.same(v)?m[0]:v[0];if(!0===(a=r(t,p,b,f++,s)))return o=t,"break";if(!1===a)return"break";for(var $=t.connectedEdges().filter((function(e){return(!n||e.source().same(t))&&y.has(e)})),_=0;_<$.length;_++){var w=$[_],E=w.connectedNodes().filter((function(e){return!e.same(t)&&g.has(e)})),x=E.id();0===E.length||d[x]||(E=E[0],l.push(E),e.bfs&&(d[x]=!0,u.push(E)),c[x]=w,h[x]=h[i]+1)}};e:for(;0!==l.length;){var _=$();switch(_){case"continue":continue;case"break":break e}}for(var w=a.collection(),E=0;E<u.length;E++){var x=u[E],T=c[x.id()];null!=T&&w.merge(T),w.merge(x)}return{path:a.collection(w),found:a.collection(o)}}},elesfn={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn.bfs=elesfn.breadthFirstSearch,elesfn.dfs=elesfn.depthFirstSearch;var dijkstraDefaults=defaults({root:null,weight:function(e){return 1},directed:!1}),elesfn$1={dijkstra:function(e){if(!plainObject(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var r=dijkstraDefaults(e),n=r.root,i=r.weight,o=r.directed,a=this,s=i,l=string(n)?this.filter(n)[0]:n[0],u={},c={},h={},d=this.byGroup(),f=d.nodes,p=d.edges;p.unmergeBy((function(e){return e.isLoop()}));for(var g=function(e){return u[e.id()]},y=function(e,t){u[e.id()]=t,v.updateItem(e)},v=new Heap((function(e,t){return g(e)-g(t)})),m=0;m<f.length;m++){var b=f[m];u[b.id()]=b.same(l)?0:1/0,v.push(b)}for(var $=function(e,t){for(var r,n=(o?e.edgesTo(t):e.edgesWith(t)).intersect(p),i=1/0,a=0;a<n.length;a++){var l=n[a],u=s(l);(u<i||!r)&&(i=u,r=l)}return{edge:r,dist:i}};v.size()>0;){var _=v.pop(),w=g(_),E=_.id();if(h[E]=w,w!==1/0)for(var x=_.neighborhood().intersect(f),T=0;T<x.length;T++){var S=x[T],O=S.id(),C=$(_,S),k=w+C.dist;k<g(S)&&(y(S,k),c[O]={node:_,edge:C.edge})}}return{distanceTo:function(e){var t=string(e)?f.filter(e)[0]:e[0];return h[t.id()]},pathTo:function(e){var t=string(e)?f.filter(e)[0]:e[0],r=[],n=t,i=n.id();if(t.length>0)for(r.unshift(t);c[i];){var o=c[i];r.unshift(o.edge),r.unshift(o.node),i=(n=o.node).id()}return a.spawn(r)}}}},elesfn$2={kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),r=t.nodes,n=t.edges,i=r.length,o=new Array(i),a=r,s=function(e){for(var t=0;t<o.length;t++){if(o[t].has(e))return t}},l=0;l<i;l++)o[l]=this.spawn(r[l]);for(var u=n.sort((function(t,r){return e(t)-e(r)})),c=0;c<u.length;c++){var h=u[c],d=h.source()[0],f=h.target()[0],p=s(d),g=s(f),y=o[p],v=o[g];p!==g&&(a.merge(h),y.merge(v),o.splice(g,1))}return a}},aStarDefaults=defaults({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),elesfn$3={aStar:function(e){var t=this.cy(),r=aStarDefaults(e),n=r.root,i=r.goal,o=r.heuristic,a=r.directed,s=r.weight;n=t.collection(n)[0],i=t.collection(i)[0];var l,u,c=n.id(),h=i.id(),d={},f={},p={},g=new Heap((function(e,t){return f[e.id()]-f[t.id()]})),y=new Set$1,v={},m={},b=function(e,t){g.push(e),y.add(t)},$=function(e){return y.has(e)};b(n,c),d[c]=0,f[c]=o(n);for(var _=0;g.size()>0;){if(l=g.pop(),u=l.id(),y.delete(u),_++,u===h){for(var w=[],E=i,x=h,T=m[x];w.unshift(E),null!=T&&w.unshift(T),null!=(E=v[x]);)T=m[x=E.id()];return{found:!0,distance:d[u],path:this.spawn(w),steps:_}}p[u]=!0;for(var S=l._private.edges,O=0;O<S.length;O++){var C=S[O];if(this.hasElementWithId(C.id())&&(!a||C.data("source")===u)){var k=C.source(),P=C.target(),A=k.id()!==u?k:P,I=A.id();if(this.hasElementWithId(I)&&!p[I]){var D=d[u]+s(C);$(I)?D<d[I]&&(d[I]=D,f[I]=D+o(A),v[I]=l):(d[I]=D,f[I]=D+o(A),b(A,I),v[I]=l,m[I]=C)}}}}return{found:!1,distance:void 0,path:void 0,steps:_}}},floydWarshallDefaults=defaults({weight:function(e){return 1},directed:!1}),elesfn$4={floydWarshall:function(e){for(var t=this.cy(),r=floydWarshallDefaults(e),n=r.weight,i=r.directed,o=n,a=this.byGroup(),s=a.nodes,l=a.edges,u=s.length,c=u*u,h=function(e){return s.indexOf(e)},d=function(e){return s[e]},f=new Array(c),p=0;p<c;p++){var g=p%u,y=(p-g)/u;f[p]=y===g?0:1/0}for(var v=new Array(c),m=new Array(c),b=0;b<l.length;b++){var $=l[b],_=$.source()[0],w=$.target()[0];if(_!==w){var E=h(_),x=h(w),T=E*u+x,S=o($);if(f[T]>S&&(f[T]=S,v[T]=x,m[T]=$),!i){var O=x*u+E;!i&&f[O]>S&&(f[O]=S,v[O]=E,m[O]=$)}}}for(var C=0;C<u;C++)for(var k=0;k<u;k++)for(var P=k*u+C,A=0;A<u;A++){var I=k*u+A,D=C*u+A;f[P]+f[D]<f[I]&&(f[I]=f[P]+f[D],v[I]=v[P])}var N=function(e){return h(function(e){return(string(e)?t.filter(e):e)[0]}(e))};return{distance:function(e,t){var r=N(e),n=N(t);return f[r*u+n]},path:function(e,r){var n=N(e),i=N(r),o=d(n);if(n===i)return o.collection();if(null==v[n*u+i])return t.collection();var a,s=t.collection(),l=n;for(s.merge(o);n!==i;)l=n,n=v[n*u+i],a=m[l*u+n],s.merge(a),s.merge(d(n));return s}}}},bellmanFordDefaults=defaults({weight:function(e){return 1},directed:!1,root:null}),elesfn$5={bellmanFord:function(e){var t=this,r=bellmanFordDefaults(e),n=r.weight,i=r.directed,o=r.root,a=n,s=this,l=this.cy(),u=this.byGroup(),c=u.edges,h=u.nodes,d=h.length,f=new Map$1$1,p=!1;o=l.collection(o)[0],c.unmergeBy((function(e){return e.isLoop()}));for(var g=c.length,y=function(e){var t=f.get(e.id());return t||(t={},f.set(e.id(),t)),t},v=function(e){return(string(e)?l.$(e):e)[0]},m=0;m<d;m++){var b=h[m],$=y(b);b.same(o)?$.dist=0:$.dist=1/0,$.pred=null,$.edge=null}for(var _=!1,w=function(e,t,r,n,i,o){var a=n.dist+o;a<i.dist&&!r.same(n.edge)&&(i.dist=a,i.pred=e,i.edge=r,_=!0)},E=1;E<d;E++){_=!1;for(var x=0;x<g;x++){var T=c[x],S=T.source(),O=T.target(),C=a(T),k=y(S),P=y(O);w(S,0,T,k,P,C),i||w(O,0,T,P,k,C)}if(!_)break}if(_)for(var A=0;A<g;A++){var I=c[A],D=I.source(),N=I.target(),M=a(I),R=y(D).dist,L=y(N).dist;if(R+M<L||!i&&L+M<R){warn("Graph contains a negative weight cycle for Bellman-Ford"),p=!0;break}}return{distanceTo:function(e){return y(v(e)).dist},pathTo:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=v(e),i=[],a=n;;){if(null==a)return t.spawn();var l=y(a),u=l.edge,c=l.pred;if(i.unshift(a[0]),a.same(r)&&i.length>0)break;null!=u&&i.unshift(u),a=c}return s.spawn(i)},hasNegativeWeightCycle:p,negativeWeightCycles:[]}}},sqrt2=Math.sqrt(2),collapse=function(e,t,r){0===r.length&&error("Karger-Stein must be run on a connected (sub)graph");for(var n=r[e],i=n[1],o=n[2],a=t[i],s=t[o],l=r,u=l.length-1;u>=0;u--){var c=l[u],h=c[1],d=c[2];(t[h]===a&&t[d]===s||t[h]===s&&t[d]===a)&&l.splice(u,1)}for(var f=0;f<l.length;f++){var p=l[f];p[1]===s?(l[f]=p.slice(),l[f][1]=a):p[2]===s&&(l[f]=p.slice(),l[f][2]=a)}for(var g=0;g<t.length;g++)t[g]===s&&(t[g]=a);return l},contractUntil=function(e,t,r,n){for(;r>n;){var i=Math.floor(Math.random()*t.length);t=collapse(i,e,t),r--}return t},elesfn$6={kargerStein:function(){var e=this,t=this.byGroup(),r=t.nodes,n=t.edges;n.unmergeBy((function(e){return e.isLoop()}));var i=r.length,o=n.length,a=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/sqrt2);if(!(i<2)){for(var l=[],u=0;u<o;u++){var c=n[u];l.push([u,r.indexOf(c.source()),r.indexOf(c.target())])}for(var h=1/0,d=[],f=new Array(i),p=new Array(i),g=new Array(i),y=function(e,t){for(var r=0;r<i;r++)t[r]=e[r]},v=0;v<=a;v++){for(var m=0;m<i;m++)p[m]=m;var b=contractUntil(p,l.slice(),i,s),$=b.slice();y(p,g);var _=contractUntil(p,b,s,2),w=contractUntil(g,$,s,2);_.length<=w.length&&_.length<h?(h=_.length,d=_,y(p,f)):w.length<=_.length&&w.length<h&&(h=w.length,d=w,y(g,f))}for(var E=this.spawn(d.map((function(e){return n[e[0]]}))),x=this.spawn(),T=this.spawn(),S=f[0],O=0;O<f.length;O++){var C=f[O],k=r[O];C===S?x.merge(k):T.merge(k)}var P=function(t){var r=e.spawn();return t.forEach((function(t){r.merge(t),t.connectedEdges().forEach((function(t){e.contains(t)&&!E.contains(t)&&r.merge(t)}))})),r},A=[P(x),P(T)];return{cut:E,components:A,partition1:x,partition2:T}}error("At least 2 nodes are required for Karger-Stein algorithm")}},copyPosition=function(e){return{x:e.x,y:e.y}},modelToRenderedPosition=function(e,t,r){return{x:e.x*t+r.x,y:e.y*t+r.y}},renderedToModelPosition=function(e,t,r){return{x:(e.x-r.x)/t,y:(e.y-r.y)/t}},array2point=function(e){return{x:e[0],y:e[1]}},min=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=1/0,i=t;i<r;i++){var o=e[i];isFinite(o)&&(n=Math.min(o,n))}return n},max=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=-1/0,i=t;i<r;i++){var o=e[i];isFinite(o)&&(n=Math.max(o,n))}return n},mean=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=0,i=0,o=t;o<r;o++){var a=e[o];isFinite(a)&&(n+=a,i++)}return n/i},median=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];n?e=e.slice(t,r):(r<e.length&&e.splice(r,e.length-r),t>0&&e.splice(0,t));for(var a=0,s=e.length-1;s>=0;s--){var l=e[s];o?isFinite(l)||(e[s]=-1/0,a++):e.splice(s,1)}i&&e.sort((function(e,t){return e-t}));var u=e.length,c=Math.floor(u/2);return u%2!=0?e[c+1+a]:(e[c-1+a]+e[c+a])/2},deg2rad=function(e){return Math.PI*e/180},getAngleFromDisp=function(e,t){return Math.atan2(t,e)-Math.PI/2},log2=Math.log2||function(e){return Math.log(e)/Math.log(2)},signum=function(e){return e>0?1:e<0?-1:0},dist=function(e,t){return Math.sqrt(sqdist(e,t))},sqdist=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n},inPlaceSumNormalize=function(e){for(var t=e.length,r=0,n=0;n<t;n++)r+=e[n];for(var i=0;i<t;i++)e[i]=e[i]/r;return e},qbezierAt=function(e,t,r,n){return(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*r},qbezierPtAt=function(e,t,r,n){return{x:qbezierAt(e.x,t.x,r.x,n),y:qbezierAt(e.y,t.y,r.y,n)}},lineAt=function(e,t,r,n){var i=t.x-e.x,o=t.y-e.y,a=dist(e,t),s=i/a,l=o/a;return r=null==r?0:r,n=null!=n?n:r*a,{x:e.x+s*n,y:e.y+l*n}},bound=function(e,t,r){return Math.max(e,Math.min(r,t))},makeBoundingBox=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},copyBoundingBox=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},clearBoundingBox=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},updateBoundingBox=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},expandBoundingBoxByPoint=function(e,t,r){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},expandBoundingBox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},expandBoundingBoxSides=function(e){var t,r,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===o.length)t=r=n=i=o[0];else if(2===o.length)t=n=o[0],i=r=o[1];else if(4===o.length){var a=_slicedToArray(o,4);t=a[0],r=a[1],n=a[2],i=a[3]}return e.x1-=i,e.x2+=r,e.y1-=t,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},assignBoundingBox=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},assignShiftToBoundingBox=function(e,t){e.x1+=t.x,e.x2+=t.x,e.y1+=t.y,e.y2+=t.y},boundingBoxesIntersect=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},inBoundingBox=function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2},pointInBoundingBox=function(e,t){return inBoundingBox(e,t.x,t.y)},boundingBoxInBoundingBox=function(e,t){return inBoundingBox(e,t.x1,t.y1)&&inBoundingBox(e,t.x2,t.y2)},roundRectangleIntersectLine=function(e,t,r,n,i,o,a){var s,l=getRoundRectangleRadius(i,o),u=i/2,c=o/2,h=n-c-a;if((s=finiteLinesIntersect(e,t,r,n,r-u+l-a,h,r+u-l+a,h,!1)).length>0)return s;var d=r+u+a;if((s=finiteLinesIntersect(e,t,r,n,d,n-c+l-a,d,n+c-l+a,!1)).length>0)return s;var f=n+c+a;if((s=finiteLinesIntersect(e,t,r,n,r-u+l-a,f,r+u-l+a,f,!1)).length>0)return s;var p,g=r-u-a;if((s=finiteLinesIntersect(e,t,r,n,g,n-c+l-a,g,n+c-l+a,!1)).length>0)return s;var y=r-u+l,v=n-c+l;if((p=intersectLineCircle(e,t,r,n,y,v,l+a)).length>0&&p[0]<=y&&p[1]<=v)return[p[0],p[1]];var m=r+u-l,b=n-c+l;if((p=intersectLineCircle(e,t,r,n,m,b,l+a)).length>0&&p[0]>=m&&p[1]<=b)return[p[0],p[1]];var $=r+u-l,_=n+c-l;if((p=intersectLineCircle(e,t,r,n,$,_,l+a)).length>0&&p[0]>=$&&p[1]>=_)return[p[0],p[1]];var w=r-u+l,E=n+c-l;return(p=intersectLineCircle(e,t,r,n,w,E,l+a)).length>0&&p[0]<=w&&p[1]>=E?[p[0],p[1]]:[]},inLineVicinity=function(e,t,r,n,i,o,a){var s=a,l=Math.min(r,i),u=Math.max(r,i),c=Math.min(n,o),h=Math.max(n,o);return l-s<=e&&e<=u+s&&c-s<=t&&t<=h+s},inBezierVicinity=function(e,t,r,n,i,o,a,s,l){var u=Math.min(r,a,i)-l,c=Math.max(r,a,i)+l,h=Math.min(n,s,o)-l,d=Math.max(n,s,o)+l;return!(e<u||e>c||t<h||t>d)},solveQuadratic=function(e,t,r,n){var i=t*t-4*e*(r-=n);if(i<0)return[];var o=Math.sqrt(i),a=2*e;return[(-t+o)/a,(-t-o)/a]},solveCubic=function(e,t,r,n,i){var o,a,s,l,u,c,h,d;return 0===e&&(e=1e-5),s=-27*(n/=e)+(t/=e)*(9*(r/=e)-t*t*2),o=(a=(3*r-t*t)/9)*a*a+(s/=54)*s,i[1]=0,h=t/3,o>0?(u=(u=s+Math.sqrt(o))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(o))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+u+c,h+=(u+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+u)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-h,void(i[4]=i[2]=-(d+h))):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(l/3),i[2]=-h+d*Math.cos((l+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((l+4*Math.PI)/3))))},sqdistToQuadraticBezier=function(e,t,r,n,i,o,a,s){var l=[];solveCubic(1*r*r-4*r*i+2*r*a+4*i*i-4*i*a+a*a+n*n-4*n*o+2*n*s+4*o*o-4*o*s+s*s,9*r*i-3*r*r-3*r*a-6*i*i+3*i*a+9*n*o-3*n*n-3*n*s-6*o*o+3*o*s,3*r*r-6*r*i+r*a-r*e+2*i*i+2*i*e-a*e+3*n*n-6*n*o+n*s-n*t+2*o*o+2*o*t-s*t,1*r*i-r*r+r*e-i*e+n*o-n*n+n*t-o*t,l);for(var u=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&u.push(l[c]);u.push(1),u.push(0);for(var h,d,f,p=-1,g=0;g<u.length;g++)h=Math.pow(1-u[g],2)*r+2*(1-u[g])*u[g]*i+u[g]*u[g]*a,d=Math.pow(1-u[g],2)*n+2*(1-u[g])*u[g]*o+u[g]*u[g]*s,f=Math.pow(h-e,2)+Math.pow(d-t,2),p>=0?f<p&&(p=f):p=f;return p},sqdistToFiniteLine=function(e,t,r,n,i,o){var a=[e-r,t-n],s=[i-r,o-n],l=s[0]*s[0]+s[1]*s[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/l;return c<0?u:h>l?(e-i)*(e-i)+(t-o)*(t-o):u-h},pointInsidePolygonPoints=function(e,t,r){for(var n,i,o,a,s=0,l=0;l<r.length/2;l++)if(n=r[2*l],i=r[2*l+1],l+1<r.length/2?(o=r[2*(l+1)],a=r[2*(l+1)+1]):(o=r[2*(l+1-r.length/2)],a=r[2*(l+1-r.length/2)+1]),n==e&&o==e);else{if(!(n>=e&&e>=o||n<=e&&e<=o))continue;(e-n)/(o-n)*(a-i)+i>t&&s++}return s%2!=0},pointInsidePolygon=function(e,t,r,n,i,o,a,s,l){var u,c=new Array(r.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var h,d=Math.cos(-u),f=Math.sin(-u),p=0;p<c.length/2;p++)c[2*p]=o/2*(r[2*p]*d-r[2*p+1]*f),c[2*p+1]=a/2*(r[2*p+1]*d+r[2*p]*f),c[2*p]+=n,c[2*p+1]+=i;if(l>0){var g=expandPolygon(c,-l);h=joinLines(g)}else h=c;return pointInsidePolygonPoints(e,t,h)},pointInsideRoundPolygon=function(e,t,r,n,i,o,a){for(var s=new Array(r.length),l=o/2,u=a/2,c=getRoundPolygonRadius(o,a),h=c*c,d=0;d<r.length/4;d++){var f,p=void 0;p=0===d?r.length-2:4*d-2,f=4*d+2;var g=n+l*r[4*d],y=i+u*r[4*d+1],v=-r[p]*r[f]-r[p+1]*r[f+1],m=c/Math.tan(Math.acos(v)/2),b=g-m*r[p],$=y-m*r[p+1],_=g+m*r[f],w=y+m*r[f+1];s[4*d]=b,s[4*d+1]=$,s[4*d+2]=_,s[4*d+3]=w;var E=r[p+1],x=-r[p];E*r[f]+x*r[f+1]<0&&(E*=-1,x*=-1);var T=b+E*c,S=$+x*c;if(Math.pow(T-e,2)+Math.pow(S-t,2)<=h)return!0}return pointInsidePolygonPoints(e,t,s)},joinLines=function(e){for(var t,r,n,i,o,a,s,l,u=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],r=e[4*c+1],n=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(o=e[4*(c+1)],a=e[4*(c+1)+1],s=e[4*(c+1)+2],l=e[4*(c+1)+3]):(o=e[0],a=e[1],s=e[2],l=e[3]);var h=finiteLinesIntersect(t,r,n,i,o,a,s,l,!0);u[2*c]=h[0],u[2*c+1]=h[1]}return u},expandPolygon=function(e,t){for(var r,n,i,o,a=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],n=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],o=e[2*(s+1)+1]):(i=e[0],o=e[1]);var l=o-n,u=-(i-r),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;a[4*s]=r+h*t,a[4*s+1]=n+d*t,a[4*s+2]=i+h*t,a[4*s+3]=o+d*t}return a},intersectLineEllipse=function(e,t,r,n,i,o){var a=r-e,s=n-t;a/=i,s/=o;var l=Math.sqrt(a*a+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(r-e)*c+e,(n-t)*c+t]},checkInEllipse=function(e,t,r,n,i,o,a){return e-=i,t-=o,(e/=r/2+a)*e+(t/=n/2+a)*t<=1},intersectLineCircle=function(e,t,r,n,i,o,a){var s=[r-e,n-t],l=[e-i,t-o],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-a*a);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*u),f=(-c-Math.sqrt(h))/(2*u),p=Math.min(d,f),g=Math.max(d,f),y=[];if(p>=0&&p<=1&&y.push(p),g>=0&&g<=1&&y.push(g),0===y.length)return[];var v=y[0]*s[0]+e,m=y[0]*s[1]+t;return y.length>1?y[0]==y[1]?[v,m]:[v,m,y[1]*s[0]+e,y[1]*s[1]+t]:[v,m]},midOfThree=function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t?e:e<=t&&t<=r||r<=t&&t<=e?t:r},finiteLinesIntersect=function(e,t,r,n,i,o,a,s,l){var u=e-i,c=r-e,h=a-i,d=t-o,f=n-t,p=s-o,g=h*d-p*u,y=c*d-f*u,v=p*c-h*f;if(0!==v){var m=g/v,b=y/v;return-.001<=m&&m<=1.001&&-.001<=b&&b<=1.001||l?[e+m*c,t+m*f]:[]}return 0===g||0===y?midOfThree(e,r,a)===a?[a,s]:midOfThree(e,r,i)===i?[i,o]:midOfThree(i,a,r)===r?[r,n]:[]:[]},polygonIntersectLine=function(e,t,r,n,i,o,a,s){var l,u,c,h,d,f,p=[],g=new Array(r.length),y=!0;if(null==o&&(y=!1),y){for(var v=0;v<g.length/2;v++)g[2*v]=r[2*v]*o+n,g[2*v+1]=r[2*v+1]*a+i;if(s>0){var m=expandPolygon(g,-s);u=joinLines(m)}else u=g}else u=r;for(var b=0;b<u.length/2;b++)c=u[2*b],h=u[2*b+1],b<u.length/2-1?(d=u[2*(b+1)],f=u[2*(b+1)+1]):(d=u[0],f=u[1]),0!==(l=finiteLinesIntersect(e,t,n,i,c,h,d,f)).length&&p.push(l[0],l[1]);return p},roundPolygonIntersectLine=function(e,t,r,n,i,o,a,s){for(var l,u=[],c=new Array(r.length),h=o/2,d=a/2,f=getRoundPolygonRadius(o,a),p=0;p<r.length/4;p++){var g,y=void 0;y=0===p?r.length-2:4*p-2,g=4*p+2;var v=n+h*r[4*p],m=i+d*r[4*p+1],b=-r[y]*r[g]-r[y+1]*r[g+1],$=f/Math.tan(Math.acos(b)/2),_=v-$*r[y],w=m-$*r[y+1],E=v+$*r[g],x=m+$*r[g+1];0===p?(c[r.length-2]=_,c[r.length-1]=w):(c[4*p-2]=_,c[4*p-1]=w),c[4*p]=E,c[4*p+1]=x;var T=r[y+1],S=-r[y];T*r[g]+S*r[g+1]<0&&(T*=-1,S*=-1),0!==(l=intersectLineCircle(e,t,n,i,_+T*f,w+S*f,f)).length&&u.push(l[0],l[1])}for(var O=0;O<c.length/4;O++)0!==(l=finiteLinesIntersect(e,t,n,i,c[4*O],c[4*O+1],c[4*O+2],c[4*O+3],!1)).length&&u.push(l[0],l[1]);if(u.length>2){for(var C=[u[0],u[1]],k=Math.pow(C[0]-e,2)+Math.pow(C[1]-t,2),P=1;P<u.length/2;P++){var A=Math.pow(u[2*P]-e,2)+Math.pow(u[2*P+1]-t,2);A<=k&&(C[0]=u[2*P],C[1]=u[2*P+1],k=A)}return C}return u},shortenIntersection=function(e,t,r){var n=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),o=(i-r)/i;return o<0&&(o=1e-5),[t[0]+o*n[0],t[1]+o*n[1]]},generateUnitNgonPointsFitToSquare=function(e,t){var r=generateUnitNgonPoints(e,t);return r=fitPolygonToSquare(r)},fitPolygonToSquare=function(e){for(var t,r,n=e.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<n;l++)t=e[2*l],r=e[2*l+1],i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,r),s=Math.max(s,r);for(var u=2/(a-i),c=2/(s-o),h=0;h<n;h++)t=e[2*h]=e[2*h]*u,r=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,r),s=Math.max(s,r);if(o<-1)for(var d=0;d<n;d++)r=e[2*d+1]=e[2*d+1]+(-1-o);return e},generateUnitNgonPoints=function(e,t){var r=1/e*2*Math.PI,n=e%2==0?Math.PI/2+r/2:Math.PI/2;n+=t;for(var i,o=new Array(2*e),a=0;a<e;a++)i=a*r+n,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)},getRoundPolygonRadius=function(e,t){return Math.min(e/10,t/10,8)},getCutRectangleCornerLength=function(){return 8},bezierPtsToQuadCoeff=function(e,t,r){return[e-2*t+r,2*(t-e),e]},getBarrelCurveConstants=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},pageRankDefaults=defaults({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),elesfn$7={pageRank:function(e){for(var t=pageRankDefaults(e),r=t.dampingFactor,n=t.precision,i=t.iterations,o=t.weight,a=this._private.cy,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,h=c*c,d=u.length,f=new Array(h),p=new Array(c),g=(1-r)/c,y=0;y<c;y++){for(var v=0;v<c;v++){f[y*c+v]=0}p[y]=0}for(var m=0;m<d;m++){var b=u[m],$=b.data("source"),_=b.data("target");if($!==_){var w=l.indexOfId($),E=l.indexOfId(_),x=o(b);f[E*c+w]+=x,p[w]+=x}}for(var T=1/c+g,S=0;S<c;S++)if(0===p[S])for(var O=0;O<c;O++){f[O*c+S]=T}else for(var C=0;C<c;C++){var k=C*c+S;f[k]=f[k]/p[S]+g}for(var P,A=new Array(c),I=new Array(c),D=0;D<c;D++)A[D]=1;for(var N=0;N<i;N++){for(var M=0;M<c;M++)I[M]=0;for(var R=0;R<c;R++)for(var L=0;L<c;L++){var j=R*c+L;I[R]+=f[j]*A[L]}inPlaceSumNormalize(I),P=A,A=I,I=P;for(var F=0,B=0;B<c;B++){var z=P[B]-A[B];F+=z*z}if(F<n)break}return{rank:function(e){return e=a.collection(e)[0],A[l.indexOf(e)]}}}},defaults$1=defaults({root:null,weight:function(e){return 1},directed:!1,alpha:0}),elesfn$8={degreeCentralityNormalized:function(e){e=defaults$1(e);var t=this.cy(),r=this.nodes(),n=r.length;if(e.directed){for(var i={},o={},a=0,s=0,l=0;l<n;l++){var u=r[l],c=u.id();e.root=u;var h=this.degreeCentrality(e);a<h.indegree&&(a=h.indegree),s<h.outdegree&&(s=h.outdegree),i[c]=h.indegree,o[c]=h.outdegree}return{indegree:function(e){return 0==a?0:(string(e)&&(e=t.filter(e)),i[e.id()]/a)},outdegree:function(e){return 0===s?0:(string(e)&&(e=t.filter(e)),o[e.id()]/s)}}}for(var d={},f=0,p=0;p<n;p++){var g=r[p];e.root=g;var y=this.degreeCentrality(e);f<y.degree&&(f=y.degree),d[g.id()]=y.degree}return{degree:function(e){return 0===f?0:(string(e)&&(e=t.filter(e)),d[e.id()]/f)}}},degreeCentrality:function(e){e=defaults$1(e);var t=this.cy(),r=this,n=e,i=n.root,o=n.weight,a=n.directed,s=n.alpha;if(i=t.collection(i)[0],a){for(var l=i.connectedEdges(),u=l.filter((function(e){return e.target().same(i)&&r.has(e)})),c=l.filter((function(e){return e.source().same(i)&&r.has(e)})),h=u.length,d=c.length,f=0,p=0,g=0;g<u.length;g++)f+=o(u[g]);for(var y=0;y<c.length;y++)p+=o(c[y]);return{indegree:Math.pow(h,1-s)*Math.pow(f,s),outdegree:Math.pow(d,1-s)*Math.pow(p,s)}}for(var v=i.connectedEdges().intersection(r),m=v.length,b=0,$=0;$<v.length;$++)b+=o(v[$]);return{degree:Math.pow(m,1-s)*Math.pow(b,s)}}};elesfn$8.dc=elesfn$8.degreeCentrality,elesfn$8.dcn=elesfn$8.degreeCentralityNormalised=elesfn$8.degreeCentralityNormalized;var defaults$2=defaults({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),elesfn$9={closenessCentralityNormalized:function(e){for(var t=defaults$2(e),r=t.harmonic,n=t.weight,i=t.directed,o=this.cy(),a={},s=0,l=this.nodes(),u=this.floydWarshall({weight:n,directed:i}),c=0;c<l.length;c++){for(var h=0,d=l[c],f=0;f<l.length;f++)if(c!==f){var p=u.distance(d,l[f]);h+=r?1/p:p}r||(h=1/h),s<h&&(s=h),a[d.id()]=h}return{closeness:function(e){return 0==s?0:(e=string(e)?o.filter(e)[0].id():e.id(),a[e]/s)}}},closenessCentrality:function(e){var t=defaults$2(e),r=t.root,n=t.weight,i=t.directed,o=t.harmonic;r=this.filter(r)[0];for(var a=this.dijkstra({root:r,weight:n,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(r)){var h=a.distanceTo(c);s+=o?1/h:h}}return o?s:1/s}};elesfn$9.cc=elesfn$9.closenessCentrality,elesfn$9.ccn=elesfn$9.closenessCentralityNormalised=elesfn$9.closenessCentralityNormalized;var defaults$3=defaults({weight:null,directed:!1}),elesfn$a={betweennessCentrality:function(e){for(var t=defaults$3(e),r=t.directed,n=t.weight,i=null!=n,o=this.cy(),a=this.nodes(),s={},l={},u=0,c=function(e,t){l[e]=t,t>u&&(u=t)},h=function(e){return l[e]},d=0;d<a.length;d++){var f=a[d],p=f.id();s[p]=r?f.outgoers().nodes():f.openNeighborhood().nodes(),c(p,0)}for(var g=function(e){for(var t=a[e].id(),r=[],l={},u={},d={},f=new Heap((function(e,t){return d[e]-d[t]})),p=0;p<a.length;p++){var g=a[p].id();l[g]=[],u[g]=0,d[g]=1/0}for(u[t]=1,d[t]=0,f.push(t);!f.empty();){var y=f.pop();if(r.push(y),i)for(var v=0;v<s[y].length;v++){var m=s[y][v],b=o.getElementById(y),$=void 0;$=b.edgesTo(m).length>0?b.edgesTo(m)[0]:m.edgesTo(b)[0];var _=n($);m=m.id(),d[m]>d[y]+_&&(d[m]=d[y]+_,f.nodes.indexOf(m)<0?f.push(m):f.updateItem(m),u[m]=0,l[m]=[]),d[m]==d[y]+_&&(u[m]=u[m]+u[y],l[m].push(y))}else for(var w=0;w<s[y].length;w++){var E=s[y][w].id();d[E]==1/0&&(f.push(E),d[E]=d[y]+1),d[E]==d[y]+1&&(u[E]=u[E]+u[y],l[E].push(y))}}for(var x={},T=0;T<a.length;T++)x[a[T].id()]=0;for(;r.length>0;)for(var S=r.pop(),O=0;O<l[S].length;O++){var C=l[S][O];x[C]=x[C]+u[C]/u[S]*(1+x[S]),S!=a[e].id()&&c(S,h(S)+x[S])}},y=0;y<a.length;y++)g(y);var v={betweenness:function(e){var t=o.collection(e).id();return h(t)},betweennessNormalized:function(e){if(0==u)return 0;var t=o.collection(e).id();return h(t)/u}};return v.betweennessNormalised=v.betweennessNormalized,v}};elesfn$a.bc=elesfn$a.betweennessCentrality;var defaults$4=defaults({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),setOptions=function(e){return defaults$4(e)},getSimilarity=function(e,t){for(var r=0,n=0;n<t.length;n++)r+=t[n](e);return r},addLoops=function(e,t,r){for(var n=0;n<t;n++)e[n*t+n]=r},normalize=function(e,t){for(var r,n=0;n<t;n++){r=0;for(var i=0;i<t;i++)r+=e[i*t+n];for(var o=0;o<t;o++)e[o*t+n]=e[o*t+n]/r}},mmult=function(e,t,r){for(var n=new Array(r*r),i=0;i<r;i++){for(var o=0;o<r;o++)n[i*r+o]=0;for(var a=0;a<r;a++)for(var s=0;s<r;s++)n[i*r+s]+=e[i*r+a]*t[a*r+s]}return n},expand=function(e,t,r){for(var n=e.slice(0),i=1;i<r;i++)e=mmult(e,n,t);return e},inflate=function(e,t,r){for(var n=new Array(t*t),i=0;i<t*t;i++)n[i]=Math.pow(e[i],r);return normalize(n,t),n},hasConverged=function(e,t,r,n){for(var i=0;i<r;i++){if(Math.round(e[i]*Math.pow(10,n))/Math.pow(10,n)!==Math.round(t[i]*Math.pow(10,n))/Math.pow(10,n))return!1}return!0},assign=function(e,t,r,n){for(var i=[],o=0;o<t;o++){for(var a=[],s=0;s<t;s++)Math.round(1e3*e[o*t+s])/1e3>0&&a.push(r[s]);0!==a.length&&i.push(n.collection(a))}return i},isDuplicate=function(e,t){for(var r=0;r<e.length;r++)if(!t[r]||e[r].id()!==t[r].id())return!1;return!0},removeDuplicates=function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e.length;r++)t!=r&&isDuplicate(e[t],e[r])&&e.splice(r,1);return e},markovClustering=function(e){for(var t=this.nodes(),r=this.edges(),n=this.cy(),i=setOptions(e),o={},a=0;a<t.length;a++)o[t[a].id()]=a;for(var s,l=t.length,u=l*l,c=new Array(u),h=0;h<u;h++)c[h]=0;for(var d=0;d<r.length;d++){var f=r[d],p=o[f.source().id()],g=o[f.target().id()],y=getSimilarity(f,i.attributes);c[p*l+g]+=y,c[g*l+p]+=y}addLoops(c,l,i.multFactor),normalize(c,l);for(var v=!0,m=0;v&&m<i.maxIterations;)v=!1,s=expand(c,l,i.expandFactor),c=inflate(s,l,i.inflateFactor),hasConverged(c,s,u,4)||(v=!0),m++;var b=assign(c,l,t,n);return b=removeDuplicates(b)},markovClustering$1={markovClustering:markovClustering,mcl:markovClustering},identity$1=function(e){return e},absDiff=function(e,t){return Math.abs(t-e)},addAbsDiff=function(e,t,r){return e+absDiff(t,r)},addSquaredDiff=function(e,t,r){return e+Math.pow(r-t,2)},sqrt=function(e){return Math.sqrt(e)},maxAbsDiff=function(e,t,r){return Math.max(e,absDiff(t,r))},getDistance=function(e,t,r,n,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:identity$1,a=n,s=0;s<e;s++)a=i(a,t(s),r(s));return o(a)},distances={euclidean:function(e,t,r){return e>=2?getDistance(e,t,r,0,addSquaredDiff,sqrt):getDistance(e,t,r,0,addAbsDiff)},squaredEuclidean:function(e,t,r){return getDistance(e,t,r,0,addSquaredDiff)},manhattan:function(e,t,r){return getDistance(e,t,r,0,addAbsDiff)},max:function(e,t,r){return getDistance(e,t,r,-1/0,maxAbsDiff)}};function clusteringDistance(e,t,r,n,i,o){var a;return a=fn(e)?e:distances[e]||distances.euclidean,0===t&&fn(e)?a(i,o):a(t,r,n,i,o)}distances["squared-euclidean"]=distances.squaredEuclidean,distances.squaredeuclidean=distances.squaredEuclidean;var defaults$5=defaults({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$1=function(e){return defaults$5(e)},getDist=function(e,t,r,n,i){var o="kMedoids"!==i?function(e){return r[e]}:function(e){return n[e](r)},a=r,s=t;return clusteringDistance(e,n.length,o,(function(e){return n[e](t)}),a,s)},randomCentroids=function(e,t,r){for(var n=r.length,i=new Array(n),o=new Array(n),a=new Array(t),s=null,l=0;l<n;l++)i[l]=e.min(r[l]).value,o[l]=e.max(r[l]).value;for(var u=0;u<t;u++){s=[];for(var c=0;c<n;c++)s[c]=Math.random()*(o[c]-i[c])+i[c];a[u]=s}return a},classify=function(e,t,r,n,i){for(var o=1/0,a=0,s=0;s<t.length;s++){var l=getDist(r,e,t[s],n,i);l<o&&(o=l,a=s)}return a},buildCluster=function(e,t,r){for(var n=[],i=null,o=0;o<t.length;o++)r[(i=t[o]).id()]===e&&n.push(i);return n},haveValuesConverged=function(e,t,r){return Math.abs(t-e)<=r},haveMatricesConverged=function(e,t,r){for(var n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++){if(Math.abs(e[n][i]-t[n][i])>r)return!1}return!0},seenBefore=function(e,t,r){for(var n=0;n<r;n++)if(e===t[n])return!0;return!1},randomMedoids=function(e,t){var r=new Array(t);if(e.length<50)for(var n=0;n<t;n++){for(var i=e[Math.floor(Math.random()*e.length)];seenBefore(i,r,n);)i=e[Math.floor(Math.random()*e.length)];r[n]=i}else for(var o=0;o<t;o++)r[o]=e[Math.floor(Math.random()*e.length)];return r},findCost=function(e,t,r){for(var n=0,i=0;i<t.length;i++)n+=getDist("manhattan",t[i],e,r,"kMedoids");return n},kMeans=function(e){var t,r=this.cy(),n=this.nodes(),i=null,o=setOptions$1(e),a=new Array(o.k),s={};t=o.testMode?"number"==typeof o.testCentroids?randomCentroids(n,o.k,o.attributes):"object"===_typeof(o.testCentroids)?o.testCentroids:randomCentroids(n,o.k,o.attributes):randomCentroids(n,o.k,o.attributes);for(var l=!0,u=0;l&&u<o.maxIterations;){for(var c=0;c<n.length;c++)s[(i=n[c]).id()]=classify(i,t,o.distance,o.attributes,"kMeans");l=!1;for(var h=0;h<o.k;h++){var d=buildCluster(h,n,s);if(0!==d.length){for(var f=o.attributes.length,p=t[h],g=new Array(f),y=new Array(f),v=0;v<f;v++){y[v]=0;for(var m=0;m<d.length;m++)i=d[m],y[v]+=o.attributes[v](i);g[v]=y[v]/d.length,haveValuesConverged(g[v],p[v],o.sensitivityThreshold)||(l=!0)}t[h]=g,a[h]=r.collection(d)}}u++}return a},kMedoids=function(e){var t,r,n=this.cy(),i=this.nodes(),o=null,a=setOptions$1(e),s=new Array(a.k),l={},u=new Array(a.k);a.testMode?"number"==typeof a.testCentroids||(t="object"===_typeof(a.testCentroids)?a.testCentroids:randomMedoids(i,a.k)):t=randomMedoids(i,a.k);for(var c=!0,h=0;c&&h<a.maxIterations;){for(var d=0;d<i.length;d++)l[(o=i[d]).id()]=classify(o,t,a.distance,a.attributes,"kMedoids");c=!1;for(var f=0;f<t.length;f++){var p=buildCluster(f,i,l);if(0!==p.length){u[f]=findCost(t[f],p,a.attributes);for(var g=0;g<p.length;g++)(r=findCost(p[g],p,a.attributes))<u[f]&&(u[f]=r,t[f]=p[g],c=!0);s[f]=n.collection(p)}}h++}return s},updateCentroids=function(e,t,r,n,i){for(var o,a,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)n[s][l]=Math.pow(r[s][l],i.m);for(var u=0;u<e.length;u++)for(var c=0;c<i.attributes.length;c++){o=0,a=0;for(var h=0;h<t.length;h++)o+=n[h][u]*i.attributes[c](t[h]),a+=n[h][u];e[u][c]=o/a}},updateMembership=function(e,t,r,n,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var a,s,l,u=2/(i.m-1),c=0;c<r.length;c++)for(var h=0;h<n.length;h++){a=0;for(var d=0;d<r.length;d++)s=getDist(i.distance,n[h],r[c],i.attributes,"cmeans"),l=getDist(i.distance,n[h],r[d],i.attributes,"cmeans"),a+=Math.pow(s/l,u);e[h][c]=1/a}},assign$1=function(e,t,r,n){for(var i,o,a=new Array(r.k),s=0;s<a.length;s++)a[s]=[];for(var l=0;l<t.length;l++){i=-1/0,o=-1;for(var u=0;u<t[0].length;u++)t[l][u]>i&&(i=t[l][u],o=u);a[o].push(e[l])}for(var c=0;c<a.length;c++)a[c]=n.collection(a[c]);return a},fuzzyCMeans=function(e){var t,r,n,i,o=this.cy(),a=this.nodes(),s=setOptions$1(e);n=new Array(a.length);for(var l=0;l<a.length;l++)n[l]=new Array(s.k);r=new Array(a.length);for(var u=0;u<a.length;u++)r[u]=new Array(s.k);for(var c=0;c<a.length;c++){for(var h=0,d=0;d<s.k;d++)r[c][d]=Math.random(),h+=r[c][d];for(var f=0;f<s.k;f++)r[c][f]=r[c][f]/h}t=new Array(s.k);for(var p=0;p<s.k;p++)t[p]=new Array(s.attributes.length);i=new Array(a.length);for(var g=0;g<a.length;g++)i[g]=new Array(s.k);for(var y=!0,v=0;y&&v<s.maxIterations;)y=!1,updateCentroids(t,a,r,i,s),updateMembership(r,n,t,a,s),haveMatricesConverged(r,n,s.sensitivityThreshold)||(y=!0),v++;return{clusters:assign$1(a,r,s,o),degreeOfMembership:r}},kClustering={kMeans:kMeans,kMedoids:kMedoids,fuzzyCMeans:fuzzyCMeans,fcm:fuzzyCMeans},defaults$6=defaults({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$2=function(e){var t=defaults$6(e),r=linkageAliases[t.linkage];return null!=r&&(t.linkage=r),t},mergeClosest=function(e,t,r,n,i){for(var o,a=0,s=1/0,l=i.attributes,u=function(e,t){return clusteringDistance(i.distance,l.length,(function(t){return l[t](e)}),(function(e){return l[e](t)}),e,t)},c=0;c<e.length;c++){var h=e[c].key,d=r[h][n[h]];d<s&&(a=h,s=d)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var f,p=t[a],g=t[n[a]];f="dendrogram"===i.mode?{left:p,right:g,key:p.key}:{value:p.value.concat(g.value),key:p.key},e[p.index]=f,e.splice(g.index,1),t[p.key]=f;for(var y=0;y<e.length;y++){var v=e[y];p.key===v.key?o=1/0:"min"===i.linkage?(o=r[p.key][v.key],r[p.key][v.key]>r[g.key][v.key]&&(o=r[g.key][v.key])):"max"===i.linkage?(o=r[p.key][v.key],r[p.key][v.key]<r[g.key][v.key]&&(o=r[g.key][v.key])):o="mean"===i.linkage?(r[p.key][v.key]*p.size+r[g.key][v.key]*g.size)/(p.size+g.size):"dendrogram"===i.mode?u(v.value,p.value):u(v.value[0],p.value[0]),r[p.key][v.key]=r[v.key][p.key]=o}for(var m=0;m<e.length;m++){var b=e[m].key;if(n[b]===p.key||n[b]===g.key){for(var $=b,_=0;_<e.length;_++){var w=e[_].key;r[b][w]<r[b][$]&&($=w)}n[b]=$}e[m].index=m}return p.key=g.key=p.index=g.index=null,!0},getAllChildren=function e(t,r,n){t&&(t.value?r.push(t.value):(t.left&&e(t.left,r),t.right&&e(t.right,r)))},buildDendrogram=function e(t,r){if(!t)return"";if(t.left&&t.right){var n=e(t.left,r),i=e(t.right,r),o=r.add({group:"nodes",data:{id:n+","+i}});return r.add({group:"edges",data:{source:n,target:o.id()}}),r.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}return t.value?t.value.id():void 0},buildClustersFromTree=function e(t,r,n){if(!t)return[];var i=[],o=[],a=[];return 0===r?(t.left&&getAllChildren(t.left,i),t.right&&getAllChildren(t.right,o),a=i.concat(o),[n.collection(a)]):1===r?t.value?[n.collection(t.value)]:(t.left&&getAllChildren(t.left,i),t.right&&getAllChildren(t.right,o),[n.collection(i),n.collection(o)]):t.value?[n.collection(t.value)]:(t.left&&(i=e(t.left,r-1,n)),t.right&&(o=e(t.right,r-1,n)),i.concat(o))},hierarchicalClustering=function(e){for(var t=this.cy(),r=this.nodes(),n=setOptions$2(e),i=n.attributes,o=function(e,t){return clusteringDistance(n.distance,i.length,(function(t){return i[t](e)}),(function(e){return i[e](t)}),e,t)},a=[],s=[],l=[],u=[],c=0;c<r.length;c++){var h={value:"dendrogram"===n.mode?r[c]:[r[c]],key:c,index:c};a[c]=h,u[c]=h,s[c]=[],l[c]=0}for(var d=0;d<a.length;d++)for(var f=0;f<=d;f++){var p=void 0;p="dendrogram"===n.mode?d===f?1/0:o(a[d].value,a[f].value):d===f?1/0:o(a[d].value[0],a[f].value[0]),s[d][f]=p,s[f][d]=p,p<s[d][l[d]]&&(l[d]=f)}for(var g,y=mergeClosest(a,u,s,l,n);y;)y=mergeClosest(a,u,s,l,n);return"dendrogram"===n.mode?(g=buildClustersFromTree(a[0],n.dendrogramDepth,t),n.addDendrogram&&buildDendrogram(a[0],t)):(g=new Array(a.length),a.forEach((function(e,r){e.key=e.index=null,g[r]=t.collection(e.value)}))),g},hierarchicalClustering$1={hierarchicalClustering:hierarchicalClustering,hca:hierarchicalClustering},defaults$7=defaults({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions$3=function(e){var t=e.damping,r=e.preference;.5<=t&&t<1||error("Damping must range on [0.5, 1).  Got: ".concat(t));var n=["median","mean","min","max"];return n.some((function(e){return e===r}))||number(r)||error("Preference must be one of [".concat(n.map((function(e){return"'".concat(e,"'")})).join(", "),"] or a number.  Got: ").concat(r)),defaults$7(e)},getSimilarity$1=function(e,t,r,n){var i=function(e,t){return n[t](e)};return-clusteringDistance(e,n.length,(function(e){return i(t,e)}),(function(e){return i(r,e)}),t,r)},getPreference=function(e,t){return"median"===t?median(e):"mean"===t?mean(e):"min"===t?min(e):"max"===t?max(e):t},findExemplars=function(e,t,r){for(var n=[],i=0;i<e;i++)t[i*e+i]+r[i*e+i]>0&&n.push(i);return n},assignClusters=function(e,t,r){for(var n=[],i=0;i<e;i++){for(var o=-1,a=-1/0,s=0;s<r.length;s++){var l=r[s];t[i*e+l]>a&&(o=l,a=t[i*e+l])}o>0&&n.push(o)}for(var u=0;u<r.length;u++)n[r[u]]=r[u];return n},assign$2=function(e,t,r){for(var n=assignClusters(e,t,r),i=0;i<r.length;i++){for(var o=[],a=0;a<n.length;a++)n[a]===r[i]&&o.push(a);for(var s=-1,l=-1/0,u=0;u<o.length;u++){for(var c=0,h=0;h<o.length;h++)c+=t[o[h]*e+o[u]];c>l&&(s=u,l=c)}r[i]=o[s]}return n=assignClusters(e,t,r)},affinityPropagation=function(e){for(var t,r,n,i,o,a,s=this.cy(),l=this.nodes(),u=setOptions$3(e),c={},h=0;h<l.length;h++)c[l[h].id()]=h;r=(t=l.length)*t,n=new Array(r);for(var d=0;d<r;d++)n[d]=-1/0;for(var f=0;f<t;f++)for(var p=0;p<t;p++)f!==p&&(n[f*t+p]=getSimilarity$1(u.distance,l[f],l[p],u.attributes));i=getPreference(n,u.preference);for(var g=0;g<t;g++)n[g*t+g]=i;o=new Array(r);for(var y=0;y<r;y++)o[y]=0;a=new Array(r);for(var v=0;v<r;v++)a[v]=0;for(var m=new Array(t),b=new Array(t),$=new Array(t),_=0;_<t;_++)m[_]=0,b[_]=0,$[_]=0;for(var w,E=new Array(t*u.minIterations),x=0;x<E.length;x++)E[x]=0;for(w=0;w<u.maxIterations;w++){for(var T=0;T<t;T++){for(var S=-1/0,O=-1/0,C=-1,k=0,P=0;P<t;P++)m[P]=o[T*t+P],(k=a[T*t+P]+n[T*t+P])>=S?(O=S,S=k,C=P):k>O&&(O=k);for(var A=0;A<t;A++)o[T*t+A]=(1-u.damping)*(n[T*t+A]-S)+u.damping*m[A];o[T*t+C]=(1-u.damping)*(n[T*t+C]-O)+u.damping*m[C]}for(var I=0;I<t;I++){for(var D=0,N=0;N<t;N++)m[N]=a[N*t+I],b[N]=Math.max(0,o[N*t+I]),D+=b[N];D-=b[I],b[I]=o[I*t+I],D+=b[I];for(var M=0;M<t;M++)a[M*t+I]=(1-u.damping)*Math.min(0,D-b[M])+u.damping*m[M];a[I*t+I]=(1-u.damping)*(D-b[I])+u.damping*m[I]}for(var R=0,L=0;L<t;L++){var j=a[L*t+L]+o[L*t+L]>0?1:0;E[w%u.minIterations*t+L]=j,R+=j}if(R>0&&(w>=u.minIterations-1||w==u.maxIterations-1)){for(var F=0,B=0;B<t;B++){$[B]=0;for(var z=0;z<u.minIterations;z++)$[B]+=E[z*t+B];0!==$[B]&&$[B]!==u.minIterations||F++}if(F===t)break}}for(var G=findExemplars(t,o,a),U=assign$2(t,n,G),H={},V=0;V<G.length;V++)H[G[V]]=[];for(var Y=0;Y<l.length;Y++){var W=U[c[l[Y].id()]];null!=W&&H[W].push(l[Y])}for(var q=new Array(G.length),X=0;X<G.length;X++)q[X]=s.collection(H[G[X]]);return q},affinityPropagation$1={affinityPropagation:affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults({root:void 0,directed:!1}),elesfn$b={hierholzer:function(e){if(!plainObject(e)){var t=arguments;e={root:t[0],directed:t[1]}}var r,n,i,o=hierholzerDefaults(e),a=o.root,s=o.directed,l=this,u=!1;a&&(i=string(a)?this.filter(a)[0].id():a[0].id());var c={},h={};s?l.forEach((function(e){var t=e.id();if(e.isNode()){var i=e.indegree(!0),o=e.outdegree(!0),a=i-o,s=o-i;1==a?r?u=!0:r=t:1==s?n?u=!0:n=t:(s>1||a>1)&&(u=!0),c[t]=[],e.outgoers().forEach((function(e){e.isEdge()&&c[t].push(e.id())}))}else h[t]=[void 0,e.target().id()]})):l.forEach((function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(r?n?u=!0:n=t:r=t),c[t]=[],e.connectedEdges().forEach((function(e){return c[t].push(e.id())}))):h[t]=[e.source().id(),e.target().id()]}));var d={found:!1,trail:void 0};if(u)return d;if(n&&r)if(s){if(i&&n!=i)return d;i=n}else{if(i&&n!=i&&r!=i)return d;i||(i=n)}else i||(i=l[0].id());var f=function(e){for(var t,r,n,i=e,o=[e];c[i].length;)t=c[i].shift(),r=h[t][0],i!=(n=h[t][1])?(c[n]=c[n].filter((function(e){return e!=t})),i=n):s||i==r||(c[r]=c[r].filter((function(e){return e!=t})),i=r),o.unshift(t),o.unshift(i);return o},p=[],g=[];for(g=f(i);1!=g.length;)0==c[g[0]].length?(p.unshift(l.getElementById(g.shift())),p.unshift(l.getElementById(g.shift()))):g=f(g.shift()).concat(g);for(var y in p.unshift(l.getElementById(g.shift())),c)if(c[y].length)return d;return d.found=!0,d.trail=this.spawn(p),d}},hopcroftTarjanBiconnected=function(){var e=this,t={},r=0,n=0,i=[],o=[],a={},s=function s(l,u,c){l===c&&(n+=1),t[u]={id:r,low:r++,cutVertex:!1};var h,d,f,p,g=e.getElementById(u).connectedEdges().intersection(e);0===g.size()?i.push(e.spawn(e.getElementById(u))):g.forEach((function(r){h=r.source().id(),d=r.target().id(),(f=h===u?d:h)!==c&&(p=r.id(),a[p]||(a[p]=!0,o.push({x:u,y:f,edge:r})),f in t?t[u].low=Math.min(t[u].low,t[f].id):(s(l,f,u),t[u].low=Math.min(t[u].low,t[f].low),t[u].id<=t[f].low&&(t[u].cutVertex=!0,function(r,n){for(var a=o.length-1,s=[],l=e.spawn();o[a].x!=r||o[a].y!=n;)s.push(o.pop().edge),a--;s.push(o.pop().edge),s.forEach((function(r){var n=r.connectedNodes().intersection(e);l.merge(r),n.forEach((function(r){var n=r.id(),i=r.connectedEdges().intersection(e);l.merge(r),t[n].cutVertex?l.merge(i.filter((function(e){return e.isLoop()}))):l.merge(i)}))})),i.push(l)}(u,f))))}))};e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||(n=0,s(r,r),t[r].cutVertex=n>1)}}));var l=Object.keys(t).filter((function(e){return t[e].cutVertex})).map((function(t){return e.getElementById(t)}));return{cut:e.spawn(l),components:i}},hopcroftTarjanBiconnected$1={hopcroftTarjanBiconnected:hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},tarjanStronglyConnected=function(){var e=this,t={},r=0,n=[],i=[],o=e.spawn(e);return e.forEach((function(a){if(a.isNode()){var s=a.id();s in t||function a(s){if(i.push(s),t[s]={index:r,low:r++,explored:!1},e.getElementById(s).connectedEdges().intersection(e).forEach((function(e){var r=e.target().id();r!==s&&(r in t||a(r),t[r].explored||(t[s].low=Math.min(t[s].low,t[r].low)))})),t[s].index===t[s].low){for(var l=e.spawn();;){var u=i.pop();if(l.merge(e.getElementById(u)),t[u].low=t[s].index,t[u].explored=!0,u===s)break}var c=l.edgesWith(l),h=l.merge(c);n.push(h),o=o.difference(h)}}(s)}})),{cut:o,components:n}},tarjanStronglyConnected$1={tarjanStronglyConnected:tarjanStronglyConnected,tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected},elesfn$c={};[elesfn,elesfn$1,elesfn$2,elesfn$3,elesfn$4,elesfn$5,elesfn$6,elesfn$7,elesfn$8,elesfn$9,elesfn$a,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,elesfn$b,hopcroftTarjanBiconnected$1,tarjanStronglyConnected$1].forEach((function(e){extend(elesfn$c,e)}));
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/
var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,api=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};api.prototype={fulfill:function(e){return deliver(this,STATE_FULFILLED,"fulfillValue",e)},reject:function(e){return deliver(this,STATE_REJECTED,"rejectReason",e)},then:function(e,t){var r=new api;return this.onFulfilled.push(resolver(e,r,"fulfill")),this.onRejected.push(resolver(t,r,"reject")),execute(this),r.proxy}};var deliver=function(e,t,r,n){return e.state===STATE_PENDING&&(e.state=t,e[r]=n,execute(e)),e},execute=function(e){e.state===STATE_FULFILLED?execute_handlers(e,"onFulfilled",e.fulfillValue):e.state===STATE_REJECTED&&execute_handlers(e,"onRejected",e.rejectReason)},execute_handlers=function(e,t,r){if(0!==e[t].length){var n=e[t];e[t]=[];var i=function(){for(var e=0;e<n.length;e++)n[e](r)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},resolver=function(e,t,r){return function(n){if("function"!=typeof e)t[r].call(t,n);else{var i;try{i=e(n)}catch(e){return void t.reject(e)}resolve(t,i)}}},resolve=function e(t,r){if(t!==r&&t.proxy!==r){var n;if("object"===_typeof(r)&&null!==r||"function"==typeof r)try{n=r.then}catch(e){return void t.reject(e)}if("function"!=typeof n)t.fulfill(r);else{var i=!1;try{n.call(r,(function(n){i||(i=!0,n===r?t.reject(new TypeError("circular thenable chain")):e(t,n))}),(function(e){i||(i=!0,t.reject(e))}))}catch(e){i||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};api.all=function(e){return new api((function(t,r){for(var n=new Array(e.length),i=0,o=function(r,o){n[r]=o,++i===e.length&&t(n)},a=0;a<e.length;a++)!function(t){var n=e[t];null!=n&&null!=n.then?n.then((function(e){o(t,e)}),(function(e){r(e)})):o(t,n)}(a)}))},api.resolve=function(e){return new api((function(t,r){t(e)}))},api.reject=function(e){return new api((function(t,r){r(e)}))};var Promise$1="undefined"!=typeof Promise?Promise:api,Animation=function(e,t,r){var n=core(e),i=!n,o=this._private=extend({duration:1e3},t,r);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&fn(o.complete)&&o.completes.push(o.complete),i){var a=e.position();o.startPosition=o.startPosition||{x:a.x,y:a.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(n){var s=e.pan();o.startPan={x:s.x,y:s.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),elementOrCollection(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,r=t.playing;return void 0===e?t.progress:(r&&this.pause(),t.progress=e,t.started=!1,r&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(t,r){var n=e[t];null!=n&&(e[t]=e[r],e[r]=n)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var n=0;n<e.style.length;n++){var i=e.style[n],o=i.name,a=e.startStyle[o];e.startStyle[o]=i,e.style[n]=a}return t&&this.play(),this},promise:function(e){var t,r=this._private;switch(e){case"frame":t=r.frames;break;default:case"complete":case"completed":t=r.completes}return new Promise$1((function(e,r){t.push((function(){e()}))}))}}),anifn.complete=anifn.completed,anifn.run=anifn.play,anifn.running=anifn.playing;var define={animated:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var t=e[0];return t?t._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var t=0;t<e.length;t++){e[t]._private.animation.queue=[]}return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var r=void 0!==this.length,n=r?this:[this],i=this._private.cy||this,o=!r,a=!o;if(!i.styleEnabled())return this;var s=i.style();if(e=extend({},e,t),0===Object.keys(e).length)return new Animation(n[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(a&&(e.style=s.getPropsList(e.style||e.css),e.css=void 0),a&&null!=e.renderedPosition){var l=e.renderedPosition,u=i.pan(),c=i.zoom();e.position=renderedToModelPosition(l,c,u)}if(o&&null!=e.panBy){var h=e.panBy,d=i.pan();e.pan={x:d.x+h.x,y:d.y+h.y}}var f=e.center||e.centre;if(o&&null!=f){var p=i.getCenterPan(f.eles,e.zoom);null!=p&&(e.pan=p)}if(o&&null!=e.fit){var g=e.fit,y=i.getFitViewport(g.eles||g.boundingBox,g.padding);null!=y&&(e.pan=y.pan,e.zoom=y.zoom)}if(o&&plainObject(e.zoom)){var v=i.getZoomedViewport(e.zoom);null!=v?(v.zoomed&&(e.zoom=v.zoom),v.panned&&(e.pan=v.pan)):e.zoom=null}return new Animation(n[0],e)}},animate:function(){return function(e,t){var r=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=extend({},e,t));for(var n=0;n<r.length;n++){var i=r[n],o=i.animated()&&(void 0===e.queue||e.queue);i.animation(e,o?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var r=void 0!==this.length?this:[this],n=this._private.cy||this;if(!n.styleEnabled())return this;for(var i=0;i<r.length;i++){for(var o=r[i]._private,a=o.animation.current,s=0;s<a.length;s++){var l=a[s]._private;t&&(l.duration=0)}e&&(o.animation.queue=[]),t||(o.animation.current=[])}return n.notify("draw"),this}}},define$1={data:function(e){return e=extend({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,r){var n=e,i=void 0!==this.length,o=i?this:[this],a=i?this[0]:this;if(string(t)){var s;if(n.allowGetting&&void 0===r)return a&&(n.beforeGet(a),s=a._private[n.field][t]),s;if(n.allowSetting&&void 0!==r&&!n.immutableKeys[t]){var l=_defineProperty$1({},t,r);n.beforeSet(this,l);for(var u=0,c=o.length;u<c;u++){var h=o[u];n.canSet(h)&&(h._private[n.field][t]=r)}n.updateStyle&&this.updateStyle(),n.onSet(this),n.settingTriggersEvent&&this[n.triggerFnName](n.settingEvent)}}else if(n.allowSetting&&plainObject(t)){var d,f,p=t,g=Object.keys(p);n.beforeSet(this,p);for(var y=0;y<g.length;y++){if(f=p[d=g[y]],!n.immutableKeys[d])for(var v=0;v<o.length;v++){var m=o[v];n.canSet(m)&&(m._private[n.field][d]=f)}}n.updateStyle&&this.updateStyle(),n.onSet(this),n.settingTriggersEvent&&this[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&fn(t)){var b=t;this.on(n.bindingEvent,b)}else if(n.allowGetting&&void 0===t){var $;return a&&(n.beforeGet(a),$=a._private[n.field]),$}return this}},removeData:function(e){return e=extend({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var r=e,n=void 0!==this.length?this:[this];if(string(t)){for(var i=t.split(/\s+/),o=i.length,a=0;a<o;a++){var s=i[a];if(!emptyString(s))if(!r.immutableKeys[s])for(var l=0,u=n.length;l<u;l++)n[l]._private[r.field][s]=void 0}r.triggerEvent&&this[r.triggerFnName](r.event)}else if(void 0===t){for(var c=0,h=n.length;c<h;c++)for(var d=n[c]._private[r.field],f=Object.keys(d),p=0;p<f.length;p++){var g=f[p];!r.immutableKeys[g]&&(d[g]=void 0)}r.triggerEvent&&this[r.triggerFnName](r.event)}return this}}},define$2={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return new Promise$1((function(e,t){var i=n.concat([function(t){r.off.apply(r,o),e(t)}]),o=i.concat([]);r.on.apply(r,i)}))}}},define$3={};[define,define$1,define$2].forEach((function(e){extend(define$3,e)}));var elesfn$d={animate:define$3.animate(),animation:define$3.animation(),animated:define$3.animated(),clearQueue:define$3.clearQueue(),delay:define$3.delay(),delayAnimation:define$3.delayAnimation(),stop:define$3.stop()},elesfn$e={classes:function(e){if(void 0===e){var t=[];return this[0]._private.classes.forEach((function(e){return t.push(e)})),t}array(e)||(e=(e||"").match(/\S+/g)||[]);for(var r=[],n=new Set$1(e),i=0;i<this.length;i++){for(var o=this[i],a=o._private,s=a.classes,l=!1,u=0;u<e.length;u++){var c=e[u];if(!s.has(c)){l=!0;break}}l||(l=s.size!==e.length),l&&(a.classes=n,r.push(o))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){array(e)||(e=e.match(/\S+/g)||[]);for(var r=void 0===t,n=[],i=0,o=this.length;i<o;i++)for(var a=this[i],s=a._private.classes,l=!1,u=0;u<e.length;u++){var c=e[u],h=s.has(c),d=!1;t||r&&!h?(s.add(c),d=!0):(!t||r&&h)&&(s.delete(c),d=!0),!l&&d&&(n.push(a),l=!0)}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var r=this;if(null==t)t=250;else if(0===t)return r;return r.addClass(e),setTimeout((function(){r.removeClass(e)}),t),r}};elesfn$e.className=elesfn$e.classNames=elesfn$e.classes;var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:number$1,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tokens.variable="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+",tokens.value=tokens.string+"|"+tokens.number,tokens.className=tokens.variable,tokens.id=tokens.variable,function(){var e,t,r;for(e=tokens.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],tokens.comparatorOp+="|@"+t;for(e=tokens.comparatorOp.split("|"),r=0;r<e.length;r++)(t=e[r]).indexOf("!")>=0||"="!==t&&(tokens.comparatorOp+="|\\!"+t)}();var newQuery=function(){return{checks:[]}},Type={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort((function(e,t){return descending(e.selector,t.selector)})),lookup=function(){for(var e,t={},r=0;r<stateSelectors.length;r++)t[(e=stateSelectors[r]).selector]=e.matches;return t}(),stateSelectorMatches=function(e,t){return lookup[e](t)},stateSelectorRegex="("+stateSelectors.map((function(e){return e.selector})).join("|")+")",cleanMetaChars=function(e){return e.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),(function(e,t){return t}))},replaceLastQuery=function(e,t,r){e[e.length-1]=r},exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.GROUP,value:"*"===n?n:n+"s"})}},{name:"state",query:!0,regex:stateSelectorRegex,populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.STATE,value:n})}},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.ID,value:cleanMetaChars(n)})}},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.CLASS,value:cleanMetaChars(n)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function(e,t,r){var n=_slicedToArray(r,1)[0];t.checks.push({type:Type.DATA_EXIST,field:cleanMetaChars(n)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function(e,t,r){var n=_slicedToArray(r,3),i=n[0],o=n[1],a=n[2];a=null!=new RegExp("^"+tokens.string+"$").exec(a)?a.substring(1,a.length-1):parseFloat(a),t.checks.push({type:Type.DATA_COMPARE,field:cleanMetaChars(i),operator:o,value:a})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function(e,t,r){var n=_slicedToArray(r,2),i=n[0],o=n[1];t.checks.push({type:Type.DATA_BOOL,field:cleanMetaChars(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function(e,t,r){var n=_slicedToArray(r,3),i=n[0],o=n[1],a=n[2];t.checks.push({type:Type.META_COMPARE,field:cleanMetaChars(i),operator:o,value:parseFloat(a)})}},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:function(e,t){var r=e.currentSubject,n=e.edgeCount,i=e.compoundCount,o=e[e.length-1];return null!=r&&(o.subject=r,e.currentSubject=null),o.edgeCount=n,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]=newQuery()}},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:function(e,t){if(null==e.currentSubject){var r=newQuery(),n=t,i=newQuery();return r.checks.push({type:Type.DIRECTED_EDGE,source:n,target:i}),replaceLastQuery(e,t,r),e.edgeCount++,i}var o=newQuery(),a=t,s=newQuery();return o.checks.push({type:Type.NODE_SOURCE,source:a,target:s}),replaceLastQuery(e,t,o),e.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var r=newQuery(),n=t,i=newQuery();return r.checks.push({type:Type.UNDIRECTED_EDGE,nodes:[n,i]}),replaceLastQuery(e,t,r),e.edgeCount++,i}var o=newQuery(),a=t,s=newQuery();return o.checks.push({type:Type.NODE_NEIGHBOR,node:a,neighbor:s}),replaceLastQuery(e,t,o),s}},{name:"child",separator:!0,regex:tokens.child,populate:function(e,t){if(null==e.currentSubject){var r=newQuery(),n=newQuery(),i=e[e.length-1];return r.checks.push({type:Type.CHILD,parent:i,child:n}),replaceLastQuery(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var o=newQuery(),a=e[e.length-1],s=newQuery(),l=newQuery(),u=newQuery(),c=newQuery();return o.checks.push({type:Type.COMPOUND_SPLIT,left:a,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:Type.TRUE}],c.checks.push({type:Type.TRUE}),s.checks.push({type:Type.PARENT,parent:c,child:u}),replaceLastQuery(e,a,o),e.currentSubject=l,e.compoundCount++,u}var h=newQuery(),d=newQuery(),f=[{type:Type.PARENT,parent:h,child:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}},{name:"descendant",separator:!0,regex:tokens.descendant,populate:function(e,t){if(null==e.currentSubject){var r=newQuery(),n=newQuery(),i=e[e.length-1];return r.checks.push({type:Type.DESCENDANT,ancestor:i,descendant:n}),replaceLastQuery(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var o=newQuery(),a=e[e.length-1],s=newQuery(),l=newQuery(),u=newQuery(),c=newQuery();return o.checks.push({type:Type.COMPOUND_SPLIT,left:a,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:Type.TRUE}],c.checks.push({type:Type.TRUE}),s.checks.push({type:Type.ANCESTOR,ancestor:c,descendant:u}),replaceLastQuery(e,a,o),e.currentSubject=l,e.compoundCount++,u}var h=newQuery(),d=newQuery(),f=[{type:Type.ANCESTOR,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=f,e.compoundCount++,d}},{name:"subject",modifier:!0,regex:tokens.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return warn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var r=e[e.length-1].checks[0],n=null==r?null:r.type;n===Type.DIRECTED_EDGE?r.type=Type.NODE_TARGET:n===Type.UNDIRECTED_EDGE&&(r.type=Type.NODE_NEIGHBOR,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];exprs.forEach((function(e){return e.regexObj=new RegExp("^"+e.regex)}));var consumeExpr=function(e){for(var t,r,n,i=0;i<exprs.length;i++){var o=exprs[i],a=o.name,s=e.match(o.regexObj);if(null!=s){r=s,t=o,n=a;var l=s[0];e=e.substring(l.length);break}}return{expr:t,match:r,name:n,remaining:e}},consumeWhitespace=function(e){var t=e.match(/^\s+/);if(t){var r=t[0];e=e.substring(r.length)}return e},parse=function(e){var t=this.inputText=e,r=this[0]=newQuery();for(this.length=1,t=consumeWhitespace(t);;){var n=consumeExpr(t);if(null==n.expr)return warn("The selector `"+e+"`is invalid"),!1;var i=n.match.slice(1),o=n.expr.populate(this,r,i);if(!1===o)return!1;if(null!=o&&(r=o),(t=n.remaining).match(/^\s*$/))break}var a=this[this.length-1];null!=this.currentSubject&&(a.subject=this.currentSubject),a.edgeCount=this.edgeCount,a.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var l=this[s];if(l.compoundCount>0&&l.edgeCount>0)return warn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return warn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&warn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString=function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return string(t)?'"'+t+'"':e(t)},r=function(e){return" "+e+" "},n=function(n,o){var a=n.type,s=n.value;switch(a){case Type.GROUP:var l=e(s);return l.substring(0,l.length-1);case Type.DATA_COMPARE:var u=n.field,c=n.operator;return"["+u+r(e(c))+t(s)+"]";case Type.DATA_BOOL:var h=n.operator,d=n.field;return"["+e(h)+d+"]";case Type.DATA_EXIST:return"["+n.field+"]";case Type.META_COMPARE:var f=n.operator;return"[["+n.field+r(e(f))+t(s)+"]]";case Type.STATE:return s;case Type.ID:return"#"+s;case Type.CLASS:return"."+s;case Type.PARENT:case Type.CHILD:return i(n.parent,o)+r(">")+i(n.child,o);case Type.ANCESTOR:case Type.DESCENDANT:return i(n.ancestor,o)+" "+i(n.descendant,o);case Type.COMPOUND_SPLIT:var p=i(n.left,o),g=i(n.subject,o),y=i(n.right,o);return p+(p.length>0?" ":"")+g+y;case Type.TRUE:return""}},i=function(e,t){return e.checks.reduce((function(r,i,o){return r+(t===e&&0===o?"$":"")+n(i,t)}),"")},o="",a=0;a<this.length;a++){var s=this[a];o+=i(s,s.subject),this.length>1&&a<this.length-1&&(o+=", ")}return this.toStringCache=o,o},parse$1={parse:parse,toString:toString},valCmp=function(e,t,r){var n,i,o,a=string(e),s=number(e),l=string(r),u=!1,c=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(a||l||u)&&(i=a||s?""+e:"",o=""+r),u&&(e=i=i.toLowerCase(),r=o=o.toLowerCase()),t){case"*=":n=i.indexOf(o)>=0;break;case"$=":n=i.indexOf(o,i.length-o.length)>=0;break;case"^=":n=0===i.indexOf(o);break;case"=":n=e===r;break;case">":h=!0,n=e>r;break;case">=":h=!0,n=e>=r;break;case"<":h=!0,n=e<r;break;case"<=":h=!0,n=e<=r;break;default:n=!1}return!c||null==e&&h||(n=!n),n},boolCmp=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}},existCmp=function(e){return void 0!==e},data=function(e,t){return e.data(t)},meta=function(e,t){return e[t]()},match=[],matches=function(e,t){return e.checks.every((function(e){return match[e.type](e,t)}))};match[Type.GROUP]=function(e,t){var r=e.value;return"*"===r||r===t.group()},match[Type.STATE]=function(e,t){var r=e.value;return stateSelectorMatches(r,t)},match[Type.ID]=function(e,t){var r=e.value;return t.id()===r},match[Type.CLASS]=function(e,t){var r=e.value;return t.hasClass(r)},match[Type.META_COMPARE]=function(e,t){var r=e.field,n=e.operator,i=e.value;return valCmp(meta(t,r),n,i)},match[Type.DATA_COMPARE]=function(e,t){var r=e.field,n=e.operator,i=e.value;return valCmp(data(t,r),n,i)},match[Type.DATA_BOOL]=function(e,t){var r=e.field,n=e.operator;return boolCmp(data(t,r),n)},match[Type.DATA_EXIST]=function(e,t){var r=e.field;e.operator;return existCmp(data(t,r))},match[Type.UNDIRECTED_EDGE]=function(e,t){var r=e.nodes[0],n=e.nodes[1],i=t.source(),o=t.target();return matches(r,i)&&matches(n,o)||matches(n,i)&&matches(r,o)},match[Type.NODE_NEIGHBOR]=function(e,t){return matches(e.node,t)&&t.neighborhood().some((function(t){return t.isNode()&&matches(e.neighbor,t)}))},match[Type.DIRECTED_EDGE]=function(e,t){return matches(e.source,t.source())&&matches(e.target,t.target())},match[Type.NODE_SOURCE]=function(e,t){return matches(e.source,t)&&t.outgoers().some((function(t){return t.isNode()&&matches(e.target,t)}))},match[Type.NODE_TARGET]=function(e,t){return matches(e.target,t)&&t.incomers().some((function(t){return t.isNode()&&matches(e.source,t)}))},match[Type.CHILD]=function(e,t){return matches(e.child,t)&&matches(e.parent,t.parent())},match[Type.PARENT]=function(e,t){return matches(e.parent,t)&&t.children().some((function(t){return matches(e.child,t)}))},match[Type.DESCENDANT]=function(e,t){return matches(e.descendant,t)&&t.ancestors().some((function(t){return matches(e.ancestor,t)}))},match[Type.ANCESTOR]=function(e,t){return matches(e.ancestor,t)&&t.descendants().some((function(t){return matches(e.descendant,t)}))},match[Type.COMPOUND_SPLIT]=function(e,t){return matches(e.subject,t)&&matches(e.left,t)&&matches(e.right,t)},match[Type.TRUE]=function(){return!0},match[Type.COLLECTION]=function(e,t){return e.value.has(t)},match[Type.FILTER]=function(e,t){return(0,e.value)(t)};var filter=function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===Type.ID)return e.getElementById(t[0].checks[0].value).collection();var r=function(e){for(var r=0;r<t.length;r++){var n=t[r];if(matches(n,e))return!0}return!1};return null==t.text()&&(r=function(){return!0}),e.filter(r)},matches$1=function(e){for(var t=0;t<this.length;t++){var r=this[t];if(matches(r,e))return!0}return!1},matching={matches:matches$1,filter:filter},Selector=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||string(e)&&e.match(/^\s*$/)||(elementOrCollection(e)?this.addQuery({checks:[{type:Type.COLLECTION,value:e.collection()}]}):fn(e)?this.addQuery({checks:[{type:Type.FILTER,value:e}]}):string(e)?this.parse(e)||(this.invalid=!0):error("A selector must be created from a string; found "))},selfn=Selector.prototype;[parse$1,matching].forEach((function(e){return extend(selfn,e)})),selfn.text=function(){return this.inputText},selfn.size=function(){return this.length},selfn.eq=function(e){return this[e]},selfn.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},selfn.addQuery=function(e){this[this.length++]=e},selfn.selector=selfn.toString;var elesfn$f={allAre:function(e){var t=new Selector(e);return this.every((function(e){return t.matches(e)}))},is:function(e){var t=new Selector(e);return this.some((function(e){return t.matches(e)}))},some:function(e,t){for(var r=0;r<this.length;r++){if(t?e.apply(t,[this[r],r,this]):e(this[r],r,this))return!0}return!1},every:function(e,t){for(var r=0;r<this.length;r++){if(!(t?e.apply(t,[this[r],r,this]):e(this[r],r,this)))return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every((function(t){return e.hasElementWithId(t.id())})))},anySame:function(e){return e=this.cy().collection(e),this.some((function(t){return e.hasElementWithId(t.id())}))},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every((function(e){return t.hasElementWithId(e.id())}))},contains:function(e){e=this.cy().collection(e);var t=this;return e.every((function(e){return t.hasElementWithId(e.id())}))}};elesfn$f.allAreNeighbours=elesfn$f.allAreNeighbors,elesfn$f.has=elesfn$f.contains,elesfn$f.equal=elesfn$f.equals=elesfn$f.same;var cache=function(e,t){return function(r,n,i,o){var a,s=r;if(null==s?a="":elementOrCollection(s)&&1===s.length&&(a=s.id()),1===this.length&&a){var l=this[0]._private,u=l.traversalCache=l.traversalCache||{},c=u[t]=u[t]||[],h=hashString(a),d=c[h];return d||(c[h]=e.call(this,r,n,i,o))}return e.call(this,r,n,i,o)}},elesfn$g={parent:function(e){var t=[];if(1===this.length){var r=this[0]._private.parent;if(r)return r}for(var n=0;n<this.length;n++){var i=this[n]._private.parent;i&&t.push(i)}return this.spawn(t,{unique:!0}).filter(e)},parents:function(e){for(var t=[],r=this.parent();r.nonempty();){for(var n=0;n<r.length;n++){var i=r[n];t.push(i)}r=r.parent()}return this.spawn(t,{unique:!0}).filter(e)},commonAncestors:function(e){for(var t,r=0;r<this.length;r++){var n=this[r].parents();t=(t=t||n).intersect(n)}return t.filter(e)},orphans:function(e){return this.stdFilter((function(e){return e.isOrphan()})).filter(e)},nonorphans:function(e){return this.stdFilter((function(e){return e.isChild()})).filter(e)},children:cache((function(e){for(var t=[],r=0;r<this.length;r++)for(var n=this[r]._private.children,i=0;i<n.length;i++)t.push(n[i]);return this.spawn(t,{unique:!0}).filter(e)}),"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(r){for(var n=0;n<r.length;n++){var i=r[n];t.push(i),i.children().nonempty()&&e(i.children())}}(this.children()),this.spawn(t,{unique:!0}).filter(e)}},fn$1,elesfn$h;function forEachCompound(e,t,r,n){for(var i=[],o=new Set$1,a=e.cy().hasCompoundNodes(),s=0;s<e.length;s++){var l=e[s];r?i.push(l):a&&n(i,o,l)}for(;i.length>0;){var u=i.shift();t(u),o.add(u.id()),a&&n(i,o,u)}return e}function addChildren(e,t,r){if(r.isParent())for(var n=r._private.children,i=0;i<n.length;i++){var o=n[i];t.has(o.id())||e.push(o)}}function addParent(e,t,r){if(r.isChild()){var n=r._private.parent;t.has(n.id())||e.push(n)}}function addParentAndChildren(e,t,r){addParent(e,t,r),addChildren(e,t,r)}elesfn$g.forEachDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return forEachCompound(this,e,t,addChildren)},elesfn$g.forEachUp=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return forEachCompound(this,e,t,addParent)},elesfn$g.forEachUpAndDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return forEachCompound(this,e,t,addParentAndChildren)},elesfn$g.ancestors=elesfn$g.parents,fn$1=elesfn$h={data:define$3.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define$3.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define$3.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define$3.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define$3.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define$3.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}},fn$1.attr=fn$1.data,fn$1.removeAttr=fn$1.removeData;var data$1=elesfn$h,elesfn$i={},fn$2,elesfn$j;function defineDegreeFunction(e){return function(t){if(void 0===t&&(t=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var r=0,n=this[0],i=n._private.edges,o=0;o<i.length;o++){var a=i[o];!t&&a.isLoop()||(r+=e(n,a))}return r}}}function defineDegreeBoundsFunction(e,t){return function(r){for(var n,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][e](r);void 0===a||void 0!==n&&!t(a,n)||(n=a)}return n}}extend(elesfn$i,{degree:defineDegreeFunction((function(e,t){return t.source().same(t.target())?2:1})),indegree:defineDegreeFunction((function(e,t){return t.target().same(e)?1:0})),outdegree:defineDegreeFunction((function(e,t){return t.source().same(e)?1:0}))}),extend(elesfn$i,{minDegree:defineDegreeBoundsFunction("degree",(function(e,t){return e<t})),maxDegree:defineDegreeBoundsFunction("degree",(function(e,t){return e>t})),minIndegree:defineDegreeBoundsFunction("indegree",(function(e,t){return e<t})),maxIndegree:defineDegreeBoundsFunction("indegree",(function(e,t){return e>t})),minOutdegree:defineDegreeBoundsFunction("outdegree",(function(e,t){return e<t})),maxOutdegree:defineDegreeBoundsFunction("outdegree",(function(e,t){return e>t}))}),extend(elesfn$i,{totalDegree:function(e){for(var t=0,r=this.nodes(),n=0;n<r.length;n++)t+=r[n].degree(e);return t}});var beforePositionSet=function(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];if(!i.locked()){var o=i._private.position,a={x:null!=t.x?t.x-o.x:0,y:null!=t.y?t.y-o.y:0};!i.isParent()||0===a.x&&0===a.y||i.children().shift(a,r),i.shiftCachedBoundingBox(a)}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){beforePositionSet(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};fn$2=elesfn$j={position:define$3.data(positionDef),silentPosition:define$3.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){beforePositionSet(e,t,!0)}})),positions:function(e,t){if(plainObject(e))t?this.silentPosition(e):this.position(e);else if(fn(e)){var r=e,n=this.cy();n.startBatch();for(var i=0;i<this.length;i++){var o,a=this[i];(o=r(a,i))&&(t?a.silentPosition(o):a.position(o))}n.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,r){var n;if(plainObject(e)?(n={x:number(e.x)?e.x:0,y:number(e.y)?e.y:0},r=t):string(e)&&number(t)&&((n={x:0,y:0})[e]=t),null!=n){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=a.position(),l={x:s.x+n.x,y:s.y+n.y};r?a.silentPosition(l):a.position(l)}i.endBatch()}return this},silentShift:function(e,t){return plainObject(e)?this.shift(e,!0):string(e)&&number(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var r=this[0],n=this.cy(),i=n.zoom(),o=n.pan(),a=plainObject(e)?e:void 0,s=void 0!==a||void 0!==t&&string(e);if(r&&r.isNode()){if(!s){var l=r.position();return a=modelToRenderedPosition(l,i,o),void 0===e?a:a[e]}for(var u=0;u<this.length;u++){var c=this[u];void 0!==t?c.position(e,(t-o[e])/i):void 0!==a&&c.position(renderedToModelPosition(a,i,o))}}else if(!s)return;return this},relativePosition:function(e,t){var r=this[0],n=this.cy(),i=plainObject(e)?e:void 0,o=void 0!==i||void 0!==t&&string(e),a=n.hasCompoundNodes();if(r&&r.isNode()){if(!o){var s=r.position(),l=a?r.parent():null,u=l&&l.length>0,c=u;u&&(l=l[0]);var h=c?l.position():{x:0,y:0};return i={x:s.x-h.x,y:s.y-h.y},void 0===e?i:i[e]}for(var d=0;d<this.length;d++){var f=this[d],p=a?f.parent():null,g=p&&p.length>0,y=g;g&&(p=p[0]);var v=y?p.position():{x:0,y:0};void 0!==t?f.position(e,t+v[e]):void 0!==i&&f.position({x:i.x+v.x,y:i.y+v.y})}}else if(!o)return;return this}},fn$2.modelPosition=fn$2.point=fn$2.position,fn$2.modelPositions=fn$2.points=fn$2.positions,fn$2.renderedPoint=fn$2.renderedPosition,fn$2.relativePoint=fn$2.relativePosition;var position=elesfn$j,fn$3,elesfn$k;fn$3=elesfn$k={},elesfn$k.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),i=r.pan(),o=t.x1*n+i.x,a=t.x2*n+i.x,s=t.y1*n+i.y,l=t.y2*n+i.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},elesfn$k.dirtyCompoundBoundsCache=function(){var e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp((function(e){if(e.isParent()){var t=e._private;t.compoundBoundsClean=!1,t.bbCache=null,e.emitAndNotify("bounds")}})),this):this},elesfn$k.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(e){if(e.isParent()){var t=e._private,r=e.children(),n="include"===e.pstyle("compound-sizing-wrt-labels").value,i={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},o=r.boundingBox({includeLabels:n,includeOverlays:!1,useCache:!1}),a=t.position;0!==o.w&&0!==o.h||((o={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=a.x-o.w/2,o.x2=a.x+o.w/2,o.y1=a.y-o.h/2,o.y2=a.y+o.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var h=v(i.width.val-o.w,s,l),d=h.biasDiff,f=h.biasComplementDiff,p=v(i.height.val-o.h,u,c),g=p.biasDiff,y=p.biasComplementDiff;t.autoPadding=function(e,t,r,n){if("%"!==r.units)return"px"===r.units?r.pfValue:0;switch(n){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}}(o.w,o.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(o.w,i.width.val),a.x=(-d+o.x1+o.x2+f)/2,t.autoHeight=Math.max(o.h,i.height.val),a.y=(-g+o.y1+o.y2+y)/2}function v(e,t,r){var n=0,i=0,o=t+r;return e>0&&o>0&&(n=t/o*e,i=r/o*e),{biasDiff:n,biasComplementDiff:i}}}for(var n=0;n<this.length;n++){var i=this[n],o=i._private;o.compoundBoundsClean||(r(i),t.batching()||(o.compoundBoundsClean=!0))}return this};var noninf=function(e){return e===1/0||e===-1/0?0:e},updateBounds=function(e,t,r,n,i){n-t!=0&&i-r!=0&&null!=t&&null!=r&&null!=n&&null!=i&&(e.x1=t<e.x1?t:e.x1,e.x2=n>e.x2?n:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},updateBoundsFromBox=function(e,t){return null==t?e:updateBounds(e,t.x1,t.y1,t.x2,t.y2)},prefixedProperty=function(e,t,r){return getPrefixedProperty(e,t,r)},updateBoundsFromArrow=function(e,t,r){if(!t.cy().headless()){var n,i,o=t._private,a=o.rstyle,s=a.arrowWidth/2;if("none"!==t.pstyle(r+"-arrow-shape").value){"source"===r?(n=a.srcX,i=a.srcY):"target"===r?(n=a.tgtX,i=a.tgtY):(n=a.midX,i=a.midY);var l=o.arrowBounds=o.arrowBounds||{},u=l[r]=l[r]||{};u.x1=n-s,u.y1=i-s,u.x2=n+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,expandBoundingBox(u,1),updateBounds(e,u.x1,u.y1,u.x2,u.y2)}}},updateBoundsFromLabel=function(e,t,r){if(!t.cy().headless()){var n;n=r?r+"-":"";var i=t._private,o=i.rstyle;if(t.pstyle(n+"label").strValue){var a,s,l,u,c=t.pstyle("text-halign"),h=t.pstyle("text-valign"),d=prefixedProperty(o,"labelWidth",r),f=prefixedProperty(o,"labelHeight",r),p=prefixedProperty(o,"labelX",r),g=prefixedProperty(o,"labelY",r),y=t.pstyle(n+"text-margin-x").pfValue,v=t.pstyle(n+"text-margin-y").pfValue,m=t.isEdge(),b=t.pstyle(n+"text-rotation"),$=t.pstyle("text-outline-width").pfValue,_=t.pstyle("text-border-width").pfValue/2,w=t.pstyle("text-background-padding").pfValue,E=f,x=d,T=x/2,S=E/2;if(m)a=p-T,s=p+T,l=g-S,u=g+S;else{switch(c.value){case"left":a=p-x,s=p;break;case"center":a=p-T,s=p+T;break;case"right":a=p,s=p+x}switch(h.value){case"top":l=g-E,u=g;break;case"center":l=g-S,u=g+S;break;case"bottom":l=g,u=g+E}}a+=y-Math.max($,_)-w,s+=y+Math.max($,_)+w,l+=v-Math.max($,_)-w,u+=v+Math.max($,_)+w;var O=r||"main",C=i.labelBounds,k=C[O]=C[O]||{};k.x1=a,k.y1=l,k.x2=s,k.y2=u,k.w=s-a,k.h=u-l,expandBoundingBox(k,1);var P=m&&"autorotate"===b.strValue,A=null!=b.pfValue&&0!==b.pfValue;if(P||A){var I=P?prefixedProperty(i.rstyle,"labelAngle",r):b.pfValue,D=Math.cos(I),N=Math.sin(I),M=(a+s)/2,R=(l+u)/2;if(!m){switch(c.value){case"left":M=s;break;case"right":M=a}switch(h.value){case"top":R=u;break;case"bottom":R=l}}var L=function(e,t){return{x:(e-=M)*D-(t-=R)*N+M,y:e*N+t*D+R}},j=L(a,l),F=L(a,u),B=L(s,l),z=L(s,u);a=Math.min(j.x,F.x,B.x,z.x),s=Math.max(j.x,F.x,B.x,z.x),l=Math.min(j.y,F.y,B.y,z.y),u=Math.max(j.y,F.y,B.y,z.y)}var G=O+"Rot",U=C[G]=C[G]||{};U.x1=a,U.y1=l,U.x2=s,U.y2=u,U.w=s-a,U.h=u-l,updateBounds(e,a,l,s,u),updateBounds(i.labelBounds.all,a,l,s,u)}return e}},boundingBoxImpl=function(e,t){var r,n,i,o,a,s,l=e._private.cy,u=l.styleEnabled(),c=l.headless(),h=makeBoundingBox(),d=e._private,f=e.isNode(),p=e.isEdge(),g=d.rstyle,y=f&&u?e.pstyle("bounds-expansion").pfValue:[0],v=function(e){return"none"!==e.pstyle("display").value},m=!u||v(e)&&(!p||v(e.source())&&v(e.target()));if(m){var b=0;u&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(b=e.pstyle("overlay-padding").value);var $=0;if(u&&($=e.pstyle("width").pfValue/2),f&&t.includeNodes){var _=e.position();a=_.x,s=_.y;var w=e.outerWidth()/2,E=e.outerHeight()/2;updateBounds(h,r=a-w,i=s-E,n=a+w,o=s+E)}else if(p&&t.includeEdges)if(u&&!c){var x=e.pstyle("curve-style").strValue;if(r=Math.min(g.srcX,g.midX,g.tgtX),n=Math.max(g.srcX,g.midX,g.tgtX),i=Math.min(g.srcY,g.midY,g.tgtY),o=Math.max(g.srcY,g.midY,g.tgtY),updateBounds(h,r-=$,i-=$,n+=$,o+=$),"haystack"===x){var T=g.haystackPts;if(T&&2===T.length){if(r=T[0].x,i=T[0].y,r>(n=T[1].x)){var S=r;r=n,n=S}if(i>(o=T[1].y)){var O=i;i=o,o=O}updateBounds(h,r-$,i-$,n+$,o+$)}}else if("bezier"===x||"unbundled-bezier"===x||"segments"===x||"taxi"===x){var C;switch(x){case"bezier":case"unbundled-bezier":C=g.bezierPts;break;case"segments":case"taxi":C=g.linePts}if(null!=C)for(var k=0;k<C.length;k++){var P=C[k];r=P.x-$,n=P.x+$,i=P.y-$,o=P.y+$,updateBounds(h,r,i,n,o)}}}else{var A=e.source().position(),I=e.target().position();if((r=A.x)>(n=I.x)){var D=r;r=n,n=D}if((i=A.y)>(o=I.y)){var N=i;i=o,o=N}updateBounds(h,r-=$,i-=$,n+=$,o+=$)}if(u&&t.includeEdges&&p&&(updateBoundsFromArrow(h,e,"mid-source"),updateBoundsFromArrow(h,e,"mid-target"),updateBoundsFromArrow(h,e,"source"),updateBoundsFromArrow(h,e,"target")),u)if("yes"===e.pstyle("ghost").value){var M=e.pstyle("ghost-offset-x").pfValue,R=e.pstyle("ghost-offset-y").pfValue;updateBounds(h,h.x1+M,h.y1+R,h.x2+M,h.y2+R)}var L=d.bodyBounds=d.bodyBounds||{};assignBoundingBox(L,h),expandBoundingBoxSides(L,y),expandBoundingBox(L,1),u&&(r=h.x1,n=h.x2,i=h.y1,o=h.y2,updateBounds(h,r-b,i-b,n+b,o+b));var j=d.overlayBounds=d.overlayBounds||{};assignBoundingBox(j,h),expandBoundingBoxSides(j,y),expandBoundingBox(j,1);var F=d.labelBounds=d.labelBounds||{};null!=F.all?clearBoundingBox(F.all):F.all=makeBoundingBox(),u&&t.includeLabels&&(t.includeMainLabels&&updateBoundsFromLabel(h,e,null),p&&(t.includeSourceLabels&&updateBoundsFromLabel(h,e,"source"),t.includeTargetLabels&&updateBoundsFromLabel(h,e,"target")))}return h.x1=noninf(h.x1),h.y1=noninf(h.y1),h.x2=noninf(h.x2),h.y2=noninf(h.y2),h.w=noninf(h.x2-h.x1),h.h=noninf(h.y2-h.y1),h.w>0&&h.h>0&&m&&(expandBoundingBoxSides(h,y),expandBoundingBox(h,1)),h},getKey=function(e){var t=0,r=function(e){return(e?1:0)<<t++},n=0;return n+=r(e.incudeNodes),n+=r(e.includeEdges),n+=r(e.includeLabels),n+=r(e.includeMainLabels),n+=r(e.includeSourceLabels),n+=r(e.includeTargetLabels),n+=r(e.includeOverlays)},getBoundingBoxPosKey=function(e){if(e.isEdge()){var t=e.source().position(),r=e.target().position(),n=function(e){return Math.round(e)};return hashIntsArray([n(t.x),n(t.y),n(r.x),n(r.y)])}return 0},cachedBoundingBoxImpl=function(e,t){var r,n=e._private,i=e.isEdge(),o=(null==t?defBbOptsKey:getKey(t))===defBbOptsKey,a=getBoundingBoxPosKey(e),s=n.bbCachePosKey===a,l=function(e){return null==e._private.bbCache},u=!(t.useCache&&s)||l(e)||i&&l(e.source())||l(e.target());if(u?(s||e.recalculateRenderedStyle(),r=boundingBoxImpl(e,defBbOpts),n.bbCache=r,n.bbCacheShift.x=n.bbCacheShift.y=0,n.bbCachePosKey=a):r=n.bbCache,!u&&(0!==n.bbCacheShift.x||0!==n.bbCacheShift.y)){var c=assignShiftToBoundingBox,h=n.bbCacheShift,d=function(e,t){null!=e&&c(e,t)};c(r,h);var f=n.bodyBounds,p=n.overlayBounds,g=n.labelBounds,y=n.arrowBounds;d(f,h),d(p,h),null!=y&&(d(y.source,h),d(y.target,h),d(y["mid-source"],h),d(y["mid-target"],h)),null!=g&&(d(g.main,h),d(g.all,h),d(g.source,h),d(g.target,h))}if(n.bbCacheShift.x=n.bbCacheShift.y=0,!o){var v=e.isNode();r=makeBoundingBox(),(t.includeNodes&&v||t.includeEdges&&!v)&&(t.includeOverlays?updateBoundsFromBox(r,n.overlayBounds):updateBoundsFromBox(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?updateBoundsFromBox(r,n.labelBounds.all):(t.includeMainLabels&&updateBoundsFromBox(r,n.labelBounds.mainRot),t.includeSourceLabels&&updateBoundsFromBox(r,n.labelBounds.sourceRot),t.includeTargetLabels&&updateBoundsFromBox(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults(defBbOpts);elesfn$k.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=makeBoundingBox();var r=filledBbOpts(e=e||defBbOpts);if(this.cy().styleEnabled())for(var n=0;n<this.length;n++){var i=this[n],o=i._private,a=getBoundingBoxPosKey(i),s=o.bbCachePosKey===a,l=r.useCache&&s;i.recalculateRenderedStyle(l)}this.updateCompoundBounds();for(var u=0;u<this.length;u++){var c=this[u];updateBoundsFromBox(t,cachedBoundingBoxImpl(c,r))}}else e=void 0===e?defBbOpts:filledBbOpts(e),t=cachedBoundingBoxImpl(this[0],e);return t.x1=noninf(t.x1),t.y1=noninf(t.y1),t.x2=noninf(t.x2),t.y2=noninf(t.y2),t.w=noninf(t.x2-t.x1),t.h=noninf(t.y2-t.y1),t},elesfn$k.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCacheShift.x=t.bbCacheShift.y=0,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},elesfn$k.shiftCachedBoundingBox=function(e){for(var t=0;t<this.length;t++){var r=this[t]._private;null!=r.bbCache&&(r.bbCacheShift.x+=e.x,r.bbCacheShift.y+=e.y)}return this.emitAndNotify("bounds"),this},elesfn$k.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),n=r.hasCompoundNodes();if(n&&(t=t.filter((function(e){return!e.isParent()}))),plainObject(e)){var i=e;e=function(){return i}}r.startBatch(),t.forEach((function(t,r){return t._private.bbAtOldPos=e(t,r)})).silentPositions(e),n&&this.updateCompoundBounds(!0);var o=copyBoundingBox(this.boundingBox({useCache:!1}));return t.silentPositions((function(e){return e._private.bbAtOldPos})),r.endBatch(),o},fn$3.boundingbox=fn$3.bb=fn$3.boundingBox,fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var bounds=elesfn$k,fn$4,elesfn$l;fn$4=elesfn$l={};var defineDimFns=function(e){e.uppercaseName=capitalize(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=capitalize(e.outerName),fn$4[e.name]=function(){var t=this[0],r=t._private,n=r.cy._private.styleEnabled;if(t){if(!n)return 1;if(t.isParent())return t.updateCompoundBounds(),r[e.autoName]||0;var i=t.pstyle(e.name);switch(i.strValue){case"label":return t.recalculateRenderedStyle(),r.rstyle[e.labelName]||0;default:return i.pfValue}}},fn$4["outer"+e.uppercaseName]=function(){var t=this[0],r=t._private.cy._private.styleEnabled;if(t)return r?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},fn$4["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},fn$4["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};defineDimFns({name:"width"}),defineDimFns({name:"height"}),elesfn$l.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},elesfn$l.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},elesfn$l.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var widthHeight=elesfn$l,ifEdge=function(e,t){if(e.isEdge())return t(e)},ifEdgeRenderedPosition=function(e,t){if(e.isEdge()){var r=e.cy();return modelToRenderedPosition(t(e),r.zoom(),r.pan())}},ifEdgeRenderedPositions=function(e,t){if(e.isEdge()){var r=e.cy(),n=r.pan(),i=r.zoom();return t(e).map((function(e){return modelToRenderedPosition(e,i,n)}))}},controlPoints=function(e){return e.renderer().getControlPoints(e)},segmentPoints=function(e){return e.renderer().getSegmentPoints(e)},sourceEndpoint=function(e){return e.renderer().getSourceEndpoint(e)},targetEndpoint=function(e){return e.renderer().getTargetEndpoint(e)},midpoint=function(e){return e.renderer().getEdgeMidpoint(e)},pts={controlPoints:{get:controlPoints,mult:!0},segmentPoints:{get:segmentPoints,mult:!0},sourceEndpoint:{get:sourceEndpoint},targetEndpoint:{get:targetEndpoint},midpoint:{get:midpoint}},renderedName=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},edgePoints=Object.keys(pts).reduce((function(e,t){var r=pts[t],n=renderedName(t);return e[t]=function(){return ifEdge(this,r.get)},r.mult?e[n]=function(){return ifEdgeRenderedPositions(this,r.get)}:e[n]=function(){return ifEdgeRenderedPosition(this,r.get)},e}),{}),dimensions=extend({},position,bounds,widthHeight,edgePoints),Event=function(e,t){this.recycle(e,t)};function returnFalse(){return!1}function returnTrue(){return!0}Event.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?returnTrue:returnFalse):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var r=this.position,n=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:r.x*n+i.x,y:r.y*n+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,universalNamespace=".*",defaults$8={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={};function Emitter(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:emptyOpts,t=arguments.length>1?arguments[1]:void 0,r=0;r<defaultsKeys.length;r++){var n=defaultsKeys[r];this[n]=e[n]||defaults$8[n]}this.context=t||this.context,this.listeners=[],this.emitting=0}var p=Emitter.prototype,forEachEvent=function(e,t,r,n,i,o,a){fn(n)&&(i=n,n=null),a&&(o=null==o?a:extend({},o,a));for(var s=array(r)?r:r.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!emptyString(u)){var c=u.match(eventRegex);if(c)if(!1===t(e,u,c[1],c[2]?c[2]:null,n,i,o))break}}},makeEventObj=function(e,t){return e.addEventFields(e.context,t),new Event(t.type,t)},forEachEventObj=function(e,t,r){if(event(r))t(e,r);else if(plainObject(r))t(e,makeEventObj(e,r));else for(var n=array(r)?r:r.split(/\s+/),i=0;i<n.length;i++){var o=n[i];if(!emptyString(o)){var a=o.match(eventRegex);if(a){var s=a[1],l=a[2]?a[2]:null;t(e,makeEventObj(e,{type:s,namespace:l,target:e.context}))}}}};p.on=p.addListener=function(e,t,r,n,i){return forEachEvent(this,(function(e,t,r,n,i,o,a){fn(o)&&e.listeners.push({event:t,callback:o,type:r,namespace:n,qualifier:i,conf:a})}),e,t,r,n,i),this},p.one=function(e,t,r,n){return this.on(e,t,r,n,{one:!0})},p.removeListener=p.off=function(e,t,r,n){var i=this;0!==this.emitting&&(this.listeners=copyArray(this.listeners));for(var o=this.listeners,a=function(a){var s=o[a];forEachEvent(i,(function(t,r,n,i,l,u){if((s.type===n||"*"===e)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||t.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return o.splice(a,1),!1}),e,t,r,n)},s=o.length-1;s>=0;s--)a(s);return this},p.removeAllListeners=function(){return this.removeListener("*")},p.emit=p.trigger=function(e,t,r){var n=this.listeners,i=n.length;return this.emitting++,array(t)||(t=[t]),forEachEventObj(this,(function(e,o){null!=r&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],i=n.length);for(var a=function(r){var i=n[r];if(i.type===o.type&&(!i.namespace||i.namespace===o.namespace||i.namespace===universalNamespace)&&e.eventMatches(e.context,i,o)){var a=[o];null!=t&&push(a,t),e.beforeEmit(e.context,i,o),i.conf&&i.conf.one&&(e.listeners=e.listeners.filter((function(e){return e!==i})));var s=e.callbackContext(e.context,i,o),l=i.callback.apply(s,a);e.afterEmit(e.context,i,o),!1===l&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)a(s);e.bubble(e.context)&&!o.isPropagationStopped()&&e.parent(e.context).emit(o,t)}),e),this.emitting--,this};var emitterOptions={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&element(r.target)&&n.matches(r.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},argSelector=function(e){return string(e)?new Selector(e):e},elesfn$m={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],r=t._private;r.emitter||(r.emitter=new Emitter(emitterOptions,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,r){for(var n=argSelector(t),i=0;i<this.length;i++){this[i].emitter().on(e,n,r)}return this},removeListener:function(e,t,r){for(var n=argSelector(t),i=0;i<this.length;i++){this[i].emitter().removeListener(e,n,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this},one:function(e,t,r){for(var n=argSelector(t),i=0;i<this.length;i++){this[i].emitter().one(e,n,r)}return this},once:function(e,t,r){for(var n=argSelector(t),i=0;i<this.length;i++){this[i].emitter().on(e,n,r,{once:!0,onceCollection:this})}},emit:function(e,t){for(var r=0;r<this.length;r++){this[r].emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};define$3.eventAliasesOn(elesfn$m);var elesfn$n={nodes:function(e){return this.filter((function(e){return e.isNode()})).filter(e)},edges:function(e){return this.filter((function(e){return e.isEdge()})).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),r=0;r<this.length;r++){var n=this[r];n.isNode()?e.merge(n):t.merge(n)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(string(e)||elementOrCollection(e))return new Selector(e).filter(this);if(fn(e)){for(var r=this.spawn(),n=0;n<this.length;n++){var i=this[n];(t?e.apply(t,[i,n,this]):e(i,n,this))&&r.merge(i)}return r}return this.spawn()},not:function(e){if(e){string(e)&&(e=this.filter(e));for(var t=[],r=e._private.map,n=0;n<this.length;n++){var i=this[n];r.has(i.id())||t.push(i)}return this.spawn(t)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(string(e)){var t=e;return this.filter(t)}for(var r=[],n=e,i=this.length<e.length,o=i?n._private.map:this._private.map,a=i?this:n,s=0;s<a.length;s++){var l=a[s]._private.data.id,u=o.get(l);u&&r.push(u.ele)}return this.spawn(r)},xor:function(e){var t=this._private.cy;string(e)&&(e=t.$(e));var r=[],n=e,i=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=i._private.data.id;t.hasElementWithId(o)||r.push(i)}};return i(this,n),i(n,this),this.spawn(r)},diff:function(e){var t=this._private.cy;string(e)&&(e=t.$(e));var r=[],n=[],i=[],o=e,a=function(e,t,r){for(var n=0;n<e.length;n++){var o=e[n],a=o._private.data.id;t.hasElementWithId(a)?i.push(o):r.push(o)}};return a(this,o,r),a(o,this,n),{left:this.spawn(r,{unique:!0}),right:this.spawn(n,{unique:!0}),both:this.spawn(i,{unique:!0})}},add:function(e){var t=this._private.cy;if(!e)return this;if(string(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=[],i=0;i<this.length;i++)n.push(this[i]);for(var o=this._private.map,a=0;a<e.length;a++){var s=!o.has(e[a].id());s&&n.push(e[a])}return this.spawn(n)},merge:function(e){var t=this._private,r=t.cy;if(!e)return this;if(e&&string(e)){var n=e;e=r.mutableElements().filter(n)}for(var i=t.map,o=0;o<e.length;o++){var a=e[o],s=a._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=a,i.set(s,{ele:a,index:l})}else{var u=i.get(s).index;this[u]=a,i.set(s,{ele:a,index:u})}}return this},unmergeAt:function(e){var t=this[e].id(),r=this._private.map;this[e]=void 0,r.delete(t);var n=e===this.length-1;if(this.length>1&&!n){var i=this.length-1,o=this[i],a=o._private.data.id;this[i]=void 0,this[e]=o,r.set(a,{ele:o,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,r=e._private.data.id,n=t.map.get(r);if(!n)return this;var i=n.index;return this.unmergeAt(i),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&string(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=0;n<e.length;n++)this.unmergeOne(e[n]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this},map:function(e,t){for(var r=[],n=0;n<this.length;n++){var i=this[n],o=t?e.apply(t,[i,n,this]):e(i,n,this);r.push(o)}return r},reduce:function(e,t){for(var r=t,n=0;n<this.length;n++)r=e(r,this[n],n,this);return r},max:function(e,t){for(var r,n=-1/0,i=0;i<this.length;i++){var o=this[i],a=t?e.apply(t,[o,i,this]):e(o,i,this);a>n&&(n=a,r=o)}return{value:n,ele:r}},min:function(e,t){for(var r,n=1/0,i=0;i<this.length;i++){var o=this[i],a=t?e.apply(t,[o,i,this]):e(o,i,this);a<n&&(n=a,r=o)}return{value:n,ele:r}}},fn$5=elesfn$n;fn$5.u=fn$5["|"]=fn$5["+"]=fn$5.union=fn$5.or=fn$5.add,fn$5["\\"]=fn$5["!"]=fn$5["-"]=fn$5.difference=fn$5.relativeComplement=fn$5.subtract=fn$5.not,fn$5.n=fn$5["&"]=fn$5["."]=fn$5.and=fn$5.intersection=fn$5.intersect,fn$5["^"]=fn$5["(+)"]=fn$5["(-)"]=fn$5.symmetricDifference=fn$5.symdiff=fn$5.xor,fn$5.fnFilter=fn$5.filterFn=fn$5.stdFilter=fn$5.filter,fn$5.complement=fn$5.abscomp=fn$5.absoluteComplement;var elesfn$o={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},zIndexSort=function(e,t){var r=e.cy().hasCompoundNodes();function n(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?r?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?MAX_INT:0}var i=n(e)-n(t);if(0!==i)return i;function o(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var a=o(e)-o(t);if(0!==a)return a;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==s?s:e.poolIndex()-t.poolIndex()},elesfn$p={forEach:function(e,t){if(fn(e))for(var r=this.length,n=0;n<r;n++){var i=this[n];if(!1===(t?e.apply(t,[i,n,this]):e(i,n,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var r=[],n=this.length;null==t&&(t=n),null==e&&(e=0),e<0&&(e=n+e),t<0&&(t=n+t);for(var i=e;i>=0&&i<t&&i<n;i++)r.push(this[i]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!fn(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(zIndexSort)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:MAX_INT-1}var n=t.source,i=t.target,o=n.zDepth(),a=i.zDepth();return Math.max(o,a,0)}}};elesfn$p.each=elesfn$p.forEach;var defineSymbolIterator=function(){"undefined"!=("undefined"==typeof Symbol?"undefined":_typeof(Symbol))&&"undefined"!=_typeof(Symbol.iterator)&&(elesfn$p[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},r=0,n=this.length;return _defineProperty$1({next:function(){return r<n?t.value=e[r++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,(function(){return this}))})};defineSymbolIterator();var getLayoutDimensionOptions=defaults({nodeDimensionsIncludeLabels:!1}),elesfn$q={layoutDimensions:function(e){var t;if(e=getLayoutDimensionOptions(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();t={w:r.w,h:r.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function(e,t,r){var n=this.nodes(),i=this.cy(),o=t.eles,a=function(e){return e.id()},s=memoize(r,a);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=t.spacingFactor&&1!==t.spacingFactor,u=function(){if(!l)return null;for(var e=makeBoundingBox(),t=0;t<n.length;t++){var r=n[t],i=s(r,t);expandBoundingBoxByPoint(e,i.x,i.y)}return e}(),c=memoize((function(e,r){var n=s(e,r);l&&(n=function(e,t,r){var n=t.x1+t.w/2,i=t.y1+t.h/2;return{x:n+(r.x-n)*e,y:i+(r.y-i)*e}}(Math.abs(t.spacingFactor),u,n));return null!=t.transform&&(n=t.transform(e,n)),n}),a);if(t.animate){for(var h=0;h<n.length;h++){var d=n[h],f=c(d,h);if(null==t.animateFilter||t.animateFilter(d,h)){var p=d.animation({position:f,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(p)}else d.position(f)}if(t.fit){var g=i.animation({fit:{boundingBox:o.boundingBoxAt(c),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else if(void 0!==t.zoom&&void 0!==t.pan){var y=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}e.animations.forEach((function(e){return e.play()})),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Promise$1.all(e.animations.map((function(e){return e.promise()}))).then((function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})}))}else n.positions(c),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(extend({},e,{eles:this}))}};function styleCache(e,t,r){var n,i=r._private,o=i.styleCache=i.styleCache||[];return null!=(n=o[e])?n:n=o[e]=t(r)}function cacheStyleFunction(e,t){return e=hashString(e),function(r){return styleCache(e,t,r)}}function cachePrototypeStyleFunction(e,t){e=hashString(e);var r=function(e){return t.call(e)};return function(){var t=this[0];if(t)return styleCache(e,r,t)}}elesfn$q.createLayout=elesfn$q.makeLayout=elesfn$q.layout;var elesfn$r={recalculateRenderedStyle:function(e){var t=this.cy(),r=t.renderer(),n=t.styleEnabled();return r&&n&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),r=function(e){return e._private.styleCache=null};t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(r)):this.forEach((function(e){r(e),e.connectedEdges().forEach(r)}));return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var r=t.hasCompoundNodes(),n=t.style(),i=this;e=!(!e&&void 0!==e),r&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=n.apply(i);return e?o.emitAndNotify("style"):o.emit("style"),this},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this[0],n=r.cy();if(n.styleEnabled()&&r){var i=r._private.style[e];return null!=i?i:t?n.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var r=t.pstyle(e);return void 0!==r.pfValue?r.pfValue:r.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];return r?t.style().getRenderedStyle(r,e):void 0},style:function(e,t){var r=this.cy();if(!r.styleEnabled())return this;var n=r.style();if(plainObject(e)){var i=e;n.applyBypass(this,i,!1),this.emitAndNotify("style")}else if(string(e)){if(void 0===t){var o=this[0];return o?n.getStylePropertyValue(o,e):void 0}n.applyBypass(this,e,t,!1),this.emitAndNotify("style")}else if(void 0===e){var a=this[0];return a?n.getRawStyle(a):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=t.style();if(void 0===e)for(var n=0;n<this.length;n++){var i=this[n];r.removeAllBypasses(i,!1)}else{e=e.split(/\s+/);for(var o=0;o<this.length;o++){var a=this[o];r.removeBypasses(a,e,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var n=r._private,i=r.pstyle("opacity").value;if(!t)return i;var o=n.data.parent?r.parents():null;if(o)for(var a=0;a<o.length;a++){i*=o[a].pstyle("opacity").value}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function checkCompound(e,t){var r=e._private.data.parent?e.parents():null;if(r)for(var n=0;n<r.length;n++){if(!t(r[n]))return!1}return!0}function defineDerivedStateFunction(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,n=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],o=e.hasCompoundNodes();if(i){var a=i._private;if(!t(i))return!1;if(i.isNode())return!o||checkCompound(i,n);var s=a.source,l=a.target;return r(s)&&(!o||checkCompound(s,r))&&(s===l||r(l)&&(!o||checkCompound(l,r)))}}}var eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",(function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())}));elesfn$r.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",(function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&eleTakesUpSpace(e)})),parentInteractive=cacheStyleFunction("parentInteractive",(function(e){return"visible"===e.pstyle("visibility").value&&eleTakesUpSpace(e)}));elesfn$r.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace})),elesfn$r.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var eleVisible=cacheStyleFunction("eleVisible",(function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&eleTakesUpSpace(e)})),edgeVisibleViaNode=eleTakesUpSpace;elesfn$r.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode})),elesfn$r.hidden=function(){var e=this[0];if(e)return!e.visible()},elesfn$r.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),elesfn$r.bypass=elesfn$r.css=elesfn$r.style,elesfn$r.renderedCss=elesfn$r.renderedStyle,elesfn$r.removeBypass=elesfn$r.removeCss=elesfn$r.removeStyle,elesfn$r.pstyle=elesfn$r.parsedStyle;var elesfn$s={};function defineSwitchFunction(e){return function(){var t=arguments,r=[];if(2===t.length){var n=t[0],i=t[1];this.on(e.event,n,i)}else if(1===t.length&&fn(t[0])){var o=t[0];this.on(e.event,o)}else if(0===t.length||1===t.length&&array(t[0])){for(var a=1===t.length?t[0]:null,s=0;s<this.length;s++){var l=this[s],u=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(void 0!==h&&(u=h,!h))return this}u&&(l._private[e.field]=e.value,c&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(e.event),a&&d.emit(a)}return this}}function defineSwitchSet(e){elesfn$s[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},elesfn$s[e.on]=defineSwitchFunction({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),elesfn$s[e.off]=defineSwitchFunction({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),defineSwitchSet({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),defineSwitchSet({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),elesfn$s.deselect=elesfn$s.unselect,elesfn$s.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},defineSwitchSet({field:"active",on:"activate",off:"unactivate"}),defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"}),elesfn$s.inactive=function(){var e=this[0];if(e)return!e._private.active};var elesfn$t={},defineDagExtremity=function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var l=a[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===i&&u!==i||e.noOutgoingEdges&&u===i&&c!==i){o=!0;break}}o||r.push(i)}}return this.spawn(r,{unique:!0}).filter(t)}},defineDagOneHop=function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target();e.outgoing&&l===i?(r.push(s),r.push(u)):e.incoming&&u===i&&(r.push(s),r.push(l))}}return this.spawn(r,{unique:!0}).filter(t)}},defineDagAllHops=function(e){return function(t){for(var r=this,n=[],i={};;){var o=e.outgoing?r.outgoers():r.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],u=l.id();i[u]||(i[u]=!0,n.push(l),a=!0)}if(!a)break;r=o}return this.spawn(n,{unique:!0}).filter(t)}};function defineSourceFunction(e){return function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n]._private[e.attr];i&&r.push(i)}return this.spawn(r,{unique:!0}).filter(t)}}function defineEdgesWithFunction(e){return function(t){var r=[],n=this._private.cy,i=e||{};string(t)&&(t=n.$(t));for(var o=0;o<t.length;o++)for(var a=t[o]._private.edges,s=0;s<a.length;s++){var l=a[s],u=l._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),h=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||h){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!c)continue;if(i.thisIsTgt&&!h)continue}r.push(l)}}return this.spawn(r,{unique:!0})}}function defineParallelEdgesFunction(e){return e=extend({},{codirected:!1},e),function(t){for(var r=[],n=this.edges(),i=e,o=0;o<n.length;o++)for(var a=n[o]._private,s=a.source,l=s._private.data.id,u=a.data.target,c=s._private.edges,h=0;h<c.length;h++){var d=c[h],f=d._private.data,p=f.target,g=f.source,y=p===u&&g===l,v=l===p&&u===g;(i.codirected&&y||!i.codirected&&(y||v))&&r.push(d)}return this.spawn(r,{unique:!0}).filter(t)}}elesfn$t.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},extend(elesfn$t,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({incoming:!0})}),extend(elesfn$t,{neighborhood:cache((function(e){for(var t=[],r=this.nodes(),n=0;n<r.length;n++)for(var i=r[n],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,{unique:!0}).filter(e)}),"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),elesfn$t.neighbourhood=elesfn$t.neighborhood,elesfn$t.closedNeighbourhood=elesfn$t.closedNeighborhood,elesfn$t.openNeighbourhood=elesfn$t.openNeighborhood,extend(elesfn$t,{source:cache((function(e){var t,r=this[0];return r&&(t=r._private.source||r.cy().collection()),t&&e?t.filter(e):t}),"source"),target:cache((function(e){var t,r=this[0];return r&&(t=r._private.target||r.cy().collection()),t&&e?t.filter(e):t}),"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})}),extend(elesfn$t,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")}),extend(elesfn$t,{connectedEdges:cache((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];if(n.isNode())for(var i=n._private.edges,o=0;o<i.length;o++){var a=i[o];t.push(a)}}return this.spawn(t,{unique:!0}).filter(e)}),"connectedEdges"),connectedNodes:cache((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];n.isEdge()&&(t.push(n.source()[0]),t.push(n.target()[0]))}return this.spawn(t,{unique:!0}).filter(e)}),"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")}),extend(elesfn$t,{components:function(e){var t=this,r=t.cy(),n=r.collection(),i=null==e?t.nodes():e.nodes(),o=[];null!=e&&i.empty()&&(i=e.sources());var a=function(e,t){n.merge(e),i.unmerge(e),t.merge(e)};if(i.empty())return t.spawn();var s=function(){var e=r.collection();o.push(e);var n=i[0];a(n,e),t.bfs({directed:!1,roots:n,visit:function(t){return a(t,e)}}),e.forEach((function(r){r.connectedEdges().forEach((function(r){t.has(r)&&e.has(r.source())&&e.has(r.target())&&e.merge(r)}))}))};do{s()}while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),elesfn$t.componentsOf=elesfn$t.components;var idFactory={generate:function(e,t,r){for(var n=null!=r?r:uuid();e.hasElementWithId(n);)n=uuid();return n}},Collection=function(e,t,r){if(void 0!==e&&core(e)){var n=new Map$1$1,i=!1;if(t){if(t.length>0&&plainObject(t[0])&&!element(t[0])){i=!0;for(var o=[],a=new Set$1,s=0,l=t.length;s<l;s++){var u=t[s];null==u.data&&(u.data={});var c=u.data;if(null==c.id)c.id=idFactory.generate(e,u);else if(e.hasElementWithId(c.id)||a.has(c.id))continue;var h=new Element$1(e,u,!1);o.push(h),a.add(c.id)}t=o}}else t=[];this.length=0;for(var d=0,f=t.length;d<f;d++){var p=t[d][0];if(null!=p){var g=p._private.data.id;(null==r||r.unique&&!n.has(g))&&(n.set(g,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={cy:e,map:n},i&&this.restore()}else error("A collection must have a reference to the core")},elesfn$u=Element$1.prototype=Collection.prototype;elesfn$u.instanceString=function(){return"collection"},elesfn$u.spawn=function(e,t,r){return core(e)||(r=t,t=e,e=this.cy()),new Collection(e,t,r)},elesfn$u.spawnSelf=function(){return this.spawn(this)},elesfn$u.cy=function(){return this._private.cy},elesfn$u.renderer=function(){return this._private.cy.renderer()},elesfn$u.element=function(){return this[0]},elesfn$u.collection=function(){return collection(this)?this:new Collection(this._private.cy,[this])},elesfn$u.unique=function(){return new Collection(this._private.cy,this,{unique:!0})},elesfn$u.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},elesfn$u.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new Collection(t)},elesfn$u.$id=elesfn$u.getElementById,elesfn$u.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},elesfn$u.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},elesfn$u.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},elesfn$u.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var n=t._private;if(plainObject(e)){if(r.startBatch(),e.data){t.data(e.data);var i=n.data;if(t.isEdge()){var o=!1,a={},s=e.data.source,l=e.data.target;null!=s&&s!=i.source&&(a.source=""+s,o=!0),null!=l&&l!=i.target&&(a.target=""+l,o=!0),o&&(t=t.move(a))}else{var u="parent"in e.data,c=e.data.parent;!u||null==c&&null==i.parent||c==i.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var h=function(r,i,o){var a=e[r];null!=a&&a!==n[r]&&(a?t[i]():t[o]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var d={data:copy(n.data),position:copy(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var f=0;return n.classes.forEach((function(e){return d.classes+=0==f++?e:" "+e})),d}}},elesfn$u.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t].json();e.push(r)}return e},elesfn$u.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var n=this[r].json(),i=new Element$1(e,n,!1);t.push(i)}return new Collection(e,t)},elesfn$u.copy=elesfn$u.clone,elesfn$u.restore=function(){for(var e,t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,o=i.cy(),a=o._private,s=[],l=[],u=0,c=i.length;u<c;u++){var h=i[u];n&&!h.removed()||(h.isNode()?s.push(h):l.push(h))}e=s.concat(l);var d=function(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var f=e[t],p=f._private,g=p.data;if(f.clearTraversalCache(),n||p.removed)if(void 0===g.id)g.id=idFactory.generate(o,f);else if(number(g.id))g.id=""+g.id;else{if(emptyString(g.id)||!string(g.id)){error("Can not create element with invalid string ID `"+g.id+"`"),d();continue}if(o.hasElementWithId(g.id)){error("Can not create second element with ID `"+g.id+"`"),d();continue}}else;var y=g.id;if(f.isNode()){var v=p.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(f.isEdge()){for(var m=f,b=["source","target"],$=b.length,_=!1,w=0;w<$;w++){var E=b[w],x=g[E];number(x)&&(x=g[E]=""+g[E]),null==x||""===x?(error("Can not create edge `"+y+"` with unspecified "+E),_=!0):o.hasElementWithId(x)||(error("Can not create edge `"+y+"` with nonexistant "+E+" `"+x+"`"),_=!0)}if(_){d();continue}var T=o.getElementById(g.source),S=o.getElementById(g.target);T.same(S)?T._private.edges.push(m):(T._private.edges.push(m),S._private.edges.push(m)),m._private.source=T,m._private.target=S}p.map=new Map$1$1,p.map.set(y,{ele:f,index:0}),p.removed=!1,n&&o.addToPool(f)}for(var O=0;O<s.length;O++){var C=s[O],k=C._private.data;number(k.parent)&&(k.parent=""+k.parent);var P=k.parent,A=null!=P;if(A){var I=o.getElementById(P);if(I.empty())k.parent=void 0;else{for(var D=!1,N=I;!N.empty();){if(C.same(N)){D=!0,k.parent=void 0;break}N=N.parent()}D||(I[0]._private.children.push(C),C._private.parent=I[0],a.hasCompoundNodes=!0)}}}if(e.length>0){for(var M=new Collection(o,e),R=0;R<M.length;R++){var L=M[R];L.isNode()||(L.parallelEdges().clearTraversalCache(),L.source().clearTraversalCache(),L.target().clearTraversalCache())}(a.hasCompoundNodes?o.collection().merge(M).merge(M.connectedNodes()).merge(M.parent()):M).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?M.emitAndNotify("add"):n&&M.emit("add")}return i},elesfn$u.removed=function(){var e=this[0];return e&&e._private.removed},elesfn$u.inside=function(){var e=this[0];return e&&!e._private.removed},elesfn$u.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,n=[],i={},o=r._private.cy;function a(e){for(var t=e._private.edges,r=0;r<t.length;r++)l(t[r])}function s(e){for(var t=e._private.children,r=0;r<t.length;r++)l(t[r])}function l(e){var r=i[e.id()];t&&e.removed()||r||(i[e.id()]=!0,e.isNode()?(n.push(e),a(e),s(e)):n.unshift(e))}for(var u=0,c=r.length;u<c;u++){var h=r[u];l(h)}function d(e,t){var r=e._private.edges;removeFromArray(r,t),e.clearTraversalCache()}function f(e){e.clearTraversalCache()}var p=[];function g(e,t){t=t[0];var r=(e=e[0])._private.children,n=e.id();removeFromArray(r,t),t._private.parent=null,p.ids[n]||(p.ids[n]=!0,p.push(e))}p.ids={},r.dirtyCompoundBoundsCache(),t&&o.removeFromPool(n);for(var y=0;y<n.length;y++){var v=n[y];if(v.isEdge()){var m=v.source()[0],b=v.target()[0];d(m,v),d(b,v);for(var $=v.parallelEdges(),_=0;_<$.length;_++){var w=$[_];f(w),w.isBundledBezier()&&w.dirtyBoundingBoxCache()}}else{var E=v.parent();0!==E.length&&g(E,v)}t&&(v._private.removed=!0)}var x=o._private.elements;o._private.hasCompoundNodes=!1;for(var T=0;T<x.length;T++){var S=x[T];if(S.isParent()){o._private.hasCompoundNodes=!0;break}}var O=new Collection(this.cy(),n);O.size()>0&&(e?O.emitAndNotify("remove"):t&&O.emit("remove"));for(var C=0;C<p.length;C++){var k=p[C];t&&k.removed()||k.updateStyle()}return O},elesfn$u.move=function(e){var t=this._private.cy,r=this,n=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var i=n(e.source),o=n(e.target),a=null!=i&&t.hasElementWithId(i),s=null!=o&&t.hasElementWithId(o);(a||s)&&(t.batch((function(){r.remove(!1,!1),r.emitAndNotify("moveout");for(var e=0;e<r.length;e++){var t=r[e],n=t._private.data;t.isEdge()&&(a&&(n.source=i),s&&(n.target=o))}r.restore(!1,!1)})),r.emitAndNotify("move"))}else if(void 0!==e.parent){var l=n(e.parent);if(null===l||t.hasElementWithId(l)){var u=null===l?void 0:l;t.batch((function(){var e=r.remove(!1,!1);e.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var n=r[t],i=n._private.data;n.isNode()&&(i.parent=u)}e.restore(!1,!1)})),r.emitAndNotify("move")}}return this},[elesfn$c,elesfn$d,elesfn$e,elesfn$f,elesfn$g,data$1,elesfn$i,dimensions,elesfn$m,elesfn$n,elesfn$o,elesfn$p,elesfn$q,elesfn$r,elesfn$s,elesfn$t].forEach((function(e){extend(elesfn$u,e)}));var corefn={add:function(e){var t,r=this;if(elementOrCollection(e)){var n=e;if(n._private.cy===r)t=n.restore();else{for(var i=[],o=0;o<n.length;o++){var a=n[o];i.push(a.json())}t=new Collection(r,i)}}else if(array(e)){t=new Collection(r,e)}else if(plainObject(e)&&(array(e.nodes)||array(e.edges))){for(var s=e,l=[],u=["nodes","edges"],c=0,h=u.length;c<h;c++){var d=u[c],f=s[d];if(array(f))for(var p=0,g=f.length;p<g;p++){var y=extend({group:d},f[p]);l.push(y)}}t=new Collection(r,l)}else{t=new Element$1(r,e).collection()}return t},remove:function(e){if(elementOrCollection(e));else if(string(e)){var t=e;e=this.$(t)}return e.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function generateCubicBezier(e,t,r,n){var i=4,o=.001,a=1e-7,s=10,l=11,u=1/(l-1),c="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var d=c?new Float32Array(l):new Array(l);function f(e,t){return 1-3*t+3*e}function p(e,t){return 3*t-6*e}function g(e){return 3*e}function y(e,t,r){return((f(t,r)*e+p(t,r))*e+g(t))*e}function v(e,t,r){return 3*f(t,r)*e*e+2*p(t,r)*e+g(t)}function m(t,n){for(var o=0;o<i;++o){var a=v(n,e,r);if(0===a)return n;n-=(y(n,e,r)-t)/a}return n}function b(){for(var t=0;t<l;++t)d[t]=y(t*u,e,r)}function $(t,n,i){var o,l,u=0;do{(o=y(l=n+(i-n)/2,e,r)-t)>0?i=l:n=l}while(Math.abs(o)>a&&++u<s);return l}function _(t){for(var n=0,i=1,a=l-1;i!==a&&d[i]<=t;++i)n+=u;--i;var s=n+(t-d[i])/(d[i+1]-d[i])*u,c=v(s,e,r);return c>=o?m(t,s):0===c?s:$(t,n,n+u)}var w=!1;function E(){w=!0,e===t&&r===n||b()}var x=function(i){return w||E(),e===t&&r===n?i:0===i?0:1===i?1:y(_(i),t,n)};x.getControlPoints=function(){return[{x:e,y:t},{x:r,y:n}]};var T="generateBezier("+[e,t,r,n]+")";return x.toString=function(){return T},x}
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var generateSpringRK4=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,n){var i={x:t.x+n.dx*r,v:t.v+n.dv*r,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function r(r,n){var i={dx:r.v,dv:e(r)},o=t(r,.5*n,i),a=t(r,.5*n,o),s=t(r,n,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return r.x=r.x+l*n,r.v=r.v+u*n,r}return function e(t,n,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0;for(t=parseFloat(t)||500,n=parseFloat(n)||20,i=i||null,l.tension=t,l.friction=n,a=(o=null!==i)?(c=e(t,n))/i*.016:.016;s=r(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(e){return u[e*(u.length-1)|0]}:c}}(),cubicBezier=function(e,t,r,n){var i=generateCubicBezier(e,t,r,n);return function(e,t,r){return e+(t-e)*i(r)}},easings={linear:function(e,t,r){return e+(t-e)*r},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function(e,t,r){if(0===r)return easings.linear;var n=generateSpringRK4(e,t,r);return function(e,t,r){return e+(t-e)*n(r)}},"cubic-bezier":cubicBezier};function getEasedValue(e,t,r,n,i){if(1===n)return r;if(t===r)return r;var o=i(t,r,n);return null==e||((e.roundValue||e.color)&&(o=Math.round(o)),void 0!==e.min&&(o=Math.max(o,e.min)),void 0!==e.max&&(o=Math.min(o,e.max))),o}function getValue$1(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function ease(e,t,r,n,i){var o=null!=i?i.type:null;r<0?r=0:r>1&&(r=1);var a=getValue$1(e,i),s=getValue$1(t,i);if(number(a)&&number(s))return getEasedValue(o,a,s,r,n);if(array(a)&&array(s)){for(var l=[],u=0;u<s.length;u++){var c=a[u],h=s[u];if(null!=c&&null!=h){var d=getEasedValue(o,c,h,r,n);l.push(d)}else l.push(h)}return l}}function step(e,t,r,n){var i=!n,o=e._private,a=t._private,s=a.easing,l=a.startTime,u=(n?e:e.cy()).style();if(!a.easingImpl)if(null==s)a.easingImpl=easings.linear;else{var c,h,d;if(string(s))c=u.parse("transition-timing-function",s).value;else c=s;string(c)?(h=c,d=[]):(h=c[1],d=c.slice(2).map((function(e){return+e}))),d.length>0?("spring"===h&&d.push(a.duration),a.easingImpl=easings[h].apply(null,d)):a.easingImpl=easings[h]}var f,p=a.easingImpl;if(f=0===a.duration?1:(r-l)/a.duration,a.applying&&(f=a.progress),f<0?f=0:f>1&&(f=1),null==a.delay){var g=a.startPosition,y=a.position;if(y&&i&&!e.locked()){var v={};valid(g.x,y.x)&&(v.x=ease(g.x,y.x,f,p)),valid(g.y,y.y)&&(v.y=ease(g.y,y.y,f,p)),e.position(v)}var m=a.startPan,b=a.pan,$=o.pan,_=null!=b&&n;_&&(valid(m.x,b.x)&&($.x=ease(m.x,b.x,f,p)),valid(m.y,b.y)&&($.y=ease(m.y,b.y,f,p)),e.emit("pan"));var w=a.startZoom,E=a.zoom,x=null!=E&&n;x&&(valid(w,E)&&(o.zoom=bound(o.minZoom,ease(w,E,f,p),o.maxZoom)),e.emit("zoom")),(_||x)&&e.emit("viewport");var T=a.style;if(T&&T.length>0&&i){for(var S=0;S<T.length;S++){var O=T[S],C=O.name,k=O,P=a.startStyle[C],A=ease(P,k,f,p,u.properties[P.name]);u.overrideBypass(e,C,A)}e.emit("style")}}return a.progress=f,f}function valid(e,t){return null!=e&&null!=t&&(!(!number(e)||!number(t))||!(!e||!t))}function startAnimation(e,t,r,n){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}function stepAll(e,t){var r=t._private.aniEles,n=[];function i(t,r){var i=t._private,o=i.animation.current,a=i.animation.queue,s=!1;if(!r&&"none"===t.pstyle("display").value){o=o.splice(0,o.length).concat(a.splice(0,a.length));for(var l=0;l<o.length;l++)o[l].stop()}if(0===o.length){var u=a.shift();u&&o.push(u)}for(var c=function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)},h=o.length-1;h>=0;h--){var d=o[h],f=d._private;f.stopped?(o.splice(h,1),f.hooked=!1,f.playing=!1,f.started=!1,c(f.frames)):(f.playing||f.applying)&&(f.playing&&f.applying&&(f.applying=!1),f.started||startAnimation(t,d,e),step(t,d,e,r),f.applying&&(f.applying=!1),c(f.frames),null!=f.step&&f.step(e),d.completed()&&(o.splice(h,1),f.hooked=!1,f.playing=!1,f.started=!1,c(f.completes)),s=!0)}return r||0!==o.length||0!==a.length||n.push(t),s}for(var o=!1,a=0;a<r.length;a++){var s=i(r[a]);o=o||s}var l=i(t,!0);(o||l)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(n),t.emit("step")}var corefn$1={animate:define$3.animate(),animation:define$3.animation(),animated:define$3.animated(),clearQueue:define$3.clearQueue(),delay:define$3.delay(),delayAnimation:define$3.delayAnimation(),stop:define$3.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender((function(t,r){stepAll(r,e)}),t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&requestAnimationFrame$1((function(r){stepAll(r,e),t()}))}()}}},emitterOptions$1={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&element(r.target)&&n.matches(r.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e}},argSelector$1=function(e){return string(e)?new Selector(e):e},elesfn$v={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Emitter(emitterOptions$1,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,r){return this.emitter().on(e,argSelector$1(t),r),this},removeListener:function(e,t,r){return this.emitter().removeListener(e,argSelector$1(t),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,r){return this.emitter().one(e,argSelector$1(t),r),this},once:function(e,t,r){return this.emitter().one(e,argSelector$1(t),r),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};define$3.eventAliasesOn(elesfn$v);var corefn$2={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};corefn$2.jpeg=corefn$2.jpg;var corefn$3={layout:function(e){if(null!=e)if(null!=e.name){var t=e.name,r=this.extension("layout",t);if(null!=r){var n;n=string(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$();var i=new r(extend({},e,{cy:this,eles:n}));return i}error("No such layout `"+t+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else error("A `name` must be specified to make a layout");else error("Layout options must be specified to make a layout")}};corefn$3.createLayout=corefn$3.makeLayout=corefn$3.layout;var corefn$4={notify:function(e,t){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var n=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();null!=t&&n.merge(t)}else if(r.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach((function(r){var n=e.batchNotifications[r];n.empty()?t.notify(r):t.notify(r,n)}))}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch((function(){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n],o=e[i];t.getElementById(i).data(o)}}))}},rendererDefaults=defaults({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),corefn$5={renderTo:function(e,t,r,n){return this._private.renderer.renderTo(e,t,r,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this.extension("renderer",e.name);if(null!=t){void 0!==e.wheelSensitivity&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=rendererDefaults(e);r.cy=this,this._private.renderer=new t(r),this.notify("init")}else error("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach((function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]}))},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};corefn$5.invalidateDimensions=corefn$5.resize;var corefn$6={collection:function(e,t){return string(e)?this.$(e):elementOrCollection(e)?e.collection():array(e)?new Collection(this,e,t):new Collection(this)},nodes:function(e){var t=this.$((function(e){return e.isNode()}));return e?t.filter(e):t},edges:function(e){var t=this.$((function(e){return e.isEdge()}));return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};corefn$6.elements=corefn$6.filter=corefn$6.$;var styfn={},TRUE="t",FALSE="f";styfn.apply=function(e){var t=this._private,r=t.cy.collection();t.newStyle&&(t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0));for(var n=0;n<e.length;n++){var i=e[n],o=this.getContextMeta(i);if(!o.empty){var a=this.getContextStyle(o),s=this.applyContextStyle(o,a,i);t.newStyle||this.updateTransitions(i,s.diffProps),this.updateStyleHints(i)&&r.merge(i)}}return t.newStyle=!1,r},styfn.getPropertiesDiff=function(e,t){var r=this._private.propDiffs=this._private.propDiffs||{},n=e+"-"+t,i=r[n];if(i)return i;for(var o=[],a={},s=0;s<this.length;s++){var l=this[s],u=e[s]===TRUE,c=t[s]===TRUE,h=u!==c,d=l.mappedProperties.length>0;if(h||c&&d){var f=void 0;h&&d||h?f=l.properties:d&&(f=l.mappedProperties);for(var p=0;p<f.length;p++){for(var g=f[p],y=g.name,v=!1,m=s+1;m<this.length;m++){var b=this[m];if(t[m]===TRUE&&(v=null!=b.properties[g.name]))break}a[y]||v||(a[y]=!0,o.push(y))}}}return r[n]=o,o},styfn.getContextMeta=function(e){var t,r="",n=e._private.styleCxtKey||"";this._private.newStyle&&(n="");for(var i=0;i<this.length;i++){var o=this[i];r+=o.selector&&o.selector.matches(e)?TRUE:FALSE}return t=this.getPropertiesDiff(n,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t,empty:0===t.length}},styfn.getContextStyle=function(e){var t=e.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var n={_private:{key:t}},i=0;i<this.length;i++){var o=this[i];if(t[i]===TRUE)for(var a=0;a<o.properties.length;a++){var s=o.properties[a];n[s.name]=s}}return r[t]=n,n},styfn.applyContextStyle=function(e,t,r){for(var n=e.diffPropNames,i={},o=this.types,a=0;a<n.length;a++){var s=n[a],l=t[s],u=r.pstyle(s);if(!l){if(!u)continue;l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(u!==l){if(l.mapped===o.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(r))===c.prevFnValue)continue}var h=i[s]={prev:u};this.applyParsedProperty(r,l),h.next=r.pstyle(s),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}},styfn.updateStyleHints=function(e){var t=e._private,r=this,n=r.propertyGroupNames,i=r.propertyGroupKeys,o=function(e,t,n){return r.getPropertiesHash(e,t,n)},a=t.styleKey;if(e.removed())return!1;var s="nodes"===t.group,l=e._private.style;n=Object.keys(l);for(var u=0;u<i.length;u++){var c=i[u];t.styleKeys[c]=0}for(var h=function(e,r){return t.styleKeys[r]=hashInt(e,t.styleKeys[r])},d=function(e,t){for(var r=0;r<e.length;r++)h(e.charCodeAt(r),t)},f=function(e){return-128<e&&e<128&&Math.floor(e)!==e?2e9-(1024*e|0):e},p=0;p<n.length;p++){var g=n[p],y=l[g];if(null!=y){var v=this.properties[g],m=v.type,b=v.groupKey,$=void 0;null!=v.hashOverride?$=v.hashOverride(e,y):null!=y.pfValue&&($=y.pfValue);var _=null==v.enums?y.value:null,w=null!=$,E=w||null!=_,x=y.units;if(m.number&&E){var T=w?$:_;if(m.multiple)for(var S=0;S<T.length;S++)h(f(T[S]),b);else h(f(T),b);w||null==x||d(x,b)}else d(y.strValue,b)}}for(var O=0,C=0;C<i.length;C++){var k=i[C],P=t.styleKeys[k];O=hashInt(P,O)}t.styleKey=O;var A=t.labelDimsKey=t.styleKeys.labelDimensions;if(t.labelKey=o(e,["label"],A),t.labelStyleKey=hashInt(t.styleKeys.commonLabel,t.labelKey),s||(t.sourceLabelKey=o(e,["source-label"],A),t.sourceLabelStyleKey=hashInt(t.styleKeys.commonLabel,t.sourceLabelKey),t.targetLabelKey=o(e,["target-label"],A),t.targetLabelStyleKey=hashInt(t.styleKeys.commonLabel,t.targetLabelKey)),s){var I=t.styleKeys,D=I.nodeBody,N=I.nodeBorder,M=I.backgroundImage,R=I.compound,L=I.pie;t.nodeKey=hashIntsArray([N,M,R,L],D),t.hasPie=0!=L}return a!==t.styleKey},styfn.clearStyleHints=function(e){var t=e._private;t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},styfn.applyParsedProperty=function(e,t){var r,n=this,i=t,o=e._private.style,a=n.types,s=n.properties[i.name].type,l=i.bypass,u=o[i.name],c=u&&u.bypass,h=e._private,d=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},f=function(){var t=d(u),r=d(i);n.checkTriggers(e,i.name,t,r)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",l)),i.delete)return o[i.name]=void 0,f(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,f(),!0):(f(),!0);if(i.deleteBypass)return u?!!u.bypass&&(o[i.name]=u.bypassed,f(),!0):(f(),!0);var p=function(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:for(var g,y=i.field.split("."),v=h.data,m=0;m<y.length&&v;m++){v=v[y[m]]}if(null==v)return p(),!1;if(!number(v))return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+v+"` for `"+e.id()+"` is non-numeric)"),!1;var b=i.fieldMax-i.fieldMin;if((g=0===b?0:(v-i.fieldMin)/b)<0?g=0:g>1&&(g=1),s.color){var $=i.valueMin[0],_=i.valueMax[0],w=i.valueMin[1],E=i.valueMax[1],x=i.valueMin[2],T=i.valueMax[2],S=null==i.valueMin[3]?1:i.valueMin[3],O=null==i.valueMax[3]?1:i.valueMax[3],C=[Math.round($+(_-$)*g),Math.round(w+(E-w)*g),Math.round(x+(T-x)*g),Math.round(S+(O-S)*g)];r={bypass:i.bypass,name:i.name,value:C,strValue:"rgb("+C[0]+", "+C[1]+", "+C[2]+")"}}else{if(!s.number)return!1;var k=i.valueMin+(i.valueMax-i.valueMin)*g;r=this.parse(i.name,k,i.bypass,"mapping")}if(!r)return p(),!1;r.mapping=i,i=r;break;case a.data:for(var P=i.field.split("."),A=h.data,I=0;I<P.length&&A;I++){A=A[P[I]]}if(null!=A&&(r=this.parse(i.name,A,i.bypass,"mapping")),!r)return p(),!1;r.mapping=i,i=r;break;case a.fn:var D=i.value,N=null!=i.fnValue?i.fnValue:D(e);if(i.prevFnValue=N,null==N)return warn("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(r=this.parse(i.name,N,i.bypass,"mapping")))return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+e.id()+"` is invalid)"),!1;r.mapping=copy(i),i=r;break;case void 0:break;default:return!1}return l?(i.bypassed=c?u.bypassed:u,o[i.name]=i):c?u.bypassed=i:o[i.name]=i,f(),!0},styfn.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),t)for(var i=n._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else n._private.style={}}},styfn.update=function(){this._private.cy.mutableElements().updateStyle()},styfn.updateTransitions=function(e,t){var r=this,n=e._private,i=e.pstyle("transition-property").value,o=e.pstyle("transition-duration").pfValue,a=e.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],h=e.pstyle(c),d=t[c];if(d){var f=d.prev,p=null!=d.next?d.next:h,g=!1,y=void 0;f&&(number(f.pfValue)&&number(p.pfValue)?(g=p.pfValue-f.pfValue,y=f.pfValue+1e-6*g):number(f.value)&&number(p.value)?(g=p.value-f.value,y=f.value+1e-6*g):array(f.value)&&array(p.value)&&(g=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],y=f.strValue),g&&(s[c]=p.strValue,this.applyBypass(e,c,y),l=!0))}}if(!l)return;n.transitioning=!0,new Promise$1((function(t){a>0?e.delayAnimation(a).play().promise().then(t):t()})).then((function(){return e.animation({style:s,duration:o,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){r.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1}))}else n.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1)},styfn.checkTrigger=function(e,t,r,n,i,o){var a=this.properties[t],s=i(a);null!=s&&s(r,n)&&o(a)},styfn.checkZOrderTrigger=function(e,t,r,n){var i=this;this.checkTrigger(e,t,r,n,(function(e){return e.triggersZOrder}),(function(){i._private.cy.notify("zorder",e)}))},styfn.checkBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,(function(e){return e.triggersBounds}),(function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),"bezier"!==e.pstyle("curve-style").value&&("curve-style"!==t||"bezier"!==r&&"bezier"!==n)||!i.triggersBoundsOfParallelBeziers||e.parallelEdges().forEach((function(e){e.isBundledBezier()&&e.dirtyBoundingBoxCache()}))}))},styfn.checkTriggers=function(e,t,r,n){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,n),this.checkBoundsTrigger(e,t,r,n)};var styfn$1={applyBypass:function(e,t,r,n){var i=[];if("*"===t||"**"===t){if(void 0!==r)for(var o=0;o<this.properties.length;o++){var a=this.properties[o].name,s=this.parse(a,r,!0);s&&i.push(s)}}else if(string(t)){var l=this.parse(t,r,!0);l&&i.push(l)}else{if(!plainObject(t))return!1;var u=t;n=r;for(var c=Object.keys(u),h=0;h<c.length;h++){var d=c[h],f=u[d];if(void 0===f&&(f=u[dash2camel(d)]),void 0!==f){var p=this.parse(d,f,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var g=!1,y=0;y<e.length;y++){for(var v=e[y],m={},b=void 0,$=0;$<i.length;$++){var _=i[$];if(n){var w=v.pstyle(_.name);b=m[_.name]={prev:w}}g=this.applyParsedProperty(v,_)||g,n&&(b.next=v.pstyle(_.name))}g&&this.updateStyleHints(v),n&&this.updateTransitions(v,m,!0)}return g},overrideBypass:function(e,t,r){t=camel2dash(t);for(var n=0;n<e.length;n++){var i=e[n],o=i._private.style[t],a=this.properties[t].type,s=a.color,l=a.mutiple,u=o?null!=o.pfValue?o.pfValue:o.value:null;o&&o.bypass?(o.value=r,null!=o.pfValue&&(o.pfValue=r),o.strValue=s?"rgb("+r.join(",")+")":l?r.join(" "):""+r,this.updateStyleHints(i)):this.applyBypass(i,t,r),this.checkTriggers(i,t,u,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var n=0;n<e.length;n++){for(var i=e[n],o={},a=0;a<t.length;a++){var s=t[a],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),h=o[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,!0)}}},styfn$2={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy.container();if(window$1&&t&&window$1.getComputedStyle)return window$1.getComputedStyle(t).getPropertyValue(e)}},styfn$3={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){if(e=e[0]){for(var r={},n=0;n<this.properties.length;n++){var i=this.properties[n],o=this.getStylePropertyValue(e,i.name,t);null!=o&&(r[i.name]=o,r[dash2camel(i.name)]=o)}return r}},getIndexedStyle:function(e,t,r,n){var i=e.pstyle(t)[r][n];return null!=i?i:e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var n=this.properties[t];n.alias&&(n=n.pointsTo);var i=n.type,o=e.pstyle(n.name);if(o){var a=o.value,s=o.units,l=o.strValue;if(r&&i.number&&null!=a&&number(a)){var u=e.cy().zoom(),c=function(e){return e*u},h=function(e,t){return c(e)+t},d=array(a);return(d?s.every((function(e){return null!=e})):null!=s)?d?a.map((function(e,t){return h(e,s[t])})).join(" "):h(a,s):d?a.map((function(e){return string(e)?e:""+c(e)})).join(" "):""+c(a)}if(null!=l)return l}return null}},getAnimationStartStyle:function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n].name,o=e.pstyle(i);void 0!==o&&(o=plainObject(o)?this.parse(i,o.strValue):this.parse(i,o)),o&&(r[i]=o)}return r},getPropsList:function(e){var t=[],r=e,n=this.properties;if(r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a],l=n[a]||n[camel2dash(a)],u=this.parse(l.name,s);u&&t.push(u)}return t},getNonDefaultPropertiesHash:function(e,t,r){var n,i,o,a,s,l,u=r;for(s=0;s<t.length;s++)if(n=t[s],null!=(i=e.pstyle(n,!1)))if(null!=i.pfValue)u=hashInt(a,u);else for(o=i.strValue,l=0;l<o.length;l++)a=o.charCodeAt(l),u=hashInt(a,u);return u}};styfn$3.getPropertiesHash=styfn$3.getNonDefaultPropertiesHash;var styfn$4={appendFromJson:function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r.selector,i=r.style||r.css,o=Object.keys(i);this.selector(n);for(var a=0;a<o.length;a++){var s=o[a],l=i[s];this.css(s,l)}}return this},fromJson:function(e){return this.resetToDefault(),this.appendFromJson(e),this},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],n=r.selector,i=r.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}e.push({selector:n?n.toString():"core",style:o})}return e}},styfn$5={appendFromString:function(e){var t,r,n,i=""+e;function o(){i=i.length>t.length?i.substr(t.length):""}function a(){r=r.length>n.length?r.substr(n.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(i.match(/^\s*$/))break;var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}t=s[0];var l=s[1];if("core"!==l)if(new Selector(l).invalid){warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),o();continue}var u=s[2],c=!1;r=u;for(var h=[];;){if(r.match(/^\s*$/))break;var d=r.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!d){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}n=d[0];var f=d[1],p=d[2];if(this.properties[f])this.parse(f,p)?(h.push({name:f,val:p}),a()):(warn("Skipping property: Invalid property definition in: "+n),a());else warn("Skipping property: Invalid property name in: "+n),a()}if(c){o();break}this.selector(l);for(var g=0;g<h.length;g++){var y=h[g];this.css(y.name,y.val)}o()}return this},fromString:function(e){return this.resetToDefault(),this.appendFromString(e),this}},styfn$6={};!function(){var e=number$1,t=rgbaNoBackRefs,r=hslaNoBackRefs,n=hex3,i=hex6,o=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(o){var a=e+"|\\w+|"+t+"|"+r+"|"+n+"|"+i;return"^"+o+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+a+")\\s*\\,\\s*("+a+")\\)$"},s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];styfn$6.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return string(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var l={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function(e,t){return e!=t}},u=styfn$6.types,c=[{name:"label",type:u.text,triggersBounds:l.any},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],h=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],f=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],p=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],g=[{name:"events",type:u.bool},{name:"text-events",type:u.bool}],y=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.nonNegativeInt,triggersZOrder:l.any}],v=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero}],m=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],b=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},$=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:b},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:b},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],_=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle}],w=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],E=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],x=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],T=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],S=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],O=[];styfn$6.pieBackgroundN=16,O.push({name:"pie-size",type:u.sizeMaybePercent});for(var C=1;C<=styfn$6.pieBackgroundN;C++)O.push({name:"pie-"+C+"-background-color",type:u.color}),O.push({name:"pie-"+C+"-background-size",type:u.percent}),O.push({name:"pie-"+C+"-background-opacity",type:u.zeroOneNumber});var k=[],P=styfn$6.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill}].forEach((function(e){P.forEach((function(t){var r=t+"-"+e.name,n=e.type,i=e.triggersBounds;k.push({name:r,type:n,triggersBounds:i})}))}),{});var A=styfn$6.properties=[].concat(g,m,y,v,T,p,f,c,h,d,$,_,w,O,E,x,k,S),I=styfn$6.propertyGroups={behavior:g,transition:m,visibility:y,overlay:v,ghost:T,commonLabel:p,labelDimensions:f,mainLabel:c,sourceLabel:h,targetLabel:d,nodeBody:$,nodeBorder:_,backgroundImage:w,pie:O,compound:E,edgeLine:x,edgeArrow:k,core:S},D=styfn$6.propertyGroupNames={};(styfn$6.propertyGroupKeys=Object.keys(I)).forEach((function(e){D[e]=I[e].map((function(e){return e.name})),I[e].forEach((function(t){return t.groupKey=e}))}));var N=styfn$6.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$6.propertyNames=A.map((function(e){return e.name}));for(var M=0;M<A.length;M++){var R=A[M];A[R.name]=R}for(var L=0;L<N.length;L++){var j=N[L],F=A[j.pointsTo],B={name:j.name,alias:!0,pointsTo:F};A.push(B),A[j.name]=B}}(),styfn$6.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},styfn$6.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(e,t){for(var r=1;r<=styfn$6.pieBackgroundN;r++){var n=t.name.replace("{{i}}",r),i=t.value;e[n]=i}return e}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce((function(e,t){return styfn$6.arrowPrefixes.forEach((function(r){var n=r+"-"+t.name,i=t.value;e[n]=i})),e}),{})),r={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var o=i.name,a=t[o],s=this.parse(o,a);r[o]=s}}return e.defaultProperties=r,e.defaultProperties},styfn$6.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var styfn$7={parse:function(e,t,r,n){if(fn(t))return this.parseImplWarn(e,t,r,n);var i,o=hashStrings(e,""+t,r?"t":"f","mapping"===n||!0===n||!1===n||null==n?"dontcare":n),a=this.propCache=this.propCache||[];return(i=a[o])||(i=a[o]=this.parseImplWarn(e,t,r,n)),(r||"mapping"===n)&&(i=copy(i))&&(i.value=copy(i.value)),i},parseImplWarn:function(e,t,r,n){var i=this.parseImpl(e,t,r,n);return i||null==t||warn("The style property `".concat(e,": ").concat(t,"` is invalid")),i},parseImpl:function(e,t,r,n){e=camel2dash(e);var i=this.properties[e],o=t,a=this.types;if(!i)return null;if(void 0===t)return null;i.alias&&(i=i.pointsTo,e=i.name);var s=string(t);s&&(t=t.trim());var l,u,c=i.type;if(!c)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(fn(t))return{name:e,value:t,strValue:"fn",mapped:a.fn,bypass:r};if(!s||n||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(l=new RegExp(a.data.regex).exec(t))){if(r)return!1;var h=a.data;return{name:e,value:l,strValue:""+t,mapped:h,field:l[1],bypass:r}}if(t.length>=10&&"m"===t[0]&&(u=new RegExp(a.mapData.regex).exec(t))){if(r)return!1;if(c.multiple)return!1;var d=a.mapData;if(!c.color&&!c.number)return!1;var f=this.parse(e,u[4]);if(!f||f.mapped)return!1;var p=this.parse(e,u[5]);if(!p||p.mapped)return!1;if(f.pfValue===p.pfValue||f.strValue===p.strValue)return warn("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+f.strValue+"`"),this.parse(e,f.strValue);if(c.color){var g=f.value,y=p.value;if(!(g[0]!==y[0]||g[1]!==y[1]||g[2]!==y[2]||g[3]!==y[3]&&(null!=g[3]&&1!==g[3]||null!=y[3]&&1!==y[3])))return!1}return{name:e,value:u,strValue:""+t,mapped:d,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:f.value,valueMax:p.value,bypass:r}}}if(c.multiple&&"multiple"!==n){var v;if(v=s?t.split(/\s+/):array(t)?t:[t],c.evenMultiple&&v.length%2!=0)return null;for(var m=[],b=[],$=[],_="",w=!1,E=0;E<v.length;E++){var x=this.parse(e,v[E],r,"multiple");w=w||string(x.value),m.push(x.value),$.push(null!=x.pfValue?x.pfValue:x.value),b.push(x.units),_+=(E>0?" ":"")+x.strValue}return c.validate&&!c.validate(m,b)?null:c.singleEnum&&w?1===m.length&&string(m[0])?{name:e,value:m[0],strValue:m[0],bypass:r}:null:{name:e,value:m,pfValue:$,strValue:_,bypass:r,units:b}}var T=function(){for(var n=0;n<c.enums.length;n++){if(c.enums[n]===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null};if(c.number){var S,O="px";if(c.units&&(S=c.units),c.implicitUnits&&(O=c.implicitUnits),!c.unitless)if(s){var C="px|em"+(c.allowPercent?"|\\%":"");S&&(C=S);var k=t.match("^("+number$1+")("+C+")?$");k&&(t=k[1],S=k[2]||O)}else S&&!c.implicitUnits||(S=O);if(t=parseFloat(t),isNaN(t)&&void 0===c.enums)return null;if(isNaN(t)&&void 0!==c.enums)return t=o,T();if(c.integer&&!integer(t))return null;if(void 0!==c.min&&(t<c.min||c.strictMin&&t===c.min)||void 0!==c.max&&(t>c.max||c.strictMax&&t===c.max))return null;var P={name:e,value:t,strValue:""+t+(S||""),units:S,bypass:r};return c.unitless||"px"!==S&&"em"!==S?P.pfValue=t:P.pfValue="px"!==S&&S?this.getEmSizeInPixels()*t:t,"ms"!==S&&"s"!==S||(P.pfValue="ms"===S?t:1e3*t),"deg"!==S&&"rad"!==S||(P.pfValue="rad"===S?t:deg2rad(t)),"%"===S&&(P.pfValue=t/100),P}if(c.propList){var A=[],I=""+t;if("none"===I);else{for(var D=I.split(/\s*,\s*|\s+/),N=0;N<D.length;N++){var M=D[N].trim();this.properties[M]?A.push(M):warn("`"+M+"` is not a valid property name")}if(0===A.length)return null}return{name:e,value:A,strValue:0===A.length?"none":A.join(" "),bypass:r}}if(c.color){var R=color2tuple(t);return R?{name:e,value:R,pfValue:R,strValue:"rgb("+R[0]+","+R[1]+","+R[2]+")",bypass:r}:null}if(c.regex||c.regexes){if(c.enums){var L=T();if(L)return L}for(var j=c.regexes?c.regexes:[c.regex],F=0;F<j.length;F++){var B=new RegExp(j[F]).exec(t);if(B)return{name:e,value:c.singleRegexMatchValue?B[1]:B,strValue:""+t,bypass:r}}return null}return c.string?{name:e,value:""+t,strValue:""+t,bypass:r}:c.enums?T():null}},Style=function e(t){if(!(this instanceof e))return new e(t);core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):error("A style must have a core reference")},styfn$8=Style.prototype;styfn$8.instanceString=function(){return"style"},styfn$8.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},styfn$8.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},styfn$8.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},styfn$8.selector=function(e){var t="core"===e?null:new Selector(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},styfn$8.css=function(){var e=this,t=arguments;if(1===t.length)for(var r=t[0],n=0;n<e.properties.length;n++){var i=e.properties[n],o=r[i.name];void 0===o&&(o=r[dash2camel(i.name)]),void 0!==o&&this.cssRule(i.name,o)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},styfn$8.style=styfn$8.css,styfn$8.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r),!this[n].selector&&(this._private.coreStyle[r.name]=r)}return this},styfn$8.append=function(e){return stylesheet(e)?e.appendToStyle(this):array(e)?this.appendFromJson(e):string(e)&&this.appendFromString(e),this},Style.fromJson=function(e,t){var r=new Style(e);return r.fromJson(t),r},Style.fromString=function(e,t){return new Style(e).fromString(t)},[styfn,styfn$1,styfn$2,styfn$3,styfn$4,styfn$5,styfn$6,styfn$7].forEach((function(e){extend(styfn$8,e)})),Style.types=styfn$8.types,Style.properties=styfn$8.properties,Style.propertyGroups=styfn$8.propertyGroups,Style.propertyGroupNames=styfn$8.propertyGroupNames,Style.propertyGroupKeys=styfn$8.propertyGroupKeys;var corefn$7={style:function(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function(e){var t=this._private;return stylesheet(e)?t.style=e.generateStyle(this):array(e)?t.style=Style.fromJson(this,e):string(e)?t.style=Style.fromString(this,e):t.style=Style(this),t.style}},defaultSelectionType="single",corefn$8={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType=defaultSelectionType),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,r,n,i,o=arguments,a=this._private.pan;switch(o.length){case 0:return a;case 1:if(string(o[0]))return a[e=o[0]];if(plainObject(o[0])){if(!this._private.panningEnabled)return this;n=(r=o[0]).x,i=r.y,number(n)&&(a.x=n),number(i)&&(a.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=o[0],t=o[1],"x"!==e&&"y"!==e||!number(t)||(a[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var r,n,i,o,a,s=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:plainObject(e)&&(o=(i=s[0]).x,a=i.y,number(o)&&(l.x+=o),number(a)&&(l.y+=a),this.emit("pan viewport"));break;case 2:n=t,"x"!==(r=e)&&"y"!==r||!number(n)||(l[r]+=n),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,t){var r=this.getFitViewport(e,t);if(r){var n=this._private;n.zoom=r.zoom,n.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(number(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(string(e)){var n=e;e=this.$(n)}else if(boundingBox(e)){var i=e;(r={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else elementOrCollection(e)||(e=this.mutableElements());if(!elementOrCollection(e)||!e.empty()){r=r||e.boundingBox();var o,a=this.width(),s=this.height();if(t=number(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0)return{zoom:o=(o=(o=Math.min((a-2*t)/r.w,(s-2*t)/r.h))>this._private.maxZoom?this._private.maxZoom:o)<this._private.minZoom?this._private.minZoom:o,pan:{x:(a-o*(r.x1+r.x2))/2,y:(s-o*(r.y1+r.y2))/2}}}}},zoomRange:function(e,t){var r=this._private;if(null==t){var n=e;e=n.min,t=n.max}return number(e)&&number(t)&&e<=t?(r.minZoom=e,r.maxZoom=t):number(e)&&void 0===t&&e<=r.maxZoom?r.minZoom=e:number(t)&&void 0===e&&t>=r.minZoom&&(r.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,r,n=this._private,i=n.pan,o=n.zoom,a=!1;if(n.zoomingEnabled||(a=!0),number(e)?r=e:plainObject(e)&&(r=e.level,null!=e.position?t=modelToRenderedPosition(e.position,o,i):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||n.panningEnabled||(a=!0)),r=(r=r>n.maxZoom?n.maxZoom:r)<n.minZoom?n.minZoom:r,a||!number(r)||r===o||null!=t&&(!number(t.x)||!number(t.y)))return null;if(null!=t){var s=i,l=o,u=r;return{zoomed:!0,panned:!0,zoom:u,pan:{x:-u/l*(t.x-s.x)+t.x,y:-u/l*(t.y-s.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:r,pan:i}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),r=this._private;return null!=t&&t.zoomed?(r.zoom=t.zoom,t.panned&&(r.pan.x=t.pan.x,r.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,r=!0,n=!0,i=[],o=!1,a=!1;if(!e)return this;if(number(e.zoom)||(r=!1),plainObject(e.pan)||(n=!1),!r&&!n)return this;if(r){var s=e.zoom;s<t.minZoom||s>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=s,i.push("zoom"))}if(n&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;number(l.x)&&(t.pan.x=l.x,a=!1),number(l.y)&&(t.pan.y=l.y,a=!1),a||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(string(e)){var r=e;e=this.mutableElements().filter(r)}else elementOrCollection(e)||(e=this.mutableElements());if(0!==e.length){var n=e.boundingBox(),i=this.width(),o=this.height();return{x:(i-(t=void 0===t?this._private.zoom:t)*(n.x1+n.x2))/2,y:(o-t*(n.y1+n.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,r=this._private,n=r.container;return r.sizeCache=r.sizeCache||(n?(e=window$1.getComputedStyle(n),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:n.clientWidth-t("padding-left")-t("padding-right"),height:n.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}};corefn$8.centre=corefn$8.center,corefn$8.autolockNodes=corefn$8.autolock,corefn$8.autoungrabifyNodes=corefn$8.autoungrabify;var fn$6={data:define$3.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:define$3.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:define$3.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:define$3.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})};fn$6.attr=fn$6.data,fn$6.removeAttr=fn$6.removeData;var Core=function(e){var t=this,r=(e=extend({},e)).container;r&&!htmlElement(r)&&htmlElement(r[0])&&(r=r[0]);var n=r?r._cyreg:null;(n=n||{})&&n.cy&&(n.cy.destroy(),n={});var i=n.readies=n.readies||[];r&&(r._cyreg=n),n.cy=t;var o=void 0!==window$1&&void 0!==r&&!e.headless,a=e;a.layout=extend({name:o?"grid":"null"},a.layout),a.renderer=extend({name:o?"canvas":"null"},a.renderer);var s=function(e,t,r){return void 0!==t?t:void 0!==r?r:e},l=this._private={container:r,ready:!1,options:a,elements:new Collection(this),listeners:[],aniEles:new Collection(this),data:{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,a.zoomingEnabled),userZoomingEnabled:s(!0,a.userZoomingEnabled),panningEnabled:s(!0,a.panningEnabled),userPanningEnabled:s(!0,a.userPanningEnabled),boxSelectionEnabled:s(!0,a.boxSelectionEnabled),autolock:s(!1,a.autolock,a.autolockNodes),autoungrabify:s(!1,a.autoungrabify,a.autoungrabifyNodes),autounselectify:s(!1,a.autounselectify),styleEnabled:void 0===a.styleEnabled?o:a.styleEnabled,zoom:number(a.zoom)?a.zoom:1,pan:{x:plainObject(a.pan)&&number(a.pan.x)?a.pan.x:0,y:plainObject(a.pan)&&number(a.pan.y)?a.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(a.selectionType),this.zoomRange({min:a.minZoom,max:a.maxZoom});l.styleEnabled&&t.setStyle([]);var u=extend({},a,a.renderer);t.initRenderer(u);!function(e,t){if(e.some(promise))return Promise$1.all(e).then(t);t(e)}([a.style,a.elements],(function(e){var r=e[0],o=e[1];l.styleEnabled&&t.style().append(r),function(e,r,n){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&(plainObject(e)||array(e))&&t.add(e),t.one("layoutready",(function(e){t.notifications(!0),t.emit(e),t.one("load",r),t.emitAndNotify("load")})).one("layoutstop",(function(){t.one("done",n),t.emit("done")}));var o=extend({},t._private.options.layout);o.eles=t.elements(),t.layout(o).run()}(o,(function(){t.startAnimationLoop(),l.ready=!0,fn(a.ready)&&t.on("ready",a.ready);for(var e=0;e<i.length;e++){var r=i[e];t.on("ready",r)}n&&(n.readies=[]),t.emit("ready")}),a.done)}))},corefn$9=Core.prototype;extend(corefn$9,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(null!=e){var t=this,r=t._private,n=r.options;return!htmlElement(e)&&htmlElement(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),r.container=e,r.styleEnabled=!0,t.invalidateSize(),t.initRenderer(extend({},n,n.renderer,{name:"null"===n.renderer.name?"canvas":n.renderer.name})),t.startAnimationLoop(),t.style(n.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return copy(this._private.options)},json:function(e){var t=this,r=t._private,n=t.mutableElements();if(plainObject(e)){if(t.startBatch(),e.elements){var i={},o=function(e,r){for(var n=[],o=[],a=0;a<e.length;a++){var s=e[a],l=""+s.data.id,u=t.getElementById(l);i[l]=!0,0!==u.length?o.push({ele:u,json:s}):r?(s.group=r,n.push(s)):n.push(s)}t.add(n);for(var c=0;c<o.length;c++){var h=o[c],d=h.ele,f=h.json;d.json(f)}};if(array(e.elements))o(e.elements);else for(var a=["nodes","edges"],s=0;s<a.length;s++){var l=a[s],u=e.elements[l];array(u)&&o(u,l)}var c=t.collection();n.filter((function(e){return!i[e.id()]})).forEach((function(e){e.isParent()?c.merge(e):e.remove()})),c.forEach((function(e){return e.children().move({parent:null})})),c.forEach((function(e){return function(e){return t.getElementById(e.id())}(e).remove()}))}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==r.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===r.pan.x&&e.pan.y===r.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],d=0;d<h.length;d++){var f=h[d];null!=e[f]&&t[f](e[f])}return t.endBatch(),this}var p={};!!e?p.elements=this.elements().map((function(e){return e.json()})):(p.elements={},n.forEach((function(e){var t=e.group();p.elements[t]||(p.elements[t]=[]),p.elements[t].push(e.json())}))),this._private.styleEnabled&&(p.style=t.style().json()),p.data=copy(t.data());var g=r.options;return p.zoomingEnabled=r.zoomingEnabled,p.userZoomingEnabled=r.userZoomingEnabled,p.zoom=r.zoom,p.minZoom=r.minZoom,p.maxZoom=r.maxZoom,p.panningEnabled=r.panningEnabled,p.userPanningEnabled=r.userPanningEnabled,p.pan=copy(r.pan),p.boxSelectionEnabled=r.boxSelectionEnabled,p.renderer=copy(g.renderer),p.hideEdgesOnViewport=g.hideEdgesOnViewport,p.textureOnViewport=g.textureOnViewport,p.wheelSensitivity=g.wheelSensitivity,p.motionBlur=g.motionBlur,p}}),corefn$9.$id=corefn$9.getElementById,[corefn,corefn$1,elesfn$v,corefn$2,corefn$3,corefn$4,corefn$5,corefn$6,corefn$7,corefn$8,fn$6].forEach((function(e){extend(corefn$9,e)}));var defaults$9={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},getInfo=function(e){return e.scratch("breadthfirst")},setInfo=function(e,t){return e.scratch("breadthfirst",t)};function BreadthFirstLayout(e){this.options=extend({},defaults$9,e)}BreadthFirstLayout.prototype.run=function(){var e,t=this.options,r=t,n=t.cy,i=r.eles,o=i.nodes().filter((function(e){return!e.isParent()})),a=i,s=r.directed,l=r.maximal||r.maximalAdjustments>0,u=makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(elementOrCollection(r.roots))e=r.roots;else if(array(r.roots)){for(var c=[],h=0;h<r.roots.length;h++){var d=r.roots[h],f=n.getElementById(d);c.push(f)}e=n.collection(c)}else if(string(r.roots))e=n.$(r.roots);else if(s)e=o.roots();else{var p=i.components();e=n.collection();for(var g=function(t){var r=p[t],n=r.maxDegree(!1),i=r.filter((function(e){return e.degree(!1)===n}));e=e.add(i)},y=0;y<p.length;y++)g(y)}var v=[],m={},b=function(e,t){null==v[t]&&(v[t]=[]);var r=v[t].length;v[t].push(e),setInfo(e,{index:r,depth:t})};a.bfs({roots:e,directed:r.directed,visit:function(e,t,r,n,i){var o=e[0],a=o.id();b(o,i),m[a]=!0}});for(var $=[],_=0;_<o.length;_++){var w=o[_];m[w.id()]||$.push(w)}var E=function(e){for(var t=v[e],r=0;r<t.length;r++){var n=t[r];null!=n?setInfo(n,{depth:e,index:r}):(t.splice(r,1),r--)}},x=function(){for(var e=0;e<v.length;e++)E(e)},T=function(e,t){for(var r=getInfo(e),n=e.incomers().filter((function(e){return e.isNode()&&i.has(e)})),o=-1,a=e.id(),s=0;s<n.length;s++){var l=n[s],u=getInfo(l);o=Math.max(o,u.depth)}return r.depth<=o&&(t[a]?null:(function(e,t){var r=getInfo(e),n=r.depth,i=r.index;v[n][i]=null,b(e,t)}(e,o+1),t[a]=!0,!0))};if(s&&l){var S=[],O={},C=function(e){return S.push(e)};for(o.forEach((function(e){return S.push(e)}));S.length>0;){var k=S.shift(),P=T(k,O);if(P)k.outgoers().filter((function(e){return e.isNode()&&i.has(e)})).forEach(C);else if(null===P){warn("Detected double maximal shift for node `"+k.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}x();var A=0;if(r.avoidOverlap)for(var I=0;I<o.length;I++){var D=o[I].layoutDimensions(r),N=D.w,M=D.h;A=Math.max(A,N,M)}for(var R={},L=function(e){if(R[e.id()])return R[e.id()];for(var t=getInfo(e).depth,r=e.neighborhood(),n=0,i=0,a=0;a<r.length;a++){var s=r[a];if(!s.isEdge()&&!s.isParent()&&o.has(s)){var l=getInfo(s),u=l.index,c=l.depth;if(null!=u&&null!=c){var h=v[c].length;c<t&&(n+=u/h,i++)}}}return n/=i=Math.max(1,i),0===i&&(n=0),R[e.id()]=n,n},j=function(e,t){var r=L(e)-L(t);return 0===r?ascending(e.id(),t.id()):r},F=0;F<v.length;F++)v[F].sort(j),E(F);for(var B=[],z=0;z<$.length;z++)B.push($[z]);v.unshift(B),x();for(var G=0,U=0;U<v.length;U++)G=Math.max(v[U].length,G);var H=u.x1+u.w/2,V=u.x1+u.h/2,Y=v.reduce((function(e,t){return Math.max(e,t.length)}),0);return o.layoutPositions(this,r,(function(e){var t=getInfo(e),n=t.depth,i=t.index,o=v[n].length,a=Math.max(u.w/((r.grid?Y:o)+1),A),s=Math.max(u.h/(v.length+1),A),l=Math.min(u.w/2/v.length,u.h/2/v.length);if(l=Math.max(l,A),r.circle){var c=l*n+l-(v.length>0&&v[0].length<=3?l/2:0),h=2*Math.PI/v[n].length*i;return 0===n&&1===v[0].length&&(c=1),{x:H+c*Math.cos(h),y:V+c*Math.sin(h)}}return{x:H+(i+1-(o+1)/2)*a,y:(n+1)*s}})),this};var defaults$a={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function CircleLayout(e){this.options=extend({},defaults$a,e)}CircleLayout.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,o=n.nodes().not(":parent");t.sort&&(o=o.sort(t.sort));for(var a,s=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l=s.x1+s.w/2,u=s.y1+s.h/2,c=(void 0===t.sweep?2*Math.PI-2*Math.PI/o.length:t.sweep)/Math.max(1,o.length-1),h=0,d=0;d<o.length;d++){var f=o[d].layoutDimensions(t),p=f.w,g=f.h;h=Math.max(h,p,g)}if(a=number(t.radius)?t.radius:o.length<=1?0:Math.min(s.h,s.w)/2-h,o.length>1&&t.avoidOverlap){h*=1.75;var y=Math.cos(c)-Math.cos(0),v=Math.sin(c)-Math.sin(0),m=Math.sqrt(h*h/(y*y+v*v));a=Math.max(m,a)}return o.layoutPositions(this,t,(function(e,r){var n=t.startAngle+r*c*(i?1:-1),o=a*Math.cos(n),s=a*Math.sin(n);return{x:l+o,y:u+s}})),this};var defaults$b={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},DEBUG;function ConcentricLayout(e){this.options=extend({},defaults$b,e)}ConcentricLayout.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,n=e.cy,i=t.eles.nodes().not(":parent"),o=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),a=o.x1+o.w/2,s=o.y1+o.h/2,l=[],u=0,c=0;c<i.length;c++){var h,d=i[c];h=t.concentric(d),l.push({value:h,node:d}),d._private.scratch.concentric=h}i.updateStyle();for(var f=0;f<i.length;f++){var p=i[f].layoutDimensions(t);u=Math.max(u,p.w,p.h)}l.sort((function(e,t){return t.value-e.value}));for(var g=t.levelWidth(i),y=[[]],v=y[0],m=0;m<l.length;m++){var b=l[m];if(v.length>0)Math.abs(v[0].value-b.value)>=g&&(v=[],y.push(v));v.push(b)}var $=u+t.minNodeSpacing;if(!t.avoidOverlap){var _=y.length>0&&y[0].length>1,w=(Math.min(o.w,o.h)/2-$)/(y.length+_?1:0);$=Math.min($,w)}for(var E=0,x=0;x<y.length;x++){var T=y[x],S=void 0===t.sweep?2*Math.PI-2*Math.PI/T.length:t.sweep,O=T.dTheta=S/Math.max(1,T.length-1);if(T.length>1&&t.avoidOverlap){var C=Math.cos(O)-Math.cos(0),k=Math.sin(O)-Math.sin(0),P=Math.sqrt($*$/(C*C+k*k));E=Math.max(P,E)}T.r=E,E+=$}if(t.equidistant){for(var A=0,I=0,D=0;D<y.length;D++){var N=y[D].r-I;A=Math.max(A,N)}I=0;for(var M=0;M<y.length;M++){var R=y[M];0===M&&(I=R.r),R.r=I,I+=A}}for(var L={},j=0;j<y.length;j++)for(var F=y[j],B=F.dTheta,z=F.r,G=0;G<F.length;G++){var U=F[G],H=t.startAngle+(r?1:-1)*B*G,V={x:a+z*Math.cos(H),y:s+z*Math.sin(H)};L[U.node.id()]=V}return i.layoutPositions(this,t,(function(e){var t=e.id();return L[t]})),this};var defaults$c={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(e){this.options=extend({},defaults$c,e),this.options.layout=this}CoseLayout.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,!0!==e.animate&&!1!==e.animate||r.emit({type:"layoutstart",layout:r}),DEBUG=!0===e.debug;var n=createLayoutInfo(t,r,e);DEBUG&&printLayoutInfo(n),e.randomize&&randomizePositions(n);var i=performanceNow(),o=function(){refreshPositions(n,t,e),!0===e.fit&&t.fit(e.padding)},a=function(t){return!(r.stopped||t>=e.numIter)&&(step$1(n,e),n.temperature=n.temperature*e.coolingFactor,!(n.temperature<e.minTemp))},s=function(){if(!0===e.animate||!1===e.animate)o(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var t=e.eles.nodes(),i=getScaleInBoundsFn(n,e,t);t.layoutPositions(r,e,i)}},l=0,u=!0;if(!0===e.animate){!function t(){for(var r=0;u&&r<e.refresh;)u=a(l),l++,r++;u?(performanceNow()-i>=e.animationThreshold&&o(),requestAnimationFrame$1(t)):(separateComponents(n,e),s())}()}else{for(;u;)u=a(l),l++;separateComponents(n,e),s()}return this},CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var createLayoutInfo=function(e,t,r){for(var n=r.eles.edges(),i=r.eles.nodes(),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:r.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},a=r.eles.components(),s={},l=0;l<a.length;l++)for(var u=a[l],c=0;c<u.length;c++){s[u[c].id()]=l}for(l=0;l<o.nodeSize;l++){var h=(y=i[l]).layoutDimensions(r);(I={}).isLocked=y.locked(),I.id=y.data("id"),I.parentId=y.data("parent"),I.cmptId=s[y.id()],I.children=[],I.positionX=y.position("x"),I.positionY=y.position("y"),I.offsetX=0,I.offsetY=0,I.height=h.w,I.width=h.h,I.maxX=I.positionX+I.width/2,I.minX=I.positionX-I.width/2,I.maxY=I.positionY+I.height/2,I.minY=I.positionY-I.height/2,I.padLeft=parseFloat(y.style("padding")),I.padRight=parseFloat(y.style("padding")),I.padTop=parseFloat(y.style("padding")),I.padBottom=parseFloat(y.style("padding")),I.nodeRepulsion=fn(r.nodeRepulsion)?r.nodeRepulsion(y):r.nodeRepulsion,o.layoutNodes.push(I),o.idToIndex[I.id]=l}var d=[],f=0,p=-1,g=[];for(l=0;l<o.nodeSize;l++){var y,v=(y=o.layoutNodes[l]).parentId;null!=v?o.layoutNodes[o.idToIndex[v]].children.push(y.id):(d[++p]=y.id,g.push(y.id))}for(o.graphSet.push(g);f<=p;){var m=d[f++],b=o.idToIndex[m],$=o.layoutNodes[b].children;if($.length>0){o.graphSet.push($);for(l=0;l<$.length;l++)d[++p]=$[l]}}for(l=0;l<o.graphSet.length;l++){var _=o.graphSet[l];for(c=0;c<_.length;c++){var w=o.idToIndex[_[c]];o.indexToGraph[w]=l}}for(l=0;l<o.edgeSize;l++){var E=n[l],x={};x.id=E.data("id"),x.sourceId=E.data("source"),x.targetId=E.data("target");var T=fn(r.idealEdgeLength)?r.idealEdgeLength(E):r.idealEdgeLength,S=fn(r.edgeElasticity)?r.edgeElasticity(E):r.edgeElasticity,O=o.idToIndex[x.sourceId],C=o.idToIndex[x.targetId];if(o.indexToGraph[O]!=o.indexToGraph[C]){for(var k=findLCA(x.sourceId,x.targetId,o),P=o.graphSet[k],A=0,I=o.layoutNodes[O];-1===P.indexOf(I.id);)I=o.layoutNodes[o.idToIndex[I.parentId]],A++;for(I=o.layoutNodes[C];-1===P.indexOf(I.id);)I=o.layoutNodes[o.idToIndex[I.parentId]],A++;T*=A*r.nestingFactor}x.idealLength=T,x.elasticity=S,o.layoutEdges.push(x)}return o},findLCA=function(e,t,r){var n=findLCA_aux(e,t,0,r);return 2>n.count?0:n.graph},findLCA_aux=function e(t,r,n,i){var o=i.graphSet[n];if(-1<o.indexOf(t)&&-1<o.indexOf(r))return{count:2,graph:n};for(var a=0,s=0;s<o.length;s++){var l=o[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(0!==c.length){var h=e(t,r,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==h.count){if(1!==h.count)return h;if(2===++a)break}}}return{count:a,graph:n}},printLayoutInfo,randomizePositions=function(e,t){for(var r=e.clientWidth,n=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*r,o.positionY=Math.random()*n)}},getScaleInBoundsFn=function(e,t,r){var n=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(r.forEach((function(t){var r=e.layoutNodes[e.idToIndex[t.data("id")]];i.x1=Math.min(i.x1,r.positionX),i.x2=Math.max(i.x2,r.positionX),i.y1=Math.min(i.y1,r.positionY),i.y2=Math.max(i.y2,r.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(r,o){var a=e.layoutNodes[e.idToIndex[r.data("id")]];if(t.boundingBox){var s=(a.positionX-i.x1)/i.w,l=(a.positionY-i.y1)/i.h;return{x:n.x1+s*n.w,y:n.y1+l*n.h}}return{x:a.positionX,y:a.positionY}}},refreshPositions=function(e,t,r){var n=r.layout,i=r.eles.nodes(),o=getScaleInBoundsFn(e,r,i);i.positions(o),!0!==e.ready&&(e.ready=!0,n.one("layoutready",r.ready),n.emit({type:"layoutready",layout:this}))},step$1=function(e,t,r){calculateNodeForces(e,t),calculateEdgeForces(e),calculateGravityForces(e,t),propagateForces(e),updatePositions(e)},calculateNodeForces=function(e,t){for(var r=0;r<e.graphSet.length;r++)for(var n=e.graphSet[r],i=n.length,o=0;o<i;o++)for(var a=e.layoutNodes[e.idToIndex[n[o]]],s=o+1;s<i;s++){var l=e.layoutNodes[e.idToIndex[n[s]]];nodeRepulsion(a,l,e,t)}},randomDistance=function(e){return-e+2*e*Math.random()},nodeRepulsion=function(e,t,r,n){if(e.cmptId===t.cmptId||r.isCompound){var i=t.positionX-e.positionX,o=t.positionY-e.positionY;0===i&&0===o&&(i=randomDistance(1),o=randomDistance(1));var a=nodesOverlap(e,t,i,o);if(a>0)var s=(u=n.nodeOverlap*a)*i/(g=Math.sqrt(i*i+o*o)),l=u*o/g;else{var u,c=findClippingPoint(e,i,o),h=findClippingPoint(t,-1*i,-1*o),d=h.x-c.x,f=h.y-c.y,p=d*d+f*f,g=Math.sqrt(p);s=(u=(e.nodeRepulsion+t.nodeRepulsion)/p)*d/g,l=u*f/g}e.isLocked||(e.offsetX-=s,e.offsetY-=l),t.isLocked||(t.offsetX+=s,t.offsetY+=l)}},nodesOverlap=function(e,t,r,n){if(r>0)var i=e.maxX-t.minX;else i=t.maxX-e.minX;if(n>0)var o=e.maxY-t.minY;else o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},findClippingPoint=function(e,t,r){var n=e.positionX,i=e.positionY,o=e.height||1,a=e.width||1,s=r/t,l=o/a,u={};return 0===t&&0<r||0===t&&0>r?(u.x=n,u.y=i+o/2,u):0<t&&-1*l<=s&&s<=l?(u.x=n+a/2,u.y=i+a*r/2/t,u):0>t&&-1*l<=s&&s<=l?(u.x=n-a/2,u.y=i-a*r/2/t,u):0<r&&(s<=-1*l||s>=l)?(u.x=n+o*t/2/r,u.y=i+o/2,u):0>r&&(s<=-1*l||s>=l)?(u.x=n-o*t/2/r,u.y=i-o/2,u):u},calculateEdgeForces=function(e,t){for(var r=0;r<e.edgeSize;r++){var n=e.layoutEdges[r],i=e.idToIndex[n.sourceId],o=e.layoutNodes[i],a=e.idToIndex[n.targetId],s=e.layoutNodes[a],l=s.positionX-o.positionX,u=s.positionY-o.positionY;if(0!==l||0!==u){var c=findClippingPoint(o,l,u),h=findClippingPoint(s,-1*l,-1*u),d=h.x-c.x,f=h.y-c.y,p=Math.sqrt(d*d+f*f),g=Math.pow(n.idealLength-p,2)/n.elasticity;if(0!==p)var y=g*d/p,v=g*f/p;else y=0,v=0;o.isLocked||(o.offsetX+=y,o.offsetY+=v),s.isLocked||(s.offsetX-=y,s.offsetY-=v)}}},calculateGravityForces=function(e,t){for(var r=0;r<e.graphSet.length;r++){var n=e.graphSet[r],i=n.length;if(0===r)var o=e.clientHeight/2,a=e.clientWidth/2;else{var s=e.layoutNodes[e.idToIndex[n[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]];o=l.positionX,a=l.positionY}for(var u=0;u<i;u++){var c=e.layoutNodes[e.idToIndex[n[u]]];if(!c.isLocked){var h=o-c.positionX,d=a-c.positionY,f=Math.sqrt(h*h+d*d);if(f>1){var p=t.gravity*h/f,g=t.gravity*d/f;c.offsetX+=p,c.offsetY+=g}}}}},propagateForces=function(e,t){var r=[],n=0,i=-1;for(r.push.apply(r,e.graphSet[0]),i+=e.graphSet[0].length;n<=i;){var o=r[n++],a=e.idToIndex[o],s=e.layoutNodes[a],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=u,d.offsetY+=c,r[++i]=l[h]}s.offsetX=0,s.offsetY=0}}},updatePositions=function(e,t){for(var r=0;r<e.nodeSize;r++){0<(i=e.layoutNodes[r]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(r=0;r<e.nodeSize;r++){if(!(0<(i=e.layoutNodes[r]).children.length||i.isLocked)){var n=limitForce(i.offsetX,i.offsetY,e.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,updateAncestryBoundaries(i,e)}}for(r=0;r<e.nodeSize;r++){var i;0<(i=e.layoutNodes[r]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},limitForce=function(e,t,r){var n=Math.sqrt(e*e+t*t);if(n>r)var i={x:r*e/n,y:r*t/n};else i={x:e,y:t};return i},updateAncestryBoundaries=function e(t,r){var n=t.parentId;if(null!=n){var i=r.layoutNodes[r.idToIndex[n]],o=!1;return(null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,o=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,o=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,o=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,o=!0),o?e(i,r):void 0}},separateComponents=function(e,t){for(var r=e.layoutNodes,n=[],i=0;i<r.length;i++){var o=r[i],a=o.cmptId;(n[a]=n[a]||[]).push(o)}var s=0;for(i=0;i<n.length;i++){if(g=n[i]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var l=0;l<g.length;l++){var u=g[l];g.x1=Math.min(g.x1,u.positionX-u.width/2),g.x2=Math.max(g.x2,u.positionX+u.width/2),g.y1=Math.min(g.y1,u.positionY-u.height/2),g.y2=Math.max(g.y2,u.positionY+u.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,s+=g.w*g.h}}n.sort((function(e,t){return t.w*t.h-e.w*e.h}));var c=0,h=0,d=0,f=0,p=Math.sqrt(s)*e.clientWidth/e.clientHeight;for(i=0;i<n.length;i++){var g;if(g=n[i]){for(l=0;l<g.length;l++){(u=g[l]).isLocked||(u.positionX+=c-g.x1,u.positionY+=h-g.y1)}c+=g.w+t.componentSpacing,d+=g.w+t.componentSpacing,f=Math.max(f,g.h),d>p&&(h+=f+t.componentSpacing,c=0,d=0,f=0)}}},defaults$d={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function GridLayout(e){this.options=extend({},defaults$d,e)}GridLayout.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles.nodes().not(":parent");t.sort&&(n=n.sort(t.sort));var i=makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===i.h||0===i.w)n.layoutPositions(this,t,(function(e){return{x:i.x1,y:i.y1}}));else{var o=n.size(),a=Math.sqrt(o*i.h/i.w),s=Math.round(a),l=Math.round(i.w/i.h*a),u=function(e){if(null==e)return Math.min(s,l);Math.min(s,l)==s?s=e:l=e},c=function(e){if(null==e)return Math.max(s,l);Math.max(s,l)==s?s=e:l=e},h=t.rows,d=null!=t.cols?t.cols:t.columns;if(null!=h&&null!=d)s=h,l=d;else if(null!=h&&null==d)s=h,l=Math.ceil(o/s);else if(null==h&&null!=d)l=d,s=Math.ceil(o/l);else if(l*s>o){var f=u(),p=c();(f-1)*p>=o?u(f-1):(p-1)*f>=o&&c(p-1)}else for(;l*s<o;){var g=u(),y=c();(y+1)*g>=o?c(y+1):u(g+1)}var v=i.w/l,m=i.h/s;if(t.condense&&(v=0,m=0),t.avoidOverlap)for(var b=0;b<n.length;b++){var $=n[b],_=$._private.position;null!=_.x&&null!=_.y||(_.x=0,_.y=0);var w=$.layoutDimensions(t),E=t.avoidOverlapPadding,x=w.w+E,T=w.h+E;v=Math.max(v,x),m=Math.max(m,T)}for(var S={},O=function(e,t){return!!S["c-"+e+"-"+t]},C=function(e,t){S["c-"+e+"-"+t]=!0},k=0,P=0,A=function(){++P>=l&&(P=0,k++)},I={},D=0;D<n.length;D++){var N=n[D],M=t.position(N);if(M&&(void 0!==M.row||void 0!==M.col)){var R={row:M.row,col:M.col};if(void 0===R.col)for(R.col=0;O(R.row,R.col);)R.col++;else if(void 0===R.row)for(R.row=0;O(R.row,R.col);)R.row++;I[N.id()]=R,C(R.row,R.col)}}n.layoutPositions(this,t,(function(e,t){var r,n;if(e.locked()||e.isParent())return!1;var o=I[e.id()];if(o)r=o.col*v+v/2+i.x1,n=o.row*m+m/2+i.y1;else{for(;O(k,P);)A();r=P*v+v/2+i.x1,n=k*m+m/2+i.y1,C(k,P),A()}return{x:r,y:n}}))}return this};var defaults$e={ready:function(){},stop:function(){}};function NullLayout(e){this.options=extend({},defaults$e,e)}NullLayout.prototype.run=function(){var e=this.options,t=e.eles;e.cy;return this.emit("layoutstart"),t.nodes().positions((function(){return{x:0,y:0}})),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},NullLayout.prototype.stop=function(){return this};var defaults$f={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function PresetLayout(e){this.options=extend({},defaults$f,e)}PresetLayout.prototype.run=function(){var e=this.options,t=e.eles.nodes(),r=fn(e.positions);return t.layoutPositions(this,e,(function(t,n){var i=function(t){if(null==e.positions)return copyPosition(t.position());if(r)return e.positions(t);var n=e.positions[t._private.data.id];return null==n?null:n}(t);return!t.locked()&&null!=i&&i})),this};var defaults$g={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function RandomLayout(e){this.options=extend({},defaults$g,e)}RandomLayout.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles.nodes().not(":parent"),n=makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return r.layoutPositions(this,e,(function(e,t){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}})),this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(e){this.options=e,this.notifications=0}var noop$1=function(){},throwImgErr=function(){throw new Error("A headless instance can not render images")};NullRenderer.prototype={recalculateRenderedStyle:noop$1,notify:function(){this.notifications++},init:noop$1,isHeadless:function(){return!0},png:throwImgErr,jpg:throwImgErr};var BRp={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=function(e,t,r,n,i,o,a){var s=i.x-r/2-a,l=i.x+r/2+a,u=i.y-r/2-a,c=i.y+r/2+a;return s<=e&&e<=l&&u<=t&&t<=c},n=function(e,t,r,n,i){var o=e*Math.cos(n)-t*Math.sin(n),a=(e*Math.sin(n)+t*Math.cos(n))*r;return{x:o*r+i.x,y:a+i.y}},i=function(e,t,r,i){for(var o=[],a=0;a<e.length;a+=2){var s=e[a],l=e[a+1];o.push(n(s,l,t,r,i))}return o},o=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n.x,n.y)}return t},a=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},s=function(n,s){string(s)&&(s=e[s]),e[n]=extend({name:n,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,r,n,a,s){var l=o(i(this.points,r+2*s,n,a));return pointInsidePolygonPoints(e,t,l)},roughCollide:r,draw:function(e,r,n,o){var a=i(this.points,r,n,o);t.arrowShapeImpl("polygon")(e,a)},spacing:function(e){return 0},gap:a},s)};s("none",{collide:falsify,roughCollide:falsify,draw:noop,spacing:zeroify,gap:zeroify}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(e,r,o,a,s){var l=i(this.points,r,o,a),u=this.controlPoint,c=n(u[0],u[1],r,o,a);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return.8*a(e)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,r,n,a,s,l){var u=o(i(this.points,r+2*l,n,a)),c=o(i(this.pointsTee,r+2*l,n,a));return pointInsidePolygonPoints(e,t,u)||pointInsidePolygonPoints(e,t,c)},draw:function(e,r,n,o,a){var s=i(this.points,r,n,o),l=i(this.pointsTee,r,n,o);t.arrowShapeImpl(this.name)(e,s,l)}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var r=this.baseCrossLinePts.slice(),n=t/e;return r[3]=r[3]-n,r[5]=r[5]-n,r},collide:function(e,t,r,n,a,s,l){var u=o(i(this.points,r+2*l,n,a)),c=o(i(this.crossLinePts(r,s),r+2*l,n,a));return pointInsidePolygonPoints(e,t,u)||pointInsidePolygonPoints(e,t,c)},draw:function(e,r,n,o,a){var s=i(this.points,r,n,o),l=i(this.crossLinePts(r,a),r,n,o);t.arrowShapeImpl(this.name)(e,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*a(e)}}),s("circle",{radius:.15,collide:function(e,t,r,n,i,o,a){var s=i;return Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((r+2*a)*this.radius,2)},draw:function(e,r,n,i,o){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}},BRp$1={projectIntoViewport:function(e,t){var r=this.cy,n=this.findContainerClientCoords(),i=n[0],o=n[1],a=n[4],s=r.pan(),l=r.zoom();return[((e-i)/a-s.x)/l,((t-o)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=window$1.getComputedStyle(e),n=function(e){return parseFloat(r.getPropertyValue(e))},i=n("padding-left"),o=n("padding-right"),a=n("padding-top"),s=n("padding-bottom"),l=n("border-left-width"),u=n("border-right-width"),c=n("border-top-width"),h=(n("border-bottom-width"),e.clientWidth),d=e.clientHeight,f=i+o,p=a+s,g=l+u,y=t.width/(h+g),v=h-f,m=d-p,b=t.left+i+l,$=t.top+a+c;return this.containerBB=[b,$,v,m,y]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]},findNearestElements:function(e,t,r,n){var i,o,a=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),h=s.cy.hasCompoundNodes(),d=(n?24:8)/c,f=(n?8:2)/c,p=(n?8:2)/c,g=1/0;function y(e,t){if(e.isNode()){if(o)return;o=e,u.push(e)}if(e.isEdge()&&(null==t||t<g))if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var r=0;r<u.length;r++)if(u[r].isEdge()){u[r]=e,i=e,g=null!=t?t:g;break}}else u.push(e),i=e,g=null!=t?t:g}function v(r){var n=r.outerWidth()+2*f,i=r.outerHeight()+2*f,o=n/2,l=i/2,u=r.position();if(u.x-o<=e&&e<=u.x+o&&u.y-l<=t&&t<=u.y+l&&s.nodeShapes[a.getNodeShape(r)].checkPoint(e,t,0,n,i,u.x,u.y))return y(r,0),!0}function m(r){var n,i=r._private,o=i.rscratch,l=r.pstyle("width").pfValue,c=r.pstyle("arrow-scale").value,f=l/2+d,p=f*f,g=2*f,m=i.source,b=i.target;if("segments"===o.edgeType||"straight"===o.edgeType||"haystack"===o.edgeType){for(var $=o.allpts,_=0;_+3<$.length;_+=2)if(inLineVicinity(e,t,$[_],$[_+1],$[_+2],$[_+3],g)&&p>(n=sqdistToFiniteLine(e,t,$[_],$[_+1],$[_+2],$[_+3])))return y(r,n),!0}else if("bezier"===o.edgeType||"multibezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType)for($=o.allpts,_=0;_+5<o.allpts.length;_+=4)if(inBezierVicinity(e,t,$[_],$[_+1],$[_+2],$[_+3],$[_+4],$[_+5],g)&&p>(n=sqdistToQuadraticBezier(e,t,$[_],$[_+1],$[_+2],$[_+3],$[_+4],$[_+5])))return y(r,n),!0;m=m||i.source,b=b||i.target;var w=a.getArrowWidth(l,c),E=[{name:"source",x:o.arrowStartX,y:o.arrowStartY,angle:o.srcArrowAngle},{name:"target",x:o.arrowEndX,y:o.arrowEndY,angle:o.tgtArrowAngle},{name:"mid-source",x:o.midX,y:o.midY,angle:o.midsrcArrowAngle},{name:"mid-target",x:o.midX,y:o.midY,angle:o.midtgtArrowAngle}];for(_=0;_<E.length;_++){var x=E[_],T=s.arrowShapes[r.pstyle(x.name+"-arrow-shape").value],S=r.pstyle("width").pfValue;if(T.roughCollide(e,t,w,x.angle,{x:x.x,y:x.y},S,d)&&T.collide(e,t,w,x.angle,{x:x.x,y:x.y},S,d))return y(r),!0}h&&u.length>0&&(v(m),v(b))}function b(e,t,r){return getPrefixedProperty(e,t,r)}function $(r,n){var i,o=r._private,a=p;i=n?n+"-":"",r.boundingBox();var s=o.labelBounds[n||"main"],l=r.pstyle(i+"label").value;if("yes"===r.pstyle("text-events").strValue&&l){var u=o.rstyle,c=b(u,"labelX",n),h=b(u,"labelY",n),d=b(o.rscratch,"labelAngle",n),f=s.x1-a,g=s.x2+a,v=s.y1-a,m=s.y2+a;if(d){var $=Math.cos(d),_=Math.sin(d),w=function(e,t){return{x:(e-=c)*$-(t-=h)*_+c,y:e*_+t*$+h}},E=w(f,v),x=w(f,m),T=w(g,v),S=w(g,m),O=[E.x,E.y,T.x,T.y,S.x,S.y,x.x,x.y];if(pointInsidePolygonPoints(e,t,O))return y(r),!0}else if(inBoundingBox(s,e,t))return y(r),!0}}r&&(l=l.interactive);for(var _=l.length-1;_>=0;_--){var w=l[_];w.isNode()?v(w)||$(w):m(w)||$(w)||$(w,"source")||$(w,"target")}return u},getAllInBox:function(e,t,r,n){for(var i=this.getCachedZSortedEles().interactive,o=[],a=Math.min(e,r),s=Math.max(e,r),l=Math.min(t,n),u=Math.max(t,n),c=makeBoundingBox({x1:e=a,y1:t=l,x2:r=s,y2:n=u}),h=0;h<i.length;h++){var d=i[h];if(d.isNode()){var f=d,p=f.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});boundingBoxesIntersect(c,p)&&!boundingBoxInBoundingBox(p,c)&&o.push(f)}else{var g=d,y=g._private,v=y.rscratch;if(null!=v.startX&&null!=v.startY&&!inBoundingBox(c,v.startX,v.startY))continue;if(null!=v.endX&&null!=v.endY&&!inBoundingBox(c,v.endX,v.endY))continue;if("bezier"===v.edgeType||"multibezier"===v.edgeType||"self"===v.edgeType||"compound"===v.edgeType||"segments"===v.edgeType||"haystack"===v.edgeType){for(var m=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,b=!0,$=0;$<m.length;$++)if(!pointInBoundingBox(c,m[$])){b=!1;break}b&&o.push(g)}else"haystack"!==v.edgeType&&"straight"!==v.edgeType||o.push(g)}}return o}},BRp$2={calculateArrowAngles:function(e){var t,r,n,i,o,a,s=e._private.rscratch,l="haystack"===s.edgeType,u="bezier"===s.edgeType,c="multibezier"===s.edgeType,h="segments"===s.edgeType,d="compound"===s.edgeType,f="self"===s.edgeType;if(l?(n=s.haystackPts[0],i=s.haystackPts[1],o=s.haystackPts[2],a=s.haystackPts[3]):(n=s.arrowStartX,i=s.arrowStartY,o=s.arrowEndX,a=s.arrowEndY),g=s.midX,y=s.midY,h)t=n-s.segpts[0],r=i-s.segpts[1];else if(c||d||f||u){var p=s.allpts;t=n-qbezierAt(p[0],p[2],p[4],.1),r=i-qbezierAt(p[1],p[3],p[5],.1)}else t=n-g,r=i-y;s.srcArrowAngle=getAngleFromDisp(t,r);var g=s.midX,y=s.midY;if(l&&(g=(n+o)/2,y=(i+a)/2),t=o-n,r=a-i,h)if((p=s.allpts).length/2%2==0){var v=(m=p.length/2)-2;t=p[m]-p[v],r=p[m+1]-p[v+1]}else{v=(m=p.length/2-1)-2;var m,b=m+2;t=p[m]-p[v],r=p[m+1]-p[v+1]}else if(c||d||f){var $,_,w,E,p=s.allpts;if(s.ctrlpts.length/2%2==0){var x=(T=(S=p.length/2-1)+2)+2;$=qbezierAt(p[S],p[T],p[x],0),_=qbezierAt(p[S+1],p[T+1],p[x+1],0),w=qbezierAt(p[S],p[T],p[x],1e-4),E=qbezierAt(p[S+1],p[T+1],p[x+1],1e-4)}else{var T,S;x=(T=p.length/2-1)+2;$=qbezierAt(p[S=T-2],p[T],p[x],.4999),_=qbezierAt(p[S+1],p[T+1],p[x+1],.4999),w=qbezierAt(p[S],p[T],p[x],.5),E=qbezierAt(p[S+1],p[T+1],p[x+1],.5)}t=w-$,r=E-_}(s.midtgtArrowAngle=getAngleFromDisp(t,r),s.midDispX=t,s.midDispY=r,t*=-1,r*=-1,h)&&((p=s.allpts).length/2%2==0||(t=-(p[b=(m=p.length/2-1)+2]-p[m]),r=-(p[b+1]-p[m+1])));if(s.midsrcArrowAngle=getAngleFromDisp(t,r),h)t=o-s.segpts[s.segpts.length-2],r=a-s.segpts[s.segpts.length-1];else if(c||d||f||u){var O=(p=s.allpts).length;t=o-qbezierAt(p[O-6],p[O-4],p[O-2],.9),r=a-qbezierAt(p[O-5],p[O-3],p[O-1],.9)}else t=o-g,r=a-y;s.tgtArrowAngle=getAngleFromDisp(t,r)}};BRp$2.getArrowWidth=BRp$2.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[e+", "+t];return n||(n=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=n,n)};var BRp$3={};function getPts(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];t.push({x:n,y:i})}return t}}BRp$3.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r._private,i=n.rscratch;if(!i.haystack){var o=2*Math.random()*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=2*Math.random()*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=n.source,s=n.target,l=a.position(),u=s.position(),c=a.width(),h=s.width(),d=a.height(),f=s.height(),p=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*d*p+l.y,i.target.x*h*p+u.x,i.target.y*f*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},BRp$3.findSegmentsPoints=function(e,t){var r=e._private.rscratch,n=t.posPts,i=t.intersectionPts,o=t.vectorNormInverse,a=e.pstyle("edge-distances").value,s=e.pstyle("segment-weights"),l=e.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);r.edgeType="segments",r.segpts=[];for(var c=0;c<u;c++){var h=s.pfValue[c],d=l.pfValue[c],f=1-h,p=h,g="node-position"===a?n:i,y={x:g.x1*f+g.x2*p,y:g.y1*f+g.y2*p};r.segpts.push(y.x+o.x*d,y.y+o.y*d)}},BRp$3.findLoopPoints=function(e,t,r,n){var i=e._private.rscratch,o=t.dirCounts,a=t.srcPos,s=e.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=r,f=h;n&&(d=0,f=l);var p=u-Math.PI/2,g=p-c/2,y=p+c/2,v=String(u+"_"+c);d=void 0===o[v]?o[v]=0:++o[v],i.ctrlpts=[a.x+1.4*Math.cos(g)*f*(d/3+1),a.y+1.4*Math.sin(g)*f*(d/3+1),a.x+1.4*Math.cos(y)*f*(d/3+1),a.y+1.4*Math.sin(y)*f*(d/3+1)]},BRp$3.findCompoundLoopPoints=function(e,t,r,n){var i=e._private.rscratch;i.edgeType="compound";var o=t.srcPos,a=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),f=d?d.pfValue[0]:void 0,p=r,g=h;n&&(p=0,g=f);var y={x:o.x-s/2,y:o.y-l/2},v={x:a.x-u/2,y:a.y-c/2},m={x:Math.min(y.x,v.x),y:Math.min(y.y,v.y)},b=Math.max(.5,Math.log(.01*s)),$=Math.max(.5,Math.log(.01*u));i.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*b,m.x-(1+Math.pow(50,1.12)/100)*g*(p/3+1)*$,m.y]},BRp$3.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},BRp$3.findBezierPoints=function(e,t,r,n,i){var o=e._private.rscratch,a=t.vectorNormInverse,s=t.posPts,l=t.intersectionPts,u=e.pstyle("edge-distances").value,c=e.pstyle("control-point-step-size").pfValue,h=e.pstyle("control-point-distances"),d=e.pstyle("control-point-weights"),f=h&&d?Math.min(h.value.length,d.value.length):1,p=h?h.pfValue[0]:void 0,g=d.value[0],y=n;o.edgeType=y?"multibezier":"bezier",o.ctrlpts=[];for(var v=0;v<f;v++){var m=(.5-t.eles.length/2+r)*c*(i?-1:1),b=void 0,$=signum(m);y&&(p=h?h.pfValue[v]:c,g=d.value[v]);var _=void 0!==(b=n?p:void 0!==p?$*p:void 0)?b:m,w=1-g,E=g,x="node-position"===u?s:l,T={x:x.x1*w+x.x2*E,y:x.y1*w+x.y2*E};o.ctrlpts.push(T.x+a.x*_,T.y+a.y*_)}},BRp$3.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var n=t.posPts,i=t.srcW,o=t.srcH,a=t.tgtW,s=t.tgtH,l="node-position"!==e.pstyle("edge-distances").value,u=e.pstyle("taxi-direction").value,c=u,h=e.pstyle("taxi-turn"),d="%"===h.units,f=d&&h.pfValue<0?1+h.pfValue:h.pfValue,p=e.pstyle("taxi-turn-min-distance").pfValue,g=l?(i+a)/2:0,y=l?(o+s)/2:0,v=n.x2-n.x1,m=n.y2-n.y1,b=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},$=b(v,g),_=b(m,y),w=!1;"auto"===u?u=Math.abs($)>Math.abs(_)?"horizontal":"vertical":"upward"===u||"downward"===u?(u="vertical",w=!0):"leftward"!==u&&"rightward"!==u||(u="horizontal",w=!0);var E="vertical"===u,x=E?_:$,T=E?m:v,S=signum(T),O=!1;w&&d||!("downward"===c&&T<0||"upward"===c&&T>0||"leftward"===c&&T>0||"rightward"===c&&T<0)||(x=(S*=-1)*Math.abs(x),O=!0);var C=d?f*x:f*S,k=function(e){return Math.abs(e)<p||Math.abs(e)>=Math.abs(x)},P=k(C),A=k(x-Math.abs(C));if((P||A)&&!O)if(E){var I=Math.abs(T)<=o/2,D=Math.abs(v)<=a/2;if(I){var N=(n.x1+n.x2)/2,M=n.y1,R=n.y2;r.segpts=[N,M,N,R]}else if(D){var L=(n.y1+n.y2)/2,j=n.x1,F=n.x2;r.segpts=[j,L,F,L]}else r.segpts=[n.x1,n.y2]}else{var B=Math.abs(T)<=i/2,z=Math.abs(m)<=s/2;if(B){var G=(n.y1+n.y2)/2,U=n.x1,H=n.x2;r.segpts=[U,G,H,G]}else if(z){var V=(n.x1+n.x2)/2,Y=n.y1,W=n.y2;r.segpts=[V,Y,V,W]}else r.segpts=[n.x2,n.y1]}else if(E){var q=(C<0?n.y2:n.y1)+C+(l?o/2*S:0),X=n.x1,K=n.x2;r.segpts=[X,q,K,q]}else{var Z=(C<0?n.x2:n.x1)+C+(l?i/2*S:0),Q=n.y1,J=n.y2;r.segpts=[Z,Q,Z,J]}},BRp$3.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var n=t.srcPos,i=t.tgtPos,o=t.srcW,a=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape,h=!number(r.startX)||!number(r.startY),d=!number(r.arrowStartX)||!number(r.arrowStartY),f=!number(r.endX)||!number(r.endY),p=!number(r.arrowEndX)||!number(r.arrowEndY),g=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),y=dist({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),v=y<g,m=dist({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),b=m<g,$=!1;if(h||d||v){$=!0;var _={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},w=Math.sqrt(_.x*_.x+_.y*_.y),E={x:_.x/w,y:_.y/w},x=Math.max(o,a),T={x:r.ctrlpts[0]+2*E.x*x,y:r.ctrlpts[1]+2*E.y*x},S=u.intersectLine(n.x,n.y,o,a,T.x,T.y,0);v?(r.ctrlpts[0]=r.ctrlpts[0]+E.x*(g-y),r.ctrlpts[1]=r.ctrlpts[1]+E.y*(g-y)):(r.ctrlpts[0]=S[0]+E.x*g,r.ctrlpts[1]=S[1]+E.y*g)}if(f||p||b){$=!0;var O={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},C=Math.sqrt(O.x*O.x+O.y*O.y),k={x:O.x/C,y:O.y/C},P=Math.max(o,a),A={x:r.ctrlpts[0]+2*k.x*P,y:r.ctrlpts[1]+2*k.y*P},I=c.intersectLine(i.x,i.y,s,l,A.x,A.y,0);b?(r.ctrlpts[0]=r.ctrlpts[0]+k.x*(g-m),r.ctrlpts[1]=r.ctrlpts[1]+k.y*(g-m)):(r.ctrlpts[0]=I[0]+k.x*g,r.ctrlpts[1]=I[1]+k.y*g)}$&&this.findEndpoints(e)}},BRp$3.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var n;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(n=t.allpts.length/2-1,t.midX=t.allpts[n],t.midY=t.allpts[n+1]):(n=t.allpts.length/2-3,.5,t.midX=qbezierAt(t.allpts[n],t.allpts[n+2],t.allpts[n+4],.5),t.midY=qbezierAt(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType)if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4==0){var i=t.segpts.length/2,o=i-2;t.midX=(t.segpts[o]+t.segpts[i])/2,t.midY=(t.segpts[o+1]+t.segpts[i+1])/2}else{var a=t.segpts.length/2-1;t.midX=t.segpts[a],t.midY=t.segpts[a+1]}},BRp$3.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||number(t.startX)&&number(t.startY)&&number(t.endX)&&number(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,warn("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},BRp$3.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,n=r.cy.hasCompoundNodes(),i={map:new Map$1$1,get:function(e){var t=this.map.get(e[0]);return null!=t?t.get(e[1]):null},set:function(e,t){var r=this.map.get(e[0]);null==r&&(r=new Map$1$1,this.map.set(e[0],r)),r.set(e[1],t)}},o=[],a=[],s=0;s<e.length;s++){var l=e[s],u=l._private,c=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==c){var h="unbundled-bezier"===c||"segments"===c||"straight"===c||"taxi"===c,d="unbundled-bezier"===c||"bezier"===c,f=u.source,p=u.target,g=[f.poolIndex(),p.poolIndex()].sort(),y=i.get(g);null==y&&(y={eles:[]},i.set(g,y),o.push(g)),y.eles.push(l),h&&(y.hasUnbundled=!0),d&&(y.hasBezier=!0)}else a.push(l)}for(var v=function(e){var a=o[e],s=i.get(a),l=void 0;if(!s.hasUnbundled){var u=s.eles[0].parallelEdges().filter((function(e){return e.isBundledBezier()}));clearArray(s.eles),u.forEach((function(e){return s.eles.push(e)})),s.eles.sort((function(e,t){return e.poolIndex()-t.poolIndex()}))}var c=s.eles[0],h=c.source(),d=c.target();if(h.poolIndex()>d.poolIndex()){var f=h;h=d,d=f}var p=s.srcPos=h.position(),g=s.tgtPos=d.position(),y=s.srcW=h.outerWidth(),v=s.srcH=h.outerHeight(),m=s.tgtW=d.outerWidth(),b=s.tgtH=d.outerHeight(),$=s.srcShape=r.nodeShapes[t.getNodeShape(h)],_=s.tgtShape=r.nodeShapes[t.getNodeShape(d)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var w=0;w<s.eles.length;w++){var E=s.eles[w],x=E[0]._private.rscratch,T=E.pstyle("curve-style").value,S="unbundled-bezier"===T||"segments"===T||"taxi"===T,O=!h.same(E.source());if(!s.calculatedIntersection&&h!==d&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var C=$.intersectLine(p.x,p.y,y,v,g.x,g.y,0),k=s.srcIntn=C,P=_.intersectLine(g.x,g.y,m,b,p.x,p.y,0),A=s.tgtIntn=P,I=s.intersectionPts={x1:C[0],x2:P[0],y1:C[1],y2:P[1]},D=s.posPts={x1:p.x,x2:g.x,y1:p.y,y2:g.y},N=P[1]-C[1],M=P[0]-C[0],R=Math.sqrt(M*M+N*N),L=s.vector={x:M,y:N},j=s.vectorNorm={x:L.x/R,y:L.y/R},F={x:-j.y,y:j.x};s.nodesOverlap=!number(R)||_.checkPoint(C[0],C[1],0,m,b,g.x,g.y)||$.checkPoint(P[0],P[1],0,y,v,p.x,p.y),s.vectorNormInverse=F,l={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:g,tgtPos:p,srcW:m,srcH:b,tgtW:y,tgtH:v,srcIntn:A,tgtIntn:k,srcShape:_,tgtShape:$,posPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},intersectionPts:{x1:I.x2,y1:I.y2,x2:I.x1,y2:I.y1},vector:{x:-L.x,y:-L.y},vectorNorm:{x:-j.x,y:-j.y},vectorNormInverse:{x:-F.x,y:-F.y}}}var B=O?l:s;x.nodesOverlap=B.nodesOverlap,x.srcIntn=B.srcIntn,x.tgtIntn=B.tgtIntn,n&&(h.isParent()||h.isChild()||d.isParent()||d.isChild())&&(h.parents().anySame(d)||d.parents().anySame(h)||h.same(d)&&h.isParent())?t.findCompoundLoopPoints(E,B,w,S):h===d?t.findLoopPoints(E,B,w,S):"segments"===T?t.findSegmentsPoints(E,B):"taxi"===T?t.findTaxiPoints(E,B):"straight"===T||!S&&s.eles.length%2==1&&w===Math.floor(s.eles.length/2)?t.findStraightEdgePoints(E):t.findBezierPoints(E,B,w,S,O),t.findEndpoints(E),t.tryToCorrectInvalidPoints(E,B),t.checkForInvalidEdgeWarning(E),t.storeAllpts(E),t.storeEdgeProjections(E),t.calculateArrowAngles(E),t.recalculateEdgeLabelProjections(E),t.calculateLabelAngles(E)}},m=0;m<o.length;m++)v(m);this.findHaystackPoints(a)}},BRp$3.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return this.recalculateRenderedStyle(e),getPts(t.segpts)},BRp$3.getControlPoints=function(e){var t=e[0]._private.rscratch,r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return this.recalculateRenderedStyle(e),getPts(t.ctrlpts)},BRp$3.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var BRp$4={manualEndptToPx:function(e,t){var r=e.position(),n=e.outerWidth(),i=e.outerHeight();if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*n),"%"===t.units[1]&&(o[1]=o[1]*i),o[0]+=r.x,o[1]+=r.y,o}var a=t.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(n,i),l=[r.x+Math.cos(a)*s,r.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,n,i,l[0],l[1],0)},findEndpoints:function(e){var t,r,n,i,o,a=this,s=e.source()[0],l=e.target()[0],u=s.position(),c=l.position(),h=e.pstyle("target-arrow-shape").value,d=e.pstyle("source-arrow-shape").value,f=e.pstyle("target-distance-from-node").pfValue,p=e.pstyle("source-distance-from-node").pfValue,g=e.pstyle("curve-style").value,y=e._private.rscratch,v=y.edgeType,m="self"===v||"compound"===v,b="bezier"===v||"multibezier"===v||m,$="bezier"!==v,_="straight"===v||"segments"===v,w="segments"===v,E=b||$||_,x=m||"taxi"===g,T=e.pstyle("source-endpoint"),S=x?"outside-to-node":T.value,O=e.pstyle("target-endpoint"),C=x?"outside-to-node":O.value;if(y.srcManEndpt=T,y.tgtManEndpt=O,b){var k=[y.ctrlpts[0],y.ctrlpts[1]];r=$?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:k,n=k}else if(_){var P=w?y.segpts.slice(0,2):[c.x,c.y];r=w?y.segpts.slice(y.segpts.length-2):[u.x,u.y],n=P}if("inside-to-node"===C)t=[c.x,c.y];else if(O.units)t=this.manualEndptToPx(l,O);else if("outside-to-line"===C)t=y.tgtIntn;else if("outside-to-node"===C||"outside-to-node-or-label"===C?i=r:"outside-to-line"!==C&&"outside-to-line-or-label"!==C||(i=[u.x,u.y]),t=a.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===C||"outside-to-line-or-label"===C){var A=l._private.rscratch,I=A.labelWidth,D=A.labelHeight,N=A.labelX,M=A.labelY,R=I/2,L=D/2,j=l.pstyle("text-valign").value;"top"===j?M-=L:"bottom"===j&&(M+=L);var F=l.pstyle("text-halign").value;"left"===F?N-=R:"right"===F&&(N+=R);var B=polygonIntersectLine(i[0],i[1],[N-R,M-L,N+R,M-L,N+R,M+L,N-R,M+L],c.x,c.y);if(B.length>0){var z=u,G=sqdist(z,array2point(t)),U=sqdist(z,array2point(B)),H=G;if(U<G&&(t=B,H=U),B.length>2)sqdist(z,{x:B[2],y:B[3]})<H&&(t=[B[2],B[3]])}}var V=shortenIntersection(t,r,a.arrowShapes[h].spacing(e)+f),Y=shortenIntersection(t,r,a.arrowShapes[h].gap(e)+f);if(y.endX=Y[0],y.endY=Y[1],y.arrowEndX=V[0],y.arrowEndY=V[1],"inside-to-node"===S)t=[u.x,u.y];else if(T.units)t=this.manualEndptToPx(s,T);else if("outside-to-line"===S)t=y.srcIntn;else if("outside-to-node"===S||"outside-to-node-or-label"===S?o=n:"outside-to-line"!==S&&"outside-to-line-or-label"!==S||(o=[c.x,c.y]),t=a.nodeShapes[this.getNodeShape(s)].intersectLine(u.x,u.y,s.outerWidth(),s.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===S||"outside-to-line-or-label"===S){var W=s._private.rscratch,q=W.labelWidth,X=W.labelHeight,K=W.labelX,Z=W.labelY,Q=q/2,J=X/2,ee=s.pstyle("text-valign").value;"top"===ee?Z-=J:"bottom"===ee&&(Z+=J);var te=s.pstyle("text-halign").value;"left"===te?K-=Q:"right"===te&&(K+=Q);var re=polygonIntersectLine(o[0],o[1],[K-Q,Z-J,K+Q,Z-J,K+Q,Z+J,K-Q,Z+J],u.x,u.y);if(re.length>0){var ne=c,ie=sqdist(ne,array2point(t)),oe=sqdist(ne,array2point(re)),ae=ie;if(oe<ie&&(t=[re[0],re[1]],ae=oe),re.length>2)sqdist(ne,{x:re[2],y:re[3]})<ae&&(t=[re[2],re[3]])}}var se=shortenIntersection(t,n,a.arrowShapes[d].spacing(e)+p),le=shortenIntersection(t,n,a.arrowShapes[d].gap(e)+p);y.startX=le[0],y.startY=le[1],y.arrowStartX=se[0],y.arrowStartY=se[1],E&&(number(y.startX)&&number(y.startY)&&number(y.endX)&&number(y.endY)?y.badLine=!1:y.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}}},BRp$5={};function pushBezierPts(e,t,r){for(var n=function(e,t,r,n){return qbezierAt(e,t,r,n)},i=t._private.rstyle.bezierPts,o=0;o<e.bezierProjPcts.length;o++){var a=e.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],a),y:n(r[1],r[3],r[5],a)})}}BRp$5.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,n=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===n||"bezier"===n||"self"===n||"compound"===n){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)pushBezierPts(this,e,r.allpts.slice(i,i+6))}else if("segments"===n){var o=t.rstyle.linePts=[];for(i=0;i+1<r.allpts.length;i+=2)o.push({x:r.allpts[i],y:r.allpts[i+1]})}else if("haystack"===n){var a=r.haystackPts;t.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},BRp$5.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var BRp$6={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!emptyString(t)){var r,n,i=e._private,o=e.width(),a=e.height(),s=e.padding(),l=e.position(),u=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,h=i.rscratch,d=i.rstyle;switch(u){case"left":r=l.x-o/2-s;break;case"right":r=l.x+o/2+s;break;default:r=l.x}switch(c){case"top":n=l.y-a/2-s;break;case"bottom":n=l.y+a/2+s;break;default:n=l.y}h.labelX=r,h.labelY=n,d.labelX=r,d.labelY=n,this.applyLabelDimensions(e)}}},lineAngleFromDelta=function(e,t){var r=Math.atan(t/e);return 0===e&&r<0&&(r*=-1),r},lineAngle=function(e,t){var r=t.x-e.x,n=t.y-e.y;return lineAngleFromDelta(r,n)},bezierAngle=function(e,t,r,n){var i=bound(0,n-.001,1),o=bound(0,n+.001,1),a=qbezierPtAt(e,t,r,i),s=qbezierPtAt(e,t,r,o);return lineAngle(a,s)};BRp$6.recalculateEdgeLabelProjections=function(e){var t,r=e._private,n=r.rscratch,i=this,o={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(o.mid||o.source||o.target){t={x:n.midX,y:n.midY};var a=function(e,t,n){setPrefixedProperty(r.rscratch,e,t,n),setPrefixedProperty(r.rstyle,e,t,n)};a("labelX",null,t.x),a("labelY",null,t.y);var s=lineAngleFromDelta(n.midDispX,n.midDispY);a("labelAutoAngle",null,s);var l=function(s){var l,u="source"===s;if(o[s]){var c=e.pstyle(s+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var h,d=function e(){if(e.cache)return e.cache;for(var t=[],o=0;o+5<n.allpts.length;o+=4){var a={x:n.allpts[o],y:n.allpts[o+1]},s={x:n.allpts[o+2],y:n.allpts[o+3]},l={x:n.allpts[o+4],y:n.allpts[o+5]};t.push({p0:a,p1:s,p2:l,startDist:0,length:0,segments:[]})}var u=r.rstyle.bezierPts,c=i.bezierProjPcts.length;function h(e,t,r,n,i){var o=dist(t,r),a=e.segments[e.segments.length-1],s={p0:t,p1:r,t0:n,t1:i,startDist:a?a.startDist+a.length:0,length:o};e.segments.push(s),e.length+=o}for(var d=0;d<t.length;d++){var f=t[d],p=t[d-1];p&&(f.startDist=p.startDist+p.length),h(f,f.p0,u[d*c],0,i.bezierProjPcts[0]);for(var g=0;g<c-1;g++)h(f,u[d*c+g],u[d*c+g+1],i.bezierProjPcts[g],i.bezierProjPcts[g+1]);h(f,u[d*c+c-1],f.p2,i.bezierProjPcts[c-1],1)}return e.cache=t}(),f=0,p=0,g=0;g<d.length;g++){for(var y=d[u?g:d.length-1-g],v=0;v<y.segments.length;v++){var m=y.segments[u?v:y.segments.length-1-v],b=g===d.length-1&&v===y.segments.length-1;if(f=p,(p+=m.length)>=c||b){h={cp:y,segment:m};break}}if(h)break}var $=h.cp,_=h.segment,w=(c-f)/_.length,E=_.t1-_.t0,x=u?_.t0+E*w:_.t1-E*w;x=bound(0,x,1),t=qbezierPtAt($.p0,$.p1,$.p2,x),l=bezierAngle($.p0,$.p1,$.p2,x);break;case"straight":case"segments":case"haystack":for(var T,S,O,C,k=0,P=n.allpts.length,A=0;A+3<P&&(u?(O={x:n.allpts[A],y:n.allpts[A+1]},C={x:n.allpts[A+2],y:n.allpts[A+3]}):(O={x:n.allpts[P-2-A],y:n.allpts[P-1-A]},C={x:n.allpts[P-4-A],y:n.allpts[P-3-A]}),S=k,!((k+=T=dist(O,C))>=c));A+=2);var I=(c-S)/T;I=bound(0,I,1),t=lineAt(O,C,I),l=lineAngle(O,C)}a("labelX",s,t.x),a("labelY",s,t.y),a("labelAutoAngle",s,l)}};l("source"),l("target"),this.applyLabelDimensions(e)}},BRp$6.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},BRp$6.applyPrefixedLabelDimensions=function(e,t){var r=e._private,n=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,n),o=e.pstyle("line-height").pfValue,a=e.pstyle("text-wrap").strValue,s=getPrefixedProperty(r.rscratch,"labelWrapCachedLines",t)||[],l="wrap"!==a?1:Math.max(s.length,1),u=i.height/l,c=u*o,h=i.width,d=i.height+(l-1)*(o-1)*u;setPrefixedProperty(r.rstyle,"labelWidth",t,h),setPrefixedProperty(r.rscratch,"labelWidth",t,h),setPrefixedProperty(r.rstyle,"labelHeight",t,d),setPrefixedProperty(r.rscratch,"labelHeight",t,d),setPrefixedProperty(r.rscratch,"labelLineHeight",t,c)},BRp$6.getLabelText=function(e,t){var r=e._private,n=t?t+"-":"",i=e.pstyle(n+"label").strValue,o=e.pstyle("text-transform").value,a=function(e,n){return n?(setPrefixedProperty(r.rscratch,e,t,n),n):getPrefixedProperty(r.rscratch,e,t)};if(!i)return"";"none"==o||("uppercase"==o?i=i.toUpperCase():"lowercase"==o&&(i=i.toLowerCase()));var s=e.pstyle("text-wrap").value;if("wrap"===s){var l=a("labelKey");if(null!=l&&a("labelWrapKey")===l)return a("labelWrapCachedText");for(var u=i.split("\n"),c=e.pstyle("text-max-width").pfValue,h="anywhere"===e.pstyle("text-overflow-wrap").value,d=[],f=/[\s\u200b]+/,p=h?"":" ",g=0;g<u.length;g++){var y=u[g],v=this.calculateLabelDimensions(e,y).width;if(h){var m=y.split("").join("");y=m}if(v>c){for(var b=y.split(f),$="",_=0;_<b.length;_++){var w=b[_],E=0===$.length?w:$+p+w;this.calculateLabelDimensions(e,E).width<=c?$+=w+p:($&&d.push($),$=w+p)}$.match(/^[\s\u200b]+$/)||d.push($)}else d.push(y)}a("labelWrapCachedLines",d),i=a("labelWrapCachedText",d.join("\n")),a("labelWrapKey",l)}else if("ellipsis"===s){for(var x=e.pstyle("text-max-width").pfValue,T="",S=!1,O=0;O<i.length;O++){if(this.calculateLabelDimensions(e,T+i[O]+"").width>x)break;T+=i[O],O===i.length-1&&(S=!0)}return S||(T+=""),T}return i},BRp$6.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},BRp$6.calculateLabelDimensions=function(e,t){var r=hashString(t,e._private.labelDimsKey),n=this.labelDimCache||(this.labelDimCache=[]),i=n[r];if(null!=i)return i;var o=e.pstyle("font-style").strValue,a=1*e.pstyle("font-size").pfValue+"px",s=e.pstyle("font-family").strValue,l=e.pstyle("font-weight").strValue,u=this.labelCalcDiv;u||(u=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(u));var c=u.style;return c.fontFamily=s,c.fontStyle=o,c.fontSize=a,c.fontWeight=l,c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none",c.padding="0",c.lineHeight="1",c.whiteSpace="pre",u.textContent=t,n[r]={width:Math.ceil(u.clientWidth/1),height:Math.ceil(u.clientHeight/1)}},BRp$6.calculateLabelAngle=function(e,t){var r=e._private.rscratch,n=e.isEdge(),i=t?t+"-":"",o=e.pstyle(i+"text-rotation"),a=o.strValue;return"none"===a?0:n&&"autorotate"===a?r.labelAutoAngle:"autorotate"===a?0:o.pfValue},BRp$6.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),n=e._private.rscratch;n.labelAngle=t.calculateLabelAngle(e),r&&(n.sourceLabelAngle=t.calculateLabelAngle(e,"source"),n.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var BRp$7={},TOO_SMALL_CUT_RECT=28,warnedCutRect=!1;BRp$7.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<TOO_SMALL_CUT_RECT||e.height()<TOO_SMALL_CUT_RECT))return warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"cutrectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var r=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return t};var BRp$8={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,n=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),r)for(var n=0;n<e.length;n++){var i=e[n],o=i._private,a=o.rstyle;a.clean=!1,a.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",(function(e){var t=e.target;n(t)})).on("style.* background.*",(function(e){var t=e.target;n(t,!1)}));var i=function(i){if(i){for(var o=r.onUpdateEleCalcsFns,a=0;a<t.length;a++){var s=t[a],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(n(s.connectedEdges()),l.cleanConnected=!0)}if(o)for(var u=0;u<o.length;u++){(0,o[u])(i,t)}r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=function(e){return e._private.rstyle.cleanConnected},n=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var o=0;o<e.length;o++){var a=e[o],s=a._private,l=s.rstyle;!a.isEdge()||r(a.source())&&r(a.target())||(l.clean=!1),t&&l.clean||a.removed()||"none"!==a.pstyle("display").value&&("nodes"===s.group?i.push(a):n.push(a),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],h=c._private.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var f=0;f<n.length;f++){var p=n[f]._private,g=p.rstyle,y=p.rscratch;g.srcX=y.arrowStartX,g.srcY=y.arrowStartY,g.tgtX=y.arrowEndX,g.tgtY=y.arrowEndY,g.midX=y.midX,g.midY=y.midY,g.labelAngle=y.labelAngle,g.sourceLabelAngle=y.sourceLabelAngle,g.targetLabelAngle=y.targetLabelAngle}}}},BRp$9={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var n=(i=e[r])._private.rscratch;i.grabbed()&&!i.isParent()?t.push(i):n.inDragLayer?e.drag.push(i):e.nondrag.push(i)}for(r=0;r<t.length;r++){var i=t[r];e.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(zIndexSort),t.interactive=t.filter((function(e){return e.interactive()})),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},BRp$a={};[BRp$1,BRp$2,BRp$3,BRp$4,BRp$5,BRp$6,BRp$7,BRp$8,BRp$9].forEach((function(e){extend(BRp$a,e)}));var BRp$b={getCachedImage:function(e,t,r){var n=this.imageCache=this.imageCache||{},i=n[e];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;var o=(i=n[e]=n[e]||{}).image=new Image;o.addEventListener("load",r),o.addEventListener("error",(function(){o.error=!0}));return"data:"===e.substring(0,"data:".length).toLowerCase()||(o.crossOrigin=t),o.src=e,o}},BRp$c={registerBinding:function(e,t,r,n){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(e);return o.on.apply(o,i)},binder:function(e){var t=this,r=e===window||e===document||e===document.body||domElement(e);if(null==t.supportsPassiveEvents){var n=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,i)}catch(e){}t.supportsPassiveEvents=n}var o=function(n,i,o){var a=Array.prototype.slice.call(arguments);return r&&t.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),t.bindings.push({target:e,args:a}),(e.addEventListener||e.on).apply(e,a),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()}};BRp$c.load=function(){var e=this,t=function(e){return e.selected()},r=function(t,r,n,i){null==t&&(t=e.cy);for(var o=0;o<r.length;o++){var a=r[o];t.emit({originalEvent:n,type:a,position:i})}},n=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},i=function(t,r){var n=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var i=0;r&&i<r.length;i++){if((t=r[i]).isNode()&&t.isParent()){n=!1;break}}else n=!0;return n},o=function(e){e[0]._private.rscratch.inDragLayer=!0},a=function(e){e[0]._private.rscratch.isGrabTarget=!0},s=function(e,t){var r=t.addToList;r.has(e)||(r.merge(e),function(e){e[0]._private.grabbed=!0}(e))},l=function(t,r){r=r||{};var n=t.cy().hasCompoundNodes();r.inDragLayer&&(t.forEach(o),t.neighborhood().stdFilter((function(e){return!n||e.isEdge()})).forEach(o)),r.addToList&&t.forEach((function(e){s(e,r)})),function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var r=e.descendants();t.inDragLayer&&(r.forEach(o),r.connectedEdges().forEach(o)),t.addToList&&t.addToList.unmerge(r)}}(t,r),h(t,{inDragLayer:r.inDragLayer}),e.updateCachedGrabbedEles()},u=l,c=function(t){t&&(e.getCachedZSortedEles().forEach((function(e){!function(e){e[0]._private.grabbed=!1}(e),function(e){e[0]._private.rscratch.inDragLayer=!1}(e),function(e){e[0]._private.rscratch.isGrabTarget=!1}(e)})),e.updateCachedGrabbedEles())},h=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var r=e.ancestors().orphans();if(!r.same(e)){var n=r.descendants().spawnSelf().merge(r).unmerge(e).unmerge(e.descendants()),i=n.connectedEdges();t.inDragLayer&&(i.forEach(o),n.forEach(o)),t.addToList&&n.forEach((function(e){s(e,t)}))}}},d=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},f="undefined"!=typeof MutationObserver,p="undefined"!=typeof ResizeObserver;f?(e.removeObserver=new MutationObserver((function(t){for(var r=0;r<t.length;r++){var n=t[r].removedNodes;if(n)for(var i=0;i<n.length;i++){if(n[i]===e.container){e.destroy();break}}}})),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",(function(t){e.destroy()}));var g=util((function(){e.cy.resize()}),100);f&&(e.styleObserver=new MutationObserver(g),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",g),p&&(e.resizeObserver=new ResizeObserver(g),e.resizeObserver.observe(e.container));var y=function(){e.invalidateContainerClientCoordsCache()};!function(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,(function(t){e.registerBinding(t,"transitionend",y),e.registerBinding(t,"animationend",y),e.registerBinding(t,"scroll",y)})),e.registerBinding(e.container,"contextmenu",(function(e){e.preventDefault()}));var v=function(t){for(var r=e.findContainerClientCoords(),n=r[0],i=r[1],o=r[2],a=r[3],s=t.touches?t.touches:[t],l=!1,u=0;u<s.length;u++){var c=s[u];if(n<=c.clientX&&c.clientX<=n+o&&i<=c.clientY&&c.clientY<=i+a){l=!0;break}}if(!l)return!1;for(var h=e.container,d=t.target.parentNode,f=!1;d;){if(d===h){f=!0;break}d=d.parentNode}return!!f};e.registerBinding(e.container,"mousedown",(function(t){if(v(t)){t.preventDefault(),d(),e.hoverData.capture=!0,e.hoverData.which=t.which;var n=e.cy,i=[t.clientX,t.clientY],o=e.projectIntoViewport(i[0],i[1]),s=e.selection,c=e.findNearestElements(o[0],o[1],!0,!1),h=c[0],f=e.dragData.possibleDragElements;e.hoverData.mdownPos=o,e.hoverData.mdownGPos=i;if(3==t.which){e.hoverData.cxtStarted=!0;var p={originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}};h?(h.activate(),h.emit(p),e.hoverData.down=h):n.emit(p),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(h&&h.activate(),null!=h&&e.nodeIsGrabbable(h)){var g=function(e){return{originalEvent:t,type:e,position:{x:o[0],y:o[1]}}};if(a(h),h.selected()){f=e.dragData.possibleDragElements=n.collection();var y=n.$((function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)}));l(y,{addToList:f}),h.emit(g("grabon")),y.forEach((function(e){e.emit(g("grab"))}))}else f=e.dragData.possibleDragElements=n.collection(),u(h,{addToList:f}),h.emit(g("grabon")).emit(g("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=h,e.hoverData.downs=c,e.hoverData.downTime=(new Date).getTime(),r(h,["mousedown","tapstart","vmousedown"],t,{x:o[0],y:o[1]}),null==h?(s[4]=1,e.data.bgActivePosistion={x:o[0],y:o[1]},e.redrawHint("select",!0),e.redraw()):h.pannable()&&(s[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout((function(){if(!e.hoverData.tapholdCancelled){var r=e.hoverData.down;r?r.emit({originalEvent:t,type:"taphold",position:{x:o[0],y:o[1]}}):n.emit({originalEvent:t,type:"taphold",position:{x:o[0],y:o[1]}})}}),e.tapholdDuration)}s[0]=s[2]=o[0],s[1]=s[3]=o[1]}}),!1),e.registerBinding(window,"mousemove",(function(t){if(e.hoverData.capture||v(t)){var o=!1,a=e.cy,s=a.zoom(),u=[t.clientX,t.clientY],h=e.projectIntoViewport(u[0],u[1]),d=e.hoverData.mdownPos,f=e.hoverData.mdownGPos,p=e.selection,g=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(g=e.findNearestElement(h[0],h[1],!0,!1));var y,m=e.hoverData.last,b=e.hoverData.down,$=[h[0]-p[2],h[1]-p[3]],_=e.dragData.possibleDragElements;if(f){var w=u[0]-f[0],E=w*w,x=u[1]-f[1],T=E+x*x;e.hoverData.isOverThresholdDrag=y=T>=e.desktopTapThreshold2}var S=n(t);y&&(e.hoverData.tapholdCancelled=!0);o=!0,r(g,["mousemove","vmousemove","tapdrag"],t,{x:h[0],y:h[1]});var O=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||a.emit({originalEvent:t,type:"boxstart",position:{x:h[0],y:h[1]}}),p[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(y){var C={originalEvent:t,type:"cxtdrag",position:{x:h[0],y:h[1]}};b?b.emit(C):a.emit(C),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&g===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:h[0],y:h[1]}}),e.hoverData.cxtOver=g,g&&g.emit({originalEvent:t,type:"cxtdragover",position:{x:h[0],y:h[1]}}))}}else if(e.hoverData.dragging){if(o=!0,a.panningEnabled()&&a.userPanningEnabled()){var k;if(e.hoverData.justStartedPan){var P=e.hoverData.mdownPos;k={x:(h[0]-P[0])*s,y:(h[1]-P[1])*s},e.hoverData.justStartedPan=!1}else k={x:$[0]*s,y:$[1]*s};a.panBy(k),e.hoverData.dragged=!0}h=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=p[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||g==m||(m&&r(m,["mouseout","tapdragout"],t,{x:h[0],y:h[1]}),g&&r(g,["mouseover","tapdragover"],t,{x:h[0],y:h[1]}),e.hoverData.last=g),b)if(y){if(a.boxSelectionEnabled()&&S)b&&b.grabbed()&&(c(_),b.emit("freeon"),_.emit("free"),e.dragData.didDrag&&(b.emit("dragfreeon"),_.emit("dragfree"))),O();else if(b&&b.grabbed()&&e.nodeIsDraggable(b)){var A=!e.dragData.didDrag;A&&e.redrawHint("eles",!0),e.dragData.didDrag=!0;var I=a.collection();e.hoverData.draggingEles||l(_,{inDragLayer:!0});var D={x:0,y:0};if(number($[0])&&number($[1])&&(D.x+=$[0],D.y+=$[1],A)){var N=e.hoverData.dragDelta;N&&number(N[0])&&number(N[1])&&(D.x+=N[0],D.y+=N[1])}for(var M=0;M<_.length;M++){var R=_[M];e.nodeIsDraggable(R)&&R.grabbed()&&I.merge(R)}e.hoverData.draggingEles=!0,I.silentShift(D).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else!function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push($[0]),t.push($[1])):(t[0]+=$[0],t[1]+=$[1])}();o=!0}else if(y){if(e.hoverData.dragging||!a.boxSelectionEnabled()||!S&&a.panningEnabled()&&a.userPanningEnabled()){if(!e.hoverData.selecting&&a.panningEnabled()&&a.userPanningEnabled()){i(b,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,p[4]=0,e.data.bgActivePosistion=array2point(d),e.redrawHint("select",!0),e.redraw())}}else O();b&&b.pannable()&&b.active()&&b.unactivate()}return p[2]=h[0],p[3]=h[1],o?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}}),!1),e.registerBinding(window,"mouseup",(function(i){if(e.hoverData.capture){e.hoverData.capture=!1;var o=e.cy,a=e.projectIntoViewport(i.clientX,i.clientY),s=e.selection,l=e.findNearestElement(a[0],a[1],!0,!1),u=e.dragData.possibleDragElements,h=e.hoverData.down,d=n(i);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,h&&h.unactivate(),3===e.hoverData.which){var f={originalEvent:i,type:"cxttapend",position:{x:a[0],y:a[1]}};if(h?h.emit(f):o.emit(f),!e.hoverData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:a[0],y:a[1]}};h?h.emit(p):o.emit(p)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(r(l,["mouseup","tapend","vmouseup"],i,{x:a[0],y:a[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||r(h,["click","tap","vclick"],i,{x:a[0],y:a[1]}),null!=h||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||n(i)||(o.$(t).unselect(["tapunselect"]),u.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=u=o.collection()),l!=h||e.dragData.didDrag||e.hoverData.selecting||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===o.selectionType()||d?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):d||(o.$(t).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var g=o.collection(e.getAllInBox(s[0],s[1],s[2],s[3]));e.redrawHint("select",!0),g.length>0&&e.redrawHint("eles",!0),o.emit({type:"boxend",originalEvent:i,position:{x:a[0],y:a[1]}});var y=function(e){return e.selectable()&&!e.selected()};"additive"===o.selectionType()||d||o.$(t).unmerge(g).unselect(),g.emit("box").stdFilter(y).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!s[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var v=h&&h.grabbed();c(u),v&&(h.emit("freeon"),u.emit("free"),e.dragData.didDrag&&(h.emit("dragfreeon"),u.emit("dragfree")))}}s[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}}),!1);var m,b,$,_,w,E,x,T,S,O,C,k,P;e.registerBinding(e.container,"wheel",(function(t){if(!e.scrollingPage){var r,n=e.cy,i=e.projectIntoViewport(t.clientX,t.clientY),o=[i[0]*n.zoom()+n.pan().x,i[1]*n.zoom()+n.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])t.preventDefault();else if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled())t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout((function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()}),150),r=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,r*=e.wheelSensitivity,1===t.deltaMode&&(r*=33),n.zoom({level:n.zoom()*Math.pow(10,r),renderedPosition:{x:o[0],y:o[1]}})}}),!0),e.registerBinding(window,"scroll",(function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout((function(){e.scrollingPage=!1}),250)}),!0),e.registerBinding(e.container,"mouseout",(function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:r[0],y:r[1]}})}),!1),e.registerBinding(e.container,"mouseover",(function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:r[0],y:r[1]}})}),!1);var A,I,D,N,M=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))},R=function(e,t,r,n){return(r-e)*(r-e)+(n-t)*(n-t)};if(e.registerBinding(e.container,"touchstart",A=function(t){if(v(t)){d(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var n=e.cy,i=e.touchData.now,o=e.touchData.earlier;if(t.touches[0]){var s=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(t.touches[1]){s=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);i[2]=s[0],i[3]=s[1]}if(t.touches[2]){s=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);i[4]=s[0],i[5]=s[1]}if(t.touches[1]){e.touchData.singleTouchMoved=!0,c(e.dragData.touchDragEles);var h=e.findContainerClientCoords();S=h[0],O=h[1],C=h[2],k=h[3],m=t.touches[0].clientX-S,b=t.touches[0].clientY-O,$=t.touches[1].clientX-S,_=t.touches[1].clientY-O,P=0<=m&&m<=C&&0<=$&&$<=C&&0<=b&&b<=k&&0<=_&&_<=k;var f=n.pan(),p=n.zoom();w=M(m,b,$,_),E=R(m,b,$,_),T=[((x=[(m+$)/2,(b+_)/2])[0]-f.x)/p,(x[1]-f.y)/p];if(E<4e4&&!t.touches[2]){var g=e.findNearestElement(i[0],i[1],!0,!0),y=e.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=g):y&&y.isNode()?(y.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=y):n.emit({originalEvent:t,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])n.boxSelectionEnabled()&&t.preventDefault();else if(t.touches[1]);else if(t.touches[0]){var A=e.findNearestElements(i[0],i[1],!0,!0),I=A[0];if(null!=I&&(I.activate(),e.touchData.start=I,e.touchData.starts=A,e.nodeIsGrabbable(I))){var D=e.dragData.touchDragEles=n.collection(),N=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),I.selected()?(N=n.$((function(t){return t.selected()&&e.nodeIsGrabbable(t)})),l(N,{addToList:D})):u(I,{addToList:D}),a(I);var L=function(e){return{originalEvent:t,type:e,position:{x:i[0],y:i[1]}}};I.emit(L("grabon")),N?N.forEach((function(e){e.emit(L("grab"))})):I.emit(L("grab"))}r(I,["touchstart","tapstart","vmousedown"],t,{x:i[0],y:i[1]}),null==I&&(e.data.bgActivePosistion={x:s[0],y:s[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout((function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||r(e.touchData.start,["taphold"],t,{x:i[0],y:i[1]})}),e.tapholdDuration)}if(t.touches.length>=1){for(var j=e.touchData.startPosition=[],F=0;F<i.length;F++)j[F]=o[F]=i[F];var B=t.touches[0];e.touchData.startGPosition=[B.clientX,B.clientY]}}},!1),e.registerBinding(window,"touchmove",I=function(t){var n=e.touchData.capture;if(n||v(t)){var o=e.selection,a=e.cy,s=e.touchData.now,u=e.touchData.earlier,h=a.zoom();if(t.touches[0]){var d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=d[0],s[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=d[0],s[5]=d[1]}var f,p=e.touchData.startGPosition;if(n&&t.touches[0]&&p){for(var g=[],y=0;y<s.length;y++)g[y]=s[y]-u[y];var x=t.touches[0].clientX-p[0],C=x*x,k=t.touches[0].clientY-p[1];f=C+k*k>=e.touchTapThreshold2}if(n&&e.touchData.cxt){t.preventDefault();var A=t.touches[0].clientX-S,I=t.touches[0].clientY-O,D=t.touches[1].clientX-S,N=t.touches[1].clientY-O,L=R(A,I,D,N);if(L/E>=2.25||L>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var j={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(j),e.touchData.start=null):a.emit(j)}}if(n&&e.touchData.cxt){j={originalEvent:t,type:"cxtdrag",position:{x:s[0],y:s[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(j):a.emit(j),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var F=e.findNearestElement(s[0],s[1],!0,!0);e.touchData.cxtOver&&F===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:s[0],y:s[1]}}),e.touchData.cxtOver=F,F&&F.emit({originalEvent:t,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(n&&t.touches[2]&&a.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||a.emit({originalEvent:t,type:"boxstart",position:{x:s[0],y:s[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,o[4]=1,o&&0!==o.length&&void 0!==o[0]?(o[2]=(s[0]+s[2]+s[4])/3,o[3]=(s[1]+s[3]+s[5])/3):(o[0]=(s[0]+s[2]+s[4])/3,o[1]=(s[1]+s[3]+s[5])/3,o[2]=(s[0]+s[2]+s[4])/3+1,o[3]=(s[1]+s[3]+s[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(n&&t.touches[1]&&!e.touchData.didSelect&&a.zoomingEnabled()&&a.panningEnabled()&&a.userZoomingEnabled()&&a.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),J=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var B=0;B<J.length;B++){var z=J[B]._private;z.grabbed=!1,z.rscratch.inDragLayer=!1}}var G=e.touchData.start,U=(A=t.touches[0].clientX-S,I=t.touches[0].clientY-O,D=t.touches[1].clientX-S,N=t.touches[1].clientY-O,M(A,I,D,N)),H=U/w;if(P){var V=(A-m+(D-$))/2,Y=(I-b+(N-_))/2,W=a.zoom(),q=W*H,X=a.pan(),K=T[0]*W+X.x,Z=T[1]*W+X.y,Q={x:-q/W*(K-X.x-V)+K,y:-q/W*(Z-X.y-Y)+Z};if(G&&G.active()){var J=e.dragData.touchDragEles;c(J),e.redrawHint("drag",!0),e.redrawHint("eles",!0),G.unactivate().emit("freeon"),J.emit("free"),e.dragData.didDrag&&(G.emit("dragfreeon"),J.emit("dragfree"))}a.viewport({zoom:q,pan:Q,cancelOnFailedZoom:!0}),w=U,m=A,b=I,$=D,_=N,e.pinching=!0}if(t.touches[0]){d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=d[0],s[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=d[0],s[5]=d[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var ee=e.touchData.start,te=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(F=e.findNearestElement(s[0],s[1],!0,!0)),n&&null!=ee&&t.preventDefault(),n&&null!=ee&&e.nodeIsDraggable(ee))if(f){J=e.dragData.touchDragEles;var re=!e.dragData.didDrag;re&&l(J,{inDragLayer:!0}),e.dragData.didDrag=!0;var ne={x:0,y:0};if(number(g[0])&&number(g[1]))if(ne.x+=g[0],ne.y+=g[1],re)e.redrawHint("eles",!0),(ie=e.touchData.dragDelta)&&number(ie[0])&&number(ie[1])&&(ne.x+=ie[0],ne.y+=ie[1]);e.hoverData.draggingEles=!0,J.silentShift(ne).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==u[0]&&e.touchData.startPosition[1]==u[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ie;0===(ie=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ie.push(g[0]),ie.push(g[1])):(ie[0]+=g[0],ie[1]+=g[1])}if(r(ee||F,["touchmove","tapdrag","vmousemove"],t,{x:s[0],y:s[1]}),ee&&ee.grabbed()||F==te||(te&&te.emit({originalEvent:t,type:"tapdragout",position:{x:s[0],y:s[1]}}),F&&F.emit({originalEvent:t,type:"tapdragover",position:{x:s[0],y:s[1]}})),e.touchData.last=F,n)for(B=0;B<s.length;B++)s[B]&&e.touchData.startPosition[B]&&f&&(e.touchData.singleTouchMoved=!0);if(n&&(null==ee||ee.pannable())&&a.panningEnabled()&&a.userPanningEnabled()){i(ee,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=array2point(e.touchData.startPosition)),e.swipePanning?a.panBy({x:g[0]*h,y:g[1]*h}):f&&(e.swipePanning=!0,a.panBy({x:x*h,y:k*h}),ee&&(ee.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=d[0],s[1]=d[1]}}for(y=0;y<s.length;y++)u[y]=s[y];n&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(window,"touchcancel",D=function(t){var r=e.touchData.start;e.touchData.capture=!1,r&&r.unactivate()}),e.registerBinding(window,"touchend",N=function(n){var i=e.touchData.start;if(e.touchData.capture){0===n.touches.length&&(e.touchData.capture=!1),n.preventDefault();var o=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var a,s=e.cy,l=s.zoom(),u=e.touchData.now,h=e.touchData.earlier;if(n.touches[0]){var d=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=d[0],u[1]=d[1]}if(n.touches[1]){d=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=d[0],u[3]=d[1]}if(n.touches[2]){d=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=d[0],u[5]=d[1]}if(i&&i.unactivate(),e.touchData.cxt){if(a={originalEvent:n,type:"cxttapend",position:{x:u[0],y:u[1]}},i?i.emit(a):s.emit(a),!e.touchData.cxtDragged){var f={originalEvent:n,type:"cxttap",position:{x:u[0],y:u[1]}};i?i.emit(f):s.emit(f)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!n.touches[2]&&s.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var p=s.collection(e.getAllInBox(o[0],o[1],o[2],o[3]));o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,e.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:n,position:{x:u[0],y:u[1]}});p.emit("box").stdFilter((function(e){return e.selectable()&&!e.selected()})).select().emit("boxselect"),p.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=i&&i.unactivate(),n.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var g=e.dragData.touchDragEles;if(null!=i){var y=i._private.grabbed;c(g),e.redrawHint("drag",!0),e.redrawHint("eles",!0),y&&(i.emit("freeon"),g.emit("free"),e.dragData.didDrag&&(i.emit("dragfreeon"),g.emit("dragfree"))),r(i,["touchend","tapend","vmouseup","tapdragout"],n,{x:u[0],y:u[1]}),i.unactivate(),e.touchData.start=null}else{var v=e.findNearestElement(u[0],u[1],!0,!0);r(v,["touchend","tapend","vmouseup","tapdragout"],n,{x:u[0],y:u[1]})}var m=e.touchData.startPosition[0]-u[0],b=m*m,$=e.touchData.startPosition[1]-u[1],_=(b+$*$)*l*l;e.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),r(i,["tap","vclick"],n,{x:u[0],y:u[1]})),null!=i&&!e.dragData.didDrag&&i._private.selectable&&_<e.touchTapThreshold2&&!e.pinching&&("single"===s.selectionType()?(s.$(t).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var w=0;w<u.length;w++)h[w]=u[w];e.dragData.didDrag=!1,0===n.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null,e.touchData.didSelect=!1),n.touches.length<2&&(1===n.touches.length&&(e.touchData.startGPosition=[n.touches[0].clientX,n.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var L=[],j=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},F=function(e){L.push(function(e){return{event:e,touch:j(e)}}(e))},B=function(e){for(var t=0;t<L.length;t++){if(L[t].event.pointerId===e.pointerId)return void L.splice(t,1)}},z=function(e){e.touches=L.map((function(e){return e.touch}))},G=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",(function(e){G(e)||(e.preventDefault(),F(e),z(e),A(e))})),e.registerBinding(e.container,"pointerup",(function(e){G(e)||(B(e),z(e),N(e))})),e.registerBinding(e.container,"pointercancel",(function(e){G(e)||(B(e),z(e),D())})),e.registerBinding(e.container,"pointermove",(function(e){G(e)||(e.preventDefault(),function(e){var t=L.filter((function(t){return t.event.pointerId===e.pointerId}))[0];t.event=e,t.touch=j(e)}(e),z(e),I(e))}))}};var BRp$d={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,r,n,i){this.renderer.nodeShapeImpl("polygon",e,t,r,n,i,this.points)},intersectLine:function(e,t,r,n,i,o,a){return polygonIntersectLine(i,o,this.points,e,t,r/2,n/2,a)},checkPoint:function(e,t,r,n,i,o,a){return pointInsidePolygon(e,t,this.points,o,a,n,i,[0,-1],r)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,r,n,i){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)},intersectLine:function(e,t,r,n,i,o,a){return intersectLineEllipse(i,o,e,t,r/2+a,n/2+a)},checkPoint:function(e,t,r,n,i,o,a){return checkInEllipse(e,t,n,i,o,a,r)}}},generateRoundPolygon:function(e,t){for(var r=new Array(2*t.length),n=0;n<t.length/2;n++){var i=2*n,o=void 0;o=n<t.length/2-1?2*(n+1):0,r[4*n]=t[i],r[4*n+1]=t[i+1];var a=t[o]-t[i],s=t[o+1]-t[i+1],l=Math.sqrt(a*a+s*s);r[4*n+2]=a/l,r[4*n+3]=s/l}return this.nodeShapes[e]={renderer:this,name:e,points:r,draw:function(e,t,r,n,i){this.renderer.nodeShapeImpl("round-polygon",e,t,r,n,i,this.points)},intersectLine:function(e,t,r,n,i,o,a){return roundPolygonIntersectLine(i,o,this.points,e,t,r,n)},checkPoint:function(e,t,r,n,i,o,a){return pointInsideRoundPolygon(e,t,this.points,o,a,n,i)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,i){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)},intersectLine:function(e,t,r,n,i,o,a){return roundRectangleIntersectLine(i,o,e,t,r,n,a)},checkPoint:function(e,t,r,n,i,o,a){var s=getRoundRectangleRadius(n,i),l=2*s;return!!pointInsidePolygon(e,t,this.points,o,a,n,i-l,[0,-1],r)||(!!pointInsidePolygon(e,t,this.points,o,a,n-l,i,[0,-1],r)||(!!checkInEllipse(e,t,l,l,o-n/2+s,a-i/2+s,r)||(!!checkInEllipse(e,t,l,l,o+n/2-s,a-i/2+s,r)||(!!checkInEllipse(e,t,l,l,o+n/2-s,a+i/2-s,r)||!!checkInEllipse(e,t,l,l,o-n/2+s,a+i/2-s,r)))))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,i){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)},generateCutTrianglePts:function(e,t,r,n){var i=this.cornerLength,o=t/2,a=e/2,s=r-a,l=r+a,u=n-o,c=n+o;return{topLeft:[s,u+i,s+i,u,s+i,u+i],topRight:[l-i,u,l,u+i,l-i,u+i],bottomRight:[l,c-i,l-i,c,l-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(e,t,r,n,i,o,a){var s=this.generateCutTrianglePts(r+2*a,n+2*a,e,t),l=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return polygonIntersectLine(i,o,l,e,t)},checkPoint:function(e,t,r,n,i,o,a){if(pointInsidePolygon(e,t,this.points,o,a,n,i-2*this.cornerLength,[0,-1],r))return!0;if(pointInsidePolygon(e,t,this.points,o,a,n-2*this.cornerLength,i,[0,-1],r))return!0;var s=this.generateCutTrianglePts(n,i,o,a);return pointInsidePolygonPoints(e,t,s.topLeft)||pointInsidePolygonPoints(e,t,s.topRight)||pointInsidePolygonPoints(e,t,s.bottomRight)||pointInsidePolygonPoints(e,t,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,i){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)},intersectLine:function(e,t,r,n,i,o,a){var s=this.generateBarrelBezierPts(r+2*a,n+2*a,e,t),l=function(e){var t=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),r=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),n=qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,r.x,r.y,n.x,n.y,e[4],e[5]]},u=[].concat(l(s.topLeft),l(s.topRight),l(s.bottomRight),l(s.bottomLeft));return polygonIntersectLine(i,o,u,e,t)},generateBarrelBezierPts:function(e,t,r,n){var i=t/2,o=e/2,a=r-o,s=r+o,l=n-i,u=n+i,c=getBarrelCurveConstants(e,t),h=c.heightOffset,d=c.widthOffset,f=c.ctrlPtOffsetPct*e,p={topLeft:[a,l+h,a+f,l,a+d,l],topRight:[s-d,l,s-f,l,s,l+h],bottomRight:[s,u-h,s-f,u,s-d,u],bottomLeft:[a+d,u,a+f,u,a,u-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,r,n,i,o,a){var s=getBarrelCurveConstants(n,i),l=s.heightOffset,u=s.widthOffset;if(pointInsidePolygon(e,t,this.points,o,a,n,i-2*l,[0,-1],r))return!0;if(pointInsidePolygon(e,t,this.points,o,a,n-2*u,i,[0,-1],r))return!0;for(var c=this.generateBarrelBezierPts(n,i,o,a),h=function(e,t,r){var n=r[4],i=r[2],o=r[0],a=r[5],s=r[1],l=Math.min(n,o),u=Math.max(n,o),c=Math.min(a,s),h=Math.max(a,s);if(l<=e&&e<=u&&c<=t&&t<=h){var d=bezierPtsToQuadCoeff(n,i,o),f=solveQuadratic(d[0],d[1],d[2],e).filter((function(e){return 0<=e&&e<=1}));if(f.length>0)return f[0]}return null},d=Object.keys(c),f=0;f<d.length;f++){var p=c[d[f]],g=h(e,t,p);if(null!=g){var y=p[5],v=p[3],m=p[1],b=qbezierAt(y,v,m,g);if(p.isTop&&b<=t)return!0;if(p.isBottom&&t<=b)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,i){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)},intersectLine:function(e,t,r,n,i,o,a){var s=t-(n/2+a),l=finiteLinesIntersect(i,o,e,t,e-(r/2+a),s,e+(r/2+a),s,!1);return l.length>0?l:roundRectangleIntersectLine(i,o,e,t,r,n,a)},checkPoint:function(e,t,r,n,i,o,a){var s=getRoundRectangleRadius(n,i),l=2*s;if(pointInsidePolygon(e,t,this.points,o,a,n,i-l,[0,-1],r))return!0;if(pointInsidePolygon(e,t,this.points,o,a,n-l,i,[0,-1],r))return!0;var u=n/2+2*r,c=i/2+2*r;return!!pointInsidePolygonPoints(e,t,[o-u,a-c,o-u,a,o+u,a,o+u,a-c])||(!!checkInEllipse(e,t,l,l,o+n/2-s,a+i/2-s,r)||!!checkInEllipse(e,t,l,l,o-n/2+s,a+i/2-s,r))}}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0)),this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));var n=new Array(20),i=generateUnitNgonPoints(5,0),o=generateUnitNgonPoints(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=o[2*s],n[4*s+3]=o[2*s+1];n=fitPolygonToSquare(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var r,n="polygon-"+e.join("$");return(r=this[n])?r:t.generatePolygon(n,e)}}},BRp$e={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||staticEmptyObject();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&error("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort((function(e,t){return t.priority-e.priority}))}}},beforeRenderCallbacks=function(e,t,r){for(var n=e.beforeRenderCallbacks,i=0;i<n.length;i++)n[i].fn(t,r)};BRp$e.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;requestAnimationFrame$1((function r(n){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){beforeRenderCallbacks(e,!0,n);var i=performanceNow();e.render(e.renderOptions);var o=e.lastDrawTime=performanceNow();void 0===e.averageRedrawTime&&(e.averageRedrawTime=o-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var a=o-i;e.redrawTotalTime+=a,e.lastRedrawTime=a,e.averageRedrawTime=e.averageRedrawTime/2+a/2,e.requestedFrame=!1}else beforeRenderCallbacks(e,!1,n);e.skipFrame=!1,requestAnimationFrame$1(r)}}))}};var BaseRenderer=function(e){this.init(e)},BR=BaseRenderer,BRp$f=BR.prototype;BRp$f.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],BRp$f.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container();if(window$1){var n=window$1.document,i=n.head,o="__________cytoscape_container",a=null!=n.getElementById("__________cytoscape_stylesheet");if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!a){var s=n.createElement("style");s.id="__________cytoscape_stylesheet",s.innerHTML="."+o+" { position: relative; }",i.insertBefore(s,i.children[0])}"static"===window$1.getComputedStyle(r).getPropertyValue("position")&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=number(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},BRp$f.notify=function(e,t){var r=this,n=r.cy;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&n.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):r.destroy():r.load())},BRp$f.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],n=r.target;(n.off||n.removeEventListener).apply(n,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},BRp$f.isHeadless=function(){return!1},[BRp,BRp$a,BRp$b,BRp$c,BRp$d,BRp$e].forEach((function(e){extend(BRp$f,e)}));var fullFpsTime=1e3/60,defs={setupDequeueing:function(e){return function(){var t=this,r=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var n=util((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),e.deqRedrawThreshold),i=e.priority||noop;r.beforeRender((function(i,o){var a=performanceNow(),s=r.averageRedrawTime,l=r.lastRedrawTime,u=[],c=r.cy.extent(),h=r.getPixelRatio();for(i||r.flushRenderedStyleQueue();;){var d=performanceNow(),f=d-a,p=d-o;if(l<fullFpsTime){var g=fullFpsTime-(i?s:0);if(p>=e.deqFastCost*g)break}else if(i){if(f>=e.deqCost*l||f>=e.deqAvgCost*s)break}else if(p>=e.deqNoDrawCost*fullFpsTime)break;var y=e.deq(t,h,c);if(!(y.length>0))break;for(var v=0;v<y.length;v++)u.push(y[v])}u.length>0&&(e.onDeqd(t,u),!i&&e.shouldRedraw(t,u,h,c)&&n())}),i(t))}}}},ElementTextureCacheLookup=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:falsify;_classCallCheck(this,e),this.idsByKey=new Map$1$1,this.keyForId=new Map$1$1,this.cachesByLvl=new Map$1$1,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return _createClass(e,[{key:"getIdsFor",value:function(e){null==e&&error("Can not get id list for null key");var t=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new Set$1,t.set(e,r)),r}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t),n=this.getKey(e);this.deleteIdForKey(r,t),this.addIdForKey(n,t),this.keyForId.set(t,n)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteIdForKey(r,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,r=this.lvls,n=t.get(e);return n||(n=new Map$1$1,t.set(e,n),r.push(e)),n}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var r=this.getKey(e),n=this.getCache(r,t);return null!=n&&this.updateKeyMappingFor(e),n}},{key:"getForCachedKey",value:function(e,t){var r=this.keyForId.get(e.id());return this.getCache(r,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var r=this.getKey(e);return this.hasCache(r,t)}},{key:"setCache",value:function(e,t,r){r.key=e,this.getCachesAt(t).set(e,r)}},{key:"set",value:function(e,t,r){var n=this.getKey(e);this.setCache(n,t,r),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var r=this.getKey(e);this.deleteCache(r,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach((function(r){return t.deleteCache(e,r)}))}},{key:"invalidate",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteKeyMappingFor(e);var n=this.doesEleInvalidateKey(e);return n&&this.invalidateKey(r),n||0===this.getNumberOfIdsForKey(r)}}]),e}(),minTxrH=25,txrStepH=50,minLvl=-4,maxLvl=3,maxZoom=7.99,eleTxrSpacing=8,defTxrWidth=1024,maxTxrW=1024,maxTxrH=1024,minUtility=.2,maxFullness=.8,maxFullnessChecks=10,deqCost=.15,deqAvgCost=.1,deqNoDrawCost=.9,deqFastCost=.9,deqRedrawThreshold=100,maxDeqSize=1,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function(e,t){this.renderer=e,this.onDequeues=[];var r=initDefaults(t);extend(this,r),this.lookup=new ElementTextureCacheLookup(r.getKey,r.doesEleInvalidateKey),this.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons,ETCp.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},ETCp.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},ETCp.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Heap((function(e,t){return t.reqs-e.reqs}))},ETCp.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ETCp.getElement=function(e,t,r,n,i){var o=this,a=this.renderer,s=a.cy.zoom(),l=this.lookup;if(0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible())return null;if(!o.allowEdgeTxrCaching&&e.isEdge()||!o.allowParentTxrCaching&&e.isParent())return null;if(null==n&&(n=Math.ceil(log2(s*r))),n<minLvl)n=minLvl;else if(s>=maxZoom||n>maxLvl)return null;var u=Math.pow(2,n),c=t.h*u,h=t.w*u,d=a.eleTextBiggerThanMin(e,u);if(!this.isVisible(e,d))return null;var f,p=l.get(e,n);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(f=c<=minTxrH?minTxrH:c<=txrStepH?txrStepH:Math.ceil(c/txrStepH)*txrStepH,c>maxTxrH||h>maxTxrW)return null;var g=o.getTextureQueue(f),y=g[g.length-2],v=function(){return o.recycleTexture(f,h)||o.addTexture(f,h)};y||(y=g[g.length-1]),y||(y=v()),y.width-y.usedWidth<h&&(y=v());for(var m,b=function(e){return e&&e.scaledLabelShown===d},$=i&&i===getTxrReasons.dequeue,_=i&&i===getTxrReasons.highQuality,w=i&&i===getTxrReasons.downscale,E=n+1;E<=maxLvl;E++){var x=l.get(e,E);if(x){m=x;break}}var T=m&&m.level===n+1?m:null,S=function(){y.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,y.usedWidth,0,h,c)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,h,f),b(T))S();else if(b(m)){if(!_)return o.queueElement(e,m.level-1),m;for(var O=m.level;O>n;O--)T=o.getElement(e,t,r,O,getTxrReasons.downscale);S()}else{var C;if(!$&&!_&&!w)for(var k=n-1;k>=minLvl;k--){var P=l.get(e,k);if(P){C=P;break}}if(b(C))return o.queueElement(e,n),C;y.context.translate(y.usedWidth,0),y.context.scale(u,u),this.drawElement(y.context,e,t,d,!1),y.context.scale(1/u,1/u),y.context.translate(-y.usedWidth,0)}return p={x:y.usedWidth,texture:y,level:n,scale:u,width:h,height:c,scaledLabelShown:d},y.usedWidth+=Math.ceil(h+eleTxrSpacing),y.eleCaches.push(p),l.set(e,n,p),o.checkTextureFullness(y),p},ETCp.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},ETCp.invalidateElement=function(e){var t=this.lookup,r=[];if(t.isInvalid(e)){for(var n=minLvl;n<=maxLvl;n++){var i=t.getForCachedKey(e,n);i&&r.push(i)}if(t.invalidate(e))for(var o=0;o<r.length;o++){var a=r[o],s=a.texture;s.invalidatedWidth+=a.width,a.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(e)}},ETCp.checkTextureUtility=function(e){e.invalidatedWidth>=minUtility*e.width&&this.retireTexture(e)},ETCp.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>maxFullness&&e.fullnessChecks>=maxFullnessChecks?removeFromArray(t,e):e.fullnessChecks++},ETCp.retireTexture=function(e){var t=e.height,r=this.getTextureQueue(t),n=this.lookup;removeFromArray(r,e),e.retired=!0;for(var i=e.eleCaches,o=0;o<i.length;o++){var a=i[o];n.deleteCache(a.key,a.level)}clearArray(i),this.getRetiredTextureQueue(t).push(e)},ETCp.addTexture=function(e,t){var r={};return this.getTextureQueue(e).push(r),r.eleCaches=[],r.height=e,r.width=Math.max(defTxrWidth,t),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},ETCp.recycleTexture=function(e,t){for(var r=this.getTextureQueue(e),n=this.getRetiredTextureQueue(e),i=0;i<n.length;i++){var o=n[i];if(o.width>=t)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,clearArray(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),removeFromArray(n,o),r.push(o),o}},ETCp.queueElement=function(e,t){var r=this.getElementQueue(),n=this.getElementKeyToQueue(),i=this.getKey(e),o=n[i];if(o)o.level=Math.max(o.level,t),o.eles.merge(e),o.reqs++,r.updateItem(o);else{var a={eles:e.spawn().merge(e),level:t,reqs:1,key:i};r.push(a),n[i]=a}},ETCp.dequeue=function(e){for(var t=this.getElementQueue(),r=this.getElementKeyToQueue(),n=[],i=this.lookup,o=0;o<maxDeqSize&&t.size()>0;o++){var a=t.pop(),s=a.key,l=a.eles[0],u=i.hasCache(l,a.level);if(r[s]=null,!u){n.push(a);var c=this.getBoundingBox(l);this.getElement(l,c,e,a.level,getTxrReasons.dequeue)}}return n},ETCp.removeFromQueue=function(e){var t=this.getElementQueue(),r=this.getElementKeyToQueue(),n=this.getKey(e),i=r[n];null!=i&&(1===i.eles.length?(i.reqs=MAX_INT,t.updateItem(i),t.pop(),r[n]=null):i.eles.unmerge(e))},ETCp.onDequeue=function(e){this.onDequeues.push(e)},ETCp.offDequeue=function(e){removeFromArray(this.onDequeues,e)},ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold,deqCost:deqCost,deqAvgCost:deqAvgCost,deqNoDrawCost:deqNoDrawCost,deqFastCost:deqFastCost,deq:function(e,t,r){return e.dequeue(t,r)},onDeqd:function(e,t){for(var r=0;r<e.onDequeues.length;r++){(0,e.onDequeues[r])(t)}},shouldRedraw:function(e,t,r,n){for(var i=0;i<t.length;i++)for(var o=t[i].eles,a=0;a<o.length;a++){var s=o[a].boundingBox();if(boundingBoxesIntersect(s,n))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var defNumLayers=1,minLvl$1=-4,maxLvl$1=2,maxZoom$1=3.99,deqRedrawThreshold$1=50,refineEleDebounceTime=50,deqCost$1=.15,deqAvgCost$1=.1,deqNoDrawCost$1=.9,deqFastCost$1=.9,maxDeqSize$1=1,invalidThreshold=250,maxLayerArea=16e6,useHighQualityEleTxrReqs=!0,LayeredTextureCache=function(e){var t=this,r=t.renderer=e,n=r.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=performanceNow()-2*invalidThreshold,t.skipping=!1,t.eleTxrDeqs=n.collection(),t.scheduleElementRefinement=util((function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)}),refineEleDebounceTime),r.beforeRender((function(e,r){r-t.lastInvalidationTime<=invalidThreshold?t.skipping=!0:t.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);t.layersQueue=new Heap((function(e,t){return t.reqs-e.reqs})),t.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT$1=Math.pow(2,53)-1;LTCp.makeLayer=function(e,t){var r=Math.pow(2,t),n=Math.ceil(e.w*r),i=Math.ceil(e.h*r),o=this.renderer.makeOffscreenCanvas(n,i),a={id:layerIdPool=++layerIdPool%MAX_INT$1,bb:e,level:t,width:n,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,u=-a.bb.y1;return s.scale(r,r),s.translate(l,u),a},LTCp.getLayers=function(e,t,r){var n=this,i=n.renderer.cy.zoom(),o=n.firstGet;if(n.firstGet=!1,null==r)if((r=Math.ceil(log2(i*t)))<minLvl$1)r=minLvl$1;else if(i>=maxZoom$1||r>maxLvl$1)return null;n.validateLayersElesOrdering(r,e);var a,s,l=n.layersByLevel,u=Math.pow(2,r),c=l[r]=l[r]||[];if(n.levelIsComplete(r,e))return c;!function(){var t=function(t){if(n.validateLayersElesOrdering(t,e),n.levelIsComplete(t,e))return s=l[t],!0},i=function(e){if(!s)for(var n=r+e;minLvl$1<=n&&n<=maxLvl$1&&!t(n);n+=e);};i(1),i(-1);for(var o=c.length-1;o>=0;o--){var a=c[o];a.invalid&&removeFromArray(c,a)}}();var h=function(t){var i=(t=t||{}).after;if(function(){if(!a){a=makeBoundingBox();for(var t=0;t<e.length;t++)updateBoundingBox(a,e[t].boundingBox())}}(),a.w*u*(a.h*u)>maxLayerArea)return null;var o=n.makeLayer(a,r);if(null!=i){var s=c.indexOf(i)+1;c.splice(s,0,o)}else(void 0===t.insert||t.insert)&&c.unshift(o);return o};if(n.skipping&&!o)return null;for(var d=null,f=e.length/defNumLayers,p=!o,g=0;g<e.length;g++){var y=e[g],v=y._private.rscratch,m=v.imgLayerCaches=v.imgLayerCaches||{},b=m[r];if(b)d=b;else{if((!d||d.eles.length>=f||!boundingBoxInBoundingBox(d.bb,y.boundingBox()))&&!(d=h({insert:!0,after:d})))return null;s||p?n.queueLayer(d,y):n.drawEleInLayer(d,y,r,t),d.eles.push(y),m[r]=d}}return s||(p?null:c)},LTCp.getEleLevelForLayerLevel=function(e,t){return e},LTCp.drawEleInLayer=function(e,t,r,n){var i=this.renderer,o=e.context,a=t.boundingBox();0!==a.w&&0!==a.h&&t.visible()&&(r=this.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,t,null,null,r,useHighQualityEleTxrReqs),i.setImgSmoothing(o,!0))},LTCp.levelIsComplete=function(e,t){var r=this.layersByLevel[e];if(!r||0===r.length)return!1;for(var n=0,i=0;i<r.length;i++){var o=r[i];if(o.reqs>0)return!1;if(o.invalid)return!1;n+=o.eles.length}return n===t.length},LTCp.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var n=0;n<r.length;n++){for(var i=r[n],o=-1,a=0;a<t.length;a++)if(i.eles[0]===t[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==t[s+a]){this.invalidateLayer(i);break}}}},LTCp.updateElementsInLayers=function(e,t){for(var r=element(e[0]),n=0;n<e.length;n++)for(var i=r?null:e[n],o=r?e[n]:e[n].ele,a=o._private.rscratch,s=a.imgLayerCaches=a.imgLayerCaches||{},l=minLvl$1;l<=maxLvl$1;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||t(u,o,i))}},LTCp.haveLayers=function(){for(var e=!1,t=minLvl$1;t<=maxLvl$1;t++){var r=this.layersByLevel[t];if(r&&r.length>0){e=!0;break}}return e},LTCp.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=performanceNow(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,(function(e,r,n){t.invalidateLayer(e)})))},LTCp.invalidateLayer=function(e){if(this.lastInvalidationTime=performanceNow(),!e.invalid){var t=e.level,r=e.eles,n=this.layersByLevel[t];removeFromArray(n,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<r.length;i++){var o=r[i]._private.rscratch.imgLayerCaches;o&&(o[t]=null)}}},LTCp.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,(function(e,r,n){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)t.queueLayer(i,i.eles[o])}))},LTCp.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},LTCp.queueLayer=function(e,t){var r=this.layersQueue,n=e.elesQueue,i=n.hasId=n.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;n.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},LTCp.dequeue=function(e){for(var t=this.layersQueue,r=[],n=0;n<maxDeqSize$1&&0!==t.size();){var i=t.peek();if(i.replacement)t.pop();else if(i.replaces&&i!==i.replaces.replacement)t.pop();else if(i.invalid)t.pop();else{var o=i.elesQueue.shift();o&&(this.drawEleInLayer(i,o,i.level,e),n++),0===r.length&&r.push(!0),0===i.elesQueue.length&&(t.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return r},LTCp.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],r=e.replaces,n=t.indexOf(r);if(!(n<0||r.invalid)){t[n]=e;for(var i=0;i<e.eles.length;i++){var o=e.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[e.level]=e)}this.requestRedraw()}},LTCp.requestRedraw=util((function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()}),100),LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold$1,deqCost:deqCost$1,deqAvgCost:deqAvgCost$1,deqNoDrawCost:deqNoDrawCost$1,deqFastCost:deqFastCost$1,deq:function(e,t){return e.dequeue(t)},onDeqd:noop,shouldRedraw:trueify,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var CRp={},impl;function polygon(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function triangleBackcurve(e,t,r){for(var n,i=0;i<t.length;i++){var o=t[i];0===i&&(n=o),e.lineTo(o.x,o.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function triangleTee(e,t,r){e.beginPath&&e.beginPath();for(var n=t,i=0;i<n.length;i++){var o=n[i];e.lineTo(o.x,o.y)}var a=r,s=r[0];e.moveTo(s.x,s.y);for(i=1;i<a.length;i++){o=a[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()}function circle(e,t,r,n){e.arc(t,r,n,0,2*Math.PI,!1)}CRp.arrowShapeImpl=function(e){return(impl||(impl={polygon:polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"triangle-cross":triangleTee,circle:circle}))[e]};var CRp$1={drawElement:function(e,t,r,n,i,o){t.isNode()?this.drawNode(e,t,r,n,i,o):this.drawEdge(e,t,r,n,i,o)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawCachedElementPortion:function(e,t,r,n,i,o,a,s){var l=this,u=r.getBoundingBox(t);if(0!==u.w&&0!==u.h){var c=r.getElement(t,u,n,i,o);if(null!=c){var h=s(l,t);if(0===h)return;var d,f,p,g,y,v,m=a(l,t),b=u.x1,$=u.y1,_=u.w,w=u.h;if(0!==m){var E=r.getRotationPoint(t);p=E.x,g=E.y,e.translate(p,g),e.rotate(m),(y=l.getImgSmoothing(e))||l.setImgSmoothing(e,!0);var x=r.getRotationOffset(t);d=x.x,f=x.y}else d=b,f=$;1!==h&&(v=e.globalAlpha,e.globalAlpha=v*h),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,d,f,_,w),1!==h&&(e.globalAlpha=v),0!==m&&(e.rotate(-m),e.translate(-p,-g),y||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},getZeroRotation=function(){return 0},getLabelRotation=function(e,t){return e.getTextAngle(t,null)},getSourceLabelRotation=function(e,t){return e.getTextAngle(t,"source")},getTargetLabelRotation=function(e,t){return e.getTextAngle(t,"target")},getOpacity=function(e,t){return t.effectiveOpacity()},getTextOpacity=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};CRp$1.drawCachedElement=function(e,t,r,n,i,o){var a=this,s=a.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,h=s.tlbTxrCache,d=t.boundingBox(),f=!0===o?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&t.visible()&&(!n||boundingBoxesIntersect(d,n))){var p=t.isEdge(),g=t.element()._private.rscratch.badLine;a.drawCachedElementPortion(e,t,l,r,i,f,getZeroRotation,getOpacity),p&&g||a.drawCachedElementPortion(e,t,u,r,i,f,getLabelRotation,getTextOpacity),p&&!g&&(a.drawCachedElementPortion(e,t,c,r,i,f,getSourceLabelRotation,getTextOpacity),a.drawCachedElementPortion(e,t,h,r,i,f,getTargetLabelRotation,getTextOpacity)),a.drawElementOverlay(e,t)}},CRp$1.drawElements=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];this.drawElement(e,n)}},CRp$1.drawCachedElements=function(e,t,r,n){for(var i=0;i<t.length;i++){var o=t[i];this.drawCachedElement(e,o,r,n)}},CRp$1.drawCachedNodes=function(e,t,r,n){for(var i=0;i<t.length;i++){var o=t[i];o.isNode()&&this.drawCachedElement(e,o,r,n)}},CRp$1.drawLayeredElements=function(e,t,r,n){var i=this.data.lyrTxrCache.getLayers(t,r);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&e.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,r,n)};var CRp$2={drawEdge:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this,s=t._private.rscratch;if((!o||t.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var l;r&&(l=r,e.translate(-l.x1,-l.y1));var u=o?t.pstyle("opacity").value:1,c=t.pstyle("line-style").value,h=t.pstyle("width").pfValue,d=t.pstyle("line-cap").value,f=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;e.lineWidth=h,e.lineCap=d,a.eleStrokeStyle(e,t,r),a.drawEdgePath(t,e,s.allpts,c),e.lineCap="butt"},p=function(){i&&a.drawEdgeOverlay(e,t)},g=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;a.drawArrowheads(e,t,r)},y=function(){a.drawElementText(e,t,null,n)};e.lineJoin="round";var v="yes"===t.pstyle("ghost").value;if(v){var m=t.pstyle("ghost-offset-x").pfValue,b=t.pstyle("ghost-offset-y").pfValue,$=t.pstyle("ghost-opacity").value,_=u*$;e.translate(m,b),f(_),g(_),e.translate(-m,-b)}f(),g(),p(),y(),r&&e.translate(l.x1,l.y1)}},drawEdgeOverlay:function(e,t){if(t.visible()){var r=t.pstyle("overlay-opacity").value;if(0!==r){var n=this,i=n.usePaths(),o=t._private.rscratch,a=2*t.pstyle("overlay-padding").pfValue,s=t.pstyle("overlay-color").value;e.lineWidth=a,"self"!==o.edgeType||i?e.lineCap="round":e.lineCap="butt",n.colorStrokeStyle(e,s[0],s[1],s[2],r),n.drawEdgePath(t,e,o.allpts,"solid")}}},drawEdgePath:function(e,t,r,n){var i,o=e._private.rscratch,a=t,s=!1,l=this.usePaths(),u=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(l){var h=r.join("$");o.pathCacheKey&&o.pathCacheKey===h?(i=t=o.pathCache,s=!0):(i=t=new Path2D,o.pathCacheKey=h,o.pathCache=i)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=c;break;case"solid":a.setLineDash([])}if(!s&&!o.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),o.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<r.length;d+=4)t.quadraticCurveTo(r[d],r[d+1],r[d+2],r[d+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<r.length;f+=2)t.lineTo(r[f],r[f+1])}t=a,l?t.stroke(i):t.stroke(),t.setLineDash&&t.setLineDash([])},drawArrowheads:function(e,t,r){var n=t._private.rscratch,i="haystack"===n.edgeType;i||this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},drawArrowhead:function(e,t,r,n,i,o,a){if(!(isNaN(n)||null==n||isNaN(i)||null==i||isNaN(o)||null==o)){var s=t.pstyle(r+"-arrow-shape").value;if("none"!==s){var l="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",u=t.pstyle(r+"-arrow-fill").value,c=t.pstyle("width").pfValue,h=t.pstyle("opacity").value;void 0===a&&(a=h);var d=e.globalCompositeOperation;1===a&&"hollow"!==u||(e.globalCompositeOperation="destination-out",this.colorFillStyle(e,255,255,255,1),this.colorStrokeStyle(e,255,255,255,1),this.drawArrowShape(t,e,l,c,s,n,i,o),e.globalCompositeOperation=d);var f=t.pstyle(r+"-arrow-color").value;this.colorFillStyle(e,f[0],f[1],f[2],a),this.colorStrokeStyle(e,f[0],f[1],f[2],a),this.drawArrowShape(t,e,u,c,s,n,i,o)}}},drawArrowShape:function(e,t,r,n,i,o,a,s){var l,u=this,c=this.usePaths()&&"triangle-cross"!==i,h=!1,d=t,f={x:o,y:a},p=e.pstyle("arrow-scale").value,g=this.getArrowWidth(n,p),y=u.arrowShapes[i];if(c){var v=u.arrowPathCache=u.arrowPathCache||[],m=hashString(i),b=v[m];null!=b?(l=t=b,h=!0):(l=t=new Path2D,v[m]=l)}h||(t.beginPath&&t.beginPath(),c?y.draw(t,1,0,{x:0,y:0},1):y.draw(t,g,s,f,n),t.closePath&&t.closePath()),t=d,c&&(t.translate(o,a),t.rotate(s),t.scale(g,g)),"filled"!==r&&"both"!==r||(c?t.fill(l):t.fill()),"hollow"!==r&&"both"!==r||(t.lineWidth=(y.matchEdgeWidth?n:1)/(c?g:1),t.lineJoin="miter",c?t.stroke(l):t.stroke()),c&&(t.scale(1/g,1/g),t.rotate(-s),t.translate(-o,-a))}},CRp$3={safeDrawImage:function(e,t,r,n,i,o,a,s,l,u){i<=0||o<=0||l<=0||u<=0||e.drawImage(t,r,n,i,o,a,s,l,u)},drawInscribedImage:function(e,t,r,n,i){var o=this,a=r.position(),s=a.x,l=a.y,u=r.cy().style(),c=u.getIndexedStyle.bind(u),h=c(r,"background-fit","value",n),d=c(r,"background-repeat","value",n),f=r.width(),p=r.height(),g=2*r.padding(),y=f+("inner"===c(r,"background-width-relative-to","value",n)?0:g),v=p+("inner"===c(r,"background-height-relative-to","value",n)?0:g),m=r._private.rscratch,b="node"===c(r,"background-clip","value",n),$=c(r,"background-image-opacity","value",n)*i,_=t.width||t.cachedW,w=t.height||t.cachedH;null!=_&&null!=w||(document.body.appendChild(t),_=t.cachedW=t.width||t.offsetWidth,w=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var E=_,x=w;if("auto"!==c(r,"background-width","value",n)&&(E="%"===c(r,"background-width","units",n)?c(r,"background-width","pfValue",n)*y:c(r,"background-width","pfValue",n)),"auto"!==c(r,"background-height","value",n)&&(x="%"===c(r,"background-height","units",n)?c(r,"background-height","pfValue",n)*v:c(r,"background-height","pfValue",n)),0!==E&&0!==x){if("contain"===h)E*=T=Math.min(y/E,v/x),x*=T;else if("cover"===h){var T;E*=T=Math.max(y/E,v/x),x*=T}var S=s-y/2,O=c(r,"background-position-x","units",n),C=c(r,"background-position-x","pfValue",n);S+="%"===O?(y-E)*C:C;var k=c(r,"background-offset-x","units",n),P=c(r,"background-offset-x","pfValue",n);S+="%"===k?(y-E)*P:P;var A=l-v/2,I=c(r,"background-position-y","units",n),D=c(r,"background-position-y","pfValue",n);A+="%"===I?(v-x)*D:D;var N=c(r,"background-offset-y","units",n),M=c(r,"background-offset-y","pfValue",n);A+="%"===N?(v-x)*M:M,m.pathCache&&(S-=s,A-=l,s=0,l=0);var R=e.globalAlpha;if(e.globalAlpha=$,"no-repeat"===d)b&&(e.save(),m.pathCache?e.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(r)].draw(e,s,l,y,v),e.clip())),o.safeDrawImage(e,t,0,0,_,w,S,A,E,x),b&&e.restore();else{var L=e.createPattern(t,d);e.fillStyle=L,o.nodeShapes[o.getNodeShape(r)].draw(e,s,l,y,v),e.translate(S,A),e.fill(),e.translate(-S,-A)}e.globalAlpha=R}}},CRp$4={};function roundRect(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;e.beginPath(),e.moveTo(t+o,r),e.lineTo(t+n-o,r),e.quadraticCurveTo(t+n,r,t+n,r+o),e.lineTo(t+n,r+i-o),e.quadraticCurveTo(t+n,r+i,t+n-o,r+i),e.lineTo(t+o,r+i),e.quadraticCurveTo(t,r+i,t,r+i-o),e.lineTo(t,r+o),e.quadraticCurveTo(t,r,t+o,r),e.closePath(),e.fill()}CRp$4.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(log2(r*n));t=Math.pow(2,i)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},CRp$4.drawElementText=function(e,t,r,n,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this;if(null==n){if(o&&!a.eleTextBiggerThanMin(t))return}else if(!1===n)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;var l=a.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var u=t.element()._private.rscratch.badLine,c=t.pstyle("label"),h=t.pstyle("source-label"),d=t.pstyle("target-label");if(u||(!c||!c.value)&&(!h||!h.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var f,p=!r;r&&(f=r,e.translate(-f.x1,-f.y1)),null==i?(a.drawText(e,t,null,p,o),t.isEdge()&&(a.drawText(e,t,"source",p,o),a.drawText(e,t,"target",p,o))):a.drawText(e,t,i,p,o),r&&e.translate(f.x1,f.y1)},CRp$4.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},CRp$4.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",o=t.pstyle("font-family").strValue,a=t.pstyle("font-weight").strValue,s=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=n+" "+a+" "+i+" "+o,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},CRp$4.getTextAngle=function(e,t){var r=e._private.rscratch,n=t?t+"-":"",i=e.pstyle(n+"text-rotation"),o=getPrefixedProperty(r,"labelAngle",t);return"autorotate"===i.strValue?e.isEdge()?o:0:"none"===i.strValue?0:i.pfValue},CRp$4.drawText=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=t._private,a=o.rscratch,s=i?t.effectiveOpacity():1;if(!i||0!==s&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var l,u,c=getPrefixedProperty(a,"labelX",r),h=getPrefixedProperty(a,"labelY",r),d=this.getLabelText(t,r);if(null!=d&&""!==d&&!isNaN(c)&&!isNaN(h)){this.setupTextStyle(e,t,i);var f,p=r?r+"-":"",g=getPrefixedProperty(a,"labelWidth",r),y=getPrefixedProperty(a,"labelHeight",r),v=t.pstyle(p+"text-margin-x").pfValue,m=t.pstyle(p+"text-margin-y").pfValue,b=t.isEdge(),$=t.pstyle("text-halign").value,_=t.pstyle("text-valign").value;switch(b&&($="center",_="center"),c+=v,h+=m,0!==(f=n?this.getTextAngle(t,r):0)&&(l=c,u=h,e.translate(l,u),e.rotate(f),c=0,h=0),_){case"top":break;case"center":h+=y/2;break;case"bottom":h+=y}var w=t.pstyle("text-background-opacity").value,E=t.pstyle("text-border-opacity").value,x=t.pstyle("text-border-width").pfValue,T=t.pstyle("text-background-padding").pfValue;if(w>0||x>0&&E>0){var S=c-T;switch($){case"left":S-=g;break;case"center":S-=g/2}var O=h-y-T,C=g+2*T,k=y+2*T;if(w>0){var P=e.fillStyle,A=t.pstyle("text-background-color").value;e.fillStyle="rgba("+A[0]+","+A[1]+","+A[2]+","+w*s+")";var I=t.pstyle("text-background-shape").strValue;0===I.indexOf("round")?roundRect(e,S,O,C,k,2):e.fillRect(S,O,C,k),e.fillStyle=P}if(x>0&&E>0){var D=e.strokeStyle,N=e.lineWidth,M=t.pstyle("text-border-color").value,R=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+M[0]+","+M[1]+","+M[2]+","+E*s+")",e.lineWidth=x,e.setLineDash)switch(R){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=x/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(S,O,C,k),"double"===R){var L=x/2;e.strokeRect(S+L,O+L,C-2*L,k-2*L)}e.setLineDash&&e.setLineDash([]),e.lineWidth=N,e.strokeStyle=D}}var j=2*t.pstyle("text-outline-width").pfValue;if(j>0&&(e.lineWidth=j),"wrap"===t.pstyle("text-wrap").value){var F=getPrefixedProperty(a,"labelWrapCachedLines",r),B=getPrefixedProperty(a,"labelLineHeight",r),z=g/2,G=this.getLabelJustification(t);switch("auto"===G||("left"===$?"left"===G?c+=-g:"center"===G&&(c+=-z):"center"===$?"left"===G?c+=-z:"right"===G&&(c+=z):"right"===$&&("center"===G?c+=z:"right"===G&&(c+=g))),_){case"top":h-=(F.length-1)*B;break;case"center":case"bottom":h-=(F.length-1)*B}for(var U=0;U<F.length;U++)j>0&&e.strokeText(F[U],c,h),e.fillText(F[U],c,h),h+=B}else j>0&&e.strokeText(d,c,h),e.fillText(d,c,h);0!==f&&(e.rotate(-f),e.translate(-l,-u))}}};var CRp$5={drawNode:function(e,t,r){var n,i,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,u=t._private,c=u.rscratch,h=t.position();if(number(h.x)&&number(h.y)&&(!s||t.visible())){var d,f,p=s?t.effectiveOpacity():1,g=l.usePaths(),y=!1,v=t.padding();n=t.width()+2*v,i=t.height()+2*v,r&&(f=r,e.translate(-f.x1,-f.y1));for(var m=t.pstyle("background-image"),b=m.value,$=new Array(b.length),_=new Array(b.length),w=0,E=0;E<b.length;E++){var x=b[E],T=$[E]=null!=x&&"none"!==x;if(T){var S=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",E);w++,_[E]=l.getCachedImage(x,S,(function(){u.backgroundTimestamp=Date.now(),t.emitAndNotify("background")}))}}var O=t.pstyle("background-blacken").value,C=t.pstyle("border-width").pfValue,k=t.pstyle("background-opacity").value*p,P=t.pstyle("border-color").value,A=t.pstyle("border-style").value,I=t.pstyle("border-opacity").value*p;e.lineJoin="miter";var D=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;l.eleFillStyle(e,t,r)},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;l.colorStrokeStyle(e,P[0],P[1],P[2],t)},M=t.pstyle("shape").strValue,R=t.pstyle("shape-polygon-points").pfValue;if(g){e.translate(h.x,h.y);var L=l.nodePathCache=l.nodePathCache||[],j=hashStrings("polygon"===M?M+","+R.join(","):M,""+i,""+n),F=L[j];null!=F?(d=F,y=!0,c.pathCache=d):(d=new Path2D,L[j]=c.pathCache=d)}var B=function(){if(!y){var r=h;g&&(r={x:0,y:0}),l.nodeShapes[l.getNodeShape(t)].draw(d||e,r.x,r.y,n,i)}g?e.fill(d):e.fill()},z=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=u.backgrounding,i=0,o=0;o<_.length;o++)$[o]&&_[o].complete&&!_[o].error&&(i++,l.drawInscribedImage(e,_[o],t,o,r));u.backgrounding=!(i===w),n!==u.backgrounding&&t.updateStyle(!1)},G=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;l.hasPie(t)&&(l.drawPie(e,t,o),r&&(g||l.nodeShapes[l.getNodeShape(t)].draw(e,h.x,h.y,n,i)))},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=(O>0?O:-O)*t,n=O>0?0:255;0!==O&&(l.colorFillStyle(e,n,n,n,r),g?e.fill(d):e.fill())},H=function(){if(C>0){if(e.lineWidth=C,e.lineCap="butt",e.setLineDash)switch(A){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(g?e.stroke(d):e.stroke(),"double"===A){e.lineWidth=C/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(d):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}},V=function(){a&&l.drawNodeOverlay(e,t,h,n,i)},Y=function(){l.drawElementText(e,t,null,o)},W="yes"===t.pstyle("ghost").value;if(W){var q=t.pstyle("ghost-offset-x").pfValue,X=t.pstyle("ghost-offset-y").pfValue,K=t.pstyle("ghost-opacity").value,Z=K*p;e.translate(q,X),D(K*k),B(),z(Z),G(0!==O||0!==C),U(Z),N(K*I),H(),e.translate(-q,-X)}D(),B(),z(),G(0!==O||0!==C),U(),N(),H(),g&&e.translate(-h.x,-h.y),Y(),V(),r&&e.translate(f.x1,f.y1)}},drawNodeOverlay:function(e,t,r,n,i){if(t.visible()){var o=t.pstyle("overlay-padding").pfValue,a=t.pstyle("overlay-opacity").value,s=t.pstyle("overlay-color").value;if(a>0){if(r=r||t.position(),null==n||null==i){var l=t.padding();n=t.width()+2*l,i=t.height()+2*l}this.colorFillStyle(e,s[0],s[1],s[2],a),this.nodeShapes.roundrectangle.draw(e,r.x,r.y,n+2*o,i+2*o),e.fill()}}},hasPie:function(e){return(e=e[0])._private.hasPie},drawPie:function(e,t,r,n){t=t[0],n=n||t.position();var i=t.cy().style(),o=t.pstyle("pie-size"),a=n.x,s=n.y,l=t.width(),u=t.height(),c=Math.min(l,u)/2,h=0;this.usePaths()&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var f=t.pstyle("pie-"+d+"-background-size").value,p=t.pstyle("pie-"+d+"-background-color").value,g=t.pstyle("pie-"+d+"-background-opacity").value*r,y=f/100;y+h>1&&(y=1-h);var v=1.5*Math.PI+2*Math.PI*h,m=v+2*Math.PI*y;0===f||h>=1||h+y>1||(e.beginPath(),e.moveTo(a,s),e.arc(a,s,c,v,m),e.closePath(),this.colorFillStyle(e,p[0],p[1],p[2],g),e.fill(),h+=y)}}},CRp$6={},motionBlurDelay=100;CRp$6.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},CRp$6.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],n=!0,i=0;i<r.length;i++)if((t=r[i]).context===e){n=!1;break}return n&&(t={context:e},r.push(t)),t},CRp$6.createGradientStyleFor=function(e,t,r,n,i){var o,a=this.usePaths(),s=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===n)if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),h=r.midpoint(),d=dist(u,h),f=dist(c,h);o=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,f))}else{var p=a?{x:0,y:0}:r.position(),g=r.paddedWidth(),y=r.paddedHeight();o=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,y))}else if(r.isEdge()){var v=r.sourceEndpoint(),m=r.targetEndpoint();o=e.createLinearGradient(v.x,v.y,m.x,m.y)}else{var b=a?{x:0,y:0}:r.position(),$=r.paddedWidth()/2,_=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":o=e.createLinearGradient(b.x,b.y-_,b.x,b.y+_);break;case"to-top":o=e.createLinearGradient(b.x,b.y+_,b.x,b.y-_);break;case"to-left":o=e.createLinearGradient(b.x+$,b.y,b.x-$,b.y);break;case"to-right":o=e.createLinearGradient(b.x-$,b.y,b.x+$,b.y);break;case"to-bottom-right":case"to-right-bottom":o=e.createLinearGradient(b.x-$,b.y-_,b.x+$,b.y+_);break;case"to-top-right":case"to-right-top":o=e.createLinearGradient(b.x-$,b.y+_,b.x+$,b.y-_);break;case"to-bottom-left":case"to-left-bottom":o=e.createLinearGradient(b.x+$,b.y-_,b.x-$,b.y+_);break;case"to-top-left":case"to-left-top":o=e.createLinearGradient(b.x+$,b.y+_,b.x-$,b.y-_)}}if(!o)return null;for(var w=l.length===s.length,E=s.length,x=0;x<E;x++)o.addColorStop(w?l[x]:x/(E-1),"rgba("+s[x][0]+","+s[x][1]+","+s[x][2]+","+i+")");return o},CRp$6.gradientFillStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"background",t,r,n);if(!i)return null;e.fillStyle=i},CRp$6.colorFillStyle=function(e,t,r,n,i){e.fillStyle="rgba("+t+","+r+","+n+","+i+")"},CRp$6.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientFillStyle(e,t,n,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}},CRp$6.gradientStrokeStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"line",t,r,n);if(!i)return null;e.strokeStyle=i},CRp$6.colorStrokeStyle=function(e,t,r,n,i){e.strokeStyle="rgba("+t+","+r+","+n+","+i+")"},CRp$6.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientStrokeStyle(e,t,n,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}},CRp$6.matchCanvasSize=function(e){var t=this,r=t.data,n=t.findContainerClientCoords(),i=n[2],o=n[3],a=t.getPixelRatio(),s=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(a=s);var l,u=i*a,c=o*a;if(u!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var h=r.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)(l=r.canvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=o+"px";for(d=0;d<t.BUFFER_COUNT;d++)(l=r.bufferCanvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=o+"px";t.textureMult=1,a<=1&&(l=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=u*t.textureMult,l.height=c*t.textureMult),t.canvasWidth=u,t.canvasHeight=c}},CRp$6.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},CRp$6.render=function(e){var t=(e=e||staticEmptyObject()).forcedContext,r=e.drawAllLayers,n=e.drawOnlyNodeLayer,i=e.forcedZoom,o=e.forcedPan,a=this,s=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,l=a.cy,u=a.data,c=u.canvasNeedsRedraw,h=a.textureOnViewport&&!t&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),d=void 0!==e.motionBlur?e.motionBlur:a.motionBlur,f=a.motionBlurPxRatio,p=l.hasCompoundNodes(),g=a.hoverData.draggingEles,y=!(!a.hoverData.selecting&&!a.touchData.selecting),v=d=d&&!t&&a.motionBlurEnabled&&!y;t||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!t&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),d&&(null==a.mbFrames&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(v=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!h&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var m=l.style(),b=l.zoom(),$=void 0!==i?i:b,_=l.pan(),w={x:_.x,y:_.y},E={zoom:b,pan:{x:_.x,y:_.y}},x=a.prevViewport;void 0===x||E.zoom!==x.zoom||E.pan.x!==x.pan.x||E.pan.y!==x.pan.y||g&&!p||(a.motionBlurPxRatio=1),o&&(w=o),$*=s,w.x*=s,w.y*=s;var T=a.getCachedZSortedEles();function S(e,t,r,n,i){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",a.colorFillStyle(e,255,255,255,a.motionBlurTransparency),e.fillRect(t,r,n,i),e.globalCompositeOperation=o}function O(e,n){var s,l,c,h;a.clearingMotionBlur||e!==u.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]&&e!==u.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]?(s=w,l=$,c=a.canvasWidth,h=a.canvasHeight):(s={x:_.x*f,y:_.y*f},l=b*f,c=a.canvasWidth*f,h=a.canvasHeight*f),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?S(e,0,0,c,h):t||void 0!==n&&!n||e.clearRect(0,0,c,h),r||(e.translate(s.x,s.y),e.scale(l,l)),o&&e.translate(o.x,o.y),i&&e.scale(i,i)}if(h||(a.textureDrawLastFrame=!1),h){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=l.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var C=a.data.bufferContexts[a.TEXTURE_BUFFER];C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:C,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult}),(E=a.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:a.canvasWidth,height:a.canvasHeight}).mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var k=u.contexts[a.NODE],P=a.textureCache.texture;E=a.textureCache.viewport;k.setTransform(1,0,0,1,0,0),d?S(k,0,0,E.width,E.height):k.clearRect(0,0,E.width,E.height);var A=m.core("outside-texture-bg-color").value,I=m.core("outside-texture-bg-opacity").value;a.colorFillStyle(k,A[0],A[1],A[2],I),k.fillRect(0,0,E.width,E.height);b=l.zoom();O(k,!1),k.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/s,E.height/E.zoom/s),k.drawImage(P,E.mpan.x,E.mpan.y,E.width/E.zoom/s,E.height/E.zoom/s)}else a.textureOnViewport&&!t&&(a.textureCache=null);var D=l.extent(),N=a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles||a.cy.animated(),M=a.hideEdgesOnViewport&&N,R=[];if(R[a.NODE]=!c[a.NODE]&&d&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,R[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),R[a.DRAG]=!c[a.DRAG]&&d&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,R[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||r||n||R[a.NODE]){var L=d&&!R[a.NODE]&&1!==f;O(k=t||(L?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:u.contexts[a.NODE]),d&&!L?"motionBlur":void 0),M?a.drawCachedNodes(k,T.nondrag,s,D):a.drawLayeredElements(k,T.nondrag,s,D),a.debug&&a.drawDebugPoints(k,T.nondrag),r||d||(c[a.NODE]=!1)}if(!n&&(c[a.DRAG]||r||R[a.DRAG])){L=d&&!R[a.DRAG]&&1!==f;O(k=t||(L?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:u.contexts[a.DRAG]),d&&!L?"motionBlur":void 0),M?a.drawCachedNodes(k,T.drag,s,D):a.drawCachedElements(k,T.drag,s,D),a.debug&&a.drawDebugPoints(k,T.drag),r||d||(c[a.DRAG]=!1)}if(a.showFps||!n&&c[a.SELECT_BOX]&&!r){if(O(k=t||u.contexts[a.SELECT_BOX]),1==a.selection[4]&&(a.hoverData.selecting||a.touchData.selecting)){b=a.cy.zoom();var j=m.core("selection-box-border-width").value/b;k.lineWidth=j,k.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",k.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),j>0&&(k.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",k.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(u.bgActivePosistion&&!a.hoverData.selecting){b=a.cy.zoom();var F=u.bgActivePosistion;k.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",k.beginPath(),k.arc(F.x,F.y,m.core("active-bg-size").pfValue/b,0,2*Math.PI),k.fill()}var B=a.lastRedrawTime;if(a.showFps&&B){B=Math.round(B);var z=Math.round(1e3/B);k.setTransform(1,0,0,1,0,0),k.fillStyle="rgba(255, 0, 0, 0.75)",k.strokeStyle="rgba(255, 0, 0, 0.75)",k.lineWidth=1,k.fillText("1 frame = "+B+" ms = "+z+" fps",0,20);k.strokeRect(0,30,250,20),k.fillRect(0,30,250*Math.min(z/60,1),20)}r||(c[a.SELECT_BOX]=!1)}if(d&&1!==f){var G=u.contexts[a.NODE],U=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],H=u.contexts[a.DRAG],V=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],Y=function(e,t,r){e.setTransform(1,0,0,1,0,0),r||!v?e.clearRect(0,0,a.canvasWidth,a.canvasHeight):S(e,0,0,a.canvasWidth,a.canvasHeight);var n=f;e.drawImage(t,0,0,a.canvasWidth*n,a.canvasHeight*n,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||R[a.NODE])&&(Y(G,U,R[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||R[a.DRAG])&&(Y(H,V,R[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=E,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),d&&(a.motionBlurTimeout=setTimeout((function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!h,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()}),motionBlurDelay)),t||l.emit("render")};for(var CRp$7={drawPolygonPath:function(e,t,r,n,i,o){var a=n/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*o[0],r+s*o[1]);for(var l=1;l<o.length/2;l++)e.lineTo(t+a*o[2*l],r+s*o[2*l+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,n,i,o){var a=n/2,s=i/2,l=getRoundPolygonRadius(n,i);e.beginPath&&e.beginPath();for(var u=0;u<o.length/4;u++){var c,h=void 0;h=0===u?o.length-2:4*u-2,c=4*u+2;var d=t+a*o[4*u],f=r+s*o[4*u+1],p=-o[h]*o[c]-o[h+1]*o[c+1],g=l/Math.tan(Math.acos(p)/2),y=d-g*o[h],v=f-g*o[h+1],m=d+g*o[c],b=f+g*o[c+1];0===u?e.moveTo(y,v):e.lineTo(y,v),e.arcTo(d,f,m,b,l)}e.closePath()},drawRoundRectanglePath:function(e,t,r,n,i){var o=n/2,a=i/2,s=getRoundRectangleRadius(n,i);e.beginPath&&e.beginPath(),e.moveTo(t,r-a),e.arcTo(t+o,r-a,t+o,r,s),e.arcTo(t+o,r+a,t,r+a,s),e.arcTo(t-o,r+a,t-o,r,s),e.arcTo(t-o,r-a,t,r-a,s),e.lineTo(t,r-a),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,n,i){var o=n/2,a=i/2,s=getRoundRectangleRadius(n,i);e.beginPath&&e.beginPath(),e.moveTo(t,r-a),e.lineTo(t+o,r-a),e.lineTo(t+o,r),e.arcTo(t+o,r+a,t,r+a,s),e.arcTo(t-o,r+a,t-o,r,s),e.lineTo(t-o,r-a),e.lineTo(t,r-a),e.closePath()},drawCutRectanglePath:function(e,t,r,n,i){var o=n/2,a=i/2,s=getCutRectangleCornerLength();e.beginPath&&e.beginPath(),e.moveTo(t-o+s,r-a),e.lineTo(t+o-s,r-a),e.lineTo(t+o,r-a+s),e.lineTo(t+o,r+a-s),e.lineTo(t+o-s,r+a),e.lineTo(t-o+s,r+a),e.lineTo(t-o,r+a-s),e.lineTo(t-o,r-a+s),e.closePath()},drawBarrelPath:function(e,t,r,n,i){var o=n/2,a=i/2,s=t-o,l=t+o,u=r-a,c=r+a,h=getBarrelCurveConstants(n,i),d=h.widthOffset,f=h.heightOffset,p=h.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(s,u+f),e.lineTo(s,c-f),e.quadraticCurveTo(s+p,c,s+d,c),e.lineTo(l-d,c),e.quadraticCurveTo(l-p,c,l,c-f),e.lineTo(l,u+f),e.quadraticCurveTo(l-p,u,l-d,u),e.lineTo(s+d,u),e.quadraticCurveTo(s+p,u,s,u+f),e.closePath()}},sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/40,i=0*Math.PI;i<2*Math.PI;i+=ellipseStepSize)sin[i]=Math.sin(i),cos[i]=Math.cos(i);CRp$7.drawEllipsePath=function(e,t,r,n,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,n/2,i/2,0,0,2*Math.PI);else for(var o,a,s=n/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=ellipseStepSize)o=t-s*sin[u]*sin0+s*cos[u]*cos0,a=r+l*cos[u]*sin0+l*sin[u]*cos0,0===u?e.moveTo(o,a):e.lineTo(o,a);e.closePath()};var CRp$8={};function b64ToBlob(e,t){for(var r=atob(e),n=new ArrayBuffer(r.length),i=new Uint8Array(n),o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return new Blob([n],{type:t})}function b64UriToB64(e){var t=e.indexOf(",");return e.substr(t+1)}function output(e,t,r){var n=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new Promise$1((function(n,i){try{t.toBlob((function(e){null!=e?n(e):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),r,e.quality)}catch(e){i(e)}}));case"blob":return b64ToBlob(b64UriToB64(n()),r);case"base64":return b64UriToB64(n());case"base64uri":default:return n()}}CRp$8.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},CRp$8.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements().boundingBox(),n=this.findContainerClientCoords(),i=e.full?Math.ceil(r.w):n[2],o=e.full?Math.ceil(r.h):n[3],a=number(e.maxWidth)||number(e.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==e.scale)i*=e.scale,o*=e.scale,l=e.scale;else if(a){var u=1/0,c=1/0;number(e.maxWidth)&&(u=l*e.maxWidth/i),number(e.maxHeight)&&(c=l*e.maxHeight/o),i*=l=Math.min(u,c),o*=l}a||(i*=s,o*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var d=h.getContext("2d");if(i>0&&o>0){d.clearRect(0,0,i,o),d.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)d.translate(-r.x1*l,-r.y1*l),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(r.x1*l,r.y1*l);else{var p=t.pan(),g={x:p.x*l,y:p.y*l};l*=t.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,f),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,i,o),d.fill())}return h},CRp$8.png=function(e){return output(e,this.bufferCanvasImage(e),"image/png")},CRp$8.jpg=function(e){return output(e,this.bufferCanvasImage(e),"image/jpeg")};var CRp$9={nodeShapeImpl:function(e,t,r,n,i,o,a){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,i,o);case"polygon":return this.drawPolygonPath(t,r,n,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,i,o,a);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,i,o);case"barrel":return this.drawBarrelPath(t,r,n,i,o)}}},CR=CanvasRenderer,CRp$a=CanvasRenderer.prototype;function CanvasRenderer(e){var t=this;t.data={canvases:new Array(CRp$a.CANVAS_LAYERS),contexts:new Array(CRp$a.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp$a.CANVAS_LAYERS),bufferCanvases:new Array(CRp$a.BUFFER_COUNT),bufferContexts:new Array(CRp$a.CANVAS_LAYERS)};t.data.canvasContainer=document.createElement("div");var r=t.data.canvasContainer.style;t.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.position="relative",r.zIndex="0",r.overflow="hidden";var n=e.cy.container();n.appendChild(t.data.canvasContainer),n.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var o=0;o<CRp$a.CANVAS_LAYERS;o++){var a=t.data.canvases[o]=document.createElement("canvas");t.data.contexts[o]=a.getContext("2d"),Object.keys(i).forEach((function(e){a.style[e]=i[e]})),a.style.position="absolute",a.setAttribute("data-id","layer"+o),a.style.zIndex=String(CRp$a.CANVAS_LAYERS-o),t.data.canvasContainer.appendChild(a),t.data.canvasNeedsRedraw[o]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[CRp$a.NODE].setAttribute("data-id","layer"+CRp$a.NODE+"-node"),t.data.canvases[CRp$a.SELECT_BOX].setAttribute("data-id","layer"+CRp$a.SELECT_BOX+"-selectbox"),t.data.canvases[CRp$a.DRAG].setAttribute("data-id","layer"+CRp$a.DRAG+"-drag");for(o=0;o<CRp$a.BUFFER_COUNT;o++)t.data.bufferCanvases[o]=document.createElement("canvas"),t.data.bufferContexts[o]=t.data.bufferCanvases[o].getContext("2d"),t.data.bufferCanvases[o].style.position="absolute",t.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),t.data.bufferCanvases[o].style.zIndex=String(-o-1),t.data.bufferCanvases[o].style.visibility="hidden";t.pathsEnabled=!0;var s=makeBoundingBox(),l=function(e){return{x:-e.w/2,y:-e.h/2}},u=function(e){return e.boundingBox(),e[0]._private.bodyBounds},c=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||s},h=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||s},d=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||s},f=function(e,t){return t},p=function(e,t,r){var n=e?e+"-":"";return{x:t.x+r.pstyle(n+"text-margin-x").pfValue,y:t.y+r.pstyle(n+"text-margin-y").pfValue}},g=function(e,t,r){var n=e[0]._private.rscratch;return{x:n[t],y:n[r]}},y=t.data.eleTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.nodeKey},doesEleInvalidateKey:function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)},drawElement:function(e,r,n,i,o){return t.drawElement(e,r,n,!1,!1,o)},getBoundingBox:u,getRotationPoint:function(e){return{x:((t=u(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2};var t},getRotationOffset:function(e){return l(u(e))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),v=t.data.lblTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.labelStyleKey},drawElement:function(e,r,n,i,o){return t.drawElementText(e,r,n,i,"main",o)},getBoundingBox:c,getRotationPoint:function(e){return p("",g(e,"labelX","labelY"),e)},getRotationOffset:function(e){var t=c(e),r=l(c(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":r.x=-t.w;break;case"right":r.x=0}switch(e.pstyle("text-valign").value){case"top":r.y=-t.h;break;case"bottom":r.y=0}}return r},isVisible:f}),m=t.data.slbTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.sourceLabelStyleKey},drawElement:function(e,r,n,i,o){return t.drawElementText(e,r,n,i,"source",o)},getBoundingBox:h,getRotationPoint:function(e){return p("source",g(e,"sourceLabelX","sourceLabelY"),e)},getRotationOffset:function(e){return l(h(e))},isVisible:f}),b=t.data.tlbTxrCache=new ElementTextureCache(t,{getKey:function(e){return e[0]._private.targetLabelStyleKey},drawElement:function(e,r,n,i,o){return t.drawElementText(e,r,n,i,"target",o)},getBoundingBox:d,getRotationPoint:function(e){return p("target",g(e,"targetLabelX","targetLabelY"),e)},getRotationOffset:function(e){return l(d(e))},isVisible:f}),$=t.data.lyrTxrCache=new LayeredTextureCache(t);t.onUpdateEleCalcs((function(e,t){y.invalidateElements(t),v.invalidateElements(t),m.invalidateElements(t),b.invalidateElements(t),$.invalidateElements(t);for(var r=0;r<t.length;r++){var n=t[r]._private;n.oldBackgroundTimestamp=n.backgroundTimestamp}}));var _=function(e){for(var t=0;t<e.length;t++)$.enqueueElementRefinement(e[t].ele)};y.onDequeue(_),v.onDequeue(_),m.onDequeue(_),b.onDequeue(_)}CRp$a.CANVAS_LAYERS=3,CRp$a.SELECT_BOX=0,CRp$a.DRAG=1,CRp$a.NODE=2,CRp$a.BUFFER_COUNT=3,CRp$a.TEXTURE_BUFFER=0,CRp$a.MOTIONBLUR_BUFFER_NODE=1,CRp$a.MOTIONBLUR_BUFFER_DRAG=2,CRp$a.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[CRp$a.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[CRp$a.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[CRp$a.SELECT_BOX]=t}};var pathsImpld="undefined"!=typeof Path2D;CRp$a.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},CRp$a.usePaths=function(){return pathsImpld&&this.pathsEnabled},CRp$a.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},CRp$a.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},CRp$a.makeOffscreenCanvas=function(e,t){var r;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":_typeof(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=document.createElement("canvas")).width=e,r.height=t),r},[CRp,CRp$1,CRp$2,CRp$3,CRp$4,CRp$5,CRp$6,CRp$7,CRp$8,CRp$9].forEach((function(e){extend(CRp$a,e)}));var renderer=[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}],incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:renderer}],extensions={},modules={};function setExtension(e,t,r){var n=r,i=function(r){error("Can not register `"+t+"` for `"+e+"` since `"+r+"` already exists in the prototype and can not be overridden")};if("core"===e){if(Core.prototype[t])return i(t);Core.prototype[t]=r}else if("collection"===e){if(Collection.prototype[t])return i(t);Collection.prototype[t]=r}else if("layout"===e){for(var o=function(e){this.options=e,r.call(this,e),plainObject(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];a[u]=a[u]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=r.prototype.stop;a.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var r=0;r<t.length;r++)t[r].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(e){return e._private.cy},d={addEventFields:function(e,t){t.layout=e,t.cy=h(e),t.target=e},bubble:function(){return!0},parent:function(e){return h(e)}};extend(a,{createEmitter:function(){return this._private.emitter=new Emitter(d,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),define$3.eventAliasesOn(a),n=o}else if("renderer"===e&&"null"!==t&&"base"!==t){var f=getExtension("renderer","base"),p=f.prototype,g=r,y=r.prototype,v=function(){f.apply(this,arguments),g.apply(this,arguments)},m=v.prototype;for(var b in p){var $=p[b];if(null!=y[b])return i(b);m[b]=$}for(var _ in y)m[_]=y[_];p.clientFunctions.forEach((function(e){m[e]=m[e]||function(){error("Renderer does not implement `renderer."+e+"()` on its prototype")}})),n=v}return setMap({map:extensions,keys:[e,t],value:n})}function getExtension(e,t){return getMap({map:extensions,keys:[e,t]})}function setModule(e,t,r,n,i){return setMap({map:modules,keys:[e,t,r,n],value:i})}function getModule(e,t,r,n){return getMap({map:modules,keys:[e,t,r,n]})}var extension=function(){return 2===arguments.length?getExtension.apply(null,arguments):3===arguments.length?setExtension.apply(null,arguments):4===arguments.length?getModule.apply(null,arguments):5===arguments.length?setModule.apply(null,arguments):void error("Invalid extension access syntax")};Core.prototype.extension=extension,incExts.forEach((function(e){e.extensions.forEach((function(t){setExtension(e.type,t.name,t.impl)}))}));var Stylesheet=function e(){if(!(this instanceof e))return new e;this.length=0},sheetfn=Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"},sheetfn.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},sheetfn.css=function(e,t){var r=this.length-1;if(string(e))this[r].properties.push({name:e,value:t});else if(plainObject(e))for(var n=e,i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a];if(null!=s){var l=Style.properties[a]||Style.properties[dash2camel(a)];if(null!=l){var u=l.name,c=s;this[r].properties.push({name:u,value:c})}}}return this},sheetfn.style=sheetfn.css,sheetfn.generateStyle=function(e){var t=new Style(e);return this.appendToStyle(t)},sheetfn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],n=r.selector,i=r.properties;e.selector(n);for(var o=0;o<i.length;o++){var a=i[o];e.css(a.name,a.value)}}return e};var version="3.14.2",cytoscape$1=function(e){return void 0===e&&(e={}),plainObject(e)?new Core(e):string(e)?extension.apply(extension,arguments):void 0};cytoscape$1.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(cytoscape$1),e.apply(null,t),this},cytoscape$1.warnings=function(e){return warnings(e)},cytoscape$1.version=version,cytoscape$1.stylesheet=cytoscape$1.Stylesheet=Stylesheet;var cytoscape_cjs=cytoscape$1,layoutBase=createCommonjsModule((function(e,t){var r;r=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=26)}([function(e,t,r){function n(){}n.QUALITY=1,n.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,n.DEFAULT_INCREMENTAL=!1,n.DEFAULT_ANIMATION_ON_LAYOUT=!0,n.DEFAULT_ANIMATION_DURING_LAYOUT=!1,n.DEFAULT_ANIMATION_PERIOD=50,n.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,n.DEFAULT_GRAPH_MARGIN=15,n.NODE_DIMENSIONS_INCLUDE_LABELS=!1,n.SIMPLE_NODE_SIZE=40,n.SIMPLE_NODE_HALF_SIZE=n.SIMPLE_NODE_SIZE/2,n.EMPTY_COMPOUND_NODE_SIZE=40,n.MIN_EDGE_LENGTH=1,n.WORLD_BOUNDARY=1e6,n.INITIAL_WORLD_BOUNDARY=n.WORLD_BOUNDARY/1e3,n.WORLD_CENTER_X=1200,n.WORLD_CENTER_Y=900,e.exports=n},function(e,t,r){var n=r(2),i=r(8),o=r(9);function a(e,t,r){n.call(this,r),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=r,this.bendpoints=[],this.source=e,this.target=t}for(var s in a.prototype=Object.create(n.prototype),n)a[s]=n[s];a.prototype.getSource=function(){return this.source},a.prototype.getTarget=function(){return this.target},a.prototype.isInterGraph=function(){return this.isInterGraph},a.prototype.getLength=function(){return this.length},a.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},a.prototype.getBendpoints=function(){return this.bendpoints},a.prototype.getLca=function(){return this.lca},a.prototype.getSourceInLca=function(){return this.sourceInLca},a.prototype.getTargetInLca=function(){return this.targetInLca},a.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},a.prototype.getOtherEndInGraph=function(e,t){for(var r=this.getOtherEnd(e),n=t.getGraphManager().getRoot();;){if(r.getOwner()==t)return r;if(r.getOwner()==n)break;r=r.getOwner().getParent()}return null},a.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},a.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=a},function(e,t,r){e.exports=function(e){this.vGraphObject=e}},function(e,t,r){var n=r(2),i=r(10),o=r(13),a=r(0),s=r(16),l=r(4);function u(e,t,r,a){null==r&&null==a&&(a=t),n.call(this,a),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=a,this.edges=[],this.graphManager=e,this.rect=null!=r&&null!=t?new o(t.x,t.y,r.width,r.height):new o}for(var c in u.prototype=Object.create(n.prototype),n)u[c]=n[c];u.prototype.getEdges=function(){return this.edges},u.prototype.getChild=function(){return this.child},u.prototype.getOwner=function(){return this.owner},u.prototype.getWidth=function(){return this.rect.width},u.prototype.setWidth=function(e){this.rect.width=e},u.prototype.getHeight=function(){return this.rect.height},u.prototype.setHeight=function(e){this.rect.height=e},u.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},u.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},u.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},u.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},u.prototype.getRect=function(){return this.rect},u.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},u.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},u.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},u.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},u.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},u.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},u.prototype.getEdgeListToNode=function(e){var t=[],r=this;return r.edges.forEach((function(n){if(n.target==e){if(n.source!=r)throw"Incorrect edge source!";t.push(n)}})),t},u.prototype.getEdgesBetween=function(e){var t=[],r=this;return r.edges.forEach((function(n){if(n.source!=r&&n.target!=r)throw"Incorrect edge source and/or target";n.target!=e&&n.source!=e||t.push(n)})),t},u.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach((function(r){if(r.source==t)e.add(r.target);else{if(r.target!=t)throw"Incorrect incidency!";e.add(r.source)}})),e},u.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),r=0;r<t.length;r++)t[r].withChildren().forEach((function(t){e.add(t)}));return e},u.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),r=0;r<t.length;r++)e+=t[r].getNoOfChildren();return 0==e&&(e=1),e},u.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},u.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},u.prototype.scatter=function(){var e,t,r=-a.INITIAL_WORLD_BOUNDARY,n=a.INITIAL_WORLD_BOUNDARY;e=a.WORLD_CENTER_X+s.nextDouble()*(n-r)+r;var i=-a.INITIAL_WORLD_BOUNDARY,o=a.INITIAL_WORLD_BOUNDARY;t=a.WORLD_CENTER_Y+s.nextDouble()*(o-i)+i,this.rect.x=e,this.rect.y=t},u.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),a.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),r=e.getBottom()-e.getTop();this.labelWidth>t&&(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)),this.labelHeight>r&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-r)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-r),this.setHeight(this.labelHeight))}}},u.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},u.prototype.transform=function(e){var t=this.rect.x;t>a.WORLD_BOUNDARY?t=a.WORLD_BOUNDARY:t<-a.WORLD_BOUNDARY&&(t=-a.WORLD_BOUNDARY);var r=this.rect.y;r>a.WORLD_BOUNDARY?r=a.WORLD_BOUNDARY:r<-a.WORLD_BOUNDARY&&(r=-a.WORLD_BOUNDARY);var n=new l(t,r),i=e.inverseTransformPoint(n);this.setLocation(i.x,i.y)},u.prototype.getLeft=function(){return this.rect.x},u.prototype.getRight=function(){return this.rect.x+this.rect.width},u.prototype.getTop=function(){return this.rect.y},u.prototype.getBottom=function(){return this.rect.y+this.rect.height},u.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=u},function(e,t,r){function n(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.setX=function(e){this.x=e},n.prototype.setY=function(e){this.y=e},n.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},n.prototype.getCopy=function(){return new n(this.x,this.y)},n.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=n},function(e,t,r){var n=r(2),i=r(10),o=r(0),a=r(6),s=r(3),l=r(1),u=r(13),c=r(12),h=r(11);function d(e,t,r){n.call(this,r),this.estimatedSize=i.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof a?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var f in d.prototype=Object.create(n.prototype),n)d[f]=n[f];d.prototype.getNodes=function(){return this.nodes},d.prototype.getEdges=function(){return this.edges},d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getParent=function(){return this.parent},d.prototype.getLeft=function(){return this.left},d.prototype.getRight=function(){return this.right},d.prototype.getTop=function(){return this.top},d.prototype.getBottom=function(){return this.bottom},d.prototype.isConnected=function(){return this.isConnected},d.prototype.add=function(e,t,r){if(null==t&&null==r){var n=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(n)>-1)throw"Node already in graph!";return n.owner=this,this.getNodes().push(n),n}var i=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(r)>-1))throw"Source or target not in graph!";if(t.owner!=r.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=r.owner?null:(i.source=t,i.target=r,i.isInterGraph=!1,this.getEdges().push(i),t.edges.push(i),r!=t&&r.edges.push(i),i)},d.prototype.remove=function(e){var t=e;if(e instanceof s){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var r=t.edges.slice(),n=r.length,i=0;i<n;i++)(o=r[i]).isInterGraph?this.graphManager.remove(o):o.source.owner.remove(o);if(-1==(a=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(e instanceof l){var o;if(null==(o=e))throw"Edge is null!";if(null==o.source||null==o.target)throw"Source and/or target is null!";if(null==o.source.owner||null==o.target.owner||o.source.owner!=this||o.target.owner!=this)throw"Source and/or target owner is invalid!";var a,u=o.source.edges.indexOf(o),c=o.target.edges.indexOf(o);if(!(u>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(o.source.edges.splice(u,1),o.target!=o.source&&o.target.edges.splice(c,1),-1==(a=o.source.owner.getEdges().indexOf(o)))throw"Not in owner's edge list!";o.source.owner.getEdges().splice(a,1)}},d.prototype.updateLeftTop=function(){for(var e,t,r,n=i.MAX_VALUE,o=i.MAX_VALUE,a=this.getNodes(),s=a.length,l=0;l<s;l++){var u=a[l];n>(e=u.getTop())&&(n=e),o>(t=u.getLeft())&&(o=t)}return n==i.MAX_VALUE?null:(r=null!=a[0].getParent().paddingLeft?a[0].getParent().paddingLeft:this.margin,this.left=o-r,this.top=n-r,new c(this.left,this.top))},d.prototype.updateBounds=function(e){for(var t,r,n,o,a,s=i.MAX_VALUE,l=-i.MAX_VALUE,c=i.MAX_VALUE,h=-i.MAX_VALUE,d=this.nodes,f=d.length,p=0;p<f;p++){var g=d[p];e&&null!=g.child&&g.updateBounds(),s>(t=g.getLeft())&&(s=t),l<(r=g.getRight())&&(l=r),c>(n=g.getTop())&&(c=n),h<(o=g.getBottom())&&(h=o)}var y=new u(s,c,l-s,h-c);s==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),a=null!=d[0].getParent().paddingLeft?d[0].getParent().paddingLeft:this.margin,this.left=y.x-a,this.right=y.x+y.width+a,this.top=y.y-a,this.bottom=y.y+y.height+a},d.calculateBounds=function(e){for(var t,r,n,o,a=i.MAX_VALUE,s=-i.MAX_VALUE,l=i.MAX_VALUE,c=-i.MAX_VALUE,h=e.length,d=0;d<h;d++){var f=e[d];a>(t=f.getLeft())&&(a=t),s<(r=f.getRight())&&(s=r),l>(n=f.getTop())&&(l=n),c<(o=f.getBottom())&&(c=o)}return new u(a,l,s-a,c-l)},d.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},d.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},d.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,r=t.length,n=0;n<r;n++)e+=t[n].calcEstimatedSize();return this.estimatedSize=0==e?o.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},d.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,r,n=new h,i=new Set,o=this.nodes[0];for(o.withChildren().forEach((function(e){n.push(e),i.add(e)}));0!==n.length;)for(var a=(t=(o=n.shift()).getEdges()).length,s=0;s<a;s++)null==(r=t[s].getOtherEndInGraph(o,this))||i.has(r)||r.withChildren().forEach((function(e){n.push(e),i.add(e)}));if(this.isConnected=!1,i.size>=this.nodes.length){var l=0;i.forEach((function(t){t.owner==e&&l++})),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=d},function(e,t,r){var n,i=r(1);function o(e){n=r(5),this.layout=e,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),r=this.add(e,t);return this.setRootGraph(r),this.rootGraph},o.prototype.add=function(e,t,r,n,i){if(null==r&&null==n&&null==i){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}i=r,r=e;var o=(n=t).getOwner(),a=i.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return r.isInterGraph=!1,o.add(r,n,i);if(r.isInterGraph=!0,r.source=n,r.target=i,this.edges.indexOf(r)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(r),null==r.source||null==r.target)throw"Edge source and/or target is null!";if(-1!=r.source.edges.indexOf(r)||-1!=r.target.edges.indexOf(r))throw"Edge already in source and/or target incidency list!";return r.source.edges.push(r),r.target.edges.push(r),r},o.prototype.remove=function(e){if(e instanceof n){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var r,o=[],a=(o=o.concat(t.getEdges())).length,s=0;s<a;s++)r=o[s],t.remove(r);var l,u=[];for(a=(u=u.concat(t.getNodes())).length,s=0;s<a;s++)l=u[s],t.remove(l);t==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(t);this.graphs.splice(c,1),t.parent=null}else if(e instanceof i){if(null==(r=e))throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(-1==r.source.edges.indexOf(r)||-1==r.target.edges.indexOf(r))throw"Source and/or target doesn't know this edge!";if(c=r.source.edges.indexOf(r),r.source.edges.splice(c,1),c=r.target.edges.indexOf(r),r.target.edges.splice(c,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==r.source.owner.getGraphManager().edges.indexOf(r))throw"Not in owner graph manager's edge list!";c=r.source.owner.getGraphManager().edges.indexOf(r),r.source.owner.getGraphManager().edges.splice(c,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),r=t.length,n=0;n<r;n++)e=e.concat(t[n].getNodes());this.allNodes=e}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(null==this.allEdges){for(var e=[],t=this.getGraphs(),r=(t.length,0);r<t.length;r++)e=e.concat(t[r].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var r,n=e.getOwner();null!=(r=n.getParent());){if(r==t)return!0;if(null==(n=r.getOwner()))break}for(n=t.getOwner();null!=(r=n.getParent());){if(r==e)return!0;if(null==(n=r.getOwner()))break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var e,t,r,n,i,o=this.getAllEdges(),a=o.length,s=0;s<a;s++)if(t=(e=o[s]).source,r=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=r,t!=r){for(n=t.getOwner();null==e.lca;){for(e.targetInLca=r,i=r.getOwner();null==e.lca;){if(i==n){e.lca=i;break}if(i==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=i.getParent(),i=e.targetInLca.getOwner()}if(n==this.rootGraph)break;null==e.lca&&(e.sourceInLca=n.getParent(),n=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},o.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var r=e.getOwner();null!=r;){for(var n=t.getOwner();null!=n;){if(n==r)return n;n=n.getParent().getOwner()}r=r.getParent().getOwner()}return r},o.prototype.calcInclusionTreeDepths=function(e,t){var r;null==e&&null==t&&(e=this.rootGraph,t=1);for(var n=e.getNodes(),i=n.length,o=0;o<i;o++)(r=n[o]).inclusionTreeDepth=t,null!=r.child&&this.calcInclusionTreeDepths(r.child,t+1)},o.prototype.includesInvalidEdge=function(){for(var e,t=this.edges.length,r=0;r<t;r++)if(e=this.edges[r],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},e.exports=o},function(e,t,r){var n=r(0);function i(){}for(var o in n)i[o]=n[o];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=3*i.MAX_NODE_DISPLACEMENT_INCREMENTAL,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=i},function(e,t,r){var n=r(12);function i(){}i.calcSeparationAmount=function(e,t,r,n){if(!e.intersects(t))throw"assert failed";var i=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,i),r[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),r[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?r[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(r[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?r[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(r[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var o=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(o=1);var a=o*r[0],s=r[1]/o;r[0]<s?s=r[0]:a=r[1],r[0]=-1*i[0]*(s/2+n),r[1]=-1*i[1]*(a/2+n)},i.decideDirectionsForOverlappingNodes=function(e,t,r){e.getCenterX()<t.getCenterX()?r[0]=-1:r[0]=1,e.getCenterY()<t.getCenterY()?r[1]=-1:r[1]=1},i.getIntersection2=function(e,t,r){var n=e.getCenterX(),i=e.getCenterY(),o=t.getCenterX(),a=t.getCenterY();if(e.intersects(t))return r[0]=n,r[1]=i,r[2]=o,r[3]=a,!0;var s=e.getX(),l=e.getY(),u=e.getRight(),c=e.getX(),h=e.getBottom(),d=e.getRight(),f=e.getWidthHalf(),p=e.getHeightHalf(),g=t.getX(),y=t.getY(),v=t.getRight(),m=t.getX(),b=t.getBottom(),$=t.getRight(),_=t.getWidthHalf(),w=t.getHeightHalf(),E=!1,x=!1;if(n===o){if(i>a)return r[0]=n,r[1]=l,r[2]=o,r[3]=b,!1;if(i<a)return r[0]=n,r[1]=h,r[2]=o,r[3]=y,!1}else if(i===a){if(n>o)return r[0]=s,r[1]=i,r[2]=v,r[3]=a,!1;if(n<o)return r[0]=u,r[1]=i,r[2]=g,r[3]=a,!1}else{var T=e.height/e.width,S=t.height/t.width,O=(a-i)/(o-n),C=void 0,k=void 0,P=void 0,A=void 0,I=void 0,D=void 0;if(-T===O?n>o?(r[0]=c,r[1]=h,E=!0):(r[0]=u,r[1]=l,E=!0):T===O&&(n>o?(r[0]=s,r[1]=l,E=!0):(r[0]=d,r[1]=h,E=!0)),-S===O?o>n?(r[2]=m,r[3]=b,x=!0):(r[2]=v,r[3]=y,x=!0):S===O&&(o>n?(r[2]=g,r[3]=y,x=!0):(r[2]=$,r[3]=b,x=!0)),E&&x)return!1;if(n>o?i>a?(C=this.getCardinalDirection(T,O,4),k=this.getCardinalDirection(S,O,2)):(C=this.getCardinalDirection(-T,O,3),k=this.getCardinalDirection(-S,O,1)):i>a?(C=this.getCardinalDirection(-T,O,1),k=this.getCardinalDirection(-S,O,3)):(C=this.getCardinalDirection(T,O,2),k=this.getCardinalDirection(S,O,4)),!E)switch(C){case 1:A=l,P=n+-p/O,r[0]=P,r[1]=A;break;case 2:P=d,A=i+f*O,r[0]=P,r[1]=A;break;case 3:A=h,P=n+p/O,r[0]=P,r[1]=A;break;case 4:P=c,A=i+-f*O,r[0]=P,r[1]=A}if(!x)switch(k){case 1:D=y,I=o+-w/O,r[2]=I,r[3]=D;break;case 2:I=$,D=a+_*O,r[2]=I,r[3]=D;break;case 3:D=b,I=o+w/O,r[2]=I,r[3]=D;break;case 4:I=m,D=a+-_*O,r[2]=I,r[3]=D}}return!1},i.getCardinalDirection=function(e,t,r){return e>t?r:1+r%4},i.getIntersection=function(e,t,r,i){if(null==i)return this.getIntersection2(e,t,r);var o,a,s,l,u,c,h,d=e.x,f=e.y,p=t.x,g=t.y,y=r.x,v=r.y,m=i.x,b=i.y;return 0==(h=(o=g-f)*(l=y-m)-(a=b-v)*(s=d-p))?null:new n((s*(c=m*v-y*b)-l*(u=p*f-d*g))/h,(a*u-o*c)/h)},i.angleOfVector=function(e,t,r,n){var i=void 0;return e!==r?(i=Math.atan((n-t)/(r-e)),r<e?i+=Math.PI:n<t&&(i+=this.TWO_PI)):i=n<t?this.ONE_AND_HALF_PI:this.HALF_PI,i},i.doIntersect=function(e,t,r,n){var i=e.x,o=e.y,a=t.x,s=t.y,l=r.x,u=r.y,c=n.x,h=n.y,d=(a-i)*(h-u)-(c-l)*(s-o);if(0===d)return!1;var f=((h-u)*(c-i)+(l-c)*(h-o))/d,p=((o-s)*(c-i)+(a-i)*(h-o))/d;return 0<f&&f<1&&0<p&&p<1},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,e.exports=i},function(e,t,r){function n(){}n.sign=function(e){return e>0?1:e<0?-1:0},n.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},n.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=n},function(e,t,r){function n(){}n.MAX_VALUE=2147483647,n.MIN_VALUE=-2147483648,e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e){return{value:e,next:null,prev:null}},o=function(e,t,r,n){return null!==e?e.next=t:n.head=t,null!==r?r.prev=t:n.tail=t,t.prev=e,t.next=r,n.length++,t},a=function(e,t){var r=e.prev,n=e.next;return null!==r?r.next=n:t.head=n,null!==n?n.prev=r:t.tail=r,e.prev=e.next=null,t.length--,e},s=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.length=0,this.head=null,this.tail=null,null!=t&&t.forEach((function(e){return r.push(e)}))}return n(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(e,t){return o(t.prev,i(e),t,this)}},{key:"insertAfter",value:function(e,t){return o(t,i(e),t.next,this)}},{key:"insertNodeBefore",value:function(e,t){return o(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function(e,t){return o(t,e,t.next,this)}},{key:"push",value:function(e){return o(this.tail,i(e),null,this)}},{key:"unshift",value:function(e){return o(null,i(e),this.head,this)}},{key:"remove",value:function(e){return a(e,this)}},{key:"pop",value:function(){return a(this.tail,this).value}},{key:"popNode",value:function(){return a(this.tail,this)}},{key:"shift",value:function(){return a(this.head,this).value}},{key:"shiftNode",value:function(){return a(this.head,this)}},{key:"get_object_at",value:function(e){if(e<=this.length()){for(var t=1,r=this.head;t<e;)r=r.next,t++;return r.value}}},{key:"set_object_at",value:function(e,t){if(e<=this.length()){for(var r=1,n=this.head;r<e;)n=n.next,r++;n.value=t}}}]),e}();e.exports=s},function(e,t,r){function n(e,t,r){this.x=null,this.y=null,null==e&&null==t&&null==r?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==r?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==r&&(r=e,this.x=r.x,this.y=r.y)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.getLocation=function(){return new n(this.x,this.y)},n.prototype.setLocation=function(e,t,r){"Point"==e.constructor.name&&null==t&&null==r?(r=e,this.setLocation(r.x,r.y)):"number"==typeof e&&"number"==typeof t&&null==r&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},n.prototype.move=function(e,t){this.x=e,this.y=t},n.prototype.translate=function(e,t){this.x+=e,this.y+=t},n.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},n.prototype.toString=function(){return(new n).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=n},function(e,t,r){function n(e,t,r,n){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=r&&null!=n&&(this.x=e,this.y=t,this.width=r,this.height=n)}n.prototype.getX=function(){return this.x},n.prototype.setX=function(e){this.x=e},n.prototype.getY=function(){return this.y},n.prototype.setY=function(e){this.y=e},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.intersects=function(e){return!(this.getRight()<e.x||this.getBottom()<e.y||e.getRight()<this.x||e.getBottom()<this.y)},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getMinX=function(){return this.getX()},n.prototype.getMaxX=function(){return this.getX()+this.width},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getMinY=function(){return this.getY()},n.prototype.getMaxY=function(){return this.getY()+this.height},n.prototype.getWidthHalf=function(){return this.width/2},n.prototype.getHeightHalf=function(){return this.height/2},e.exports=n},function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}i.lastID=0,i.createID=function(e){return i.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=i.getString(),i.lastID++),e.uniqueID)},i.getString=function(e){return null==e&&(e=i.lastID),"Object#"+e},i.isPrimitive=function(e){var t=void 0===e?"undefined":n(e);return null==e||"object"!=t&&"function"!=t},e.exports=i},function(e,t,r){function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var i=r(0),o=r(6),a=r(3),s=r(1),l=r(5),u=r(4),c=r(17),h=r(27);function d(e){h.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}d.RANDOM_SEED=1,d.prototype=Object.create(h.prototype),d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},d.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},d.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},d.prototype.newGraphManager=function(){var e=new o(this);return this.graphManager=e,e},d.prototype.newGraph=function(e){return new l(null,this.graphManager,e)},d.prototype.newNode=function(e){return new a(this.graphManager,e)},d.prototype.newEdge=function(e){return new s(null,null,e)},d.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},d.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},d.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},d.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var r=this.graphManager.getRoot().getNodes();for(t=0;t<r.length;t++)r[t];this.update(this.graphManager.getRoot())}},d.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof a){var t=e;if(null!=t.getChild())for(var r=t.getChild().getNodes(),n=0;n<r.length;n++)update(r[n]);null!=t.vGraphObject&&t.vGraphObject.update(t)}else if(e instanceof s){var i=e;null!=i.vGraphObject&&i.vGraphObject.update(i)}else if(e instanceof l){var o=e;null!=o.vGraphObject&&o.vGraphObject.update(o)}},d.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},d.prototype.transform=function(e){if(null==e)this.transform(new u(0,0));else{var t=new c,r=this.graphManager.getRoot().updateLeftTop();if(null!=r){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(r.x),t.setDeviceOrgY(r.y);for(var n=this.getAllNodes(),i=0;i<n.length;i++)n[i].transform(t)}}},d.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,r,n=e.getNodes(),i=0;i<n.length;i++)null==(r=(t=n[i]).getChild())||0==r.getNodes().length?t.scatter():(this.positionNodesRandomly(r),t.updateBounds())},d.prototype.getFlatForest=function(){for(var e=[],t=!0,r=this.graphManager.getRoot().getNodes(),i=!0,o=0;o<r.length;o++)null!=r[o].getChild()&&(i=!1);if(!i)return e;var a=new Set,s=[],l=new Map,u=[];for(u=u.concat(r);u.length>0&&t;){for(s.push(u[0]);s.length>0&&t;){var c=s[0];s.splice(0,1),a.add(c);var h=c.getEdges();for(o=0;o<h.length;o++){var d=h[o].getOtherEnd(c);if(l.get(c)!=d){if(a.has(d)){t=!1;break}s.push(d),l.set(d,c)}}}if(t){var f=[].concat(n(a));for(e.push(f),o=0;o<f.length;o++){var p=f[o],g=u.indexOf(p);g>-1&&u.splice(g,1)}a=new Set,l=new Map}else e=[]}return e},d.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],r=e.source,n=this.graphManager.calcLowestCommonAncestor(e.source,e.target),i=0;i<e.bendpoints.length;i++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),n.add(o);var a=this.newEdge(null);this.graphManager.add(a,r,o),t.add(o),r=o}return a=this.newEdge(null),this.graphManager.add(a,r,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):n.remove(e),t},d.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(n(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var r=e[t];if(r.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(r),o=0;o<i.length;o++){var a=i[o],s=new u(a.getCenterX(),a.getCenterY()),l=r.bendpoints.get(o);l.x=s.x,l.y=s.y,a.getOwner().remove(a)}this.graphManager.add(r,r.source,r.target)}}},d.transform=function(e,t,r,n){if(null!=r&&null!=n){var i=t;return e<=50?i-=(t-t/r)/50*(50-e):i+=(t*n-t)/50*(e-50),i}var o,a;return e<=50?(o=9*t/500,a=t/10):(o=9*t/50,a=-8*t),o*e+a},d.findCenterOfTree=function(e){var t=[];t=t.concat(e);var r=[],n=new Map,i=!1,o=null;1!=t.length&&2!=t.length||(i=!0,o=t[0]);for(var a=0;a<t.length;a++){var s=(c=t[a]).getNeighborsList().size;n.set(c,c.getNeighborsList().size),1==s&&r.push(c)}var l=[];for(l=l.concat(r);!i;){var u=[];for(u=u.concat(l),l=[],a=0;a<t.length;a++){var c=t[a],h=t.indexOf(c);h>=0&&t.splice(h,1),c.getNeighborsList().forEach((function(e){if(r.indexOf(e)<0){var t=n.get(e)-1;1==t&&l.push(e),n.set(e,t)}}))}r=r.concat(l),1!=t.length&&2!=t.length||(i=!0,o=t[0])}return o},d.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=d},function(e,t,r){function n(){}n.seed=1,n.x=0,n.nextDouble=function(){return n.x=1e4*Math.sin(n.seed++),n.x-Math.floor(n.x)},e.exports=n},function(e,t,r){var n=r(4);function i(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(e){this.lworldExtX=e},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(e){this.lworldExtY=e},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},i.prototype.transformX=function(e){var t=0,r=this.lworldExtX;return 0!=r&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/r),t},i.prototype.transformY=function(e){var t=0,r=this.lworldExtY;return 0!=r&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/r),t},i.prototype.inverseTransformX=function(e){var t=0,r=this.ldeviceExtX;return 0!=r&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/r),t},i.prototype.inverseTransformY=function(e){var t=0,r=this.ldeviceExtY;return 0!=r&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/r),t},i.prototype.inverseTransformPoint=function(e){return new n(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=i},function(e,t,r){var n=r(15),i=r(7),o=r(0),a=r(8),s=r(9);function l(){n.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=i.DEFAULT_EDGE_LENGTH,this.springConstant=i.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=i.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}for(var u in l.prototype=Object.create(n.prototype),n)l[u]=n[u];l.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},l.prototype.calcIdealEdgeLengths=function(){for(var e,t,r,n,a,s,l=this.getGraphManager().getAllEdges(),u=0;u<l.length;u++)(e=l[u]).idealLength=this.idealEdgeLength,e.isInterGraph&&(r=e.getSource(),n=e.getTarget(),a=e.getSourceInLca().getEstimatedSize(),s=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=a+s-2*o.SIMPLE_NODE_SIZE),t=e.getLca().getInclusionTreeDepth(),e.idealLength+=i.DEFAULT_EDGE_LENGTH*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(r.getInclusionTreeDepth()+n.getInclusionTreeDepth()-2*t))},l.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(e-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},l.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),r=0;r<t.length;r++)e=t[r],this.calcSpringForce(e,e.idealLength)},l.prototype.calcRepulsionForces=function(){var e,t,r,n,o,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&a&&this.updateGrid(),o=new Set,e=0;e<l.length;e++)r=l[e],this.calculateRepulsionForceOfANode(r,o,a,s),o.add(r);else for(e=0;e<l.length;e++)for(r=l[e],t=e+1;t<l.length;t++)n=l[t],r.getOwner()==n.getOwner()&&this.calcRepulsionForce(r,n)},l.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),r=0;r<t.length;r++)e=t[r],this.calcGravitationalForce(e)},l.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},l.prototype.calcSpringForce=function(e,t){var r,n,i,o,a=e.getSource(),s=e.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(r=e.getLength())&&(i=(n=this.springConstant*(r-t))*(e.lengthX/r),o=n*(e.lengthY/r),a.springForceX+=i,a.springForceY+=o,s.springForceX-=i,s.springForceY-=o)},l.prototype.calcRepulsionForce=function(e,t){var r,n,o,l,u,c,h,d=e.getRect(),f=t.getRect(),p=new Array(2),g=new Array(4);if(d.intersects(f)){a.calcSeparationAmount(d,f,p,i.DEFAULT_EDGE_LENGTH/2),c=2*p[0],h=2*p[1];var y=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=y*c,e.repulsionForceY-=y*h,t.repulsionForceX+=y*c,t.repulsionForceY+=y*h}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(r=f.getCenterX()-d.getCenterX(),n=f.getCenterY()-d.getCenterY()):(a.getIntersection(d,f,g),r=g[2]-g[0],n=g[3]-g[1]),Math.abs(r)<i.MIN_REPULSION_DIST&&(r=s.sign(r)*i.MIN_REPULSION_DIST),Math.abs(n)<i.MIN_REPULSION_DIST&&(n=s.sign(n)*i.MIN_REPULSION_DIST),o=r*r+n*n,l=Math.sqrt(o),c=(u=this.repulsionConstant*e.noOfChildren*t.noOfChildren/o)*r/l,h=u*n/l,e.repulsionForceX-=c,e.repulsionForceY-=h,t.repulsionForceX+=c,t.repulsionForceY+=h},l.prototype.calcGravitationalForce=function(e){var t,r,n,i,o,a,s,l;r=((t=e.getOwner()).getRight()+t.getLeft())/2,n=(t.getTop()+t.getBottom())/2,i=e.getCenterX()-r,o=e.getCenterY()-n,a=Math.abs(i)+e.getWidth()/2,s=Math.abs(o)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(a>(l=t.getEstimatedSize()*this.gravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i,e.gravitationForceY=-this.gravityConstant*o):(a>(l=t.getEstimatedSize()*this.compoundGravityRangeFactor)||s>l)&&(e.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant)},l.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},l.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},l.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)(e=t[r]).noOfChildren=e.getNoOfChildren()},l.prototype.calcGrid=function(e){var t,r;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),r=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var n=new Array(t),i=0;i<t;i++)n[i]=new Array(r);for(i=0;i<t;i++)for(var o=0;o<r;o++)n[i][o]=new Array;return n},l.prototype.addNodeToGrid=function(e,t,r){var n,i,o,a;n=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),o=parseInt(Math.floor((e.getRect().y-r)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().height+e.getRect().y-r)/this.repulsionRange));for(var s=n;s<=i;s++)for(var l=o;l<=a;l++)this.grid[s][l].push(e),e.setGridCoordinates(n,i,o,a)},l.prototype.updateGrid=function(){var e,t,r=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<r.length;e++)t=r[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},l.prototype.calculateRepulsionForceOfANode=function(e,t,r,n){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&r||n){var o,a=new Set;e.surrounding=new Array;for(var s=this.grid,l=e.startX-1;l<e.finishX+2;l++)for(var u=e.startY-1;u<e.finishY+2;u++)if(!(l<0||u<0||l>=s.length||u>=s[0].length))for(var c=0;c<s[l][u].length;c++)if(o=s[l][u][c],e.getOwner()==o.getOwner()&&e!=o&&!t.has(o)&&!a.has(o)){var h=Math.abs(e.getCenterX()-o.getCenterX())-(e.getWidth()/2+o.getWidth()/2),d=Math.abs(e.getCenterY()-o.getCenterY())-(e.getHeight()/2+o.getHeight()/2);h<=this.repulsionRange&&d<=this.repulsionRange&&a.add(o)}e.surrounding=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a))}for(l=0;l<e.surrounding.length;l++)this.calcRepulsionForce(e,e.surrounding[l])},l.prototype.calcRepulsionRange=function(){return 0},e.exports=l},function(e,t,r){var n=r(1),i=r(7);function o(e,t,r){n.call(this,e,t,r),this.idealLength=i.DEFAULT_EDGE_LENGTH}for(var a in o.prototype=Object.create(n.prototype),n)o[a]=n[a];e.exports=o},function(e,t,r){var n=r(3);function i(e,t,r,i){n.call(this,e,t,r,i),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in i.prototype=Object.create(n.prototype),n)i[o]=n[o];i.prototype.setGridCoordinates=function(e,t,r,n){this.startX=e,this.finishX=t,this.startY=r,this.finishY=n},e.exports=i},function(e,t,r){function n(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},e.exports=n},function(e,t,r){var n=r(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(e,t){var r=n.createID(e);this.contains(r)||(this.map[r]=t,this.keys.push(e))},i.prototype.contains=function(e){return n.createID(e),null!=this.map[e]},i.prototype.get=function(e){var t=n.createID(e);return this.map[t]},i.prototype.keySet=function(){return this.keys},e.exports=i},function(e,t,r){var n=r(14);function i(){this.set={}}i.prototype.add=function(e){var t=n.createID(e);this.contains(t)||(this.set[t]=e)},i.prototype.remove=function(e){delete this.set[n.createID(e)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(e){return this.set[n.createID(e)]==e},i.prototype.isEmpty=function(){return 0===this.size()},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),r=t.length,n=0;n<r;n++)e.push(this.set[t[n]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];this.add(n)}},e.exports=i},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(11),o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null===r&&void 0===r||(this.compareFunction=this._defaultCompareFunction);var n=void 0;n=t instanceof i?t.size():t.length,this._quicksort(t,0,n-1)}return n(e,[{key:"_quicksort",value:function(e,t,r){if(t<r){var n=this._partition(e,t,r);this._quicksort(e,t,n),this._quicksort(e,n+1,r)}}},{key:"_partition",value:function(e,t,r){for(var n=this._get(e,t),i=t,o=r;;){for(;this.compareFunction(n,this._get(e,o));)o--;for(;this.compareFunction(this._get(e,i),n);)i++;if(!(i<o))return o;this._swap(e,i,o),i++,o--}}},{key:"_get",value:function(e,t){return e instanceof i?e.get_object_at(t):e[t]}},{key:"_set",value:function(e,t,r){e instanceof i?e.set_object_at(t,r):e[t]=r}},{key:"_swap",value:function(e,t,r){var n=this._get(e,t);this._set(e,t,this._get(e,r)),this._set(e,r,n)}},{key:"_defaultCompareFunction",value:function(e,t){return t>e}}]),e}();e.exports=o},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;i(this,e),this.sequence1=t,this.sequence2=r,this.match_score=n,this.mismatch_penalty=o,this.gap_penalty=a,this.iMax=t.length+1,this.jMax=r.length+1,this.grid=new Array(this.iMax);for(var s=0;s<this.iMax;s++){this.grid[s]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[s][l]=0}this.tracebackGrid=new Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=new Array(this.jMax);for(var c=0;c<this.jMax;c++)this.tracebackGrid[u][c]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return n(e,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var r=1;r<this.iMax;r++)for(var n=1;n<this.jMax;n++){var i=[this.sequence1[r-1]===this.sequence2[n-1]?this.grid[r-1][n-1]+this.match_score:this.grid[r-1][n-1]+this.mismatch_penalty,this.grid[r-1][n]+this.gap_penalty,this.grid[r][n-1]+this.gap_penalty],o=this.arrayAllMaxIndexes(i);this.grid[r][n]=i[o[0]],this.tracebackGrid[r][n]=[o.includes(0),o.includes(1),o.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],r=this.tracebackGrid[t.pos[0]][t.pos[1]];r[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),r[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),r[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,t){for(var r=[],n=-1;-1!==(n=e.indexOf(t,n+1));)r.push(n);return r}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),e}();e.exports=o},function(e,t,r){var n=function(){};n.FDLayout=r(18),n.FDLayoutConstants=r(7),n.FDLayoutEdge=r(19),n.FDLayoutNode=r(20),n.DimensionD=r(21),n.HashMap=r(22),n.HashSet=r(23),n.IGeometry=r(8),n.IMath=r(9),n.Integer=r(10),n.Point=r(12),n.PointD=r(4),n.RandomSeed=r(16),n.RectangleD=r(13),n.Transform=r(17),n.UniqueIDGeneretor=r(14),n.Quicksort=r(24),n.LinkedList=r(11),n.LGraphObject=r(2),n.LGraph=r(5),n.LEdge=r(1),n.LGraphManager=r(6),n.LNode=r(3),n.Layout=r(15),n.LayoutConstants=r(0),n.NeedlemanWunsch=r(25),e.exports=n},function(e,t,r){function n(){this.listeners=[]}var i=n.prototype;i.addListener=function(e,t){this.listeners.push({event:e,callback:t})},i.removeListener=function(e,t){for(var r=this.listeners.length;r>=0;r--){var n=this.listeners[r];n.event===e&&n.callback===t&&this.listeners.splice(r,1)}},i.emit=function(e,t){for(var r=0;r<this.listeners.length;r++){var n=this.listeners[r];e===n.event&&n.callback(t)}},e.exports=n}])},e.exports=r()}));unwrapExports(layoutBase);var avsdfBase=createCommonjsModule((function(e,t){var r;r=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(t,r){t.exports=e},function(e,t,r){var n=r(0).LGraph;function i(e,t,r){n.call(this,e,t,r),this.inOrder=void 0,this.currentIndex=0,this.nodeSeparation=void 0,this.stack=[],this.perimeter=0,this.centerX=0,this.centerY=0,this.radius=0}for(var o in i.prototype=Object.create(n.prototype),n)i[o]=n[o];i.prototype.initOrdering=function(){this.inOrder=[]},i.prototype.getOrder=function(){return this.inOrder},i.prototype.getCenterX=function(){return this.centerX},i.prototype.getCenterY=function(){return this.centerY},i.prototype.getRadius=function(){return this.radius},i.prototype.getSize=function(){return this.getNodes().length},i.prototype.getTotalCrossingOfCircle=function(){var e=0;for(var t in this.inOrder){var r=t.getTotalCrossingOfEdges();if(-1===r)return-1;e+=r}return e/4},i.prototype.hasFinishedOrdering=function(){return this.currentIndex===this.getNodes().length},i.prototype.getNodeSeparation=function(){return this.nodeSeparation},i.prototype.setNodeSeparation=function(e){this.nodeSeparation=e},i.prototype.correctAngles=function(){var e=this;e.currentIndex=0,e.inOrder.forEach((function(t){return e.putInOrder(t)}))},i.prototype.putInOrder=function(e){for(var t=this.getNodes(),r=!1,n=0;n<t.length;n++)if(t[n].id==e.id){r=!0;break}if(!r)throw"The node must be a member of LGraph";this.inOrder[this.currentIndex]=e,e.setIndex(this.currentIndex),0===this.currentIndex?e.setAngle(0):e.setAngle(this.inOrder[this.currentIndex-1].getAngle()+2*Math.PI*(e.getDiagonal()/2+this.nodeSeparation+this.inOrder[this.currentIndex-1].getDiagonal()/2)/this.perimeter),this.currentIndex++},i.prototype.findNodeToPlace=function(){var e=void 0;if(0===this.stack.length)e=this.findUnorderedSmallestDegreeNode();else{for(var t=!1;!t&&0!==this.stack.length;)t=!(e=this.stack.pop()).isOrdered();t||(e=void 0)}if(void 0===e&&(e=this.findUnorderedSmallestDegreeNode()),void 0!==e)for(var r=e.getNeighborsSortedByDegree(),n=r.length-1;n>=0;n--){var i=r[n];i.isOrdered()||this.stack.push(i)}return e},i.prototype.calculateRadius=function(){var e=0;this.getNodes().forEach((function(t){return e+=Math.sqrt(t.getWidth()*t.getWidth()+t.getHeight()*t.getHeight())})),this.perimeter=e+this.getNodes().length*this.nodeSeparation;var t=this.perimeter/(2*Math.PI);this.getParent().setWidth(2*t),this.getParent().setHeight(2*t),this.getParent().setCenter(this.getParent().getWidth(),this.getParent().getHeight()),this.centerX=this.getParent().getCenterX(),this.centerY=this.getParent().getCenterY(),this.radius=this.getParent().getHeight()/2},i.prototype.calculateEdgeCrossingsOfNodes=function(){this.getNodes().forEach((function(e){return e.calculateTotalCrossing()}))},i.prototype.loadOldIndicesOfNodes=function(){for(var e=0;e<this.inOrder.length;e++)this.inOrder[e].setIndex(e)},i.prototype.reOrderVertices=function(){var e=this;this.getNodes().forEach((function(t){return e.inOrder[t.getIndex()]=t}))},i.prototype.findUnorderedSmallestDegreeNode=function(){var e=Number.MAX_SAFE_INTEGER,t=void 0;return this.getNodes().forEach((function(r){r.getDegree()<e&&!r.isOrdered()&&(e=r.getDegree(),t=r)})),t},e.exports=i},function(e,t,r){var n=r(0).LayoutConstants;function i(){}for(var o in n)i[o]=n[o];i.DEFAULT_NODE_SEPARATION=60,e.exports=i},function(e,t,r){var n=r(0).LEdge;function i(e,t,r){n.call(this,e,t,r)}for(var o in i.prototype=Object.create(n.prototype),n)i[o]=n[o];i.prototype.getOtherEnd=function(e){return n.prototype.getOtherEnd(e)},i.prototype.crossesWithEdge=function(e){var t=this.getSource().getIndex(),r=this.getTarget().getIndex(),n=e.getSource().getIndex(),i=e.getTarget().getIndex();if(-1===t||-1===r||-1===n||-1===i)return!1;var o=e.getSource().getCircDistWithTheNode(this.getSource()),a=e.getTarget().getCircDistWithTheNode(this.getSource()),s=this.getTarget().getCircDistWithTheNode(this.getSource());return s<Math.max(o,a)&&s>Math.min(o,a)&&0!==a&&0!==o},i.prototype.crossingWithEdge=function(e){return this.crossesWithEdge(e)?1:0},i.prototype.calculateTotalCrossingWithList=function(e){var t=this,r=0;return e.forEach((function(e){return r+=t.crossingWithEdge(e)})),r},e.exports=i},function(e,t,r){var n=r(0).LNode;function i(e,t,r,i){void 0!==r&&void 0!==i?n.call(this,e,t,r,i):n.call(this,e,t),this.angle=0,this.circleIndex=-1,this.totalCrossingOfEdges=-1,this.isCrossingNumberValid=!1}for(var o in r(0).Quicksort,i.prototype=Object.create(n.prototype),n)i[o]=n[o];i.prototype.getCircle=function(){return this.getOwner()},i.prototype.setIndex=function(e){this.circleIndex=e,this.isCrossingNumberValid=!1},i.prototype.getIndex=function(){return this.circleIndex},i.prototype.getNeighborsSortedByDegree=function(){var e=Array.from(this.getNeighborsList());return(e=e.filter((function(e){return-1===e.getIndex()}))).sort((function(e,t){return e.getDegree()-t.getDegree()})),e},i.prototype.getDegree=function(){return this.getEdges().length},i.prototype.isOrdered=function(){return this.getIndex()>-1},i.prototype.setAngle=function(e){this.angle=e},i.prototype.getAngle=function(){return this.angle},i.prototype.getCircDistWithTheNode=function(e){var t=e.getIndex();if(-1===t||-1===this.getIndex())return-1;var r=this.getIndex()-t;return r<0&&(r+=this.getCircle().getSize()),r},i.prototype.getCrossingNumberWithNode=function(e){var t=0;return this.getEdges().forEach((function(r){e.getEdges().forEach((function(e){t+=r.crossingWithEdge(e)}))})),t},i.prototype.getTotalCrossingOfEdges=function(){return this.isCrossingNumberValid||(this.calculateTotalCrossing(),this.isCrossingNumberValid=!0),this.totalCrossingOfEdges},i.prototype.calculateTotalCrossing=function(){var e=this,t=0,r=[];r.push.apply(r,e.getCircle().getEdges()),r=r.filter((function(t){return e.getEdges().indexOf(t)<0})),e.getEdges().forEach((function(e){return t+=e.calculateTotalCrossingWithList(r)})),e.totalCrossingOfEdges=t},e.exports=i},function(e,t,r){var n=r(0).Layout,i=r(2),o=r(1),a=r(4),s=r(3);function l(){n.call(this),this.nodeSeparation=i.DEFAULT_NODE_SEPARATION}for(var u in l.prototype=Object.create(n.prototype),n)l[u]=n[u];l.prototype.newGraph=function(e){return this.avsdfCircle=new o(null,this.graphManager,e),this.avsdfCircle},l.prototype.newNode=function(e){return new a(this.graphManager,e)},l.prototype.newEdge=function(e){return new s(null,null,e)},l.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},r=0;r<e.length;r++){var n=e[r].rect,i=e[r].id;t[i]={id:i,x:n.getCenterX(),y:n.getCenterY(),w:n.width,h:n.height}}return t},l.prototype.layout=function(){if(this.graphManager.getGraphs().length>1)return!1;var e=this.avsdfCircle;for(e.setNodeSeparation(this.nodeSeparation),e.calculateRadius(),e.initOrdering();!e.hasFinishedOrdering();){var t=e.findNodeToPlace();e.putInOrder(t)}return!0},l.prototype.updateNodeAngles=function(){this.graphManager.getRoot().correctAngles()},l.prototype.updateNodeCoordinates=function(){var e=this.graphManager.getRoot();e.getNodes().forEach((function(t){t.setCenter(e.getCenterX()+e.getRadius()*Math.cos(t.getAngle()),e.getCenterY()+e.getRadius()*Math.sin(t.getAngle()))}))},l.prototype.initPostProcess=function(){this.avsdfCircle.calculateEdgeCrossingsOfNodes();var e=this.avsdfCircle.getNodes();return e.sort((function(e,t){return t.getTotalCrossingOfEdges()-e.getTotalCrossingOfEdges()})),e},l.prototype.oneStepPostProcess=function(e){for(var t=e.getTotalCrossingOfEdges(),r=void 0,n=Array.from(e.getNeighborsList()),i=0;i<n.length;i++){var o=n[i],a=e.getIndex(),s=(o.getIndex()+1)%this.avsdfCircle.getSize();if(a!==s){e.setIndex(s),a<e.getIndex()&&(a+=this.avsdfCircle.getSize());for(var l=e.getIndex();l<a;){var u=this.avsdfCircle.getOrder()[l%this.avsdfCircle.getSize()];u.setIndex((u.getIndex()+1)%this.avsdfCircle.getSize()),l+=1}e.calculateTotalCrossing(),(r=e.getTotalCrossingOfEdges())>=t?this.avsdfCircle.loadOldIndicesOfNodes():(this.avsdfCircle.reOrderVertices(),t=r)}}},e.exports=l},function(e,t,r){var n={};n.layoutBase=r(0),n.AVSDFConstants=r(2),n.AVSDFEdge=r(3),n.AVSDFCircle=r(1),n.AVSDFLayout=r(5),n.AVSDFNode=r(4),e.exports=n}])},e.exports=r(layoutBase)}));unwrapExports(avsdfBase);var cytoscapeAvsdf=createCommonjsModule((function(e,t){var r;r=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(t,r){t.exports=e},function(e,t,r){e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((function(t){Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e}},function(e,t,r){e.exports=r(4)},function(e,t,r){var n=r(2),i=function(e){e&&e("layout","avsdf",n)};"undefined"!=typeof cytoscape&&i(cytoscape),e.exports=i},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0).AVSDFLayout,o=r(0).AVSDFNode,a=r(0).AVSDFConstants,s=r(0).layoutBase.PointD,l=r(0).layoutBase.DimensionD,u=r(1),c=r(6),h={ready:function(){},stop:function(){},refresh:30,fit:!0,padding:10,randomize:!1,animate:"end",animationDuration:500,nodeSeparation:60},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},h,e)));return null!=e.nodeSeparation?a.DEFAULT_NODE_SEPARATION=e.nodeSeparation:a.DEFAULT_NODE_SEPARATION=h.nodeSeparation,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"prerun",value:function(){var e=this.state,t=this.avsdfLayout=new i,r=this.graphManager=t.newGraphManager(),n=this.root=r.addRoot(),o=e.nodes,a=e.edges;this.idToLNode={},this.processChildrenList(n,o,t);for(var s=0;s<a.length;s++){var l=a[s],u=this.idToLNode[l.data("source")],c=this.idToLNode[l.data("target")];u!==c&&0===u.getEdgesBetween(c).length&&(r.add(t.newEdge(),u,c).id=l.id())}t.layout(),t.updateNodeCoordinates(),this.sortedByDegreeList=t.initPostProcess()}},{key:"tick",value:function(){var e=this,t=this.state,r=this.avsdfLayout.getPositionsData();if(t.nodes.forEach((function(t){var n=e.getScratch(t);n.x=r[t.data("id")].x,n.y=r[t.data("id")].y})),t.tickIndex>=t.nodes.size())return!0;this.avsdfLayout.oneStepPostProcess(this.sortedByDegreeList[t.tickIndex]),this.avsdfLayout.updateNodeAngles(),this.avsdfLayout.updateNodeCoordinates()}},{key:"postrun",value:function(){}},{key:"destroy",value:function(){return function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this}},{key:"processChildrenList",value:function(e,t,r){for(var n=t.length,i=0;i<n;i++){var a=t[i],u=void 0,c=a.layoutDimensions({nodeDimensionsIncludeLabels:!1});(u=null!=a.outerWidth()&&null!=a.outerHeight()?e.add(new o(r.graphManager,null,new s(a.position("x")-c.w/2,a.position("y")-c.h/2),new l(parseFloat(c.w),parseFloat(c.h)))):e.add(new o(this.graphManager))).id=a.data("id"),u.paddingLeft=parseInt(a.css("padding")),u.paddingTop=parseInt(a.css("padding")),u.paddingRight=parseInt(a.css("padding")),u.paddingBottom=parseInt(a.css("padding")),this.idToLNode[a.data("id")]=u,isNaN(u.rect.x)&&(u.rect.x=0),isNaN(u.rect.y)&&(u.rect.y=0)}}}]),t}(c);e.exports=d},function(e,t,r){e.exports=Object.freeze({animate:!0,refresh:10,maxIterations:1e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,infinite:!1})},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),o=r(5),a=r(7),s=r(8),l=s.setInitialPositionState,u=s.refreshPositions,c=s.getNodePositionData,h=r(9).multitick,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this.options=i({},o,t),n=this.state=i({},r,{layout:this,nodes:r.eles.nodes(),edges:r.eles.edges(),tickIndex:0,firstUpdate:!0});n.animateEnd=r.animate&&"end"===r.animate,n.animateContinuously=r.animate&&!n.animateEnd}return n(e,[{key:"getScratch",value:function(e){var t=this.state.name,r=e.scratch(t);return r||(r={},e.scratch(t,r)),r}},{key:"run",value:function(){var e=this,t=this.state;if(t.tickIndex=0,t.firstUpdate=!0,t.startTime=Date.now(),t.running=!0,t.currentBoundingBox=a(t.boundingBox,t.cy),t.ready&&e.one("ready",t.ready),t.stop&&e.one("stop",t.stop),t.nodes.forEach((function(e){return l(e,t)})),e.prerun(t),t.animateContinuously){var r=function(e){var r,n=e.target;c(r=n,t).grabbed=r.grabbed()},n=r,i=function(e){var r=e.target,n=c(r,t),i=r.position();n.x=i.x,n.y=i.y},o=function(){t.fit&&t.animateContinuously&&t.cy.fit(t.padding)},s=function(){u(t.nodes,t),o(),requestAnimationFrame(d)},d=function(){h(t,s,f)},f=function(){u(t.nodes,t),o(),t.nodes.forEach((function(e){var o;o=e,t.ungrabifyWhileSimulating&&c(o,t).grabbable&&o.grabify(),function(e){e.removeListener("grab",r),e.removeListener("free",n),e.removeListener("drag",i)}(e)})),t.running=!1,e.emit("layoutstop")};e.emit("layoutstart"),t.nodes.forEach((function(e){var o;o=e,t.ungrabifyWhileSimulating&&(c(o,t).grabbable=o.grabbable())&&o.ungrabify(),function(e){e.on("grab",r),e.on("free",n),e.on("drag",i)}(e)})),d()}else{for(var p=!1,g=function(){},y=function(){return p=!0};!p;)h(t,g,y);t.eles.layoutPositions(this,t,(function(e){var r=c(e,t);return{x:r.x,y:r.y}}))}return e.postrun(t),this}},{key:"prerun",value:function(){}},{key:"postrun",value:function(){}},{key:"tick",value:function(){}},{key:"stop",value:function(){return this.state.running=!1,this}},{key:"destroy",value:function(){return this}}]),e}();e.exports=d},function(e,t,r){e.exports=function(e,t){return null==(e=null==e?{x1:0,y1:0,w:t.width(),h:t.height()}:{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,w:e.w,h:e.h}).x2&&(e.x2=e.x1+e.w),null==e.w&&(e.w=e.x2-e.x1),null==e.y2&&(e.y2=e.y1+e.h),null==e.h&&(e.h=e.y2-e.y1),e}},function(e,t,r){var n=r(1);e.exports={setInitialPositionState:function(e,t){var r=e.position(),i=t.currentBoundingBox,o=e.scratch(t.name);null==o&&(o={},e.scratch(t.name,o)),n(o,t.randomize?{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}:{x:r.x,y:r.y}),o.locked=e.locked()},getNodePositionData:function(e,t){return e.scratch(t.name)},refreshPositions:function(e,t){e.positions((function(e){var r=e.scratch(t.name);return{x:r.x,y:r.y}}))}}},function(e,t,r){var n=function(){},i=function(e){var t=e,r=e.layout.tick(t);return t.firstUpdate&&(t.animateContinuously&&t.layout.emit("layoutready"),t.firstUpdate=!1),t.tickIndex++,Date.now(),t.startTime,!t.infinite&&r};e.exports={tick:i,multitick:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,o=!1,a=e,s=0;s<a.refresh&&!(o=!a.running||i(a));s++);o?r():t()}}}])},e.exports=r(avsdfBase)})),avsdf=unwrapExports(cytoscapeAvsdf),coseBase=createCommonjsModule((function(e,t){var r;r=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(t,r){t.exports=e},function(e,t,r){var n=r(0).FDLayoutConstants;function i(){}for(var o in n)i[o]=n[o];i.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,i.DEFAULT_RADIAL_SEPARATION=n.DEFAULT_EDGE_LENGTH,i.DEFAULT_COMPONENT_SEPERATION=60,i.TILE=!0,i.TILING_PADDING_VERTICAL=10,i.TILING_PADDING_HORIZONTAL=10,e.exports=i},function(e,t,r){var n=r(0).FDLayoutEdge;function i(e,t,r){n.call(this,e,t,r)}for(var o in i.prototype=Object.create(n.prototype),n)i[o]=n[o];e.exports=i},function(e,t,r){var n=r(0).LGraph;function i(e,t,r){n.call(this,e,t,r)}for(var o in i.prototype=Object.create(n.prototype),n)i[o]=n[o];e.exports=i},function(e,t,r){var n=r(0).LGraphManager;function i(e){n.call(this,e)}for(var o in i.prototype=Object.create(n.prototype),n)i[o]=n[o];e.exports=i},function(e,t,r){var n=r(0).FDLayoutNode,i=r(0).IMath;function o(e,t,r,i){n.call(this,e,t,r,i)}for(var a in o.prototype=Object.create(n.prototype),n)o[a]=n[a];o.prototype.move=function(){var e=this.graphManager.getLayout();this.displacementX=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*i.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},o.prototype.propogateDisplacementToChildren=function(e,t){for(var r,n=this.getChild().getNodes(),i=0;i<n.length;i++)null==(r=n[i]).getChild()?(r.moveBy(e,t),r.displacementX+=e,r.displacementY+=t):r.propogateDisplacementToChildren(e,t)},o.prototype.setPred1=function(e){this.pred1=e},o.prototype.getPred1=function(){return pred1},o.prototype.getPred2=function(){return pred2},o.prototype.setNext=function(e){this.next=e},o.prototype.getNext=function(){return next},o.prototype.setProcessed=function(e){this.processed=e},o.prototype.isProcessed=function(){return processed},e.exports=o},function(e,t,r){var n=r(0).FDLayout,i=r(4),o=r(3),a=r(5),s=r(2),l=r(1),u=r(0).FDLayoutConstants,c=r(0).LayoutConstants,h=r(0).Point,d=r(0).PointD,f=r(0).Layout,p=r(0).Integer,g=r(0).IGeometry,y=r(0).LGraph,v=r(0).Transform;function m(){n.call(this),this.toBeTiled={}}for(var b in m.prototype=Object.create(n.prototype),n)m[b]=n[b];m.prototype.newGraphManager=function(){var e=new i(this);return this.graphManager=e,e},m.prototype.newGraph=function(e){return new o(null,this.graphManager,e)},m.prototype.newNode=function(e){return new a(this.graphManager,e)},m.prototype.newEdge=function(e){return new s(null,null,e)},m.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=u.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=u.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=u.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=u.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/u.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=u.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},m.prototype.layout=function(){return c.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},m.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),!this.incremental){var e=this.getFlatForest();if(e.length>0)this.positionNodesRadially(e);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),r=this.nodesWithGravity.filter((function(e){return t.has(e)}));this.graphManager.setAllNodesToApplyGravitation(r),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},m.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%u.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var r=!this.isTreeGrowing&&!this.isGrowthFinished,n=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(r,n),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},m.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},r=0;r<e.length;r++){var n=e[r].rect,i=e[r].id;t[i]={id:i,x:n.getCenterX(),y:n.getCenterY(),w:n.width,h:n.height}}return t},m.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===u.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},m.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,r=[],n=this.graphManager.getGraphs(),i=n.length;for(t=0;t<i;t++)(e=n[t]).updateConnected(),e.isConnected||(r=r.concat(e.getNodes()));return r},m.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,r=new Set;for(t=0;t<e.length;t++){var n=e[t];if(!r.has(n)){var i=n.getSource(),o=n.getTarget();if(i==o)n.getBendpoints().push(new d),n.getBendpoints().push(new d),this.createDummyNodesForBendpoints(n),r.add(n);else{var a=[];if(a=(a=a.concat(i.getEdgeListToNode(o))).concat(o.getEdgeListToNode(i)),!r.has(a[0])){var s;if(a.length>1)for(s=0;s<a.length;s++){var l=a[s];l.getBendpoints().push(new d),this.createDummyNodesForBendpoints(l)}a.forEach((function(e){r.add(e)}))}}}if(r.size==e.length)break}},m.prototype.positionNodesRadially=function(e){for(var t=new h(0,0),r=Math.ceil(Math.sqrt(e.length)),n=0,i=0,o=0,a=new d(0,0),s=0;s<e.length;s++){s%r==0&&(o=0,i=n,0!=s&&(i+=l.DEFAULT_COMPONENT_SEPERATION),n=0);var u=e[s],p=f.findCenterOfTree(u);t.x=o,t.y=i,(a=m.radialLayout(u,p,t)).y>n&&(n=Math.floor(a.y)),o=Math.floor(a.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new d(c.WORLD_CENTER_X-a.x/2,c.WORLD_CENTER_Y-a.y/2))},m.radialLayout=function(e,t,r){var n=Math.max(this.maxDiagonalInTree(e),l.DEFAULT_RADIAL_SEPARATION);m.branchRadialLayout(t,null,0,359,0,n);var i=y.calculateBounds(e),o=new v;o.setDeviceOrgX(i.getMinX()),o.setDeviceOrgY(i.getMinY()),o.setWorldOrgX(r.x),o.setWorldOrgY(r.y);for(var a=0;a<e.length;a++)e[a].transform(o);var s=new d(i.getMaxX(),i.getMaxY());return o.inverseTransformPoint(s)},m.branchRadialLayout=function(e,t,r,n,i,o){var a=(n-r+1)/2;a<0&&(a+=180);var s=(a+r)%360*g.TWO_PI/360,l=i*Math.cos(s),u=i*Math.sin(s);e.setCenter(l,u);var c=[],h=(c=c.concat(e.getEdges())).length;null!=t&&h--;for(var d,f=0,p=c.length,y=e.getEdgesBetween(t);y.length>1;){var v=y[0];y.splice(0,1);var b=c.indexOf(v);b>=0&&c.splice(b,1),p--,h--}d=null!=t?(c.indexOf(y[0])+1)%p:0;for(var $=Math.abs(n-r)/h,_=d;f!=h;_=++_%p){var w=c[_].getOtherEnd(e);if(w!=t){var E=(r+f*$)%360,x=(E+$)%360;m.branchRadialLayout(w,e,E,x,i+o,o),f++}}},m.maxDiagonalInTree=function(e){for(var t=p.MIN_VALUE,r=0;r<e.length;r++){var n=e[r].getDiagonal();n>t&&(t=n)}return t},m.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},m.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var r=[],n=this.graphManager.getAllNodes(),i=0;i<n.length;i++){var o=(s=n[i]).getParent();0!==this.getNodeDegreeWithChildren(s)||null!=o.id&&this.getToBeTiled(o)||r.push(s)}for(i=0;i<r.length;i++){var s,l=(s=r[i]).getParent().id;void 0===t[l]&&(t[l]=[]),t[l]=t[l].concat(s)}Object.keys(t).forEach((function(r){if(t[r].length>1){var n="DummyCompound_"+r;e.memberGroups[n]=t[r];var i=t[r][0].getParent(),o=new a(e.graphManager);o.id=n,o.paddingLeft=i.paddingLeft||0,o.paddingRight=i.paddingRight||0,o.paddingBottom=i.paddingBottom||0,o.paddingTop=i.paddingTop||0,e.idToDummyNode[n]=o;var s=e.getGraphManager().add(e.newGraph(),o),l=i.getChild();l.add(o);for(var u=0;u<t[r].length;u++){var c=t[r][u];l.remove(c),s.add(c)}}}))},m.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var r=0;r<this.compoundOrder.length;r++)t[this.compoundOrder[r].id]=this.compoundOrder[r],e[this.compoundOrder[r].id]=[].concat(this.compoundOrder[r].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[r].getChild()),this.compoundOrder[r].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},m.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(r){var n=e.idToDummyNode[r];t[r]=e.tileNodes(e.memberGroups[r],n.paddingLeft+n.paddingRight),n.rect.width=t[r].width,n.rect.height=t[r].height}))},m.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],r=t.id,n=t.paddingLeft,i=t.paddingTop;this.adjustLocations(this.tiledMemberPack[r],t.rect.x,t.rect.y,n,i)}},m.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach((function(r){var n=e.idToDummyNode[r],i=n.paddingLeft,o=n.paddingTop;e.adjustLocations(t[r],n.rect.x,n.rect.y,i,o)}))},m.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var r=e.getChild();if(null==r)return this.toBeTiled[t]=!1,!1;for(var n=r.getNodes(),i=0;i<n.length;i++){var o=n[i];if(this.getNodeDegree(o)>0)return this.toBeTiled[t]=!1,!1;if(null!=o.getChild()){if(!this.getToBeTiled(o))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[o.id]=!1}return this.toBeTiled[t]=!0,!0},m.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),r=0,n=0;n<t.length;n++){var i=t[n];i.getSource().id!==i.getTarget().id&&(r+=1)}return r},m.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var r=e.getChild().getNodes(),n=0;n<r.length;n++){var i=r[n];t+=this.getNodeDegreeWithChildren(i)}return t},m.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},m.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var r=e[t];null!=r.getChild()&&this.fillCompexOrderByDFS(r.getChild().getNodes()),this.getToBeTiled(r)&&this.compoundOrder.push(r)}},m.prototype.adjustLocations=function(e,t,r,n,i){r+=i;for(var o=t+=n,a=0;a<e.rows.length;a++){var s=e.rows[a];t=o;for(var l=0,u=0;u<s.length;u++){var c=s[u];c.rect.x=t,c.rect.y=r,t+=c.rect.width+e.horizontalPadding,c.rect.height>l&&(l=c.rect.height)}r+=l+e.verticalPadding}},m.prototype.tileCompoundMembers=function(e,t){var r=this;this.tiledMemberPack=[],Object.keys(e).forEach((function(n){var i=t[n];r.tiledMemberPack[n]=r.tileNodes(e[n],i.paddingLeft+i.paddingRight),i.rect.width=r.tiledMemberPack[n].width,i.rect.height=r.tiledMemberPack[n].height}))},m.prototype.tileNodes=function(e,t){var r={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:l.TILING_PADDING_VERTICAL,horizontalPadding:l.TILING_PADDING_HORIZONTAL};e.sort((function(e,t){return e.rect.width*e.rect.height>t.rect.width*t.rect.height?-1:e.rect.width*e.rect.height<t.rect.width*t.rect.height?1:0}));for(var n=0;n<e.length;n++){var i=e[n];0==r.rows.length?this.insertNodeToRow(r,i,0,t):this.canAddHorizontal(r,i.rect.width,i.rect.height)?this.insertNodeToRow(r,i,this.getShortestRowIndex(r),t):this.insertNodeToRow(r,i,r.rows.length,t),this.shiftToLastRow(r)}return r},m.prototype.insertNodeToRow=function(e,t,r,n){var i=n;r==e.rows.length&&(e.rows.push([]),e.rowWidth.push(i),e.rowHeight.push(0));var o=e.rowWidth[r]+t.rect.width;e.rows[r].length>0&&(o+=e.horizontalPadding),e.rowWidth[r]=o,e.width<o&&(e.width=o);var a=t.rect.height;r>0&&(a+=e.verticalPadding);var s=0;a>e.rowHeight[r]&&(s=e.rowHeight[r],e.rowHeight[r]=a,s=e.rowHeight[r]-s),e.height+=s,e.rows[r].push(t)},m.prototype.getShortestRowIndex=function(e){for(var t=-1,r=Number.MAX_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]<r&&(t=n,r=e.rowWidth[n]);return t},m.prototype.getLongestRowIndex=function(e){for(var t=-1,r=Number.MIN_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]>r&&(t=n,r=e.rowWidth[n]);return t},m.prototype.canAddHorizontal=function(e,t,r){var n=this.getShortestRowIndex(e);if(n<0)return!0;var i=e.rowWidth[n];if(i+e.horizontalPadding+t<=e.width)return!0;var o,a,s=0;return e.rowHeight[n]<r&&n>0&&(s=r+e.verticalPadding-e.rowHeight[n]),o=e.width-i>=t+e.horizontalPadding?(e.height+s)/(i+t+e.horizontalPadding):(e.height+s)/e.width,s=r+e.verticalPadding,(a=e.width<t?(e.height+s)/t:(e.height+s)/e.width)<1&&(a=1/a),o<1&&(o=1/o),o<a},m.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),r=e.rowWidth.length-1,n=e.rows[t],i=n[n.length-1],o=i.width+e.horizontalPadding;if(e.width-e.rowWidth[r]>o&&t!=r){n.splice(-1,1),e.rows[r].push(i),e.rowWidth[t]=e.rowWidth[t]-o,e.rowWidth[r]=e.rowWidth[r]+o,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var a=Number.MIN_VALUE,s=0;s<n.length;s++)n[s].height>a&&(a=n[s].height);t>0&&(a+=e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[r];e.rowHeight[t]=a,e.rowHeight[r]<i.height+e.verticalPadding&&(e.rowHeight[r]=i.height+e.verticalPadding);var u=e.rowHeight[t]+e.rowHeight[r];e.height+=u-l,this.shiftToLastRow(e)}},m.prototype.tilingPreLayout=function(){l.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},m.prototype.tilingPostLayout=function(){l.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},m.prototype.reduceTrees=function(){for(var e,t=[],r=!0;r;){var n=this.graphManager.getAllNodes(),i=[];r=!1;for(var o=0;o<n.length;o++)1!=(e=n[o]).getEdges().length||e.getEdges()[0].isInterGraph||null!=e.getChild()||(i.push([e,e.getEdges()[0],e.getOwner()]),r=!0);if(1==r){for(var a=[],s=0;s<i.length;s++)1==i[s][0].getEdges().length&&(a.push(i[s]),i[s][0].getOwner().remove(i[s][0]));t.push(a),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},m.prototype.growTree=function(e){for(var t,r=e[e.length-1],n=0;n<r.length;n++)t=r[n],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},m.prototype.findPlaceforPrunedNode=function(e){var t,r,n=e[0],i=(r=n==e[1].source?e[1].target:e[1].source).startX,o=r.finishX,a=r.startY,s=r.finishY,l=[0,0,0,0];if(a>0)for(var c=i;c<=o;c++)l[0]+=this.grid[c][a-1].length+this.grid[c][a].length-1;if(o<this.grid.length-1)for(c=a;c<=s;c++)l[1]+=this.grid[o+1][c].length+this.grid[o][c].length-1;if(s<this.grid[0].length-1)for(c=i;c<=o;c++)l[2]+=this.grid[c][s+1].length+this.grid[c][s].length-1;if(i>0)for(c=a;c<=s;c++)l[3]+=this.grid[i-1][c].length+this.grid[i][c].length-1;for(var h,d,f=p.MAX_VALUE,g=0;g<l.length;g++)l[g]<f?(f=l[g],h=1,d=g):l[g]==f&&h++;if(3==h&&0==f)0==l[0]&&0==l[1]&&0==l[2]?t=1:0==l[0]&&0==l[1]&&0==l[3]?t=0:0==l[0]&&0==l[2]&&0==l[3]?t=3:0==l[1]&&0==l[2]&&0==l[3]&&(t=2);else if(2==h&&0==f){var y=Math.floor(2*Math.random());t=0==l[0]&&0==l[1]?0==y?0:1:0==l[0]&&0==l[2]?0==y?0:2:0==l[0]&&0==l[3]?0==y?0:3:0==l[1]&&0==l[2]?0==y?1:2:0==l[1]&&0==l[3]?0==y?1:3:0==y?2:3}else t=4==h&&0==f?y=Math.floor(4*Math.random()):d;0==t?n.setCenter(r.getCenterX(),r.getCenterY()-r.getHeight()/2-u.DEFAULT_EDGE_LENGTH-n.getHeight()/2):1==t?n.setCenter(r.getCenterX()+r.getWidth()/2+u.DEFAULT_EDGE_LENGTH+n.getWidth()/2,r.getCenterY()):2==t?n.setCenter(r.getCenterX(),r.getCenterY()+r.getHeight()/2+u.DEFAULT_EDGE_LENGTH+n.getHeight()/2):n.setCenter(r.getCenterX()-r.getWidth()/2-u.DEFAULT_EDGE_LENGTH-n.getWidth()/2,r.getCenterY())},e.exports=m},function(e,t,r){var n={};n.layoutBase=r(0),n.CoSEConstants=r(1),n.CoSEEdge=r(2),n.CoSEGraph=r(3),n.CoSEGraphManager=r(4),n.CoSELayout=r(6),n.CoSENode=r(5),e.exports=n}])},e.exports=r(layoutBase)}));unwrapExports(coseBase);var numeric1_2_6=createCommonjsModule((function(module,exports){var numeric=exports;void 0!==commonjsGlobal&&(commonjsGlobal.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var r,n,i;for(void 0===t&&(t=15),n=.5,r=new Date;;){for(i=n*=2;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;if(new Date-r>t)break}for(i=n;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;return 1e3*(3*n-1)/(new Date-r)},numeric._myIndexOf=function(e){var t,r=this.length;for(t=0;t<r;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){var t=[];return function e(r){var n;if(void 0===r)return t.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof r)return t.push('"'+r+'"'),!1;if("boolean"==typeof r)return t.push(r.toString()),!1;if("number"==typeof r){var i=function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+e(-t);if(isFinite(t)){var r=Math.floor(Math.log(t)/Math.log(10)),n=t/Math.pow(10,r),i=n.toPrecision(numeric.precision);return 10===parseFloat(i)&&(r++,i=(n=1).toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+r.toString()}return"Infinity"}(r),o=r.toPrecision(numeric.precision),a=parseFloat(r.toString()).toString(),s=[i,o,a,parseFloat(o).toString(),parseFloat(a).toString()];for(n=1;n<s.length;n++)s[n].length<i.length&&(i=s[n]);return t.push(Array(numeric.precision+8-i.length).join(" ")+i),!1}if(null===r)return t.push("null"),!1;if("function"==typeof r){t.push(r.toString());var l=!1;for(n in r)r.hasOwnProperty(n)&&(l?t.push(",\n"):t.push("\n{"),l=!0,t.push(n),t.push(": \n"),e(r[n]));return l&&t.push("}\n"),!0}if(r instanceof Array){if(r.length>numeric.largeArray)return t.push("...Large Array..."),!0;l=!1;for(t.push("["),n=0;n<r.length;n++)n>0&&(t.push(","),l&&t.push("\n ")),l=e(r[n]);return t.push("]"),!0}for(n in t.push("{"),l=!1,r)r.hasOwnProperty(n)&&(l&&t.push(",\n"),l=!0,t.push(n),t.push(": \n"),e(r[n]));return t.push("}"),!0}(e),t.join("")},numeric.parseDate=function(e){return function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var r,n=[];for(r=0;r<t.length;r++)n[r]=e(t[r]);return n}(e)},numeric.parseFloat=function(e){return function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var r,n=[];for(r=0;r<t.length;r++)n[r]=e(t[r]);return n}(e)},numeric.parseCSV=function(e){var t,r,n,i=e.split("\n"),o=[],a=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,l=0;for(r=0;r<i.length;r++){var u,c=(i[r]+",").match(a);if(c.length>0){for(o[l]=[],t=0;t<c.length;t++)u=(n=c[t]).substr(0,n.length-1),s.test(u)?o[l][t]=parseFloat(u):o[l][t]=u;l++}}return o},numeric.toCSV=function(e){var t,r,n,i,o,a=numeric.dim(e);for(n=a[0],a[1],o=[],t=0;t<n;t++){for(i=[],r=0;r<n;r++)i[r]=e[t][r].toString();o[t]=i.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length);var n,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1;e.length;for(n=t;n<r;n++)o=o>>>8^i[255&(o^e[n])];return-1^o}var r,n,i,o,a,s,l,u,c,h,d=e[0].length,f=e[0][0].length,p=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,d>>24&255,d>>16&255,d>>8&255,255&d,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(h=t(p,12,29),p[29]=h>>24&255,p[30]=h>>16&255,p[31]=h>>8&255,p[32]=255&h,r=1,n=0,l=0;l<d;l++){for(l<d-1?p.push(0):p.push(1),a=3*f+1+(0===l)&255,s=3*f+1+(0===l)>>8&255,p.push(a),p.push(s),p.push(255&~a),p.push(255&~s),0===l&&p.push(0),u=0;u<f;u++)for(i=0;i<3;i++)n=(n+(r=(r+(a=(a=e[i][l][u])>255?255:a<0?0:Math.round(a)))%65521))%65521,p.push(a);p.push(0)}return c=(n<<16)+r,p.push(c>>24&255),p.push(c>>16&255),p.push(c>>8&255),p.push(255&c),o=p.length-41,p[33]=o>>24&255,p[34]=o>>16&255,p[35]=o>>8&255,p[36]=255&o,h=t(p,37),p.push(h>>24&255),p.push(h>>16&255),p.push(h>>8&255),p.push(255&h),p.push(0),p.push(0),p.push(0),p.push(0),p.push(73),p.push(69),p.push(78),p.push(68),p.push(174),p.push(66),p.push(96),p.push(130),"data:image/png;base64,"+function(e){var t,r,n,i,o,a,s,l=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="";for(t=0;t<l;t+=3)o=((3&(r=e[t]))<<4)+((n=e[t+1])>>4),a=((15&n)<<2)+((i=e[t+2])>>6),s=63&i,t+1>=l?a=s=64:t+2>=l&&(s=64),c+=u.charAt(r>>2)+u.charAt(o)+u.charAt(a)+u.charAt(s);return c}(p)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t;return"object"==typeof e?"object"==typeof(t=e[0])?"object"==typeof t[0]?numeric._dim(e):[e.length,t.length]:[e.length]:[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,r){var n,i;if(!(t instanceof Array&&r instanceof Array))return!1;if((i=t.length)!==r.length)return!1;for(n=0;n<i;n++)if(t[n]!==r[n]){if("object"!=typeof t[n])return!1;if(!e(t[n],r[n]))return!1}return!0},numeric.rep=function(e,t,r){void 0===r&&(r=0);var n,i=e[r],o=Array(i);if(r===e.length-1){for(n=i-2;n>=0;n-=2)o[n+1]=t,o[n]=t;return-1===n&&(o[0]=t),o}for(n=i-1;n>=0;n--)o[n]=numeric.rep(e,t,r+1);return o},numeric.dotMMsmall=function(e,t){var r,n,i,o,a,s,l,u,c,h,d;for(o=e.length,a=t.length,s=t[0].length,l=Array(o),r=o-1;r>=0;r--){for(u=Array(s),c=e[r],i=s-1;i>=0;i--){for(h=c[a-1]*t[a-1][i],n=a-2;n>=1;n-=2)d=n-1,h+=c[n]*t[n][i]+c[d]*t[d][i];0===n&&(h+=c[0]*t[0][i]),u[i]=h}l[r]=u}return l},numeric._getCol=function(e,t,r){var n;for(n=e.length-1;n>0;--n)r[n]=e[n][t],r[--n]=e[n][t];0===n&&(r[0]=e[0][t])},numeric.dotMMbig=function(e,t){var r,n,i,o=numeric._getCol,a=t.length,s=Array(a),l=e.length,u=t[0].length,c=new Array(l),h=numeric.dotVV;for(--a,n=--l;-1!==n;--n)c[n]=Array(u);for(n=--u;-1!==n;--n)for(o(t,n,s),i=l;-1!==i;--i)r=e[i],c[i][n]=h(r,s);return c},numeric.dotMV=function(e,t){var r,n=e.length,i=(t.length,Array(n)),o=numeric.dotVV;for(r=n-1;r>=0;r--)i[r]=o(e[r],t);return i},numeric.dotVM=function(e,t){var r,n,i,o,a,s,l;for(i=e.length,o=t[0].length,a=Array(o),n=o-1;n>=0;n--){for(s=e[i-1]*t[i-1][n],r=i-2;r>=1;r-=2)l=r-1,s+=e[r]*t[r][n]+e[l]*t[l][n];0===r&&(s+=e[0]*t[0][n]),a[n]=s}return a},numeric.dotVV=function(e,t){var r,n,i=e.length,o=e[i-1]*t[i-1];for(r=i-2;r>=1;r-=2)n=r-1,o+=e[r]*t[r]+e[n]*t[n];return 0===r&&(o+=e[0]*t[0]),o},numeric.dot=function(e,t){var r=numeric.dim;switch(1e3*r(e).length+r(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,r,n,i,o=e.length,a=Array(o);for(t=o-1;t>=0;t--){for(i=Array(o),r=t+2,n=o-1;n>=r;n-=2)i[n]=0,i[n-1]=0;for(n>t&&(i[n]=0),i[t]=e[t],n=t-1;n>=1;n-=2)i[n]=0,i[n-1]=0;0===n&&(i[0]=0),a[t]=i}return a},numeric.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],n[--t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,r){void 0===r&&(r="");var n,i,o=[],a=/\[i\]$/,s="",l=!1;for(n=0;n<e.length;n++)a.test(e[n])?s=i=e[n].substring(0,e[n].length-3):i=e[n],"ret"===i&&(l=!0),o.push(i);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(e,t,r){void 0===r&&(r="");var n,i,o=[],a=/\[i\]$/,s="",l=!1;for(n=0;n<e.length;n++)a.test(e[n])?s=i=e[n].substring(0,e[n].length-3):i=e[n],"ret"===i&&(l=!0),o.push(i);return o[e.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function e(t,r,n,i,o){var a;if(i!==n.length-1)for(a=n[i]-1;a>=0;a--)e("object"==typeof t?t[a]:t,"object"==typeof r?r[a]:r,n,i+1,o);else o(t,r)},numeric._biforeach2=function e(t,r,n,i,o){if(i===n.length-1)return o(t,r);var a,s=n[i],l=Array(s);for(a=s-1;a>=0;--a)l[a]=e("object"==typeof t?t[a]:t,"object"==typeof r?r[a]:r,n,i+1,o);return l},numeric._foreach=function e(t,r,n,i){var o;if(n!==r.length-1)for(o=r[n]-1;o>=0;o--)e(t[o],r,n+1,i);else i(t)},numeric._foreach2=function e(t,r,n,i){if(n===r.length-1)return i(t);var o,a=r[n],s=Array(a);for(o=a-1;o>=0;o--)s[o]=e(t[o],r,n+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var r,n,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",r=function(e,r,n){return e+" = "+t+"("+r+","+n+")"},n=function(e,r){return e+" = "+t+"("+e+","+r+")"}):(r=function(e,r,n){return e+" = "+r+" "+t+" "+n},n=numeric.opseq.hasOwnProperty(e+"eq")?function(e,r){return e+" "+t+"= "+r}:function(e,r){return e+" = "+e+" "+t+" "+r}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+n("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],n("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],n("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,r,n,i,o,a,s,l=numeric.dim(e),u=Math.abs,c=l[0],h=l[1],d=numeric.clone(e),f=numeric.identity(c);for(a=0;a<h;++a){var p=-1,g=-1;for(o=a;o!==c;++o)(s=u(d[o][a]))>g&&(p=o,g=s);for(r=d[p],d[p]=d[a],d[a]=r,i=f[p],f[p]=f[a],f[a]=i,e=r[a],s=a;s!==h;++s)r[s]/=e;for(s=h-1;-1!==s;--s)i[s]/=e;for(o=c-1;-1!==o;--o)if(o!==a){for(t=d[o],n=f[o],e=t[a],s=a+1;s!==h;++s)t[s]-=r[s]*e;for(s=h-1;s>0;--s)n[s]-=i[s]*e,n[--s]-=i[s]*e;0===s&&(n[0]-=i[0]*e)}}return f},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var r,n,i,o,a,s,l,u,c=t[0],h=1,d=numeric.clone(e);for(n=0;n<c-1;n++){for(i=n,r=n+1;r<c;r++)Math.abs(d[r][n])>Math.abs(d[i][n])&&(i=r);for(i!==n&&(l=d[i],d[i]=d[n],d[n]=l,h*=-1),o=d[n],r=n+1;r<c;r++){for(s=(a=d[r])[n]/o[n],i=n+1;i<c-1;i+=2)u=i+1,a[i]-=o[i]*s,a[u]-=o[u]*s;i!==c&&(a[i]-=o[i]*s)}if(0===o[n])return 0;h*=o[n]}return h*d[n][n]},numeric.transpose=function(e){var t,r,n,i,o,a=e.length,s=e[0].length,l=Array(s);for(r=0;r<s;r++)l[r]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)(o=l[r])[t]=i[r],o[t-1]=n[r],(o=l[--r])[t]=i[r],o[t-1]=n[r];0===r&&((o=l[0])[t]=i[0],o[t-1]=n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)l[r][0]=n[r],l[--r][0]=n[r];0===r&&(l[0][0]=n[0])}return l},numeric.negtranspose=function(e){var t,r,n,i,o,a=e.length,s=e[0].length,l=Array(s);for(r=0;r<s;r++)l[r]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)(o=l[r])[t]=-i[r],o[t-1]=-n[r],(o=l[--r])[t]=-i[r],o[t-1]=-n[r];0===r&&((o=l[0])[t]=-i[0],o[t-1]=-n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)l[r][0]=-n[r],l[--r][0]=-n[r];0===r&&(l[0][0]=-n[0])}return l},numeric._random=function e(t,r){var n,i,o=t[r],a=Array(o);if(r===t.length-1){for(i=Math.random,n=o-1;n>=1;n-=2)a[n]=i(),a[n-1]=i();return 0===n&&(a[0]=i()),a}for(n=o-1;n>=0;n--)a[n]=e(t,r+1);return a},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,r){if(void 0===r&&(r=Math.max(Math.round(t-e)+1,1)),r<2)return 1===r?[e]:[];var n,i=Array(r);for(n=--r;n>=0;n--)i[n]=(n*t+(r-n)*e)/r;return i},numeric.getBlock=function(e,t,r){var n=numeric.dim(e);return function e(i,o){var a,s=t[o],l=r[o]-s,u=Array(l);if(o===n.length-1){for(a=l;a>=0;a--)u[a]=i[a+s];return u}for(a=l;a>=0;a--)u[a]=e(i[a+s],o+1);return u}(e,0)},numeric.setBlock=function(e,t,r,n){var i=numeric.dim(e);return function e(n,o,a){var s,l=t[a],u=r[a]-l;if(a===i.length-1)for(s=u;s>=0;s--)n[s+l]=o[s];for(s=u;s>=0;s--)e(n[s+l],o[s],a+1)}(e,n,0),e},numeric.getRange=function(e,t,r){var n,i,o,a,s=t.length,l=r.length,u=Array(s);for(n=s-1;-1!==n;--n)for(u[n]=Array(l),o=u[n],a=e[t[n]],i=l-1;-1!==i;--i)o[i]=a[r[i]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var r,n,i,o,a,s=t[0],l=t[1];for(r=0,n=0,i=0;i<s;++i)r+=e[i][0].length;for(o=0;o<l;++o)n+=e[0][o][0].length;var u=Array(r);for(i=0;i<r;++i)u[i]=Array(n);var c,h,d,f,p,g=0;for(i=0;i<s;++i){for(c=n,o=l-1;-1!==o;--o)for(c-=(a=e[i][o])[0].length,d=a.length-1;-1!==d;--d)for(p=a[d],h=u[g+d],f=p.length-1;-1!==f;--f)h[c+f]=p[f];g+=e[i][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var r=numeric.dim(e),n=numeric.dim(t);if(1!==r.length||1!==n.length)throw new Error("numeric: tensor product is only defined for vectors");var i,o,a,s,l=r[0],u=n[0],c=Array(l);for(o=l-1;o>=0;o--){for(i=Array(u),s=e[o],a=u-1;a>=3;--a)i[a]=s*t[a],i[--a]=s*t[a],i[--a]=s*t[a],i[--a]=s*t[a];for(;a>=0;)i[a]=s*t[a],--a;c[o]=i}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,r,n,i){var o;numeric.indexOf;if("string"!=typeof i)for(o in i="",numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||t.indexOf(o)>=0||r.indexOf(o)>=0||n.indexOf(o)>=0)&&o.length>1&&(i+="var "+o+" = numeric."+o+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+n+");\n  }\n  return new numeric.T("+r+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var r=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,r),t(numeric.neg(this.y),r))}return new T(t(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var t=numeric.div;return this.y?new numeric.T(t(this.x,e.x),t(this.y,e.x)):new numeric.T(t(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),e(r)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,r=this.y;return r?new numeric.T(e(t),numeric.negtranspose(r)):new numeric.T(e(t))},numeric.Tunop=function(e,t,r){return"string"!=typeof r&&(r=""),Function("var x = this;\n"+r+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var t,r,n,i,o,a,s,l,u,c,h,d,f,p,g,y,v,m,b=e.x.length,$=numeric.identity(b),_=numeric.rep([b,b],0),w=numeric.clone(e.x),E=numeric.clone(e.y);for(u=0;u<b;u++){for(d=(p=w[u][u])*p+(g=E[u][u])*g,h=u,c=u+1;c<b;c++)(f=(p=w[c][u])*p+(g=E[c][u])*g)>d&&(h=c,d=f);for(h!==u&&(m=w[u],w[u]=w[h],w[h]=m,m=E[u],E[u]=E[h],E[h]=m,m=$[u],$[u]=$[h],$[h]=m,m=_[u],_[u]=_[h],_[h]=m),t=w[u],r=E[u],o=$[u],a=_[u],p=t[u],g=r[u],c=u+1;c<b;c++)y=t[c],v=r[c],t[c]=(y*p+v*g)/d,r[c]=(v*p-y*g)/d;for(c=0;c<b;c++)y=o[c],v=a[c],o[c]=(y*p+v*g)/d,a[c]=(v*p-y*g)/d;for(c=u+1;c<b;c++){for(n=w[c],i=E[c],s=$[c],l=_[c],p=n[u],g=i[u],h=u+1;h<b;h++)y=t[h],v=r[h],n[h]-=y*p-v*g,i[h]-=v*p+y*g;for(h=0;h<b;h++)y=o[h],v=a[h],s[h]-=y*p-v*g,l[h]-=v*p+y*g}}for(u=b-1;u>0;u--)for(o=$[u],a=_[u],c=u-1;c>=0;c--)for(s=$[c],l=_[c],p=w[c][u],g=E[c][u],h=b-1;h>=0;h--)y=o[h],v=a[h],s[h]-=p*y-g*v,l[h]-=p*v+g*y;return new numeric.T($,_)},numeric.T.prototype.get=function(e){var t,r=this.x,n=this.y,i=0,o=e.length;if(n){for(;i<o;)r=r[t=e[i]],n=n[t],i++;return new numeric.T(r,n)}for(;i<o;)r=r[t=e[i]],i++;return new numeric.T(r)},numeric.T.prototype.set=function(e,t){var r,n=this.x,i=this.y,o=0,a=e.length,s=t.x,l=t.y;if(0===a)return l?this.y=l:i&&(this.y=void 0),this.x=n,this;if(l){for(i||(i=numeric.rep(numeric.dim(n),0),this.y=i);o<a-1;)n=n[r=e[o]],i=i[r],o++;return n[r=e[o]]=s,i[r]=l,this}if(i){for(;o<a-1;)n=n[r=e[o]],i=i[r],o++;return n[r=e[o]]=s,i[r]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;o<a-1;)n=n[r=e[o]],o++;return n[r=e[o]]=s,this},numeric.T.prototype.getRows=function(e,t){var r,n,i=t-e+1,o=Array(i),a=this.x,s=this.y;for(r=e;r<=t;r++)o[r-e]=a[r];if(s){for(n=Array(i),r=e;r<=t;r++)n[r-e]=s[r];return new numeric.T(o,n)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,t,r){var n,i=this.x,o=this.y,a=r.x,s=r.y;for(n=e;n<=t;n++)i[n]=a[n-e];if(s)for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o),n=e;n<=t;n++)o[n]=s[n-e];else if(o)for(n=e;n<=t;n++)o[n]=numeric.rep([a[n-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,r=this.y;return r?new numeric.T(t[e],r[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var r=this.x,n=this.y,i=t.x,o=t.y;return r[e]=i,o?(n||(n=numeric.rep(numeric.dim(r),0),this.y=n),n[e]=o):n&&(n=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var r=this.x,n=this.y,i=numeric.getBlock;return n?new numeric.T(i(r,e,t),i(n,e,t)):new numeric.T(i(r,e,t))},numeric.T.prototype.setBlock=function(e,t,r){r instanceof numeric.T||(r=new numeric.T(r));var n=this.x,i=this.y,o=numeric.setBlock,a=r.x,s=r.y;if(s)return i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),o(n,e,t,a),o(i,e,t,s),this;o(n,e,t,a),i&&o(i,e,t,numeric.rep(numeric.dim(a),0))},numeric.T.rep=function(e,t){var r=numeric.T;t instanceof r||(t=new r(t));var n=t.x,i=t.y,o=numeric.rep;return i?new r(o(e,n),o(e,i)):new r(o(e,n))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,r=e.y,n=numeric.diag;return r?new numeric.T(n(t),n(r)):new numeric.T(n(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,r=this.y;return r?new e.T(e.getDiag(t),e.getDiag(r)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),r=(e[0]>=0?1:-1)*numeric.norm2(e);t[0]+=r;var n=numeric.norm2(t);if(0===n)throw new Error("eig: internal error");return numeric.div(t,n)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var r,n,i,o,a,s,l,u,c,h,d=t[0],f=numeric.clone(e),p=numeric.identity(d);for(n=0;n<d-2;n++){for(o=Array(d-n-1),r=n+1;r<d;r++)o[r-n-1]=f[r][n];if(numeric.norm2(o)>0){for(a=numeric.house(o),s=numeric.getBlock(f,[n+1,n],[d-1,d-1]),l=numeric.tensor(a,numeric.dot(a,s)),r=n+1;r<d;r++)for(u=f[r],c=l[r-n-1],i=n;i<d;i++)u[i]-=2*c[i-n];for(s=numeric.getBlock(f,[0,n+1],[d-1,d-1]),l=numeric.tensor(numeric.dot(s,a),a),r=0;r<d;r++)for(u=f[r],c=l[r],i=n+1;i<d;i++)u[i]-=2*c[i-n-1];for(s=Array(d-n-1),r=n+1;r<d;r++)s[r-n-1]=p[r];for(l=numeric.tensor(a,numeric.dot(a,s)),r=n+1;r<d;r++)for(h=p[r],c=l[r-n-1],i=0;i<d;i++)h[i]-=2*c[i]}}return{H:f,Q:p}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(e,t){void 0===t&&(t=1e4),e=numeric.clone(e);numeric.clone(e);var r,n,i,o,a,s,l,u,c,h,d,f,p,g,y,v,m,b,$=numeric.dim(e)[0],_=numeric.identity($);if($<3)return{Q:_,B:[[0,$-1]]};var w=numeric.epsilon;for(b=0;b<t;b++){for(v=0;v<$-1;v++)if(Math.abs(e[v+1][v])<w*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var E=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),x=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[$-1,$-1]),t);for(f=Array(v+1),y=0;y<=v;y++)f[y]=_[y];for(p=numeric.dot(E.Q,f),y=0;y<=v;y++)_[y]=p[y];for(f=Array($-v-1),y=v+1;y<$;y++)f[y-v-1]=_[y];for(p=numeric.dot(x.Q,f),y=v+1;y<$;y++)_[y]=p[y-v-1];return{Q:_,B:E.B.concat(numeric.add(x.B,v+1))}}var T,S,O;if(i=e[$-2][$-2],o=e[$-2][$-1],a=e[$-1][$-2],u=i+(s=e[$-1][$-1]),l=i*s-o*a,c=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*l)T=.5*(u+Math.sqrt(u*u-4*l)),S=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,T+S)),numeric.diag(numeric.rep([3],T*S)));else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(r=[c[0][0],c[1][0],c[2][0]],n=numeric.house(r),f=[e[0],e[1],e[2]],p=numeric.tensor(n,numeric.dot(n,f)),y=0;y<3;y++)for(d=e[y],g=p[y],m=0;m<$;m++)d[m]-=2*g[m];for(f=numeric.getBlock(e,[0,0],[$-1,2]),p=numeric.tensor(numeric.dot(f,n),n),y=0;y<$;y++)for(d=e[y],g=p[y],m=0;m<3;m++)d[m]-=2*g[m];for(f=[_[0],_[1],_[2]],p=numeric.tensor(n,numeric.dot(n,f)),y=0;y<3;y++)for(h=_[y],g=p[y],m=0;m<$;m++)h[m]-=2*g[m];for(v=0;v<$-2;v++){for(m=v;m<=v+1;m++)if(Math.abs(e[m+1][m])<w*(Math.abs(e[m][m])+Math.abs(e[m+1][m+1]))){E=numeric.QRFrancis(numeric.getBlock(e,[0,0],[m,m]),t),x=numeric.QRFrancis(numeric.getBlock(e,[m+1,m+1],[$-1,$-1]),t);for(f=Array(m+1),y=0;y<=m;y++)f[y]=_[y];for(p=numeric.dot(E.Q,f),y=0;y<=m;y++)_[y]=p[y];for(f=Array($-m-1),y=m+1;y<$;y++)f[y-m-1]=_[y];for(p=numeric.dot(x.Q,f),y=m+1;y<$;y++)_[y]=p[y-m-1];return{Q:_,B:E.B.concat(numeric.add(x.B,m+1))}}for(O=Math.min($-1,v+3),r=Array(O-v),y=v+1;y<=O;y++)r[y-v-1]=e[y][v];for(n=numeric.house(r),f=numeric.getBlock(e,[v+1,v],[O,$-1]),p=numeric.tensor(n,numeric.dot(n,f)),y=v+1;y<=O;y++)for(d=e[y],g=p[y-v-1],m=v;m<$;m++)d[m]-=2*g[m-v];for(f=numeric.getBlock(e,[0,v+1],[$-1,O]),p=numeric.tensor(numeric.dot(f,n),n),y=0;y<$;y++)for(d=e[y],g=p[y],m=v+1;m<=O;m++)d[m]-=2*g[m-v-1];for(f=Array(O-v),y=v+1;y<=O;y++)f[y-v-1]=_[y];for(p=numeric.tensor(n,numeric.dot(n,f)),y=v+1;y<=O;y++)for(h=_[y],g=p[y-v-1],m=0;m<$;m++)h[m]-=2*g[m]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var r,n,i,o,a,s,l,u,c,h,d,f,p,g,y,v,m=numeric.toUpperHessenberg(e),b=numeric.QRFrancis(m.H,t),$=numeric.T,_=e.length,w=b.B,E=numeric.dot(b.Q,numeric.dot(m.H,numeric.transpose(b.Q))),x=new $(numeric.dot(b.Q,m.Q)),T=w.length,S=Math.sqrt;for(n=0;n<T;n++)if((r=w[n][0])===w[n][1]);else{if(o=r+1,a=E[r][r],s=E[r][o],l=E[o][r],u=E[o][o],0===s&&0===l)continue;(h=(c=-a-u)*c-4*(a*u-s*l))>=0?((y=(a-(d=c<0?-.5*(c-S(h)):-.5*(c+S(h))))*(a-d)+s*s)>(v=l*l+(u-d)*(u-d))?(p=(a-d)/(y=S(y)),g=s/y):(p=l/(v=S(v)),g=(u-d)/v),i=new $([[g,-p],[p,g]]),x.setRows(r,o,i.dot(x.getRows(r,o)))):(d=-.5*c,f=.5*S(-h),(y=(a-d)*(a-d)+s*s)>(v=l*l+(u-d)*(u-d))?(p=(a-d)/(y=S(y+f*f)),g=s/y,d=0,f/=y):(p=l/(v=S(v+f*f)),g=(u-d)/v,d=f/v,f=0),i=new $([[g,-p],[p,g]],[[d,f],[f,-d]]),x.setRows(r,o,i.dot(x.getRows(r,o))))}var O=x.dot(e).dot(x.transjugate()),C=(_=e.length,numeric.T.identity(_));for(o=0;o<_;o++)if(o>0)for(n=o-1;n>=0;n--){var k=O.get([n,n]),P=O.get([o,o]);numeric.neq(k.x,P.x)||numeric.neq(k.y,P.y)?(d=O.getRow(n).getBlock([n],[o-1]),f=C.getRow(o).getBlock([n],[o-1]),C.set([o,n],O.get([n,o]).neg().sub(d.dot(f)).div(k.sub(P)))):C.setRow(o,C.getRow(n))}for(o=0;o<_;o++)d=C.getRow(o),C.setRow(o,d.div(d.norm2()));return C=C.transpose(),C=x.transjugate().dot(C),{lambda:O.getDiag(),E:C}},numeric.ccsSparse=function(e){var t,r,n,i=e.length,o=[];for(r=i-1;-1!==r;--r)for(n in t=e[r]){for(n=parseInt(n);n>=o.length;)o[o.length]=0;0!==t[n]&&o[n]++}var a=o.length,s=Array(a+1);for(s[0]=0,r=0;r<a;++r)s[r+1]=s[r]+o[r];var l=Array(s[a]),u=Array(s[a]);for(r=i-1;-1!==r;--r)for(n in t=e[r])0!==t[n]&&(o[n]--,l[s[n]+o[n]]=r,u[s[n]+o[n]]=t[n]);return[s,l,u]},numeric.ccsFull=function(e){var t,r,n,i,o=e[0],a=e[1],s=e[2],l=numeric.ccsDim(e),u=l[0],c=l[1],h=numeric.rep([u,c],0);for(t=0;t<c;t++)for(n=o[t],i=o[t+1],r=n;r<i;++r)h[a[r]][t]=s[r];return h},numeric.ccsTSolve=function(e,t,r,n,i){var o,a,s,l,u,c,h,d=e[0],f=e[1],p=e[2],g=d.length-1,y=Math.max,v=0;function m(e){var t;if(0===r[e]){for(r[e]=1,t=d[e];t<d[e+1];++t)m(f[t]);i[v]=e,++v}}for(void 0===n&&(r=numeric.rep([g],0)),void 0===n&&(n=numeric.linspace(0,r.length-1)),void 0===i&&(i=[]),o=n.length-1;-1!==o;--o)m(n[o]);for(i.length=v,o=i.length-1;-1!==o;--o)r[i[o]]=0;for(o=n.length-1;-1!==o;--o)a=n[o],r[a]=t[a];for(o=i.length-1;-1!==o;--o){for(a=i[o],s=d[a],l=y(d[a+1],s),u=s;u!==l;++u)if(f[u]===a){r[a]/=p[u];break}for(h=r[a],u=s;u!==l;++u)(c=f[u])!==a&&(r[c]-=h*p[u])}return r},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,r,n,i,o){var a,s,l,u=0,c=i.length,h=this.k,d=this.k1,f=this.j;if(0===n[e])for(n[e]=1,f[0]=e,h[0]=s=t[e],d[0]=l=t[e+1];;)if(s>=l){if(i[c]=f[u],0===u)return;++c,s=h[--u],l=d[u]}else 0===n[a=o[r[s]]]?(n[a]=1,h[u]=s,f[++u]=a,s=t[a],d[u]=l=t[a+1]):++s},numeric.ccsLPSolve=function(e,t,r,n,i,o,a){var s,l,u,c,h,d,f,p,g,y=e[0],v=e[1],m=e[2],b=(y.length,t[0]),$=t[1],_=t[2];for(l=b[i],u=b[i+1],n.length=0,s=l;s<u;++s)a.dfs(o[$[s]],y,v,r,n,o);for(s=n.length-1;-1!==s;--s)r[n[s]]=0;for(s=l;s!==u;++s)r[c=o[$[s]]]=_[s];for(s=n.length-1;-1!==s;--s){for(h=y[c=n[s]],d=y[c+1],f=h;f<d;++f)if(o[v[f]]===c){r[c]/=m[f];break}for(g=r[c],f=h;f<d;++f)(p=o[v[f]])!==c&&(r[p]-=g*m[f])}return r},numeric.ccsLUP1=function(e,t){var r,n,i,o,a,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],h=[numeric.rep([u+1],0),[],[]],d=c[0],f=c[1],p=c[2],g=h[0],y=h[1],v=h[2],m=numeric.rep([u],0),b=numeric.rep([u],0),$=numeric.ccsLPSolve,_=Math.abs,w=numeric.linspace(0,u-1),E=numeric.linspace(0,u-1),x=new numeric.ccsDFS(u);for(void 0===t&&(t=1),r=0;r<u;++r){for($(c,e,m,b,r,E,x),o=-1,a=-1,n=b.length-1;-1!==n;--n)(i=b[n])<=r||(s=_(m[i]))>o&&(a=i,o=s);for(_(m[r])<t*o&&(n=w[r],o=w[a],w[r]=o,E[o]=r,w[a]=n,E[n]=a,o=m[r],m[r]=m[a],m[a]=o),o=d[r],a=g[r],l=m[r],f[o]=w[r],p[o]=1,++o,n=b.length-1;-1!==n;--n)s=m[i=b[n]],b[n]=0,m[i]=0,i<=r?(y[a]=i,v[a]=s,++a):(f[o]=w[i],p[o]=s/l,++o);d[r+1]=o,g[r+1]=a}for(n=f.length-1;-1!==n;--n)f[n]=E[f[n]];return{L:c,U:h,P:w,Pinv:E}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,r,n,i,o,a){var s,l,u,c=0,h=i.length,d=this.k,f=this.k1,p=this.j;if(0===n[e])for(n[e]=1,p[0]=e,d[0]=l=t[o[e]],f[0]=u=t[o[e]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=u){if(i[h]=o[p[c]],0===c)return;++h,l=d[--c],u=f[c]}else 0===n[s=r[l]]?(n[s]=1,d[c]=l,p[++c]=s,l=t[s=o[s]],f[c]=u=t[s+1]):++l}},numeric.ccsLPSolve0=function(e,t,r,n,i,o,a,s){var l,u,c,h,d,f,p,g,y,v=e[0],m=e[1],b=e[2],$=(v.length,t[0]),_=t[1],w=t[2];for(u=$[i],c=$[i+1],n.length=0,l=u;l<c;++l)s.dfs(_[l],v,m,r,n,o,a);for(l=n.length-1;-1!==l;--l)r[a[h=n[l]]]=0;for(l=u;l!==c;++l)r[h=_[l]]=w[l];for(l=n.length-1;-1!==l;--l){for(g=a[h=n[l]],d=v[h],f=v[h+1],p=d;p<f;++p)if(m[p]===g){r[g]/=b[p];break}for(y=r[g],p=d;p<f;++p)r[m[p]]-=y*b[p];r[g]=y}},numeric.ccsLUP0=function(e,t){var r,n,i,o,a,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],h=[numeric.rep([u+1],0),[],[]],d=c[0],f=c[1],p=c[2],g=h[0],y=h[1],v=h[2],m=numeric.rep([u],0),b=numeric.rep([u],0),$=numeric.ccsLPSolve0,_=Math.abs,w=numeric.linspace(0,u-1),E=numeric.linspace(0,u-1),x=new numeric.ccsDFS0(u);for(void 0===t&&(t=1),r=0;r<u;++r){for($(c,e,m,b,r,E,w,x),o=-1,a=-1,n=b.length-1;-1!==n;--n)(i=b[n])<=r||(s=_(m[w[i]]))>o&&(a=i,o=s);for(_(m[w[r]])<t*o&&(n=w[r],o=w[a],w[r]=o,E[o]=r,w[a]=n,E[n]=a),o=d[r],a=g[r],l=m[w[r]],f[o]=w[r],p[o]=1,++o,n=b.length-1;-1!==n;--n)s=m[w[i=b[n]]],b[n]=0,m[w[i]]=0,i<=r?(y[a]=i,v[a]=s,++a):(f[o]=w[i],p[o]=s/l,++o);d[r+1]=o,g[r+1]=a}for(n=f.length-1;-1!==n;--n)f[n]=E[f[n]];return{L:c,U:h,P:w,Pinv:E}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,r){var n=numeric.ccsDim(e),i=n[0],o=n[1];void 0===t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),void 0===r?r=numeric.linspace(0,o-1):"number"==typeof r&&(r=[r]);var a,s,l,u,c=t.length,h=r.length,d=numeric.rep([o],0),f=[],p=[],g=[d,f,p],y=e[0],v=e[1],m=e[2],b=numeric.rep([i],0),$=0,_=numeric.rep([i],0);for(s=0;s<h;++s){var w=y[u=r[s]],E=y[u+1];for(a=w;a<E;++a)_[l=v[a]]=1,b[l]=m[a];for(a=0;a<c;++a)_[t[a]]&&(f[$]=a,p[$]=b[t[a]],++$);for(a=w;a<E;++a)_[l=v[a]]=0;d[s+1]=$}return g},numeric.ccsDot=function(e,t){var r,n,i,o,a,s,l,u,c,h,d,f=e[0],p=e[1],g=e[2],y=t[0],v=t[1],m=t[2],b=numeric.ccsDim(e),$=numeric.ccsDim(t),_=b[0],w=(b[1],$[1]),E=numeric.rep([_],0),x=numeric.rep([_],0),T=Array(_),S=numeric.rep([w],0),O=[],C=[],k=[S,O,C];for(i=0;i!==w;++i){for(o=y[i],a=y[i+1],c=0,n=o;n<a;++n)for(h=v[n],d=m[n],s=f[h],l=f[h+1],r=s;r<l;++r)0===x[u=p[r]]&&(T[c]=u,x[u]=1,c+=1),E[u]=E[u]+g[r]*d;for(a=(o=S[i])+c,S[i+1]=a,n=c-1;-1!==n;--n)d=o+n,r=T[n],O[d]=r,C[d]=E[r],x[r]=0,E[r]=0;S[i+1]=S[i]+c}return k},numeric.ccsLUPSolve=function(e,t){var r=e.L,n=e.U,i=(e.P,t[0]),o=!1;"object"!=typeof i&&(i=(t=[[0,t.length],numeric.linspace(0,t.length-1),t])[0],o=!0);var a,s,l,u,c,h,d=t[1],f=t[2],p=r[0].length-1,g=i.length-1,y=numeric.rep([p],0),v=Array(p),m=numeric.rep([p],0),b=Array(p),$=numeric.rep([g+1],0),_=[],w=[],E=numeric.ccsTSolve,x=0;for(a=0;a<g;++a){for(c=0,l=i[a],u=i[a+1],s=l;s<u;++s)h=e.Pinv[d[s]],b[c]=h,m[h]=f[s],++c;for(b.length=c,E(r,m,y,b,v),s=b.length-1;-1!==s;--s)m[b[s]]=0;if(E(n,y,m,v,b),o)return m;for(s=v.length-1;-1!==s;--s)y[v[s]]=0;for(s=b.length-1;-1!==s;--s)h=b[s],_[x]=h,w[x]=m[h],m[h]=0,++x;$[a+1]=x}return[$,_,w]},numeric.ccsbinop=function(e,t){return void 0===t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,r=e[0],n=e[1],i=e[2],o=numeric.sup(n)+1,a=r.length,s=numeric.rep([o],0),l=Array(a),u=Array(a),c=numeric.rep([o],0);for(t=0;t<a;++t)c[n[t]]++;for(t=0;t<o;++t)s[t+1]=s[t]+c[t];var h,d,f=s.slice(0);for(t=0;t<a;++t)l[h=f[d=n[t]]]=r[t],u[h]=i[t],f[d]=f[d]+1;return[s,l,u]},numeric.ccsGather=function(e){var t,r,n,i,o,a=e[0],s=e[1],l=e[2],u=a.length-1,c=s.length,h=Array(c),d=Array(c),f=Array(c);for(o=0,t=0;t<u;++t)for(n=a[t],i=a[t+1],r=n;r!==i;++r)d[o]=t,h[o]=s[r],f[o]=l[r],++o;return[h,d,f]},numeric.sdim=function e(t,r,n){if(void 0===r&&(r=[]),"object"!=typeof t)return r;var i;for(i in void 0===n&&(n=0),n in r||(r[n]=0),t.length>r[n]&&(r[n]=t.length),t)t.hasOwnProperty(i)&&e(t[i],r,n+1);return r},numeric.sclone=function e(t,r,n){void 0===r&&(r=0),void 0===n&&(n=numeric.sdim(t).length);var i,o=Array(t.length);if(r===n-1){for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);return o}for(i in t)t.hasOwnProperty(i)&&(o[i]=e(t[i],r+1,n));return o},numeric.sdiag=function(e){var t,r,n=e.length,i=Array(n);for(t=n-1;t>=1;t-=2)r=t-1,i[t]=[],i[t][t]=e[t],i[r]=[],i[r][r]=e[r];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,r,n,i=[];e.length;for(t in e)if(e.hasOwnProperty(t))for(r in n=e[t])n.hasOwnProperty(r)&&("object"!=typeof i[r]&&(i[r]=[]),i[r][t]=n[r]);return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var r,n,i,o,a,s,l,u=e.length,c=(t.length,numeric.stranspose(t)),h=c.length,d=Array(u);for(i=u-1;i>=0;i--){for(l=[],r=e[i],a=h-1;a>=0;a--){for(o in s=0,n=c[a],r)r.hasOwnProperty(o)&&o in n&&(s+=r[o]*n[o]);s&&(l[a]=s)}d[i]=l}return d},numeric.sdotMV=function(e,t){var r,n,i,o,a=e.length,s=Array(a);for(n=a-1;n>=0;n--){for(i in o=0,r=e[n])r.hasOwnProperty(i)&&t[i]&&(o+=r[i]*t[i]);o&&(s[n]=o)}return s},numeric.sdotVM=function(e,t){var r,n,i,o,a=[];for(r in e)if(e.hasOwnProperty(r))for(n in i=t[r],o=e[r],i)i.hasOwnProperty(n)&&(a[n]||(a[n]=0),a[n]+=o*i[n]);return a},numeric.sdotVV=function(e,t){var r,n=0;for(r in e)e[r]&&t[r]&&(n+=e[r]*t[r]);return n},numeric.sdot=function(e,t){var r=numeric.sdim(e).length,n=numeric.sdim(t).length;switch(1e3*r+n){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+r+" and "+n)}},numeric.sscatter=function(e){var t,r,n,i,o=e[0].length,a=e.length,s=[];for(r=o-1;r>=0;--r)if(e[a-1][r]){for(i=s,n=0;n<a-2;n++)i[t=e[n][r]]||(i[t]=[]),i=i[t];i[e[n][r]]=e[n+1][r]}return s},numeric.sgather=function e(t,r,n){var i,o,a;for(o in void 0===r&&(r=[]),void 0===n&&(n=[]),i=n.length,t)if(t.hasOwnProperty(o))if(n[i]=parseInt(o),"number"==typeof(a=t[o])){if(a){if(0===r.length)for(o=i+1;o>=0;--o)r[o]=[];for(o=i;o>=0;--o)r[o].push(n[o]);r[i+1].push(a)}}else e(a,r,n);return n.length>i&&n.pop(),r},numeric.cLU=function(e){var t,r,n,i,o,a,s=e[0],l=e[1],u=e[2],c=s.length,h=0;for(t=0;t<c;t++)s[t]>h&&(h=s[t]);h++;var d,f=Array(h),p=Array(h),g=numeric.rep([h],1/0),y=numeric.rep([h],-1/0);for(n=0;n<c;n++)t=s[n],(r=l[n])<g[t]&&(g[t]=r),r>y[t]&&(y[t]=r);for(t=0;t<h-1;t++)y[t]>y[t+1]&&(y[t+1]=y[t]);for(t=h-1;t>=1;t--)g[t]<g[t-1]&&(g[t-1]=g[t]);for(t=0;t<h;t++)p[t]=numeric.rep([y[t]-g[t]+1],0),f[t]=numeric.rep([t-g[t]],0),t-g[t]+1,y[t]-t+1;for(n=0;n<c;n++)p[t=s[n]][l[n]-g[t]]=u[n];for(t=0;t<h-1;t++)for(i=t-g[t],b=p[t],r=t+1;g[r]<=t&&r<h;r++)if(o=t-g[r],a=y[t]-t,d=($=p[r])[o]/b[i]){for(n=1;n<=a;n++)$[n+o]-=d*b[n+i];f[r][t-g[r]]=d}var v,m,b=[],$=[],_=[],w=[],E=[],x=[];for(c=0,v=0,t=0;t<h;t++){for(i=g[t],o=y[t],m=p[t],r=t;r<=o;r++)m[r-i]&&(b[c]=t,$[c]=r,_[c]=m[r-i],c++);for(m=f[t],r=i;r<t;r++)m[r-i]&&(w[v]=t,E[v]=r,x[v]=m[r-i],v++);w[v]=t,E[v]=t,x[v]=1,v++}return{U:[b,$,_],L:[w,E,x]}},numeric.cLUsolve=function(e,t){var r,n,i=e.L,o=e.U,a=numeric.clone(t),s=i[0],l=i[1],u=i[2],c=o[0],h=o[1],d=o[2],f=c.length,p=(s.length,a.length);for(n=0,r=0;r<p;r++){for(;l[n]<r;)a[r]-=u[n]*a[l[n]],n++;n++}for(n=f-1,r=p-1;r>=0;r--){for(;h[n]>r;)a[r]-=d[n]*a[h[n]],n--;a[r]/=d[n],n--}return a},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var r,n,i,o=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,r){return t>=e[0]/2||r<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,r=1;r<e[0]-1;r++)for(n=1;n<e[1]-1;n++)t(r,n)&&(o[r][n]=i,i++);return o},numeric.cdelsq=function(e){var t,r,n,i,o,a=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),l=s[0],u=s[1],c=[],h=[],d=[];for(t=1;t<l-1;t++)for(r=1;r<u-1;r++)if(!(e[t][r]<0)){for(n=0;n<4;n++)i=t+a[n][0],o=r+a[n][1],e[i][o]<0||(c.push(e[t][r]),h.push(e[i][o]),d.push(-1));c.push(e[t][r]),h.push(e[t][r]),d.push(4)}return[c,h,d]},numeric.cdotMV=function(e,t){var r,n,i,o=e[0],a=e[1],s=e[2],l=o.length;for(i=0,n=0;n<l;n++)o[n]>i&&(i=o[n]);for(i++,r=numeric.rep([i],0),n=0;n<l;n++)r[o[n]]+=s[n]*t[a[n]];return r},numeric.Spline=function(e,t,r,n,i){this.x=e,this.yl=t,this.yr=r,this.kl=n,this.kr=i},numeric.Spline.prototype._at=function(e,t){var r,n,i,o=this.x,a=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,h=numeric.sub,d=numeric.mul;r=h(d(l[t],o[t+1]-o[t]),h(s[t+1],a[t])),n=c(d(u[t+1],o[t]-o[t+1]),h(s[t+1],a[t]));var f=(i=(e-o[t])/(o[t+1]-o[t]))*(1-i);return c(c(c(d(1-i,a[t]),d(i,s[t+1])),d(r,f*(1-i))),d(n,f*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,r,n,i=this.x,o=i.length,a=Math.floor;for(t=0,r=o-1;r-t>1;)i[n=a((t+r)/2)]<=e?t=n:r=n;return this._at(e,t)}o=e.length;var s,l=Array(o);for(s=o-1;-1!==s;--s)l[s]=this.at(e[s]);return l},numeric.Spline.prototype.diff=function(){var e,t,r,n=this.x,i=this.yl,o=this.yr,a=this.kl,s=this.kr,l=i.length,u=a,c=s,h=Array(l),d=Array(l),f=numeric.add,p=numeric.mul,g=numeric.div,y=numeric.sub;for(e=l-1;-1!==e;--e)t=n[e+1]-n[e],r=y(o[e+1],i[e]),h[e]=g(f(p(r,6),p(a[e],-4*t),p(s[e+1],-2*t)),t*t),d[e+1]=g(f(p(r,-6),p(a[e],2*t),p(s[e+1],4*t)),t*t);return new numeric.Spline(n,u,c,h,d)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],r=this.x,n=this.yl,i=this.yr,o=this.kl,a=this.kr;"number"==typeof n[0]&&(n=[n],i=[i],o=[o],a=[a]);var s,l,u,c,h,d,f,p,g,y,v,m,b,$,_,w,E,x,T,S,O,C,k,P=n.length,A=r.length-1,I=(t=Array(P),Math.sqrt);for(s=0;s!==P;++s){for(c=n[s],h=i[s],d=o[s],f=a[s],p=[],l=0;l!==A;l++){for(l>0&&h[l]*c[l]<0&&p.push(r[l]),w=r[l+1]-r[l],r[l],v=c[l],m=h[l+1],g=d[l]/w,b=(y=f[l+1]/w)+3*v+2*g-3*m,$=3*(y+g+2*(v-m)),(_=e(g-y+3*(v-m))+12*y*v)<=0?E=(x=b/$)>r[l]&&x<r[l+1]?[r[l],x,r[l+1]]:[r[l],r[l+1]]:(x=(b-I(_))/$,T=(b+I(_))/$,E=[r[l]],x>r[l]&&x<r[l+1]&&E.push(x),T>r[l]&&T<r[l+1]&&E.push(T),E.push(r[l+1])),O=E[0],x=this._at(O,l),u=0;u<E.length-1;u++)if(C=E[u+1],T=this._at(C,l),0!==x)if(0===T||x*T>0)O=C,x=T;else{for(var D=0;!((k=(x*C-T*O)/(x-T))<=O||k>=C);)if((S=this._at(k,l))*T>0)C=k,T=S,-1===D&&(x*=.5),D=-1;else{if(!(S*x>0))break;O=k,x=S,1===D&&(T*=.5),D=1}p.push(k),O=E[u+1],x=this._at(O,l)}else p.push(O),O=C,x=T;0===T&&p.push(C)}t[s]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,r,n){var i,o=e.length,a=[],s=[],l=[],u=numeric.sub,c=numeric.mul,h=numeric.add;for(i=o-2;i>=0;i--)s[i]=e[i+1]-e[i],l[i]=u(t[i+1],t[i]);"string"!=typeof r&&"string"!=typeof n||(r=n="periodic");var d=[[],[],[]];switch(typeof r){case"undefined":a[0]=c(3/(s[0]*s[0]),l[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/s[0],1/s[0]);break;case"string":a[0]=h(c(3/(s[o-2]*s[o-2]),l[o-2]),c(3/(s[0]*s[0]),l[0])),d[0].push(0,0,0),d[1].push(o-2,0,1),d[2].push(1/s[o-2],2/s[o-2]+2/s[0],1/s[0]);break;default:a[0]=r,d[0].push(0),d[1].push(0),d[2].push(1)}for(i=1;i<o-1;i++)a[i]=h(c(3/(s[i-1]*s[i-1]),l[i-1]),c(3/(s[i]*s[i]),l[i])),d[0].push(i,i,i),d[1].push(i-1,i,i+1),d[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof n){case"undefined":a[o-1]=c(3/(s[o-2]*s[o-2]),l[o-2]),d[0].push(o-1,o-1),d[1].push(o-2,o-1),d[2].push(1/s[o-2],2/s[o-2]);break;case"string":d[1][d[1].length-1]=0;break;default:a[o-1]=n,d[0].push(o-1),d[1].push(o-1),d[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var f=Array(a.length);if("string"==typeof r)for(i=f.length-1;-1!==i;--i)f[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),a[i]),f[i][o-1]=f[i][0];else for(i=f.length-1;-1!==i;--i)f[i]=numeric.cLUsolve(numeric.cLU(d),a[i]);return f="number"==typeof t[0]?f[0]:numeric.transpose(f),new numeric.Spline(e,t,t,f,f)},numeric.fftpow2=function e(t,r){var n=t.length;if(1!==n){var i,o,a=Math.cos,s=Math.sin,l=Array(n/2),u=Array(n/2),c=Array(n/2),h=Array(n/2);for(o=n/2,i=n-1;-1!==i;--i)c[--o]=t[i],h[o]=r[i],--i,l[o]=t[i],u[o]=r[i];e(l,u),e(c,h),o=n/2;var d,f,p,g=-6.283185307179586/n;for(i=n-1;-1!==i;--i)-1===--o&&(o=n/2-1),f=a(d=g*i),p=s(d),t[i]=l[o]+f*c[o]-p*h[o],r[i]=u[o]+f*h[o]+p*c[o]}},numeric._ifftpow2=function e(t,r){var n=t.length;if(1!==n){var i,o,a=Math.cos,s=Math.sin,l=Array(n/2),u=Array(n/2),c=Array(n/2),h=Array(n/2);for(o=n/2,i=n-1;-1!==i;--i)c[--o]=t[i],h[o]=r[i],--i,l[o]=t[i],u[o]=r[i];e(l,u),e(c,h),o=n/2;var d,f,p,g=6.283185307179586/n;for(i=n-1;-1!==i;--i)-1===--o&&(o=n/2-1),f=a(d=g*i),p=s(d),t[i]=l[o]+f*c[o]-p*h[o],r[i]=u[o]+f*h[o]+p*c[o]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,r,n){var i,o,a,s,l;for(numeric.fftpow2(e,t),numeric.fftpow2(r,n),i=e.length-1;-1!==i;--i)o=e[i],s=t[i],a=r[i],l=n[i],e[i]=o*a-s*l,t[i]=o*l+s*a;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,r=this.x,n=this.y,i=r.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),h=Math.cos,d=Math.sin,f=-3.141592653589793/i,p=numeric.rep([l],0),g=numeric.rep([l],0);for(e=0;e<i;e++)p[e]=r[e];if(void 0!==n)for(e=0;e<i;e++)g[e]=n[e];for(u[0]=1,e=1;e<=l/2;e++)t=f*e*e,u[e]=h(t),c[e]=d(t),u[l-e]=h(t),c[l-e]=d(t);var y=new numeric.T(p,g),v=new numeric.T(u,c);return y=y.mul(v),numeric.convpow2(y.x,y.y,numeric.clone(v.x),numeric.neg(v.y)),(y=y.mul(v)).x.length=i,y.y.length=i,y},numeric.T.prototype.ifft=function(){var e,t,r=this.x,n=this.y,i=r.length,o=Math.log,a=o(2),s=Math.ceil(o(2*i-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),h=Math.cos,d=Math.sin,f=3.141592653589793/i,p=numeric.rep([l],0),g=numeric.rep([l],0);for(e=0;e<i;e++)p[e]=r[e];if(void 0!==n)for(e=0;e<i;e++)g[e]=n[e];for(u[0]=1,e=1;e<=l/2;e++)t=f*e*e,u[e]=h(t),c[e]=d(t),u[l-e]=h(t),c[l-e]=d(t);var y=new numeric.T(p,g),v=new numeric.T(u,c);return y=y.mul(v),numeric.convpow2(y.x,y.y,numeric.clone(v.x),numeric.neg(v.y)),(y=y.mul(v)).x.length=i,y.y.length=i,y.div(i)},numeric.gradient=function(e,t){var r=t.length,n=e(t);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var i,o,a,s,l,u,c,h,d,f=Math.max,p=numeric.clone(t),g=Array(r),y=(numeric.div,numeric.sub,f=Math.max,Math.abs),v=Math.min,m=0;for(i=0;i<r;i++)for(var b=f(1e-6*n,1e-8);;){if(++m>20)throw new Error("Numerical gradient fails");if(p[i]=t[i]+b,o=e(p),p[i]=t[i]-b,a=e(p),p[i]=t[i],isNaN(o)||isNaN(a))b/=16;else{if(g[i]=(o-a)/(2*b),s=t[i]-b,l=t[i],u=t[i]+b,c=(o-n)/b,h=(n-a)/b,d=f(y(g[i]),y(n),y(o),y(a),y(s),y(l),y(u),1e-8),!(v(f(y(c-g[i]),y(h-g[i]),y(c-h))/d,b/d)>.001))break;b/=16}}return g},numeric.uncmin=function(e,t,r,n,i,o,a){var s=numeric.gradient;void 0===a&&(a={}),void 0===r&&(r=1e-8),void 0===n&&(n=function(t){return s(e,t)}),void 0===i&&(i=1e3);var l,u,c=(t=numeric.clone(t)).length,h=e(t);if(isNaN(h))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,f=numeric.norm2;r=d(r,numeric.epsilon);var p,g,y,v,m,b,$,_,w,E,x=a.Hinv||numeric.identity(c),T=numeric.dot,S=(numeric.inv,numeric.sub),O=numeric.add,C=numeric.tensor,k=numeric.div,P=numeric.mul,A=numeric.all,I=numeric.isFinite,D=numeric.neg,N=0,M="";for(g=n(t);N<i;){if("function"==typeof o&&o(N,t,h,g,x)){M="Callback returned true";break}if(!A(I(g))){M="Gradient has Infinity or NaN";break}if(!A(I(p=D(T(x,g))))){M="Search direction has Infinity or NaN";break}if((E=f(p))<r){M="Newton step smaller than tol";break}for(w=1,u=T(g,p),m=t;N<i&&!(w*E<r)&&(m=O(t,v=P(p,w)),(l=e(m))-h>=.1*w*u||isNaN(l));)w*=.5,++N;if(w*E<r){M="Line search step size smaller than tol";break}if(N===i){M="maxit reached during line search";break}_=T(b=S(y=n(m),g),v),$=T(x,b),x=S(O(x,P((_+T(b,$))/(_*_),C(v,v))),k(O(C($,v),C(v,$)),_)),t=m,h=l,g=y,++N}return{solution:t,f:h,gradient:g,invHessian:x,iterations:N,message:M}},numeric.Dopri=function(e,t,r,n,i,o,a){this.x=e,this.y=t,this.f=r,this.ymid=n,this.iterations=i,this.events=a,this.message=o},numeric.Dopri.prototype._at=function(e,t){function r(e){return e*e}var n,i,o,a,s,l,u,c,h,d=this.x,f=this.y,p=this.f,g=this.ymid,y=(d.length,numeric.add),v=numeric.mul,m=numeric.sub;return n=d[t],i=d[t+1],a=f[t],s=f[t+1],o=n+.5*(i-n),l=g[t],u=m(p[t],v(a,1/(n-o)+2/(n-i))),c=m(p[t+1],v(s,1/(i-o)+2/(i-n))),y(y(y(y(v(a,(h=[r(e-i)*(e-o)/r(n-i)/(n-o),r(e-n)*r(e-i)/r(n-o)/r(i-o),r(e-n)*(e-o)/r(i-n)/(i-o),(e-n)*r(e-i)*(e-o)/r(n-i)/(n-o),(e-i)*r(e-n)*(e-o)/r(n-i)/(i-o)])[0]),v(l,h[1])),v(s,h[2])),v(u,h[3])),v(c,h[4]))},numeric.Dopri.prototype.at=function(e){var t,r,n,i=Math.floor;if("number"!=typeof e){var o=e.length,a=Array(o);for(t=o-1;-1!==t;--t)a[t]=this.at(e[t]);return a}var s=this.x;for(t=0,r=s.length-1;r-t>1;)s[n=i(.5*(t+r))]<=e?t=n:r=n;return this._at(e,t)},numeric.dopri=function(e,t,r,n,i,o,a){void 0===i&&(i=1e-6),void 0===o&&(o=1e3);var s,l,u,c,h,d,f,p,g,y,v,m,b,$=[e],_=[r],w=[n(e,r)],E=[],x=[3/40,9/40],T=[44/45,-56/15,32/9],S=[19372/6561,-25360/2187,64448/6561,-212/729],O=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],C=[35/384,0,500/1113,125/192,-2187/6784,11/84],k=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],P=[.2,.3,.8,8/9,1,1],A=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],I=0,D=(t-e)/10,N=0,M=numeric.add,R=numeric.mul,L=Math.min,j=Math.abs,F=numeric.norminf,B=Math.pow,z=numeric.any,G=numeric.lt,U=numeric.and,H=(numeric.sub,new numeric.Dopri($,_,w,E,-1,""));for("function"==typeof a&&(v=a(e,r));e<t&&N<o;)if(++N,e+D>t&&(D=t-e),s=n(e+P[0]*D,M(r,R(.2*D,w[I]))),l=n(e+P[1]*D,M(M(r,R(x[0]*D,w[I])),R(x[1]*D,s))),u=n(e+P[2]*D,M(M(M(r,R(T[0]*D,w[I])),R(T[1]*D,s)),R(T[2]*D,l))),c=n(e+P[3]*D,M(M(M(M(r,R(S[0]*D,w[I])),R(S[1]*D,s)),R(S[2]*D,l)),R(S[3]*D,u))),h=n(e+P[4]*D,M(M(M(M(M(r,R(O[0]*D,w[I])),R(O[1]*D,s)),R(O[2]*D,l)),R(O[3]*D,u)),R(O[4]*D,c))),d=n(e+D,g=M(M(M(M(M(r,R(w[I],D*C[0])),R(l,D*C[2])),R(u,D*C[3])),R(c,D*C[4])),R(h,D*C[5]))),(y="number"==typeof(f=M(M(M(M(M(R(w[I],D*A[0]),R(l,D*A[2])),R(u,D*A[3])),R(c,D*A[4])),R(h,D*A[5])),R(d,D*A[6])))?j(f):F(f))>i){if(e+(D=.2*D*B(i/y,.25))===e){H.msg="Step size became too small";break}}else{if(E[I]=M(M(M(M(M(M(r,R(w[I],D*k[0])),R(l,D*k[2])),R(u,D*k[3])),R(c,D*k[4])),R(h,D*k[5])),R(d,D*k[6])),$[++I]=e+D,_[I]=g,w[I]=d,"function"==typeof a){var V,Y,W=e,q=e+.5*D;if(m=a(q,E[I-1]),z(b=U(G(v,0),G(0,m)))||(W=q,v=m,m=a(q=e+D,g),b=U(G(v,0),G(0,m))),z(b)){for(var X,K,Z=0,Q=1,J=1;;){if("number"==typeof v)Y=(J*m*W-Q*v*q)/(J*m-Q*v);else for(Y=q,p=v.length-1;-1!==p;--p)v[p]<0&&m[p]>0&&(Y=L(Y,(J*m[p]*W-Q*v[p]*q)/(J*m[p]-Q*v[p])));if(Y<=W||Y>=q)break;K=a(Y,V=H._at(Y,I-1)),z(X=U(G(v,0),G(0,K)))?(q=Y,m=K,b=X,J=1,-1===Z?Q*=.5:Q=1,Z=-1):(W=Y,v=K,Q=1,1===Z?J*=.5:J=1,Z=1)}return g=H._at(.5*(e+Y),I-1),H.f[I]=n(Y,V),H.x[I]=Y,H.y[I]=V,H.ymid[I-1]=g,H.events=b,H.iterations=N,H}}e+=D,r=g,v=m,D=L(.8*D*B(i/y,.25),4*D)}return H.iterations=N,H},numeric.LU=function(e,t){t=t||!1;var r,n,i,o,a,s,l,u,c,h=Math.abs,d=e.length,f=d-1,p=new Array(d);for(t||(e=numeric.clone(e)),i=0;i<d;++i){for(l=i,c=h((s=e[i])[i]),n=i+1;n<d;++n)c<(o=h(e[n][i]))&&(c=o,l=n);for(p[i]=l,l!=i&&(e[i]=e[l],e[l]=s,s=e[i]),a=s[i],r=i+1;r<d;++r)e[r][i]/=a;for(r=i+1;r<d;++r){for(u=e[r],n=i+1;n<f;++n)u[n]-=u[i]*s[n],u[++n]-=u[i]*s[n];n===f&&(u[n]-=u[i]*s[n])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var r,n,i,o,a,s=e.LU,l=s.length,u=numeric.clone(t),c=e.P;for(r=l-1;-1!==r;--r)u[r]=t[r];for(r=0;r<l;++r)for(i=c[r],c[r]!==r&&(a=u[r],u[r]=u[i],u[i]=a),o=s[r],n=0;n<r;++n)u[r]-=u[n]*o[n];for(r=l-1;r>=0;--r){for(o=s[r],n=r+1;n<l;++n)u[r]-=u[n]*o[n];u[r]/=o[r]}return u},numeric.solve=function(e,t,r){return numeric.LUsolve(numeric.LU(e,r),t)},numeric.echelonize=function(e){var t,r,n,i,o,a,s,l,u=numeric.dim(e),c=u[0],h=u[1],d=numeric.identity(c),f=Array(c),p=Math.abs,g=numeric.diveq;for(e=numeric.clone(e),t=0;t<c;++t){for(n=0,o=e[t],a=d[t],r=1;r<h;++r)p(o[n])<p(o[r])&&(n=r);for(f[t]=n,g(a,o[n]),g(o,o[n]),r=0;r<c;++r)if(r!==t){for(l=(s=e[r])[n],i=h-1;-1!==i;--i)s[i]-=o[i]*l;for(s=d[r],i=c-1;-1!==i;--i)s[i]-=a[i]*l}}return{I:d,A:e,P:f}},numeric.__solveLP=function(e,t,r,n,i,o,a){var s,l,u,c,h=numeric.sum,d=(numeric.log,numeric.mul),f=numeric.sub,p=numeric.dot,g=numeric.div,y=numeric.add,v=e.length,m=r.length,b=!1,$=1,_=(numeric.transpose(t),numeric.svd,numeric.transpose),w=(numeric.leq,Math.sqrt),E=Math.abs,x=(numeric.muleq,numeric.norminf,numeric.any,Math.min),T=numeric.all,S=numeric.gt,O=Array(v),C=Array(m),k=(numeric.rep([m],1),numeric.solve),P=f(r,p(t,o)),A=p(e,e);for(u=0;u<i;++u){var I,D;for(I=m-1;-1!==I;--I)C[I]=g(t[I],P[I]);var N=_(C);for(I=v-1;-1!==I;--I)O[I]=h(N[I]);$=.25*E(A/p(e,O));var M=100*w(A/p(O,O));for((!isFinite($)||$>M)&&($=M),c=y(e,d($,O)),l=p(N,C),I=v-1;-1!==I;--I)l[I][I]+=1;D=k(l,g(c,$),!0);var R=g(P,p(t,D)),L=1;for(I=m-1;-1!==I;--I)R[I]<0&&(L=x(L,-.999*R[I]));if(s=f(o,d(D,L)),!T(S(P=f(r,p(t,s)),0)))return{solution:o,message:"",iterations:u};if(o=s,$<n)return{solution:s,message:"",iterations:u};if(a){var j=p(e,c),F=p(t,c);for(b=!0,I=m-1;-1!==I;--I)if(j*F[I]<0){b=!1;break}}else b=!(o[v-1]>=0);if(b)return{solution:s,message:"Unbounded",iterations:u}}return{solution:o,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,t,r,n,i){var o=e.length,a=r.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),l=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([o],0).concat([1])),c=numeric.rep([a,1],-1),h=numeric.blockMatrix([[t,c]]),d=r,f=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(r)))+1),p=numeric.__solveLP(u,h,d,n,i,f,!1),g=numeric.clone(p.solution);if(g.length=o,numeric.inf(s(r,l(t,g)))<0)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var y=numeric.__solveLP(e,t,r,n,i-p.iterations,g,!0);return y.iterations+=p.iterations,y},numeric.solveLP=function(e,t,r,n,i,o,a){if(void 0===a&&(a=1e3),void 0===o&&(o=numeric.epsilon),void 0===n)return numeric._solveLP(e,t,r,o,a);var s,l=n.length,u=n[0].length,c=t.length,h=numeric.echelonize(n),d=numeric.rep([u],0),f=h.P,p=[];for(s=f.length-1;-1!==s;--s)d[f[s]]=1;for(s=u-1;-1!==s;--s)0===d[s]&&p.push(s);var g=numeric.getRange,y=numeric.linspace(0,l-1),v=numeric.linspace(0,c-1),m=g(n,y,p),b=g(t,v,f),$=g(t,v,p),_=numeric.dot,w=numeric.sub,E=_(b,h.I),x=w($,_(E,m)),T=w(r,_(E,i)),S=Array(f.length),O=Array(p.length);for(s=f.length-1;-1!==s;--s)S[s]=e[f[s]];for(s=p.length-1;-1!==s;--s)O[s]=e[p[s]];var C=w(O,_(S,_(h.I,m))),k=numeric._solveLP(C,x,T,o,a),P=k.solution;if(P!=P)return k;var A=_(h.I,w(i,_(m,P))),I=Array(e.length);for(s=f.length-1;-1!==s;--s)I[f[s]]=A[s];for(s=p.length-1;-1!==s;--s)I[p[s]]=P[s];return{solution:I,message:k.message,iterations:k.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var t,r,n,i,o=0,a=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=e.length,l=0,u={},c=[],h=0,d={},f=0,p=[],g=[],y=[];function v(r){throw new Error("MPStoLP: "+r+"\nLine "+t+": "+e[t]+"\nCurrent state: "+a[o]+"\n")}for(t=0;t<s;++t){var m=(n=e[t]).match(/\S*/g),b=[];for(r=0;r<m.length;++r)""!==m[r]&&b.push(m[r]);if(0!==b.length){for(r=0;r<a.length&&n.substr(0,a[r].length)!==a[r];++r);if(r<a.length){if(o=r,1===r&&(i=b[1]),6===r)return{name:i,c:p,A:numeric.transpose(g),b:y,rows:u,vars:d}}else switch(o){case 0:case 1:v("Unexpected line");case 2:switch(b[0]){case"N":0===l?l=b[1]:v("Two or more N rows");break;case"L":u[b[1]]=h,c[h]=1,y[h]=0,++h;break;case"G":u[b[1]]=h,c[h]=-1,y[h]=0,++h;break;case"E":u[b[1]]=h,c[h]=0,y[h]=0,++h;break;default:v("Parse error "+numeric.prettyPrint(b))}break;case 3:d.hasOwnProperty(b[0])||(d[b[0]]=f,p[f]=0,g[f]=numeric.rep([h],0),++f);var $=d[b[0]];for(r=1;r<b.length;r+=2)if(b[r]!==l){var _=u[b[r]];g[$][_]=(c[_]<0?-1:1)*parseFloat(b[r+1])}else p[$]=parseFloat(b[r+1]);break;case 4:for(r=1;r<b.length;r+=2)y[u[b[r]]]=(c[u[b[r]]]<0?-1:1)*parseFloat(b[r+1]);break;case 5:break;case 6:v("Internal error")}}}v("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,r,n,i,o,a){function s(e){var t,r,n=this,i=e.length,o=0,a=n.i=n.j=n.m=0;for(n.S=[],n.c=[],i||(e=[i++]);o<256;)n.S[o]=o++;for(o=0;o<256;o++)a=c(a+(t=n.S[o])+e[o%i]),r=n.S[a],n.S[o]=r,n.S[a]=t;n.g=function(e){var t=n.S,r=c(n.i+1),i=t[r],o=c(n.j+i),a=t[o];t[r]=a,t[o]=i;for(var s=t[c(i+a)];--e;)r=c(r+1),a=t[o=c(o+(i=t[r]))],t[r]=a,t[o]=i,s=256*s+t[c(i+a)];return n.i=r,n.j=o,s},n.g(256)}function l(e,t,r,n,i){if(r=[],i=typeof e,t&&"object"==i)for(n in e)if(n.indexOf("S")<5)try{r.push(l(e[n],t-1))}catch(e){}return r.length?r:e+("string"!=i?"\0":"")}function u(e,t,r,n){for(e+="",r=0,n=0;n<e.length;n++)t[c(n)]=c((r^=19*t[c(n)])+e.charCodeAt(n));for(n in e="",t)e+=String.fromCharCode(t[n]);return e}function c(e){return 255&e}t.seedrandom=function(r,n){var c,h=[];return r=u(l(n?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),h),u((c=new s(h)).S,e),t.random=function(){for(var e=c.g(6),t=a,r=0;e<i;)e=256*(e+r),t*=256,r=c.g(1);for(;e>=o;)e/=2,t/=2,r>>>=1;return(e+r)/t},r},a=t.pow(256,6),i=t.pow(2,i),o=2*i,u(t.random(),e)}([],numeric.seedrandom,0,0,52),function(e){function t(e){if("object"!=typeof e)return e;var r,n=[],i=e.length;for(r=0;r<i;r++)n[r+1]=t(e[r]);return n}function r(e){if("object"!=typeof e)return e;var t,n=[],i=e.length;for(t=1;t<i;t++)n[t-1]=r(e[t]);return n}function n(e,t,r,n,i,o,a,s,l,u,c,h,d,f,p,g){var y,v,m,b,$,_,w,E,x,T,S,O,C,k,P,A,I,D,N,M,R,L,j,F,B,z,G;C=Math.min(n,u),m=2*n+C*(C+5)/2+2*u+1,F=1e-60;do{B=1+.1*(F+=F),z=1+.2*F}while(B<=1||z<=1);for(y=1;y<=n;y+=1)p[y]=t[y];for(y=n+1;y<=m;y+=1)p[y]=0;for(y=1;y<=u;y+=1)h[y]=0;if($=[],0===g[1]){if(function(e,t,r,n){var i,o,a,s,l,u;for(o=1;o<=r;o+=1){if(n[1]=o,u=0,(a=o-1)<1){if((u=e[o][o]-u)<=0)break;e[o][o]=Math.sqrt(u)}else{for(s=1;s<=a;s+=1){for(l=e[s][o],i=1;i<s;i+=1)l-=e[i][o]*e[i][s];l/=e[s][s],e[s][o]=l,u+=l*l}if((u=e[o][o]-u)<=0)break;e[o][o]=Math.sqrt(u)}n[1]=0}}(e,0,n,$),0!==$[1])return void(g[1]=2);!function(e,t,r,n){var i,o,a,s;for(o=1;o<=r;o+=1){for(s=0,i=1;i<o;i+=1)s+=e[i][o]*n[i];n[o]=(n[o]-s)/e[o][o]}for(a=1;a<=r;a+=1)for(n[o=r+1-a]=n[o]/e[o][o],s=-n[o],i=1;i<o;i+=1)n[i]=n[i]+s*e[i][o]}(e,0,n,t),function(e,t,r){var n,i,o,a,s;for(o=1;o<=r;o+=1){for(e[o][o]=1/e[o][o],s=-e[o][o],n=1;n<o;n+=1)e[n][o]=s*e[n][o];if(r<(a=o+1))break;for(i=a;i<=r;i+=1)for(s=e[o][i],e[o][i]=0,n=1;n<=o;n+=1)e[n][i]=e[n][i]+s*e[n][o]}}(e,0,n)}else{for(v=1;v<=n;v+=1)for(i[v]=0,y=1;y<=v;y+=1)i[v]=i[v]+e[y][v]*t[y];for(v=1;v<=n;v+=1)for(t[v]=0,y=v;y<=n;y+=1)t[v]=t[v]+e[v][y]*i[y]}for(o[1]=0,v=1;v<=n;v+=1)for(i[v]=t[v],o[1]=o[1]+p[v]*i[v],p[v]=0,y=v+1;y<=n;y+=1)e[y][v]=0;for(o[1]=-o[1]/2,g[1]=0,k=(T=(x=(S=(E=(w=n)+n)+C)+C+1)+C*(C+1)/2)+u,y=1;y<=u;y+=1){for(A=0,v=1;v<=n;v+=1)A+=a[v][y]*a[v][y];p[k+y]=Math.sqrt(A)}function U(){for(f[1]=f[1]+1,m=T,y=1;y<=u;y+=1){for(m+=1,A=-s[y],v=1;v<=n;v+=1)A+=a[v][y]*i[v];if(Math.abs(A)<F&&(A=0),y>c)p[m]=A;else if(p[m]=-Math.abs(A),A>0){for(v=1;v<=n;v+=1)a[v][y]=-a[v][y];s[y]=-s[y]}}for(y=1;y<=d;y+=1)p[T+h[y]]=0;for(O=0,P=0,y=1;y<=u;y+=1)p[T+y]<P*p[k+y]&&(O=y,P=p[T+y]/p[k+y]);return 0===O?999:0}function H(){for(y=1;y<=n;y+=1){for(A=0,v=1;v<=n;v+=1)A+=e[v][y]*a[v][O];p[y]=A}for(b=w,y=1;y<=n;y+=1)p[b+y]=0;for(v=d+1;v<=n;v+=1)for(y=1;y<=n;y+=1)p[b+y]=p[b+y]+e[y][v]*p[v];for(L=!0,y=d;y>=1;y-=1){for(A=p[y],b=(m=x+y*(y+3)/2)-y,v=y+1;v<=d;v+=1)A-=p[m]*p[E+v],m+=v;if(A/=p[b],p[E+y]=A,h[y]<c)break;if(A<0)break;L=!1,_=y}if(!L)for(I=p[S+_]/p[E+_],y=1;y<=d&&!(h[y]<c)&&!(p[E+y]<0);y+=1)(P=p[S+y]/p[E+y])<I&&(I=P,_=y);for(A=0,y=w+1;y<=w+n;y+=1)A+=p[y]*p[y];if(Math.abs(A)<=F){if(L)return g[1]=1,999;for(y=1;y<=d;y+=1)p[S+y]=p[S+y]-I*p[E+y];return p[S+d+1]=p[S+d+1]+I,700}for(A=0,y=1;y<=n;y+=1)A+=p[w+y]*a[y][O];for(D=-p[T+O]/A,j=!0,L||I<D&&(D=I,j=!1),y=1;y<=n;y+=1)i[y]=i[y]+D*p[w+y],Math.abs(i[y])<F&&(i[y]=0);for(o[1]=o[1]+D*A*(D/2+p[S+d+1]),y=1;y<=d;y+=1)p[S+y]=p[S+y]-D*p[E+y];if(p[S+d+1]=p[S+d+1]+D,!j){for(A=-s[O],v=1;v<=n;v+=1)A+=i[v]*a[v][O];if(O>c)p[T+O]=A;else if(p[T+O]=-Math.abs(A),A>0){for(v=1;v<=n;v+=1)a[v][O]=-a[v][O];s[O]=-s[O]}return 700}for(h[d+=1]=O,m=x+(d-1)*d/2+1,y=1;y<=d-1;y+=1)p[m]=p[y],m+=1;if(d===n)p[m]=p[n];else{for(y=n;y>=d+1&&0!==p[y]&&(N=Math.max(Math.abs(p[y-1]),Math.abs(p[y])),M=Math.min(Math.abs(p[y-1]),Math.abs(p[y])),P=p[y-1]>=0?Math.abs(N*Math.sqrt(1+M*M/(N*N))):-Math.abs(N*Math.sqrt(1+M*M/(N*N))),N=p[y-1]/P,M=p[y]/P,1!==N);y-=1)if(0===N)for(p[y-1]=M*P,v=1;v<=n;v+=1)P=e[v][y-1],e[v][y-1]=e[v][y],e[v][y]=P;else for(p[y-1]=P,R=M/(1+N),v=1;v<=n;v+=1)P=N*e[v][y-1]+M*e[v][y],e[v][y]=R*(e[v][y-1]+P)-e[v][y],e[v][y-1]=P;p[m]=p[d]}return 0}function V(){if(0===p[b=(m=x+_*(_+1)/2+1)+_])return 798;if(N=Math.max(Math.abs(p[b-1]),Math.abs(p[b])),M=Math.min(Math.abs(p[b-1]),Math.abs(p[b])),P=p[b-1]>=0?Math.abs(N*Math.sqrt(1+M*M/(N*N))):-Math.abs(N*Math.sqrt(1+M*M/(N*N))),N=p[b-1]/P,M=p[b]/P,1===N)return 798;if(0===N){for(y=_+1;y<=d;y+=1)P=p[b-1],p[b-1]=p[b],p[b]=P,b+=y;for(y=1;y<=n;y+=1)P=e[y][_],e[y][_]=e[y][_+1],e[y][_+1]=P}else{for(R=M/(1+N),y=_+1;y<=d;y+=1)P=N*p[b-1]+M*p[b],p[b]=R*(p[b-1]+P)-p[b],p[b-1]=P,b+=y;for(y=1;y<=n;y+=1)P=N*e[y][_]+M*e[y][_+1],e[y][_+1]=R*(e[y][_]+P)-e[y][_+1],e[y][_]=P}return 0}function Y(){for(b=m-_,y=1;y<=_;y+=1)p[b]=p[m],m+=1,b+=1;return p[S+_]=p[S+_+1],h[_]=h[_+1],(_+=1)<d?797:0}function W(){return p[S+d]=p[S+d+1],p[S+d+1]=0,h[d]=0,d-=1,f[2]=f[2]+1,0}for(d=0,f[1]=0,f[2]=0,G=0;;){if(999===(G=U()))return;for(;0!==(G=H());){if(999===G)return;if(700===G)if(_===d)W();else{for(;V(),797===(G=Y()););W()}}}}e.solveQP=function(e,i,o,a,s,l){e=t(e),i=t(i),o=t(o);var u,c,h,d,f,p=[],g=[],y=[],v=[],m=[];if(s=s||0,l=l?t(l):[void 0,0],a=a?t(a):[],c=e.length-1,h=o[1].length-1,!a)for(u=1;u<=h;u+=1)a[u]=0;for(u=1;u<=h;u+=1)g[u]=0;for(0,d=Math.min(c,h),u=1;u<=c;u+=1)y[u]=0;for(p[1]=0,u=1;u<=2*c+d*(d+5)/2+2*h+1;u+=1)v[u]=0;for(u=1;u<=2;u+=1)m[u]=0;return n(e,i,0,c,y,p,o,a,0,h,s,g,0,m,v,l),f="",1===l[1]&&(f="constraints are inconsistent, no solution!"),2===l[1]&&(f="matrix D in quadratic function is not positive definite!"),{solution:r(y),value:r(p),unconstrained_solution:r(i),iterations:r(m),iact:r(g),message:f}}}(numeric),numeric.svd=function(e){var t,r=numeric.epsilon,n=1e-64/r,i=0,o=0,a=0,s=0,l=0,u=numeric.clone(e),c=u.length,h=u[0].length;if(c<h)throw"Need more rows than columns";var d=new Array(h),f=new Array(h);for(o=0;o<h;o++)d[o]=f[o]=0;var p=numeric.rep([h,h],0);function g(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var y=0,v=0,m=0,b=0,$=0,_=0,w=0;for(o=0;o<h;o++){for(d[o]=v,w=0,l=o+1,a=o;a<c;a++)w+=u[a][o]*u[a][o];if(w<=n)v=0;else for(y=u[o][o],v=Math.sqrt(w),y>=0&&(v=-v),m=y*v-w,u[o][o]=y-v,a=l;a<h;a++){for(w=0,s=o;s<c;s++)w+=u[s][o]*u[s][a];for(y=w/m,s=o;s<c;s++)u[s][a]+=y*u[s][o]}for(f[o]=v,w=0,a=l;a<h;a++)w+=u[o][a]*u[o][a];if(w<=n)v=0;else{for(y=u[o][o+1],v=Math.sqrt(w),y>=0&&(v=-v),m=y*v-w,u[o][o+1]=y-v,a=l;a<h;a++)d[a]=u[o][a]/m;for(a=l;a<c;a++){for(w=0,s=l;s<h;s++)w+=u[a][s]*u[o][s];for(s=l;s<h;s++)u[a][s]+=w*d[s]}}($=Math.abs(f[o])+Math.abs(d[o]))>b&&(b=$)}for(o=h-1;-1!=o;o+=-1){if(0!=v){for(m=v*u[o][o+1],a=l;a<h;a++)p[a][o]=u[o][a]/m;for(a=l;a<h;a++){for(w=0,s=l;s<h;s++)w+=u[o][s]*p[s][a];for(s=l;s<h;s++)p[s][a]+=w*p[s][o]}}for(a=l;a<h;a++)p[o][a]=0,p[a][o]=0;p[o][o]=1,v=d[o],l=o}for(o=h-1;-1!=o;o+=-1){for(l=o+1,v=f[o],a=l;a<h;a++)u[o][a]=0;if(0!=v){for(m=u[o][o]*v,a=l;a<h;a++){for(w=0,s=l;s<c;s++)w+=u[s][o]*u[s][a];for(y=w/m,s=o;s<c;s++)u[s][a]+=y*u[s][o]}for(a=o;a<c;a++)u[a][o]=u[a][o]/v}else for(a=o;a<c;a++)u[a][o]=0;u[o][o]+=1}for(r*=b,s=h-1;-1!=s;s+=-1)for(var E=0;E<50;E++){var x=!1;for(l=s;-1!=l;l+=-1){if(Math.abs(d[l])<=r){x=!0;break}if(Math.abs(f[l-1])<=r)break}if(!x){i=0,w=1;var T=l-1;for(o=l;o<s+1&&(y=w*d[o],d[o]=i*d[o],!(Math.abs(y)<=r));o++)for(m=g(y,v=f[o]),f[o]=m,i=v/m,w=-y/m,a=0;a<c;a++)$=u[a][T],_=u[a][o],u[a][T]=$*i+_*w,u[a][o]=-$*w+_*i}if(_=f[s],l==s){if(_<0)for(f[s]=-_,a=0;a<h;a++)p[a][s]=-p[a][s];break}if(E>=49)throw"Error: no convergence.";for(b=f[l],v=g(y=((($=f[s-1])-_)*($+_)+((v=d[s-1])-(m=d[s]))*(v+m))/(2*m*$),1),y=y<0?((b-_)*(b+_)+m*($/(y-v)-m))/b:((b-_)*(b+_)+m*($/(y+v)-m))/b,i=1,w=1,o=l+1;o<s+1;o++){for(v=d[o],$=f[o],m=w*v,v*=i,_=g(y,m),d[o-1]=_,y=b*(i=y/_)+v*(w=m/_),v=-b*w+v*i,m=$*w,$*=i,a=0;a<h;a++)b=p[a][o-1],_=p[a][o],p[a][o-1]=b*i+_*w,p[a][o]=-b*w+_*i;for(_=g(y,m),f[o-1]=_,y=(i=y/_)*v+(w=m/_)*$,b=-w*v+i*$,a=0;a<c;a++)$=u[a][o-1],_=u[a][o],u[a][o-1]=$*i+_*w,u[a][o]=-$*w+_*i}d[l]=0,d[s]=y,f[s]=b}for(o=0;o<f.length;o++)f[o]<r&&(f[o]=0);for(o=0;o<h;o++)for(a=o-1;a>=0;a--)if(f[a]<f[o]){for(i=f[a],f[a]=f[o],f[o]=i,s=0;s<u.length;s++)t=u[s][o],u[s][o]=u[s][a],u[s][a]=t;for(s=0;s<p.length;s++)t=p[s][o],p[s][o]=p[s][a],p[s][a]=t;o=a}return{U:u,S:f,V:p}}})),cytoscapeFcose=createCommonjsModule((function(e,t){var r;r=function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(t,r){t.exports=e},function(e,t,r){var n=r(0).layoutBase.LinkedList,i={multMat:function(e,t){for(var r=[],n=0;n<e.length;n++){r[n]=[];for(var i=0;i<t[0].length;i++){r[n][i]=0;for(var o=0;o<e[0].length;o++)r[n][i]+=e[n][o]*t[o][i]}}return r},multGamma:function(e){for(var t=[],r=0,n=0;n<e.length;n++)r+=e[n];r*=-1/e.length;for(var i=0;i<e.length;i++)t[i]=r+e[i];return t},multL:function(e,t,r){for(var n=[],i=[],o=[],a=0;a<t[0].length;a++){for(var s=0,l=0;l<t.length;l++)s+=-.5*t[l][a]*e[l];i[a]=s}for(var u=0;u<r.length;u++){for(var c=0,h=0;h<r.length;h++)c+=r[u][h]*i[h];o[u]=c}for(var d=0;d<t.length;d++){for(var f=0,p=0;p<t[0].length;p++)f+=t[d][p]*o[p];n[d]=f}return n},multCons:function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]*t;return r},minusOp:function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]-t[n];return r},dotProduct:function(e,t){for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r},mag:function(e){return Math.sqrt(this.dotProduct(e,e))},normalize:function(e){for(var t=[],r=this.mag(e),n=0;n<e.length;n++)t[n]=e[n]/r;return t},getTopMostNodes:function(e){for(var t={},r=0;r<e.length;r++)t[e[r].id()]=!0;return e.filter((function(e,r){"number"==typeof e&&(e=r);for(var n=e.parent()[0];null!=n;){if(t[n.id()])return!1;n=n.parent()[0]}return!0}))},connectComponents:function(e,t,r,i){var o=new n,a=new Set,s=[],l=void 0,u=void 0,c=void 0,h=!1,d=1,f=[],p=[],g=function(){var n=e.collection();p.push(n);var i=r[0],g=e.collection();g.merge(i).merge(i.descendants()),s.push(i),g.forEach((function(e){o.push(e),a.add(e),n.merge(e)}));for(var y=function(){i=o.shift();var u=e.collection();i.neighborhood().nodes().forEach((function(e){t.anySame(i.edgesWith(e))&&u.merge(e)}));for(var c=0;c<u.length;c++){var h=u[c];null==(l=r.intersection(h.union(h.ancestors())))||a.has(l[0])||l.union(l.descendants()).forEach((function(e){o.push(e),a.add(e),n.merge(e),r.has(e)&&s.push(e)}))}};0!=o.length;)y();if(n.forEach((function(e){e.connectedEdges().forEach((function(e){n.has(e.source())&&n.has(e.target())&&n.merge(e)}))})),s.length==r.length&&(h=!0),!h||h&&d>1){u=s[0],c=u.connectedEdges().length,s.forEach((function(e){e.connectedEdges().length<c&&(c=e.connectedEdges().length,u=e)})),f.push(u.id());var v=e.collection();v.merge(s[0]),s.forEach((function(e){v.merge(e)})),s=[],r=r.difference(v),d++}};do{g()}while(!h);return i&&f.length>0&&i.set("dummy"+(i.size+1),f),p},calcBoundingBox:function(e,t,r,n){for(var i=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=void 0,u=void 0,c=void 0,h=void 0,d=e.descendants().not(":parent"),f=d.length,p=0;p<f;p++){var g=d[p];i>(l=t[n.get(g.id())]-g.width()/2)&&(i=l),o<(u=t[n.get(g.id())]+g.width()/2)&&(o=u),a>(c=r[n.get(g.id())]-g.height()/2)&&(a=c),s<(h=r[n.get(g.id())]+g.height()/2)&&(s=h)}var y={};return y.topLeftX=i,y.topLeftY=a,y.width=o-i,y.height=s-a,y}};e.exports=i},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3),o=r(1),a=r(5).spectralLayout,s=r(4).coseLayout,l=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,ready:function(){},stop:function(){}}),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=i({},l,t)}return n(e,[{key:"run",value:function(){var e=this.options,t=e.cy,r=e.eles,n=[],i=[],l=void 0;if(0!=e.eles.length){var u=void 0,c=!1;if(t.layoutUtilities&&e.packComponents&&e.randomize&&((u=t.layoutUtilities("get"))||(u=t.layoutUtilities()),c=!0),e.eles.length!=e.cy.elements().length){var h=r.nodes();(r=r.union(r.descendants())).forEach((function(e){e.isNode()&&e.connectedEdges().forEach((function(e){r.contains(e.source())&&r.contains(e.target())&&!h.contains(e.source().union(e.target()))&&(r=r.union(e))}))})),e.eles=r}if(c){var d=o.getTopMostNodes(e.eles.nodes());if(l=o.connectComponents(t,e.eles,d),e.randomize&&l.forEach((function(t){e.eles=t,n.push(a(e))})),"default"==e.quality||"proof"==e.quality){var f=t.collection();if(e.tile){var p=new Map,g=0,y={nodeIndexes:p,xCoords:[],yCoords:[]},v=[];if(l.forEach((function(e,t){0==e.edges().length&&(e.nodes().forEach((function(t,r){f.merge(e.nodes()[r]),t.isParent()||(y.nodeIndexes.set(e.nodes()[r].id(),g++),y.xCoords.push(e.nodes()[0].position().x),y.yCoords.push(e.nodes()[0].position().y))})),v.push(t))})),f.length>1){l.push(f),n.push(y);for(var m=v.length-1;m>=0;m--)l.splice(v[m],1),n.splice(v[m],1)}}l.forEach((function(t,r){e.eles=t,i.push(s(e,n[r]))}))}var b=[];l.forEach((function(t,r){var a=void 0;"draft"==e.quality&&(a=n[r].nodeIndexes);var s={nodes:[],edges:[]},l=void 0;t.nodes().forEach((function(t){if("draft"==e.quality)if(t.isParent()){var u=o.calcBoundingBox(t,n[r].xCoords,n[r].yCoords,a);s.nodes.push({x:u.topLeftX,y:u.topLeftY,width:u.width,height:u.height})}else l=a.get(t.id()),s.nodes.push({x:n[r].xCoords[l]-t.boundingbox().w/2,y:n[r].yCoords[l]-t.boundingbox().h/2,width:t.boundingbox().w,height:t.boundingbox().h});else s.nodes.push({x:i[r][t.id()].getLeft(),y:i[r][t.id()].getTop(),width:i[r][t.id()].getWidth(),height:i[r][t.id()].getHeight()})})),t.edges().forEach((function(t){var l=t.source(),u=t.target();if("draft"==e.quality){var c=a.get(l.id()),h=a.get(u.id()),d=[],f=[];if(l.isParent()){var p=o.calcBoundingBox(l,n[r].xCoords,n[r].yCoords,a);d.push(p.topLeftX+p.width/2),d.push(p.topLeftY+p.height/2)}else d.push(n[r].xCoords[c]),d.push(n[r].yCoords[c]);if(u.isParent()){var g=o.calcBoundingBox(u,n[r].xCoords,n[r].yCoords,a);f.push(g.topLeftX+g.width/2),f.push(g.topLeftY+g.height/2)}else f.push(n[r].xCoords[h]),f.push(n[r].yCoords[h]);s.edges.push({startX:d[0],startY:d[1],endX:f[0],endY:f[1]})}else s.edges.push({startX:i[r][l.id()].getCenterX(),startY:i[r][l.id()].getCenterY(),endX:i[r][u.id()].getCenterX(),endY:i[r][u.id()].getCenterY()})})),b.push(s)}));var $=u.packComponents(b).shifts;"draft"==e.quality?n.forEach((function(e,t){var r=e.xCoords.map((function(e){return e+$[t].dx})),n=e.yCoords.map((function(e){return e+$[t].dy}));e.xCoords=r,e.yCoords=n})):i.forEach((function(e,t){Object.keys(e).forEach((function(r){var n=e[r];n.setCenter(n.getCenterX()+$[t].dx,n.getCenterY()+$[t].dy)}))}))}else e.randomize&&(n.push(a(e)),n[0].xCoords,n[0].yCoords),"default"!=e.quality&&"proof"!=e.quality||i.push(s(e,n[0]));"default"==e.quality||"proof"==e.quality||e.randomize?(e.eles=r,r.nodes().not(":parent").layoutPositions(this,e,(function(t,r){if("default"==e.quality||"proof"==e.quality){"number"==typeof t&&(t=r);var o=void 0,a=t.data("id");return i.forEach((function(e){a in e&&(o={x:e[a].getRect().getCenterX(),y:e[a].getRect().getCenterY()})})),{x:o.x,y:o.y}}var s=void 0;return n.forEach((function(e){var r=e.nodeIndexes.get(t.id());null!=r&&(s={x:e.xCoords[r],y:e.yCoords[r]})})),null==s&&(s={x:t.position("x"),y:t.position("y")}),{x:s.x,y:s.y}}))):console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}}]),e}();e.exports=u},function(e,t,r){e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((function(t){Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e}},function(e,t,r){var n=r(1),i=r(0).CoSELayout,o=r(0).CoSENode,a=r(0).layoutBase.PointD,s=r(0).layoutBase.DimensionD,l=r(0).layoutBase.LayoutConstants,u=r(0).layoutBase.FDLayoutConstants,c=r(0).CoSEConstants;e.exports={coseLayout:function(e,t){var r=e.eles,h=r.nodes(),d=r.edges(),f=void 0,p=void 0,g=void 0,y={};e.randomize&&(f=t.nodeIndexes,p=t.xCoords,g=t.yCoords),null!=e.nodeRepulsion&&(c.DEFAULT_REPULSION_STRENGTH=u.DEFAULT_REPULSION_STRENGTH=e.nodeRepulsion),null!=e.idealEdgeLength&&(c.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=e.idealEdgeLength),null!=e.edgeElasticity&&(c.DEFAULT_SPRING_STRENGTH=u.DEFAULT_SPRING_STRENGTH=e.edgeElasticity),null!=e.nestingFactor&&(c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(c.DEFAULT_GRAVITY_STRENGTH=u.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(c.MAX_ITERATIONS=u.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(c.DEFAULT_GRAVITY_RANGE_FACTOR=u.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(c.DEFAULT_COOLING_FACTOR_INCREMENTAL=u.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),"proof"==e.quality?l.QUALITY=2:l.QUALITY=0,c.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=l.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=!e.randomize,c.ANIMATE=u.ANIMATE=l.ANIMATE=e.animate,c.TILE=e.tile,c.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,c.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal,c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=!0,l.DEFAULT_UNIFORM_LEAF_NODE_SIZES=e.uniformNodeDimensions;var v=new i,m=v.newGraphManager();return function e(t,r,i,l){for(var u=r.length,c=0;c<u;c++){var h=r[c],d=h.children(),v=void 0,m=h.layoutDimensions({nodeDimensionsIncludeLabels:l.nodeDimensionsIncludeLabels});if(null!=h.outerWidth()&&null!=h.outerHeight())if(l.randomize)if(h.isParent()){var b=n.calcBoundingBox(h,p,g,f);v=t.add(new o(i.graphManager,new a(b.topLeftX,b.topLeftY),new s(b.width,b.height)))}else v=t.add(new o(i.graphManager,new a(p[f.get(h.id())]-m.w/2,g[f.get(h.id())]-m.h/2),new s(parseFloat(m.w),parseFloat(m.h))));else v=t.add(new o(i.graphManager,new a(h.position("x")-m.w/2,h.position("y")-m.h/2),new s(parseFloat(m.w),parseFloat(m.h))));else v=t.add(new o(this.graphManager));if(v.id=h.data("id"),v.paddingLeft=parseInt(h.css("padding")),v.paddingTop=parseInt(h.css("padding")),v.paddingRight=parseInt(h.css("padding")),v.paddingBottom=parseInt(h.css("padding")),l.nodeDimensionsIncludeLabels&&h.isParent()){var $=h.boundingBox({includeLabels:!0,includeNodes:!1}).w,_=h.boundingBox({includeLabels:!0,includeNodes:!1}).h,w=h.css("text-halign");v.labelWidth=$,v.labelHeight=_,v.labelPos=w}y[h.data("id")]=v,isNaN(v.rect.x)&&(v.rect.x=0),isNaN(v.rect.y)&&(v.rect.y=0),null!=d&&d.length>0&&e(i.getGraphManager().add(i.newGraph(),v),d,i,l)}}(m.addRoot(),n.getTopMostNodes(h),v,e),function(e,t,r){for(var n=0;n<r.length;n++){var i=r[n],o=y[i.data("source")],a=y[i.data("target")];o!==a&&0==o.getEdgesBetween(a).length&&(t.add(e.newEdge(),o,a).id=i.id())}}(v,m,d),v.runLayout(),y}}},function(e,t,r){var n=r(1),i=r(7);e.exports={spectralLayout:function(e){var t=e.cy,r=e.eles,o=r.nodes(),a=r.nodes(":parent"),s=new Map,l=new Map,u=new Map,c=[],h=[],d=[],f=[],p=[],g=[],y=[],v=[],m=void 0,b=e.piTol,$=e.samplingType,_=e.nodeSeparation,w=void 0,E=function(e,t,r){for(var n=[],i=0,o=0,a=0,s=void 0,u=[],h=0,d=1,f=0;f<m;f++)u[f]=1e8;for(n[o]=e,u[e]=0;o>=i;){a=n[i++];for(var y=c[a],v=0;v<y.length;v++)1e8==u[s=l.get(y[v])]&&(u[s]=u[a]+1,n[++o]=s);g[a][t]=u[a]*_}if(r){for(var b=0;b<m;b++)g[b][t]<p[b]&&(p[b]=g[b][t]);for(var $=0;$<m;$++)p[$]>h&&(h=p[$],d=$)}return d};n.connectComponents(t,r,n.getTopMostNodes(o),s),a.forEach((function(e){n.connectComponents(t,r,n.getTopMostNodes(e.descendants()),s)}));for(var x=0,T=0;T<o.length;T++)o[T].isParent()||l.set(o[T].id(),x++);var S=!0,O=!1,C=void 0;try{for(var k,P=s.keys()[Symbol.iterator]();!(S=(k=P.next()).done);S=!0){var A=k.value;l.set(A,x++)}}catch(e){O=!0,C=e}finally{try{!S&&P.return&&P.return()}finally{if(O)throw C}}for(var I=0;I<l.size;I++)c[I]=[];a.forEach((function(e){for(var t=e.children();0==t.nodes(":childless").length;)t=t.nodes()[0].children();var r=0,n=t.nodes(":childless")[0].connectedEdges().length;t.nodes(":childless").forEach((function(e,t){e.connectedEdges().length<n&&(n=e.connectedEdges().length,r=t)})),u.set(e.id(),t.nodes(":childless")[r].id())})),o.forEach((function(e){var t=void 0;t=e.isParent()?l.get(u.get(e.id())):l.get(e.id()),e.neighborhood().nodes().forEach((function(n){r.anySame(e.edgesWith(n))&&(n.isParent()?c[t].push(u.get(n.id())):c[t].push(n.id()))}))}));var D=function(e){var r=l.get(e),n=void 0;s.get(e).forEach((function(i){n=t.getElementById(i).isParent()?u.get(i):i,c[r].push(n),c[l.get(n)].push(e)}))},N=!0,M=!1,R=void 0;try{for(var L,j=s.keys()[Symbol.iterator]();!(N=(L=j.next()).done);N=!0)D(L.value)}catch(e){M=!0,R=e}finally{try{!N&&j.return&&j.return()}finally{if(M)throw R}}if((m=l.size)>2){w=m<e.sampleSize?m:e.sampleSize;for(var F=0;F<m;F++)g[F]=[];for(var B=0;B<w;B++)v[B]=[];return function(e){var t=void 0;if(e){t=Math.floor(Math.random()*m);for(var r=0;r<m;r++)p[r]=1e8;for(var n=0;n<w;n++)f[n]=t,t=E(t,n,e)}else{!function(){for(var e=0,t=0,r=!1;t<w;){e=Math.floor(Math.random()*m),r=!1;for(var n=0;n<t;n++)if(f[n]==e){r=!0;break}r||(f[t]=e,t++)}}();for(var i=0;i<w;i++)E(f[i],i,e)}for(var o=0;o<m;o++)for(var a=0;a<w;a++)g[o][a]*=g[o][a];for(var s=0;s<w;s++)y[s]=[];for(var l=0;l<w;l++)for(var u=0;u<w;u++)y[l][u]=g[f[u]][l]}($),function(){for(var e=i.svd(y),t=e.S,r=e.U,o=e.V,a=t[0]*t[0]*t[0],s=[],l=0;l<w;l++){s[l]=[];for(var u=0;u<w;u++)s[l][u]=0,l==u&&(s[l][u]=t[l]/(t[l]*t[l]+a/(t[l]*t[l])))}v=n.multMat(n.multMat(o,s),i.transpose(r))}(),function(){for(var e=void 0,t=void 0,r=[],i=[],o=[],a=[],s=0;s<m;s++)r[s]=Math.random(),i[s]=Math.random();r=n.normalize(r),i=n.normalize(i);for(var l=1e-9,u=1e-9,c=void 0;;){for(var f=0;f<m;f++)o[f]=r[f];if(r=n.multGamma(n.multL(n.multGamma(o),g,v)),e=n.dotProduct(o,r),r=n.normalize(r),l=n.dotProduct(o,r),(c=Math.abs(l/u))<=1+b&&c>=1)break;u=l}for(var p=0;p<m;p++)o[p]=r[p];for(u=1e-9;;){for(var y=0;y<m;y++)a[y]=i[y];if(a=n.minusOp(a,n.multCons(o,n.dotProduct(o,a))),i=n.multGamma(n.multL(n.multGamma(a),g,v)),t=n.dotProduct(a,i),i=n.normalize(i),l=n.dotProduct(a,i),(c=Math.abs(l/u))<=1+b&&c>=1)break;u=l}for(var $=0;$<m;$++)a[$]=i[$];h=n.multCons(o,Math.sqrt(Math.abs(e))),d=n.multCons(a,Math.sqrt(Math.abs(t)))}(),{nodeIndexes:l,xCoords:h,yCoords:d}}var z=l.keys(),G=t.getElementById(z.next().value),U=G.position(),H=G.outerWidth();if(h.push(U.x),d.push(U.y),2==m){var V=t.getElementById(z.next().value).outerWidth();h.push(U.x+H/2+V/2+e.idealEdgeLength),d.push(U.y)}return{nodeIndexes:l,xCoords:h,yCoords:d}}}},function(e,t,r){var n=r(2),i=function(e){e&&e("layout","fcose",n)};"undefined"!=typeof cytoscape&&i(cytoscape),e.exports=i},function(e,r){e.exports=t}])},e.exports=r(coseBase,numeric1_2_6)})),fcose=unwrapExports(cytoscapeFcose);function stackClear(){this.__data__=new _ListCache,this.size=0}var _stackClear=stackClear;function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _stackDelete=stackDelete;function stackGet(e){return this.__data__.get(e)}var _stackGet=stackGet;function stackHas(e){return this.__data__.has(e)}var _stackHas=stackHas,LARGE_ARRAY_SIZE=200;function stackSet(e,t){var r=this.__data__;if(r instanceof _ListCache){var n=r.__data__;if(!_Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _MapCache(n)}return r.set(e,t),this.size=r.size,this}var _stackSet=stackSet;function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack;function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var _arrayEach=arrayEach;function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty?_defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function assignValue(e,t,r){var n=e[t];hasOwnProperty$4.call(e,t)&&eq_1(n,r)&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignValue=assignValue;function copyObject(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?_baseAssignValue(r,s,l):_assignValue(r,s,l)}return r}var _copyObject=copyObject;function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var _baseTimes=baseTimes,argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty,propertyIsEnumerable=objectProto$7.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$5.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,isArray=Array.isArray,isArray_1=isArray;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,o=(i?i.isBuffer:void 0)||stubFalse_1;e.exports=o})),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER$1:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray,_nodeUtil=createCommonjsModule((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&_freeGlobal.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o})),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray,objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray_1(e),n=!r&&isArguments_1(e),i=!r&&!n&&isBuffer_1(e),o=!r&&!n&&!i&&isTypedArray_1(e),a=r||n||i||o,s=a?_baseTimes(e.length,String):[],l=s.length;for(var u in e)!t&&!hasOwnProperty$6.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_isIndex(u,l))||s.push(u);return s}var _arrayLikeKeys=arrayLikeKeys,objectProto$9=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$9)}var _isPrototype=isPrototype;function overArg(e,t){return function(r){return e(t(r))}}var _overArg=overArg,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$a=Object.prototype,hasOwnProperty$7=objectProto$a.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$7.call(e,r)&&"constructor"!=r&&t.push(r);return t}var _baseKeys=baseKeys;function keys(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)}var keys_1=keys;function baseAssign(e,t){return e&&_copyObject(t,keys_1(t),e)}var _baseAssign=baseAssign;function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var _nativeKeysIn=nativeKeysIn,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty;function baseKeysIn(e){if(!isObject_1(e))return _nativeKeysIn(e);var t=_isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty$8.call(e,n))&&r.push(n);return r}var _baseKeysIn=baseKeysIn;function keysIn$1(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)}var keysIn_1=keysIn$1;function baseAssignIn(e,t){return e&&_copyObject(t,keysIn_1(t),e)}var _baseAssignIn=baseAssignIn,_cloneBuffer=createCommonjsModule((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}}));function copyArray$1(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _copyArray=copyArray$1;function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var _arrayFilter=arrayFilter;function stubArray(){return[]}var stubArray_1=stubArray,objectProto$c=Object.prototype,propertyIsEnumerable$1=objectProto$c.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),_arrayFilter(nativeGetSymbols(e),(function(t){return propertyIsEnumerable$1.call(e,t)})))}:stubArray_1,_getSymbols=getSymbols;function copySymbols(e,t){return _copyObject(e,_getSymbols(e),t)}var _copySymbols=copySymbols;function arrayPush(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var _arrayPush=arrayPush,getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(e){for(var t=[];e;)_arrayPush(t,_getSymbols(e)),e=_getPrototype(e);return t}:stubArray_1,_getSymbolsIn=getSymbolsIn;function copySymbolsIn(e,t){return _copyObject(e,_getSymbolsIn(e),t)}var _copySymbolsIn=copySymbolsIn;function baseGetAllKeys(e,t,r){var n=t(e);return isArray_1(e)?n:_arrayPush(n,r(e))}var _baseGetAllKeys=baseGetAllKeys;function getAllKeys(e){return _baseGetAllKeys(e,keys_1,_getSymbols)}var _getAllKeys=getAllKeys;function getAllKeysIn(e){return _baseGetAllKeys(e,keysIn_1,_getSymbolsIn)}var _getAllKeysIn=getAllKeysIn,DataView=_getNative(_root,"DataView"),_DataView=DataView,Promise$2=_getNative(_root,"Promise"),_Promise=Promise$2,Set$2=_getNative(_root,"Set"),_Set=Set$2,WeakMap=_getNative(_root,"WeakMap"),_WeakMap=WeakMap,mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$1||_Map&&getTag(new _Map)!=mapTag$1||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$1||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=_baseGetTag(e),r=t==objectTag$1?e.constructor:void 0,n=r?_toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,objectProto$d=Object.prototype,hasOwnProperty$9=objectProto$d.hasOwnProperty;function initCloneArray(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$9.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var _initCloneArray=initCloneArray,Uint8Array$1=_root.Uint8Array,_Uint8Array=Uint8Array$1;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new _Uint8Array(t).set(new _Uint8Array(e)),t}var _cloneArrayBuffer=cloneArrayBuffer;function cloneDataView(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var _cloneDataView=cloneDataView,reFlags=/\w*$/;function cloneRegExp(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}var _cloneRegExp=cloneRegExp,symbolProto=_Symbol?_Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol(e){return symbolValueOf?Object(symbolValueOf.call(e)):{}}var _cloneSymbol=cloneSymbol;function cloneTypedArray(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray,boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,t,r){var n=e.constructor;switch(t){case arrayBufferTag$1:return _cloneArrayBuffer(e);case boolTag$1:case dateTag$1:return new n(+e);case dataViewTag$2:return _cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return _cloneTypedArray(e,r);case mapTag$2:return new n;case numberTag$1:case stringTag$1:return new n(e);case regexpTag$1:return _cloneRegExp(e);case setTag$2:return new n;case symbolTag$1:return _cloneSymbol(e)}}var _initCloneByTag=initCloneByTag,objectCreate=Object.create,baseCreate=function(){function e(){}return function(t){if(!isObject_1(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),_baseCreate=baseCreate;function initCloneObject(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:_baseCreate(_getPrototype(e))}var _initCloneObject=initCloneObject,mapTag$3="[object Map]";function baseIsMap(e){return isObjectLike_1(e)&&_getTag(e)==mapTag$3}var _baseIsMap=baseIsMap,nodeIsMap=_nodeUtil&&_nodeUtil.isMap,isMap=nodeIsMap?_baseUnary(nodeIsMap):_baseIsMap,isMap_1=isMap,setTag$3="[object Set]";function baseIsSet(e){return isObjectLike_1(e)&&_getTag(e)==setTag$3}var _baseIsSet=baseIsSet,nodeIsSet=_nodeUtil&&_nodeUtil.isSet,isSet=nodeIsSet?_baseUnary(nodeIsSet):_baseIsSet,isSet_1=isSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",cloneableTags={};function baseClone(e,t,r,n,i,o){var a,s=t&CLONE_DEEP_FLAG,l=t&CLONE_FLAT_FLAG,u=t&CLONE_SYMBOLS_FLAG;if(r&&(a=i?r(e,n,i,o):r(e)),void 0!==a)return a;if(!isObject_1(e))return e;var c=isArray_1(e);if(c){if(a=_initCloneArray(e),!s)return _copyArray(e,a)}else{var h=_getTag(e),d=h==funcTag$2||h==genTag$1;if(isBuffer_1(e))return _cloneBuffer(e,s);if(h==objectTag$2||h==argsTag$2||d&&!i){if(a=l||d?{}:_initCloneObject(e),!s)return l?_copySymbolsIn(e,_baseAssignIn(a,e)):_copySymbols(e,_baseAssign(a,e))}else{if(!cloneableTags[h])return i?e:{};a=_initCloneByTag(e,h,s)}}o||(o=new _Stack);var f=o.get(e);if(f)return f;o.set(e,a),isSet_1(e)?e.forEach((function(n){a.add(baseClone(n,t,r,n,e,o))})):isMap_1(e)&&e.forEach((function(n,i){a.set(i,baseClone(n,t,r,i,e,o))}));var p=u?l?_getAllKeysIn:_getAllKeys:l?keysIn:keys_1,g=c?void 0:p(e);return _arrayEach(g||e,(function(n,i){g&&(n=e[i=n]),_assignValue(a,i,baseClone(n,t,r,i,e,o))})),a}cloneableTags[argsTag$2]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$3]=cloneableTags[boolTag$2]=cloneableTags[dateTag$2]=cloneableTags[float32Tag$2]=cloneableTags[float64Tag$2]=cloneableTags[int8Tag$2]=cloneableTags[int16Tag$2]=cloneableTags[int32Tag$2]=cloneableTags[mapTag$4]=cloneableTags[numberTag$2]=cloneableTags[objectTag$2]=cloneableTags[regexpTag$2]=cloneableTags[setTag$4]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag$2]=cloneableTags[uint8ClampedTag$2]=cloneableTags[uint16Tag$2]=cloneableTags[uint32Tag$2]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var _baseClone=baseClone,CLONE_SYMBOLS_FLAG$1=4;function clone$1(e){return _baseClone(e,CLONE_SYMBOLS_FLAG$1)}var clone_1=clone$1;function createBaseFor(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}var _createBaseFor=createBaseFor,baseFor=_createBaseFor(),_baseFor=baseFor;function baseForOwn(e,t){return e&&_baseFor(e,t,keys_1)}var _baseForOwn=baseForOwn;function createBaseEach(e,t){return function(r,n){if(null==r)return r;if(!isArrayLike_1(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}var _createBaseEach=createBaseEach,baseEach=_createBaseEach(_baseForOwn),_baseEach=baseEach;function castFunction(e){return"function"==typeof e?e:identity_1}var _castFunction=castFunction;function forEach(e,t){return(isArray_1(e)?_arrayEach:_baseEach)(e,_castFunction(t))}var forEach_1=forEach,each=forEach_1;function baseFilter(e,t){var r=[];return _baseEach(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}var _baseFilter=baseFilter;function arraySome(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var _arraySome=arraySome,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(e,t,r,n,i,o){var a=r&COMPARE_PARTIAL_FLAG,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var c=-1,h=!0,d=r&COMPARE_UNORDERED_FLAG?new _SetCache:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var f=e[c],p=t[c];if(n)var g=a?n(p,f,c,t,e,o):n(f,p,c,e,t,o);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!_arraySome(t,(function(e,t){if(!_cacheHas(d,t)&&(f===e||i(f,e,r,n,o)))return d.push(t)}))){h=!1;break}}else if(f!==p&&!i(f,p,r,n,o)){h=!1;break}}return o.delete(e),o.delete(t),h}var _equalArrays=equalArrays;function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}var _mapToArray=mapToArray;function setToArray(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var _setToArray=setToArray,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",mapTag$5="[object Map]",numberTag$3="[object Number]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",symbolProto$1=_Symbol?_Symbol.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag(e,t,r,n,i,o,a){switch(r){case dataViewTag$4:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$3:return!(e.byteLength!=t.byteLength||!o(new _Uint8Array(e),new _Uint8Array(t)));case boolTag$3:case dateTag$3:case numberTag$3:return eq_1(+e,+t);case errorTag$2:return e.name==t.name&&e.message==t.message;case regexpTag$3:case stringTag$3:return e==t+"";case mapTag$5:var s=_mapToArray;case setTag$5:var l=n&COMPARE_PARTIAL_FLAG$1;if(s||(s=_setToArray),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=COMPARE_UNORDERED_FLAG$1,a.set(e,t);var c=_equalArrays(s(e),s(t),n,i,o,a);return a.delete(e),c;case symbolTag$3:if(symbolValueOf$1)return symbolValueOf$1.call(e)==symbolValueOf$1.call(t)}return!1}var _equalByTag=equalByTag,COMPARE_PARTIAL_FLAG$2=1,objectProto$e=Object.prototype,hasOwnProperty$a=objectProto$e.hasOwnProperty;function equalObjects(e,t,r,n,i,o){var a=r&COMPARE_PARTIAL_FLAG$2,s=_getAllKeys(e),l=s.length;if(l!=_getAllKeys(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:hasOwnProperty$a.call(t,c)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var d=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<l;){var p=e[c=s[u]],g=t[c];if(n)var y=a?n(g,p,c,t,e,o):n(p,g,c,e,t,o);if(!(void 0===y?p===g||i(p,g,r,n,o):y)){d=!1;break}f||(f="constructor"==c)}if(d&&!f){var v=e.constructor,m=t.constructor;v==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m||(d=!1)}return o.delete(e),o.delete(t),d}var _equalObjects=equalObjects,COMPARE_PARTIAL_FLAG$3=1,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",objectTag$3="[object Object]",objectProto$f=Object.prototype,hasOwnProperty$b=objectProto$f.hasOwnProperty;function baseIsEqualDeep(e,t,r,n,i,o){var a=isArray_1(e),s=isArray_1(t),l=a?arrayTag$2:_getTag(e),u=s?arrayTag$2:_getTag(t),c=(l=l==argsTag$3?objectTag$3:l)==objectTag$3,h=(u=u==argsTag$3?objectTag$3:u)==objectTag$3,d=l==u;if(d&&isBuffer_1(e)){if(!isBuffer_1(t))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new _Stack),a||isTypedArray_1(e)?_equalArrays(e,t,r,n,i,o):_equalByTag(e,t,l,r,n,i,o);if(!(r&COMPARE_PARTIAL_FLAG$3)){var f=c&&hasOwnProperty$b.call(e,"__wrapped__"),p=h&&hasOwnProperty$b.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,y=p?t.value():t;return o||(o=new _Stack),i(g,y,r,n,o)}}return!!d&&(o||(o=new _Stack),_equalObjects(e,t,r,n,i,o))}var _baseIsEqualDeep=baseIsEqualDeep;function baseIsEqual(e,t,r,n,i){return e===t||(null==e||null==t||!isObjectLike_1(e)&&!isObjectLike_1(t)?e!=e&&t!=t:_baseIsEqualDeep(e,t,r,n,baseIsEqual,i))}var _baseIsEqual=baseIsEqual,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=r[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var h=new _Stack;if(n)var d=n(u,c,l,e,t,h);if(!(void 0===d?_baseIsEqual(c,u,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,n,h):d))return!1}}return!0}var _baseIsMatch=baseIsMatch;function isStrictComparable(e){return e==e&&!isObject_1(e)}var _isStrictComparable=isStrictComparable;function getMatchData(e){for(var t=keys_1(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,_isStrictComparable(i)]}return t}var _getMatchData=getMatchData;function matchesStrictComparable(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}var _matchesStrictComparable=matchesStrictComparable;function baseMatches(e){var t=_getMatchData(e);return 1==t.length&&t[0][2]?_matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||_baseIsMatch(r,e,t)}}var _baseMatches=baseMatches,symbolTag$4="[object Symbol]";function isSymbol$1(e){return"symbol"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag$4}var isSymbol_1=isSymbol$1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey,FUNC_ERROR_TEXT$1="Expected a function";function memoize$1(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT$1);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(memoize$1.Cache||_MapCache),r}memoize$1.Cache=_MapCache;var memoize_1=memoize$1,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,(function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e})),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,(function(e,r,n,i){t.push(n?i.replace(reEscapeChar,"$1"):r||e)})),t})),_stringToPath=stringToPath,INFINITY=1/0,symbolProto$2=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}var _baseToString=baseToString;function toString$1(e){return null==e?"":_baseToString(e)}var toString_1=toString$1;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,INFINITY$1=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet;function get(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}var get_1=get;function baseHasIn(e,t){return null!=e&&t in Object(e)}var _baseHasIn=baseHasIn;function hasPath(e,t,r){for(var n=-1,i=(t=_castPath(t,e)).length,o=!1;++n<i;){var a=_toKey(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&isLength_1(i)&&_isIndex(a,i)&&(isArray_1(e)||isArguments_1(e))}var _hasPath=hasPath;function hasIn(e,t){return null!=e&&_hasPath(e,t,_baseHasIn)}var hasIn_1=hasIn,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(e,t){return _isKey(e)&&_isStrictComparable(t)?_matchesStrictComparable(_toKey(e),t):function(r){var n=get_1(r,e);return void 0===n&&n===t?hasIn_1(r,e):_baseIsEqual(t,n,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}var _baseMatchesProperty=baseMatchesProperty;function baseProperty(e){return function(t){return null==t?void 0:t[e]}}var _baseProperty=baseProperty;function basePropertyDeep(e){return function(t){return _baseGet(t,e)}}var _basePropertyDeep=basePropertyDeep;function property(e){return _isKey(e)?_baseProperty(_toKey(e)):_basePropertyDeep(e)}var property_1=property;function baseIteratee(e){return"function"==typeof e?e:null==e?identity_1:"object"==typeof e?isArray_1(e)?_baseMatchesProperty(e[0],e[1]):_baseMatches(e):property_1(e)}var _baseIteratee=baseIteratee;function filter$1(e,t){return(isArray_1(e)?_arrayFilter:_baseFilter)(e,_baseIteratee(t))}var filter_1=filter$1,objectProto$g=Object.prototype,hasOwnProperty$c=objectProto$g.hasOwnProperty;function baseHas(e,t){return null!=e&&hasOwnProperty$c.call(e,t)}var _baseHas=baseHas;function has(e,t){return null!=e&&_hasPath(e,t,_baseHas)}var has_1=has,mapTag$6="[object Map]",setTag$6="[object Set]",objectProto$h=Object.prototype,hasOwnProperty$d=objectProto$h.hasOwnProperty;function isEmpty(e){if(null==e)return!0;if(isArrayLike_1(e)&&(isArray_1(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer_1(e)||isTypedArray_1(e)||isArguments_1(e)))return!e.length;var t=_getTag(e);if(t==mapTag$6||t==setTag$6)return!e.size;if(_isPrototype(e))return!_baseKeys(e).length;for(var r in e)if(hasOwnProperty$d.call(e,r))return!1;return!0}var isEmpty_1=isEmpty;function isUndefined(e){return void 0===e}var isUndefined_1=isUndefined;function baseMap(e,t){var r=-1,n=isArrayLike_1(e)?Array(e.length):[];return _baseEach(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}var _baseMap=baseMap;function map(e,t){return(isArray_1(e)?_arrayMap:_baseMap)(e,_baseIteratee(t))}var map_1=map;function arrayReduce(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}var _arrayReduce=arrayReduce;function baseReduce(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}var _baseReduce=baseReduce;function reduce(e,t,r){var n=isArray_1(e)?_arrayReduce:_baseReduce,i=arguments.length<3;return n(e,_baseIteratee(t),r,i,_baseEach)}var reduce_1=reduce,stringTag$4="[object String]";function isString(e){return"string"==typeof e||!isArray_1(e)&&isObjectLike_1(e)&&_baseGetTag(e)==stringTag$4}var isString_1=isString,asciiSize=_baseProperty("length"),_asciiSize=asciiSize,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsZWJ="\\u200d",reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");function hasUnicode(e){return reHasUnicode.test(e)}var _hasUnicode=hasUnicode,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo="["+rsComboRange$1+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange$1+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange$1+"]?",rsOptJoin="(?:"+rsZWJ$1+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeSize(e){for(var t=reUnicode.lastIndex=0;reUnicode.test(e);)++t;return t}var _unicodeSize=unicodeSize;function stringSize(e){return _hasUnicode(e)?_unicodeSize(e):_asciiSize(e)}var _stringSize=stringSize,mapTag$7="[object Map]",setTag$7="[object Set]";function size(e){if(null==e)return 0;if(isArrayLike_1(e))return isString_1(e)?_stringSize(e):e.length;var t=_getTag(e);return t==mapTag$7||t==setTag$7?e.size:_baseKeys(e).length}var size_1=size;function transform(e,t,r){var n=isArray_1(e),i=n||isBuffer_1(e)||isTypedArray_1(e);if(t=_baseIteratee(t),null==r){var o=e&&e.constructor;r=i?n?new o:[]:isObject_1(e)&&isFunction_1(o)?_baseCreate(_getPrototype(e)):{}}return(i?_arrayEach:_baseForOwn)(e,(function(e,n,i){return t(r,e,n,i)})),r}var transform_1=transform,spreadableSymbol=_Symbol?_Symbol.isConcatSpreadable:void 0;function isFlattenable(e){return isArray_1(e)||isArguments_1(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}var _isFlattenable=isFlattenable;function baseFlatten(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=_isFlattenable),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?baseFlatten(s,t-1,r,n,i):_arrayPush(i,s):n||(i[i.length]=s)}return i}var _baseFlatten=baseFlatten;function noop$2(){}var noop_1=noop$2,INFINITY$2=1/0,createSet=_Set&&1/_setToArray(new _Set([,-0]))[1]==INFINITY$2?function(e){return new _Set(e)}:noop_1,_createSet=createSet,LARGE_ARRAY_SIZE$1=200;function baseUniq(e,t,r){var n=-1,i=_arrayIncludes,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=_arrayIncludesWith;else if(o>=LARGE_ARRAY_SIZE$1){var u=t?null:_createSet(e);if(u)return _setToArray(u);a=!1,i=_cacheHas,l=new _SetCache}else l=t?[]:s;e:for(;++n<o;){var c=e[n],h=t?t(c):c;if(c=r||0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(c)}else i(l,h,r)||(l!==s&&l.push(h),s.push(c))}return s}var _baseUniq=baseUniq,union=_baseRest((function(e){return _baseUniq(_baseFlatten(e,1,isArrayLikeObject_1,!0))})),union_1=union;function baseValues(e,t){return _arrayMap(t,(function(t){return e[t]}))}var _baseValues=baseValues;function values(e){return null==e?[]:_baseValues(e,keys_1(e))}var values_1=values,lodash;if("function"==typeof commonjsRequire)try{lodash={clone:clone_1,constant:constant_1,each:each,filter:filter_1,has:has_1,isArray:isArray_1,isEmpty:isEmpty_1,isFunction:isFunction_1,isUndefined:isUndefined_1,keys:keys_1,map:map_1,reduce:reduce_1,size:size_1,transform:transform_1,union:union_1,values:values_1}}catch(e){}lodash||(lodash=window._);var lodash_1=lodash,graph=Graph,DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";function Graph(e){this._isDirected=!lodash_1.has(e,"directed")||e.directed,this._isMultigraph=!!lodash_1.has(e,"multigraph")&&e.multigraph,this._isCompound=!!lodash_1.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=lodash_1.constant(void 0),this._defaultEdgeLabelFn=lodash_1.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function incrementOrInitEntry(e,t){e[t]?e[t]++:e[t]=1}function decrementOrRemoveEntry(e,t){--e[t]||delete e[t]}function edgeArgsToId(e,t,r,n){var i=""+t,o=""+r;if(!e&&i>o){var a=i;i=o,o=a}return i+EDGE_KEY_DELIM+o+EDGE_KEY_DELIM+(lodash_1.isUndefined(n)?DEFAULT_EDGE_NAME:n)}function edgeArgsToObj(e,t,r,n){var i=""+t,o=""+r;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return n&&(s.name=n),s}function edgeObjToId(e,t){return edgeArgsToId(e,t.v,t.w,t.name)}Graph.prototype._nodeCount=0,Graph.prototype._edgeCount=0,Graph.prototype.isDirected=function(){return this._isDirected},Graph.prototype.isMultigraph=function(){return this._isMultigraph},Graph.prototype.isCompound=function(){return this._isCompound},Graph.prototype.setGraph=function(e){return this._label=e,this},Graph.prototype.graph=function(){return this._label},Graph.prototype.setDefaultNodeLabel=function(e){return lodash_1.isFunction(e)||(e=lodash_1.constant(e)),this._defaultNodeLabelFn=e,this},Graph.prototype.nodeCount=function(){return this._nodeCount},Graph.prototype.nodes=function(){return lodash_1.keys(this._nodes)},Graph.prototype.sources=function(){var e=this;return lodash_1.filter(this.nodes(),(function(t){return lodash_1.isEmpty(e._in[t])}))},Graph.prototype.sinks=function(){var e=this;return lodash_1.filter(this.nodes(),(function(t){return lodash_1.isEmpty(e._out[t])}))},Graph.prototype.setNodes=function(e,t){var r=arguments,n=this;return lodash_1.each(e,(function(e){r.length>1?n.setNode(e,t):n.setNode(e)})),this},Graph.prototype.setNode=function(e,t){return lodash_1.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=GRAPH_NODE,this._children[e]={},this._children[GRAPH_NODE][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Graph.prototype.node=function(e){return this._nodes[e]},Graph.prototype.hasNode=function(e){return lodash_1.has(this._nodes,e)},Graph.prototype.removeNode=function(e){var t=this;if(lodash_1.has(this._nodes,e)){var r=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],lodash_1.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),lodash_1.each(lodash_1.keys(this._in[e]),r),delete this._in[e],delete this._preds[e],lodash_1.each(lodash_1.keys(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Graph.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(lodash_1.isUndefined(t))t=GRAPH_NODE;else{for(var r=t+="";!lodash_1.isUndefined(r);r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Graph.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Graph.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==GRAPH_NODE)return t}},Graph.prototype.children=function(e){if(lodash_1.isUndefined(e)&&(e=GRAPH_NODE),this._isCompound){var t=this._children[e];if(t)return lodash_1.keys(t)}else{if(e===GRAPH_NODE)return this.nodes();if(this.hasNode(e))return[]}},Graph.prototype.predecessors=function(e){var t=this._preds[e];if(t)return lodash_1.keys(t)},Graph.prototype.successors=function(e){var t=this._sucs[e];if(t)return lodash_1.keys(t)},Graph.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return lodash_1.union(t,this.successors(e))},Graph.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},Graph.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;lodash_1.each(this._nodes,(function(r,n){e(n)&&t.setNode(n,r)})),lodash_1.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))}));var n={};return this._isCompound&&lodash_1.each(t.nodes(),(function(e){t.setParent(e,function e(i){var o=r.parent(i);return void 0===o||t.hasNode(o)?(n[i]=o,o):o in n?n[o]:e(o)}(e))})),t},Graph.prototype.setDefaultEdgeLabel=function(e){return lodash_1.isFunction(e)||(e=lodash_1.constant(e)),this._defaultEdgeLabelFn=e,this},Graph.prototype.edgeCount=function(){return this._edgeCount},Graph.prototype.edges=function(){return lodash_1.values(this._edgeObjs)},Graph.prototype.setPath=function(e,t){var r=this,n=arguments;return lodash_1.reduce(e,(function(e,i){return n.length>1?r.setEdge(e,i,t):r.setEdge(e,i),i})),this},Graph.prototype.setEdge=function(){var e,t,r,n,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(e=o.v,t=o.w,r=o.name,2===arguments.length&&(n=arguments[1],i=!0)):(e=o,t=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),e=""+e,t=""+t,lodash_1.isUndefined(r)||(r=""+r);var a=edgeArgsToId(this._isDirected,e,t,r);if(lodash_1.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=n),this;if(!lodash_1.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=i?n:this._defaultEdgeLabelFn(e,t,r);var s=edgeArgsToObj(this._isDirected,e,t,r);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,incrementOrInitEntry(this._preds[t],e),incrementOrInitEntry(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this},Graph.prototype.edge=function(e,t,r){var n=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,e,t,r);return this._edgeLabels[n]},Graph.prototype.hasEdge=function(e,t,r){var n=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,e,t,r);return lodash_1.has(this._edgeLabels,n)},Graph.prototype.removeEdge=function(e,t,r){var n=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,e,t,r),i=this._edgeObjs[n];return i&&(e=i.v,t=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],decrementOrRemoveEntry(this._preds[t],e),decrementOrRemoveEntry(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},Graph.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var n=lodash_1.values(r);return t?lodash_1.filter(n,(function(e){return e.v===t})):n}},Graph.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var n=lodash_1.values(r);return t?lodash_1.filter(n,(function(e){return e.w===t})):n}},Graph.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))};var version$1="2.1.8",lib={Graph:graph,version:version$1},json={write:write,read:read};function write(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:writeNodes(e),edges:writeEdges(e)};return lodash_1.isUndefined(e.graph())||(t.value=lodash_1.clone(e.graph())),t}function writeNodes(e){return lodash_1.map(e.nodes(),(function(t){var r=e.node(t),n=e.parent(t),i={v:t};return lodash_1.isUndefined(r)||(i.value=r),lodash_1.isUndefined(n)||(i.parent=n),i}))}function writeEdges(e){return lodash_1.map(e.edges(),(function(t){var r=e.edge(t),n={v:t.v,w:t.w};return lodash_1.isUndefined(t.name)||(n.name=t.name),lodash_1.isUndefined(r)||(n.value=r),n}))}function read(e){var t=new graph(e.options).setGraph(e.value);return lodash_1.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),lodash_1.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}var components_1=components;function components(e){var t,r={},n=[];function i(n){lodash_1.has(r,n)||(r[n]=!0,t.push(n),lodash_1.each(e.successors(n),i),lodash_1.each(e.predecessors(n),i))}return lodash_1.each(e.nodes(),(function(e){t=[],i(e),t.length&&n.push(t)})),n}var priorityQueue=PriorityQueue;function PriorityQueue(){this._arr=[],this._keyIndices={}}PriorityQueue.prototype.size=function(){return this._arr.length},PriorityQueue.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},PriorityQueue.prototype.has=function(e){return lodash_1.has(this._keyIndices,e)},PriorityQueue.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},PriorityQueue.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},PriorityQueue.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),!lodash_1.has(r,e)){var n=this._arr,i=n.length;return r[e]=i,n.push({key:e,priority:t}),this._decrease(i),!0}return!1},PriorityQueue.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},PriorityQueue.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)},PriorityQueue.prototype._heapify=function(e){var t=this._arr,r=2*e,n=r+1,i=e;r<t.length&&(i=t[r].priority<t[i].priority?r:i,n<t.length&&(i=t[n].priority<t[i].priority?n:i),i!==e&&(this._swap(e,i),this._heapify(i)))},PriorityQueue.prototype._decrease=function(e){for(var t,r=this._arr,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this._swap(e,t),e=t},PriorityQueue.prototype._swap=function(e,t){var r=this._arr,n=this._keyIndices,i=r[e],o=r[t];r[e]=o,r[t]=i,n[o.key]=e,n[i.key]=t};var dijkstra_1=dijkstra,DEFAULT_WEIGHT_FUNC=lodash_1.constant(1);function dijkstra(e,t,r,n){return runDijkstra(e,String(t),r||DEFAULT_WEIGHT_FUNC,n||function(t){return e.outEdges(t)})}function runDijkstra(e,t,r,n){var i,o,a={},s=new priorityQueue,l=function(e){var t=e.v!==i?e.v:e.w,n=a[t],l=r(e),u=o.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+l);u<n.distance&&(n.distance=u,n.predecessor=i,s.decrease(t,u))};for(e.nodes().forEach((function(e){var r=e===t?0:Number.POSITIVE_INFINITY;a[e]={distance:r},s.add(e,r)}));s.size()>0&&(i=s.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)n(i).forEach(l);return a}var dijkstraAll_1=dijkstraAll;function dijkstraAll(e,t,r){return lodash_1.transform(e.nodes(),(function(n,i){n[i]=dijkstra_1(e,i,t,r)}),{})}var tarjan_1=tarjan;function tarjan(e){var t=0,r=[],n={},i=[];return e.nodes().forEach((function(o){lodash_1.has(n,o)||function o(a){var s=n[a]={onStack:!0,lowlink:t,index:t++};if(r.push(a),e.successors(a).forEach((function(e){lodash_1.has(n,e)?n[e].onStack&&(s.lowlink=Math.min(s.lowlink,n[e].index)):(o(e),s.lowlink=Math.min(s.lowlink,n[e].lowlink))})),s.lowlink===s.index){var l,u=[];do{l=r.pop(),n[l].onStack=!1,u.push(l)}while(a!==l);i.push(u)}}(o)})),i}var findCycles_1=findCycles;function findCycles(e){return lodash_1.filter(tarjan_1(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}var floydWarshall_1=floydWarshall,DEFAULT_WEIGHT_FUNC$1=lodash_1.constant(1);function floydWarshall(e,t,r){return runFloydWarshall(e,t||DEFAULT_WEIGHT_FUNC$1,r||function(t){return e.outEdges(t)})}function runFloydWarshall(e,t,r){var n={},i=e.nodes();return i.forEach((function(e){n[e]={},n[e][e]={distance:0},i.forEach((function(t){e!==t&&(n[e][t]={distance:Number.POSITIVE_INFINITY})})),r(e).forEach((function(r){var i=r.v===e?r.w:r.v,o=t(r);n[e][i]={distance:o,predecessor:e}}))})),i.forEach((function(e){var t=n[e];i.forEach((function(r){var o=n[r];i.forEach((function(r){var n=o[e],i=t[r],a=o[r],s=n.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)}))}))})),n}var topsort_1=topsort;function topsort(e){var t={},r={},n=[];if(lodash_1.each(e.sinks(),(function i(o){if(lodash_1.has(r,o))throw new CycleException;lodash_1.has(t,o)||(r[o]=!0,t[o]=!0,lodash_1.each(e.predecessors(o),i),delete r[o],n.push(o))})),lodash_1.size(t)!==e.nodeCount())throw new CycleException;return n}function CycleException(){}topsort.CycleException=CycleException,CycleException.prototype=new Error;var isAcyclic_1=isAcyclic;function isAcyclic(e){try{topsort_1(e)}catch(e){if(e instanceof topsort_1.CycleException)return!1;throw e}return!0}var dfs_1=dfs;function dfs(e,t,r){lodash_1.isArray(t)||(t=[t]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],o={};return lodash_1.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);doDfs(e,t,"post"===r,o,n,i)})),i}function doDfs(e,t,r,n,i,o){lodash_1.has(n,t)||(n[t]=!0,r||o.push(t),lodash_1.each(i(t),(function(t){doDfs(e,t,r,n,i,o)})),r&&o.push(t))}var postorder_1=postorder;function postorder(e,t){return dfs_1(e,t,"post")}var preorder_1=preorder;function preorder(e,t){return dfs_1(e,t,"pre")}var prim_1=prim;function prim(e,t){var r,n=new graph,i={},o=new priorityQueue;function a(e){var n=e.v===r?e.w:e.v,a=o.priority(n);if(void 0!==a){var s=t(e);s<a&&(i[n]=r,o.decrease(n,s))}}if(0===e.nodeCount())return n;lodash_1.each(e.nodes(),(function(e){o.add(e,Number.POSITIVE_INFINITY),n.setNode(e)})),o.decrease(e.nodes()[0],0);for(var s=!1;o.size()>0;){if(r=o.removeMin(),lodash_1.has(i,r))n.setEdge(r,i[r]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(r).forEach(a)}return n}var alg={components:components_1,dijkstra:dijkstra_1,dijkstraAll:dijkstraAll_1,findCycles:findCycles_1,floydWarshall:floydWarshall_1,isAcyclic:isAcyclic_1,postorder:postorder_1,preorder:preorder_1,prim:prim_1,tarjan:tarjan_1,topsort:topsort_1},graphlib={Graph:lib.Graph,json:json,alg:alg,version:lib.version},graphlib$1;if("function"==typeof commonjsRequire)try{graphlib$1=graphlib}catch(e){}graphlib$1||(graphlib$1=window.graphlib);var graphlib_1=graphlib$1,CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$2=4;function cloneDeep(e){return _baseClone(e,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$2)}var cloneDeep_1=cloneDeep;function isIterateeCall(e,t,r){if(!isObject_1(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike_1(r)&&_isIndex(t,r.length):"string"==n&&t in r)&&eq_1(r[t],e)}var _isIterateeCall=isIterateeCall,objectProto$i=Object.prototype,hasOwnProperty$e=objectProto$i.hasOwnProperty,defaults$h=_baseRest((function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&_isIterateeCall(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],a=keysIn_1(o),s=-1,l=a.length;++s<l;){var u=a[s],c=e[u];(void 0===c||eq_1(c,objectProto$i[u])&&!hasOwnProperty$e.call(e,u))&&(e[u]=o[u])}return e})),defaults_1=defaults$h;function createFind(e){return function(t,r,n){var i=Object(t);if(!isArrayLike_1(t)){var o=_baseIteratee(r);t=keys_1(t),r=function(e){return o(i[e],e,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}var _createFind=createFind,NAN$1=NaN,reTrim$1=/^\s+|\s+$/g,reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i,reIsBinary$1=/^0b[01]+$/i,reIsOctal$1=/^0o[0-7]+$/i,freeParseInt$1=parseInt;function toNumber$1(e){if("number"==typeof e)return e;if(isSymbol_1(e))return NAN$1;if(isObject_1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject_1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim$1,"");var r=reIsBinary$1.test(e);return r||reIsOctal$1.test(e)?freeParseInt$1(e.slice(2),r?2:8):reIsBadHex$1.test(e)?NAN$1:+e}var toNumber_1=toNumber$1,INFINITY$3=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){return e?(e=toNumber_1(e))===INFINITY$3||e===-INFINITY$3?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}var toFinite_1=toFinite;function toInteger(e){var t=toFinite_1(e),r=t%1;return t==t?r?t-r:t:0}var toInteger_1=toInteger,nativeMax$2=Math.max;function findIndex(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:toInteger_1(r);return i<0&&(i=nativeMax$2(n+i,0)),_baseFindIndex(e,_baseIteratee(t),i)}var findIndex_1=findIndex,find=_createFind(findIndex_1),find_1=find;function flatten(e){return(null==e?0:e.length)?_baseFlatten(e,1):[]}var flatten_1=flatten;function forIn(e,t){return null==e?e:_baseFor(e,_castFunction(t),keysIn_1)}var forIn_1=forIn;function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var last_1=last;function mapValues(e,t){var r={};return t=_baseIteratee(t),_baseForOwn(e,(function(e,n,i){_baseAssignValue(r,n,t(e,n,i))})),r}var mapValues_1=mapValues;function baseExtremum(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(null!=a&&(void 0===s?a==a&&!isSymbol_1(a):r(a,s)))var s=a,l=o}return l}var _baseExtremum=baseExtremum;function baseGt(e,t){return e>t}var _baseGt=baseGt;function max$1(e){return e&&e.length?_baseExtremum(e,identity_1,_baseGt):void 0}var max_1=max$1;function assignMergeValue(e,t,r){(void 0!==r&&!eq_1(e[t],r)||void 0===r&&!(t in e))&&_baseAssignValue(e,t,r)}var _assignMergeValue=assignMergeValue,objectTag$4="[object Object]",funcProto$2=Function.prototype,objectProto$j=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$f=objectProto$j.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(e){if(!isObjectLike_1(e)||_baseGetTag(e)!=objectTag$4)return!1;var t=_getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$f.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var isPlainObject_1=isPlainObject;function safeGet(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _safeGet=safeGet;function toPlainObject(e){return _copyObject(e,keysIn_1(e))}var toPlainObject_1=toPlainObject;function baseMergeDeep(e,t,r,n,i,o,a){var s=_safeGet(e,r),l=_safeGet(t,r),u=a.get(l);if(u)_assignMergeValue(e,r,u);else{var c=o?o(s,l,r+"",e,t,a):void 0,h=void 0===c;if(h){var d=isArray_1(l),f=!d&&isBuffer_1(l),p=!d&&!f&&isTypedArray_1(l);c=l,d||f||p?isArray_1(s)?c=s:isArrayLikeObject_1(s)?c=_copyArray(s):f?(h=!1,c=_cloneBuffer(l,!0)):p?(h=!1,c=_cloneTypedArray(l,!0)):c=[]:isPlainObject_1(l)||isArguments_1(l)?(c=s,isArguments_1(s)?c=toPlainObject_1(s):isObject_1(s)&&!isFunction_1(s)||(c=_initCloneObject(l))):h=!1}h&&(a.set(l,c),i(c,l,n,o,a),a.delete(l)),_assignMergeValue(e,r,c)}}var _baseMergeDeep=baseMergeDeep;function baseMerge(e,t,r,n,i){e!==t&&_baseFor(t,(function(o,a){if(i||(i=new _Stack),isObject_1(o))_baseMergeDeep(e,t,a,r,baseMerge,n,i);else{var s=n?n(_safeGet(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),_assignMergeValue(e,a,s)}}),keysIn_1)}var _baseMerge=baseMerge;function createAssigner(e){return _baseRest((function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&_isIterateeCall(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t}))}var _createAssigner=createAssigner,merge=_createAssigner((function(e,t,r){_baseMerge(e,t,r)})),merge_1=merge;function baseLt(e,t){return e<t}var _baseLt=baseLt;function min$1(e){return e&&e.length?_baseExtremum(e,identity_1,_baseLt):void 0}var min_1=min$1;function minBy(e,t){return e&&e.length?_baseExtremum(e,_baseIteratee(t),_baseLt):void 0}var minBy_1=minBy,now$1=function(){return _root.Date.now()},now_1=now$1;function baseSet(e,t,r,n){if(!isObject_1(e))return e;for(var i=-1,o=(t=_castPath(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=_toKey(t[i]),u=r;if(i!=a){var c=s[l];void 0===(u=n?n(c,l,s):void 0)&&(u=isObject_1(c)?c:_isIndex(t[i+1])?[]:{})}_assignValue(s,l,u),s=s[l]}return e}var _baseSet=baseSet;function basePickBy(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=_baseGet(e,a);r(s,a)&&_baseSet(o,_castPath(a,e),s)}return o}var _basePickBy=basePickBy;function basePick(e,t){return _basePickBy(e,t,(function(t,r){return hasIn_1(e,r)}))}var _basePick=basePick;function flatRest(e){return _setToString(_overRest(e,void 0,flatten_1),e+"")}var _flatRest=flatRest,pick=_flatRest((function(e,t){return null==e?{}:_basePick(e,t)})),pick_1=pick,nativeCeil=Math.ceil,nativeMax$3=Math.max;function baseRange(e,t,r,n){for(var i=-1,o=nativeMax$3(nativeCeil((t-e)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=r;return a}var _baseRange=baseRange;function createRange(e){return function(t,r,n){return n&&"number"!=typeof n&&_isIterateeCall(t,r,n)&&(r=n=void 0),t=toFinite_1(t),void 0===r?(r=t,t=0):r=toFinite_1(r),n=void 0===n?t<r?1:-1:toFinite_1(n),_baseRange(t,r,n,e)}}var _createRange=createRange,range=_createRange(),range_1=range;function baseSortBy(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var _baseSortBy=baseSortBy;function compareAscending(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,o=isSymbol_1(e),a=void 0!==t,s=null===t,l=t==t,u=isSymbol_1(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||n&&a&&l||!r&&l||!i)return 1;if(!n&&!o&&!u&&e<t||u&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!l)return-1}return 0}var _compareAscending=compareAscending;function compareMultiple(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var l=_compareAscending(i[n],o[n]);if(l)return n>=s?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}var _compareMultiple=compareMultiple;function baseOrderBy(e,t,r){var n=-1;t=_arrayMap(t.length?t:[identity_1],_baseUnary(_baseIteratee));var i=_baseMap(e,(function(e,r,i){return{criteria:_arrayMap(t,(function(t){return t(e)})),index:++n,value:e}}));return _baseSortBy(i,(function(e,t){return _compareMultiple(e,t,r)}))}var _baseOrderBy=baseOrderBy,sortBy=_baseRest((function(e,t){if(null==e)return[];var r=t.length;return r>1&&_isIterateeCall(e,t[0],t[1])?t=[]:r>2&&_isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),_baseOrderBy(e,_baseFlatten(t,1),[])})),sortBy_1=sortBy,idCounter=0;function uniqueId(e){var t=++idCounter;return toString_1(e)+t}var uniqueId_1=uniqueId;function baseZipObject(e,t,r){for(var n=-1,i=e.length,o=t.length,a={};++n<i;){var s=n<o?t[n]:void 0;r(a,e[n],s)}return a}var _baseZipObject=baseZipObject;function zipObject(e,t){return _baseZipObject(e||[],t||[],_assignValue)}var zipObject_1=zipObject,lodash$1;if("function"==typeof commonjsRequire)try{lodash$1={cloneDeep:cloneDeep_1,constant:constant_1,defaults:defaults_1,each:each,filter:filter_1,find:find_1,flatten:flatten_1,forEach:forEach_1,forIn:forIn_1,has:has_1,isUndefined:isUndefined_1,last:last_1,map:map_1,mapValues:mapValues_1,max:max_1,merge:merge_1,min:min_1,minBy:minBy_1,now:now_1,pick:pick_1,range:range_1,reduce:reduce_1,sortBy:sortBy_1,uniqueId:uniqueId_1,values:values_1,zipObject:zipObject_1}}catch(e){}lodash$1||(lodash$1=window._);var lodash_1$1=lodash$1,list=List;function List(){var e={};e._next=e._prev=e,this._sentinel=e}function unlink(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function filterOutLinks(e,t){if("_next"!==e&&"_prev"!==e)return t}List.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return unlink(t),t},List.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&unlink(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},List.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,filterOutLinks)),r=r._prev;return"["+e.join(", ")+"]"};var Graph$1=graphlib_1.Graph,greedyFas=greedyFAS,DEFAULT_WEIGHT_FN=lodash_1$1.constant(1);function greedyFAS(e,t){if(e.nodeCount()<=1)return[];var r=buildState(e,t||DEFAULT_WEIGHT_FN),n=doGreedyFAS(r.graph,r.buckets,r.zeroIdx);return lodash_1$1.flatten(lodash_1$1.map(n,(function(t){return e.outEdges(t.v,t.w)})),!0)}function doGreedyFAS(e,t,r){for(var n,i=[],o=t[t.length-1],a=t[0];e.nodeCount();){for(;n=a.dequeue();)removeNode(e,t,r,n);for(;n=o.dequeue();)removeNode(e,t,r,n);if(e.nodeCount())for(var s=t.length-2;s>0;--s)if(n=t[s].dequeue()){i=i.concat(removeNode(e,t,r,n,!0));break}}return i}function removeNode(e,t,r,n,i){var o=i?[]:void 0;return lodash_1$1.forEach(e.inEdges(n.v),(function(n){var a=e.edge(n),s=e.node(n.v);i&&o.push({v:n.v,w:n.w}),s.out-=a,assignBucket(t,r,s)})),lodash_1$1.forEach(e.outEdges(n.v),(function(n){var i=e.edge(n),o=n.w,a=e.node(o);a.in-=i,assignBucket(t,r,a)})),e.removeNode(n.v),o}function buildState(e,t){var r=new Graph$1,n=0,i=0;lodash_1$1.forEach(e.nodes(),(function(e){r.setNode(e,{v:e,in:0,out:0})})),lodash_1$1.forEach(e.edges(),(function(e){var o=r.edge(e.v,e.w)||0,a=t(e),s=o+a;r.setEdge(e.v,e.w,s),i=Math.max(i,r.node(e.v).out+=a),n=Math.max(n,r.node(e.w).in+=a)}));var o=lodash_1$1.range(i+n+3).map((function(){return new list})),a=n+1;return lodash_1$1.forEach(r.nodes(),(function(e){assignBucket(o,a,r.node(e))})),{graph:r,buckets:o,zeroIdx:a}}function assignBucket(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}var acyclic={run:run,undo:undo};function run(e){var t="greedy"===e.graph().acyclicer?greedyFas(e,function(e){return function(t){return e.edge(t).weight}}(e)):dfsFAS(e);lodash_1$1.forEach(t,(function(t){var r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,lodash_1$1.uniqueId("rev"))}))}function dfsFAS(e){var t=[],r={},n={};return lodash_1$1.forEach(e.nodes(),(function i(o){lodash_1$1.has(n,o)||(n[o]=!0,r[o]=!0,lodash_1$1.forEach(e.outEdges(o),(function(e){lodash_1$1.has(r,e.w)?t.push(e):i(e.w)})),delete r[o])})),t}function undo(e){lodash_1$1.forEach(e.edges(),(function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}}))}var Graph$2=graphlib_1.Graph,util$1={addDummyNode:addDummyNode,simplify:simplify,asNonCompoundGraph:asNonCompoundGraph,successorWeights:successorWeights,predecessorWeights:predecessorWeights,intersectRect:intersectRect,buildLayerMatrix:buildLayerMatrix,normalizeRanks:normalizeRanks,removeEmptyRanks:removeEmptyRanks,addBorderNode:addBorderNode,maxRank:maxRank,partition:partition,time:time,notime:notime};function addDummyNode(e,t,r,n){var i;do{i=lodash_1$1.uniqueId(n)}while(e.hasNode(i));return r.dummy=t,e.setNode(i,r),i}function simplify(e){var t=(new Graph$2).setGraph(e.graph());return lodash_1$1.forEach(e.nodes(),(function(r){t.setNode(r,e.node(r))})),lodash_1$1.forEach(e.edges(),(function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})})),t}function asNonCompoundGraph(e){var t=new Graph$2({multigraph:e.isMultigraph()}).setGraph(e.graph());return lodash_1$1.forEach(e.nodes(),(function(r){e.children(r).length||t.setNode(r,e.node(r))})),lodash_1$1.forEach(e.edges(),(function(r){t.setEdge(r,e.edge(r))})),t}function successorWeights(e){var t=lodash_1$1.map(e.nodes(),(function(t){var r={};return lodash_1$1.forEach(e.outEdges(t),(function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight})),r}));return lodash_1$1.zipObject(e.nodes(),t)}function predecessorWeights(e){var t=lodash_1$1.map(e.nodes(),(function(t){var r={};return lodash_1$1.forEach(e.inEdges(t),(function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight})),r}));return lodash_1$1.zipObject(e.nodes(),t)}function intersectRect(e,t){var r,n,i=e.x,o=e.y,a=t.x-i,s=t.y-o,l=e.width/2,u=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),r=u*a/s,n=u):(a<0&&(l=-l),r=l,n=l*s/a),{x:i+r,y:o+n}}function buildLayerMatrix(e){var t=lodash_1$1.map(lodash_1$1.range(maxRank(e)+1),(function(){return[]}));return lodash_1$1.forEach(e.nodes(),(function(r){var n=e.node(r),i=n.rank;lodash_1$1.isUndefined(i)||(t[i][n.order]=r)})),t}function normalizeRanks(e){var t=lodash_1$1.min(lodash_1$1.map(e.nodes(),(function(t){return e.node(t).rank})));lodash_1$1.forEach(e.nodes(),(function(r){var n=e.node(r);lodash_1$1.has(n,"rank")&&(n.rank-=t)}))}function removeEmptyRanks(e){var t=lodash_1$1.min(lodash_1$1.map(e.nodes(),(function(t){return e.node(t).rank}))),r=[];lodash_1$1.forEach(e.nodes(),(function(n){var i=e.node(n).rank-t;r[i]||(r[i]=[]),r[i].push(n)}));var n=0,i=e.graph().nodeRankFactor;lodash_1$1.forEach(r,(function(t,r){lodash_1$1.isUndefined(t)&&r%i!=0?--n:n&&lodash_1$1.forEach(t,(function(t){e.node(t).rank+=n}))}))}function addBorderNode(e,t,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),addDummyNode(e,"border",i,t)}function maxRank(e){return lodash_1$1.max(lodash_1$1.map(e.nodes(),(function(t){var r=e.node(t).rank;if(!lodash_1$1.isUndefined(r))return r})))}function partition(e,t){var r={lhs:[],rhs:[]};return lodash_1$1.forEach(e,(function(e){t(e)?r.lhs.push(e):r.rhs.push(e)})),r}function time(e,t){var r=lodash_1$1.now();try{return t()}finally{console.log(e+" time: "+(lodash_1$1.now()-r)+"ms")}}function notime(e,t){return t()}var normalize$1={run:run$1,undo:undo$1};function run$1(e){e.graph().dummyChains=[],lodash_1$1.forEach(e.edges(),(function(t){normalizeEdge(e,t)}))}function normalizeEdge(e,t){var r=t.v,n=e.node(r).rank,i=t.w,o=e.node(i).rank,a=t.name,s=e.edge(t),l=s.labelRank;if(o!==n+1){var u,c,h;for(e.removeEdge(t),h=0,++n;n<o;++h,++n)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:n},u=util$1.addDummyNode(e,"edge",c,"_d"),n===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(r,u,{weight:s.weight},a),0===h&&e.graph().dummyChains.push(u),r=u;e.setEdge(r,i,{weight:s.weight},a)}}function undo$1(e){lodash_1$1.forEach(e.graph().dummyChains,(function(t){var r,n=e.node(t),i=n.edgeLabel;for(e.setEdge(n.edgeObj,i);n.dummy;)r=e.successors(t)[0],e.removeNode(t),i.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),t=r,n=e.node(t)}))}var util$2={longestPath:longestPath,slack:slack};function longestPath(e){var t={};lodash_1$1.forEach(e.sources(),(function r(n){var i=e.node(n);if(lodash_1$1.has(t,n))return i.rank;t[n]=!0;var o=lodash_1$1.min(lodash_1$1.map(e.outEdges(n),(function(t){return r(t.w)-e.edge(t).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o}))}function slack(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Graph$3=graphlib_1.Graph,slack$1=util$2.slack,feasibleTree_1=feasibleTree;function feasibleTree(e){var t,r,n=new Graph$3({directed:!1}),i=e.nodes()[0],o=e.nodeCount();for(n.setNode(i,{});tightTree(n,e)<o;)t=findMinSlackEdge(n,e),r=n.hasNode(t.v)?slack$1(e,t):-slack$1(e,t),shiftRanks(n,e,r);return n}function tightTree(e,t){return lodash_1$1.forEach(e.nodes(),(function r(n){lodash_1$1.forEach(t.nodeEdges(n),(function(i){var o=i.v,a=n===o?i.w:o;e.hasNode(a)||slack$1(t,i)||(e.setNode(a,{}),e.setEdge(n,a,{}),r(a))}))})),e.nodeCount()}function findMinSlackEdge(e,t){return lodash_1$1.minBy(t.edges(),(function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return slack$1(t,r)}))}function shiftRanks(e,t,r){lodash_1$1.forEach(e.nodes(),(function(e){t.node(e).rank+=r}))}var slack$2=util$2.slack,initRank=util$2.longestPath,preorder$1=graphlib_1.alg.preorder,postorder$1=graphlib_1.alg.postorder,simplify$1=util$1.simplify,networkSimplex_1=networkSimplex;function networkSimplex(e){e=simplify$1(e),initRank(e);var t,r=feasibleTree_1(e);for(initLowLimValues(r),initCutValues(r,e);t=leaveEdge(r);)exchangeEdges(r,e,t,enterEdge(r,e,t))}function initCutValues(e,t){var r=postorder$1(e,e.nodes());r=r.slice(0,r.length-1),lodash_1$1.forEach(r,(function(r){assignCutValue(e,t,r)}))}function assignCutValue(e,t,r){var n=e.node(r).parent;e.edge(r,n).cutvalue=calcCutValue(e,t,r)}function calcCutValue(e,t,r){var n=e.node(r).parent,i=!0,o=t.edge(r,n),a=0;return o||(i=!1,o=t.edge(n,r)),a=o.weight,lodash_1$1.forEach(t.nodeEdges(r),(function(o){var s=o.v===r,l=s?o.w:o.v;if(l!==n){var u=s===i,c=t.edge(o).weight;if(a+=u?c:-c,isTreeEdge(e,r,l)){var h=e.edge(r,l).cutvalue;a+=u?-h:h}}})),a}function initLowLimValues(e,t){arguments.length<2&&(t=e.nodes()[0]),dfsAssignLowLim(e,{},1,t)}function dfsAssignLowLim(e,t,r,n,i){var o=r,a=e.node(n);return t[n]=!0,lodash_1$1.forEach(e.neighbors(n),(function(i){lodash_1$1.has(t,i)||(r=dfsAssignLowLim(e,t,r,i,n))})),a.low=o,a.lim=r++,i?a.parent=i:delete a.parent,r}function leaveEdge(e){return lodash_1$1.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function enterEdge(e,t,r){var n=r.v,i=r.w;t.hasEdge(n,i)||(n=r.w,i=r.v);var o=e.node(n),a=e.node(i),s=o,l=!1;o.lim>a.lim&&(s=a,l=!0);var u=lodash_1$1.filter(t.edges(),(function(t){return l===isDescendant(e,e.node(t.v),s)&&l!==isDescendant(e,e.node(t.w),s)}));return lodash_1$1.minBy(u,(function(e){return slack$2(t,e)}))}function exchangeEdges(e,t,r,n){var i=r.v,o=r.w;e.removeEdge(i,o),e.setEdge(n.v,n.w,{}),initLowLimValues(e),initCutValues(e,t),updateRanks(e,t)}function updateRanks(e,t){var r=lodash_1$1.find(e.nodes(),(function(e){return!t.node(e).parent})),n=preorder$1(e,r);n=n.slice(1),lodash_1$1.forEach(n,(function(r){var n=e.node(r).parent,i=t.edge(r,n),o=!1;i||(i=t.edge(n,r),o=!0),t.node(r).rank=t.node(n).rank+(o?i.minlen:-i.minlen)}))}function isTreeEdge(e,t,r){return e.hasEdge(t,r)}function isDescendant(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}networkSimplex.initLowLimValues=initLowLimValues,networkSimplex.initCutValues=initCutValues,networkSimplex.calcCutValue=calcCutValue,networkSimplex.leaveEdge=leaveEdge,networkSimplex.enterEdge=enterEdge,networkSimplex.exchangeEdges=exchangeEdges;var longestPath$1=util$2.longestPath,rank_1=rank;function rank(e){switch(e.graph().ranker){case"network-simplex":networkSimplexRanker(e);break;case"tight-tree":tightTreeRanker(e);break;case"longest-path":longestPathRanker(e);break;default:networkSimplexRanker(e)}}var longestPathRanker=longestPath$1;function tightTreeRanker(e){longestPath$1(e),feasibleTree_1(e)}function networkSimplexRanker(e){networkSimplex_1(e)}var parentDummyChains_1=parentDummyChains;function parentDummyChains(e){var t=postorder$2(e);lodash_1$1.forEach(e.graph().dummyChains,(function(r){for(var n=e.node(r),i=n.edgeObj,o=findPath(e,t,i.v,i.w),a=o.path,s=o.lca,l=0,u=a[l],c=!0;r!==i.w;){if(n=e.node(r),c){for(;(u=a[l])!==s&&e.node(u).maxRank<n.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=n.rank;)l++;u=a[l]}e.setParent(r,u),r=e.successors(r)[0]}}))}function findPath(e,t,r,n){var i,o,a=[],s=[],l=Math.min(t[r].low,t[n].low),u=Math.max(t[r].lim,t[n].lim);i=r;do{i=e.parent(i),a.push(i)}while(i&&(t[i].low>l||u>t[i].lim));for(o=i,i=n;(i=e.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}function postorder$2(e){var t={},r=0;return lodash_1$1.forEach(e.children(),(function n(i){var o=r;lodash_1$1.forEach(e.children(i),n),t[i]={low:o,lim:r++}})),t}var nestingGraph={run:run$2,cleanup:cleanup};function run$2(e){var t=util$1.addDummyNode(e,"root",{},"_root"),r=treeDepths(e),n=lodash_1$1.max(lodash_1$1.values(r))-1,i=2*n+1;e.graph().nestingRoot=t,lodash_1$1.forEach(e.edges(),(function(t){e.edge(t).minlen*=i}));var o=sumWeights(e)+1;lodash_1$1.forEach(e.children(),(function(a){dfs$1(e,t,i,o,n,r,a)})),e.graph().nodeRankFactor=i}function dfs$1(e,t,r,n,i,o,a){var s=e.children(a);if(s.length){var l=util$1.addBorderNode(e,"_bt"),u=util$1.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(l,a),c.borderTop=l,e.setParent(u,a),c.borderBottom=u,lodash_1$1.forEach(s,(function(s){dfs$1(e,t,r,n,i,o,s);var c=e.node(s),h=c.borderTop?c.borderTop:s,d=c.borderBottom?c.borderBottom:s,f=c.borderTop?n:2*n,p=h!==d?1:i-o[a]+1;e.setEdge(l,h,{weight:f,minlen:p,nestingEdge:!0}),e.setEdge(d,u,{weight:f,minlen:p,nestingEdge:!0})})),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:i+o[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:r})}function treeDepths(e){var t={};return lodash_1$1.forEach(e.children(),(function(r){!function r(n,i){var o=e.children(n);o&&o.length&&lodash_1$1.forEach(o,(function(e){r(e,i+1)})),t[n]=i}(r,1)})),t}function sumWeights(e){return lodash_1$1.reduce(e.edges(),(function(t,r){return t+e.edge(r).weight}),0)}function cleanup(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,lodash_1$1.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}var addBorderSegments_1=addBorderSegments;function addBorderSegments(e){lodash_1$1.forEach(e.children(),(function t(r){var n=e.children(r),i=e.node(r);if(n.length&&lodash_1$1.forEach(n,t),lodash_1$1.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)addBorderNode$1(e,"borderLeft","_bl",r,i,o),addBorderNode$1(e,"borderRight","_br",r,i,o)}}))}function addBorderNode$1(e,t,r,n,i,o){var a={width:0,height:0,rank:o,borderType:t},s=i[t][o-1],l=util$1.addDummyNode(e,"border",a,r);i[t][o]=l,e.setParent(l,n),s&&e.setEdge(s,l,{weight:1})}var coordinateSystem={adjust:adjust,undo:undo$2};function adjust(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||swapWidthHeight(e)}function undo$2(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||reverseY(e),"lr"!==t&&"rl"!==t||(swapXY(e),swapWidthHeight(e))}function swapWidthHeight(e){lodash_1$1.forEach(e.nodes(),(function(t){swapWidthHeightOne(e.node(t))})),lodash_1$1.forEach(e.edges(),(function(t){swapWidthHeightOne(e.edge(t))}))}function swapWidthHeightOne(e){var t=e.width;e.width=e.height,e.height=t}function reverseY(e){lodash_1$1.forEach(e.nodes(),(function(t){reverseYOne(e.node(t))})),lodash_1$1.forEach(e.edges(),(function(t){var r=e.edge(t);lodash_1$1.forEach(r.points,reverseYOne),lodash_1$1.has(r,"y")&&reverseYOne(r)}))}function reverseYOne(e){e.y=-e.y}function swapXY(e){lodash_1$1.forEach(e.nodes(),(function(t){swapXYOne(e.node(t))})),lodash_1$1.forEach(e.edges(),(function(t){var r=e.edge(t);lodash_1$1.forEach(r.points,swapXYOne),lodash_1$1.has(r,"x")&&swapXYOne(r)}))}function swapXYOne(e){var t=e.x;e.x=e.y,e.y=t}var initOrder_1=initOrder;function initOrder(e){var t={},r=lodash_1$1.filter(e.nodes(),(function(t){return!e.children(t).length})),n=lodash_1$1.max(lodash_1$1.map(r,(function(t){return e.node(t).rank}))),i=lodash_1$1.map(lodash_1$1.range(n+1),(function(){return[]}));var o=lodash_1$1.sortBy(r,(function(t){return e.node(t).rank}));return lodash_1$1.forEach(o,(function r(n){if(!lodash_1$1.has(t,n)){t[n]=!0;var o=e.node(n);i[o.rank].push(n),lodash_1$1.forEach(e.successors(n),r)}})),i}var crossCount_1=crossCount;function crossCount(e,t){for(var r=0,n=1;n<t.length;++n)r+=twoLayerCrossCount(e,t[n-1],t[n]);return r}function twoLayerCrossCount(e,t,r){for(var n=lodash_1$1.zipObject(r,lodash_1$1.map(r,(function(e,t){return t}))),i=lodash_1$1.flatten(lodash_1$1.map(t,(function(t){return lodash_1$1.sortBy(lodash_1$1.map(e.outEdges(t),(function(t){return{pos:n[t.w],weight:e.edge(t).weight}})),"pos")})),!0),o=1;o<r.length;)o<<=1;var a=2*o-1;o-=1;var s=lodash_1$1.map(new Array(a),(function(){return 0})),l=0;return lodash_1$1.forEach(i.forEach((function(e){var t=e.pos+o;s[t]+=e.weight;for(var r=0;t>0;)t%2&&(r+=s[t+1]),s[t=t-1>>1]+=e.weight;l+=e.weight*r}))),l}var barycenter_1=barycenter;function barycenter(e,t){return lodash_1$1.map(t,(function(t){var r=e.inEdges(t);if(r.length){var n=lodash_1$1.reduce(r,(function(t,r){var n=e.edge(r),i=e.node(r.v);return{sum:t.sum+n.weight*i.order,weight:t.weight+n.weight}}),{sum:0,weight:0});return{v:t,barycenter:n.sum/n.weight,weight:n.weight}}return{v:t}}))}var resolveConflicts_1=resolveConflicts;function resolveConflicts(e,t){var r={};return lodash_1$1.forEach(e,(function(e,t){var n=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};lodash_1$1.isUndefined(e.barycenter)||(n.barycenter=e.barycenter,n.weight=e.weight)})),lodash_1$1.forEach(t.edges(),(function(e){var t=r[e.v],n=r[e.w];lodash_1$1.isUndefined(t)||lodash_1$1.isUndefined(n)||(n.indegree++,t.out.push(r[e.w]))})),doResolveConflicts(lodash_1$1.filter(r,(function(e){return!e.indegree})))}function doResolveConflicts(e){var t=[];function r(e){return function(t){t.merged||(lodash_1$1.isUndefined(t.barycenter)||lodash_1$1.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&mergeEntries(e,t)}}function n(t){return function(r){r.in.push(t),0==--r.indegree&&e.push(r)}}for(;e.length;){var i=e.pop();t.push(i),lodash_1$1.forEach(i.in.reverse(),r(i)),lodash_1$1.forEach(i.out,n(i))}return lodash_1$1.map(lodash_1$1.filter(t,(function(e){return!e.merged})),(function(e){return lodash_1$1.pick(e,["vs","i","barycenter","weight"])}))}function mergeEntries(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}var sort_1=sort;function sort(e,t){var r=util$1.partition(e,(function(e){return lodash_1$1.has(e,"barycenter")})),n=r.lhs,i=lodash_1$1.sortBy(r.rhs,(function(e){return-e.i})),o=[],a=0,s=0,l=0;n.sort(compareWithBias(!!t)),l=consumeUnsortable(o,i,l),lodash_1$1.forEach(n,(function(e){l+=e.vs.length,o.push(e.vs),a+=e.barycenter*e.weight,s+=e.weight,l=consumeUnsortable(o,i,l)}));var u={vs:lodash_1$1.flatten(o,!0)};return s&&(u.barycenter=a/s,u.weight=s),u}function consumeUnsortable(e,t,r){for(var n;t.length&&(n=lodash_1$1.last(t)).i<=r;)t.pop(),e.push(n.vs),r++;return r}function compareWithBias(e){return function(t,r){return t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}}var sortSubgraph_1=sortSubgraph;function sortSubgraph(e,t,r,n){var i=e.children(t),o=e.node(t),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,l={};a&&(i=lodash_1$1.filter(i,(function(e){return e!==a&&e!==s})));var u=barycenter_1(e,i);lodash_1$1.forEach(u,(function(t){if(e.children(t.v).length){var i=sortSubgraph(e,t.v,r,n);l[t.v]=i,lodash_1$1.has(i,"barycenter")&&mergeBarycenters(t,i)}}));var c=resolveConflicts_1(u,r);expandSubgraphs(c,l);var h=sort_1(c,n);if(a&&(h.vs=lodash_1$1.flatten([a,h.vs,s],!0),e.predecessors(a).length)){var d=e.node(e.predecessors(a)[0]),f=e.node(e.predecessors(s)[0]);lodash_1$1.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+f.order)/(h.weight+2),h.weight+=2}return h}function expandSubgraphs(e,t){lodash_1$1.forEach(e,(function(e){e.vs=lodash_1$1.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}function mergeBarycenters(e,t){lodash_1$1.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Graph$4=graphlib_1.Graph,buildLayerGraph_1=buildLayerGraph;function buildLayerGraph(e,t,r){var n=createRootNode(e),i=new Graph$4({compound:!0}).setGraph({root:n}).setDefaultNodeLabel((function(t){return e.node(t)}));return lodash_1$1.forEach(e.nodes(),(function(o){var a=e.node(o),s=e.parent(o);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||n),lodash_1$1.forEach(e[r](o),(function(t){var r=t.v===o?t.w:t.v,n=i.edge(r,o),a=lodash_1$1.isUndefined(n)?0:n.weight;i.setEdge(r,o,{weight:e.edge(t).weight+a})})),lodash_1$1.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))})),i}function createRootNode(e){for(var t;e.hasNode(t=lodash_1$1.uniqueId("_root")););return t}var addSubgraphConstraints_1=addSubgraphConstraints;function addSubgraphConstraints(e,t,r){var n,i={};lodash_1$1.forEach(r,(function(r){for(var o,a,s=e.parent(r);s;){if((o=e.parent(s))?(a=i[o],i[o]=s):(a=n,n=s),a&&a!==s)return void t.setEdge(a,s);s=o}}))}var Graph$5=graphlib_1.Graph,order_1=order;function order(e){var t=util$1.maxRank(e),r=buildLayerGraphs(e,lodash_1$1.range(1,t+1),"inEdges"),n=buildLayerGraphs(e,lodash_1$1.range(t-1,-1,-1),"outEdges"),i=initOrder_1(e);assignOrder(e,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){sweepLayerGraphs(s%2?r:n,s%4>=2),i=util$1.buildLayerMatrix(e);var u=crossCount_1(e,i);u<a&&(l=0,o=lodash_1$1.cloneDeep(i),a=u)}assignOrder(e,o)}function buildLayerGraphs(e,t,r){return lodash_1$1.map(t,(function(t){return buildLayerGraph_1(e,t,r)}))}function sweepLayerGraphs(e,t){var r=new Graph$5;lodash_1$1.forEach(e,(function(e){var n=e.graph().root,i=sortSubgraph_1(e,n,r,t);lodash_1$1.forEach(i.vs,(function(t,r){e.node(t).order=r})),addSubgraphConstraints_1(e,r,i.vs)}))}function assignOrder(e,t){lodash_1$1.forEach(t,(function(t){lodash_1$1.forEach(t,(function(t,r){e.node(t).order=r}))}))}var Graph$6=graphlib_1.Graph,bk={positionX:positionX,findType1Conflicts:findType1Conflicts,findType2Conflicts:findType2Conflicts,addConflict:addConflict,hasConflict:hasConflict,verticalAlignment:verticalAlignment,horizontalCompaction:horizontalCompaction,alignCoordinates:alignCoordinates,findSmallestWidthAlignment:findSmallestWidthAlignment,balance:balance};function findType1Conflicts(e,t){var r={};return lodash_1$1.reduce(t,(function(t,n){var i=0,o=0,a=t.length,s=lodash_1$1.last(n);return lodash_1$1.forEach(n,(function(t,l){var u=findOtherInnerSegmentNode(e,t),c=u?e.node(u).order:a;(u||t===s)&&(lodash_1$1.forEach(n.slice(o,l+1),(function(t){lodash_1$1.forEach(e.predecessors(t),(function(n){var o=e.node(n),a=o.order;!(a<i||c<a)||o.dummy&&e.node(t).dummy||addConflict(r,n,t)}))})),o=l+1,i=c)})),n})),r}function findType2Conflicts(e,t){var r={};function n(t,n,i,o,a){var s;lodash_1$1.forEach(lodash_1$1.range(n,i),(function(n){s=t[n],e.node(s).dummy&&lodash_1$1.forEach(e.predecessors(s),(function(t){var n=e.node(t);n.dummy&&(n.order<o||n.order>a)&&addConflict(r,t,s)}))}))}return lodash_1$1.reduce(t,(function(t,r){var i,o=-1,a=0;return lodash_1$1.forEach(r,(function(s,l){if("border"===e.node(s).dummy){var u=e.predecessors(s);u.length&&(i=e.node(u[0]).order,n(r,a,l,o,i),a=l,o=i)}n(r,a,r.length,i,t.length)})),r})),r}function findOtherInnerSegmentNode(e,t){if(e.node(t).dummy)return lodash_1$1.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}function addConflict(e,t,r){if(t>r){var n=t;t=r,r=n}var i=e[t];i||(e[t]=i={}),i[r]=!0}function hasConflict(e,t,r){if(t>r){var n=t;t=r,r=n}return lodash_1$1.has(e[t],r)}function verticalAlignment(e,t,r,n){var i={},o={},a={};return lodash_1$1.forEach(t,(function(e){lodash_1$1.forEach(e,(function(e,t){i[e]=e,o[e]=e,a[e]=t}))})),lodash_1$1.forEach(t,(function(e){var t=-1;lodash_1$1.forEach(e,(function(e){var s=n(e);if(s.length)for(var l=((s=lodash_1$1.sortBy(s,(function(e){return a[e]}))).length-1)/2,u=Math.floor(l),c=Math.ceil(l);u<=c;++u){var h=s[u];o[e]===e&&t<a[h]&&!hasConflict(r,e,h)&&(o[h]=e,o[e]=i[e]=i[h],t=a[h])}}))})),{root:i,align:o}}function horizontalCompaction(e,t,r,n,i){var o={},a=buildBlockGraph(e,t,r,i),s=i?"borderLeft":"borderRight";function l(e,t){for(var r=a.nodes(),n=r.pop(),i={};n;)i[n]?e(n):(i[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return l((function(e){o[e]=a.inEdges(e).reduce((function(e,t){return Math.max(e,o[t.v]+a.edge(t))}),0)}),a.predecessors.bind(a)),l((function(t){var r=a.outEdges(t).reduce((function(e,t){return Math.min(e,o[t.w]-a.edge(t))}),Number.POSITIVE_INFINITY),n=e.node(t);r!==Number.POSITIVE_INFINITY&&n.borderType!==s&&(o[t]=Math.max(o[t],r))}),a.successors.bind(a)),lodash_1$1.forEach(n,(function(e){o[e]=o[r[e]]})),o}function buildBlockGraph(e,t,r,n){var i=new Graph$6,o=e.graph(),a=sep(o.nodesep,o.edgesep,n);return lodash_1$1.forEach(t,(function(t){var n;lodash_1$1.forEach(t,(function(t){var o=r[t];if(i.setNode(o),n){var s=r[n],l=i.edge(s,o);i.setEdge(s,o,Math.max(a(e,t,n),l||0))}n=t}))})),i}function findSmallestWidthAlignment(e,t){return lodash_1$1.minBy(lodash_1$1.values(t),(function(t){var r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return lodash_1$1.forIn(t,(function(t,i){var o=width(e,i)/2;r=Math.max(t+o,r),n=Math.min(t-o,n)})),r-n}))}function alignCoordinates(e,t){var r=lodash_1$1.values(t),n=lodash_1$1.min(r),i=lodash_1$1.max(r);lodash_1$1.forEach(["u","d"],(function(r){lodash_1$1.forEach(["l","r"],(function(o){var a,s=r+o,l=e[s];if(l!==t){var u=lodash_1$1.values(l);(a="l"===o?n-lodash_1$1.min(u):i-lodash_1$1.max(u))&&(e[s]=lodash_1$1.mapValues(l,(function(e){return e+a})))}}))}))}function balance(e,t){return lodash_1$1.mapValues(e.ul,(function(r,n){if(t)return e[t.toLowerCase()][n];var i=lodash_1$1.sortBy(lodash_1$1.map(e,n));return(i[1]+i[2])/2}))}function positionX(e){var t,r=util$1.buildLayerMatrix(e),n=lodash_1$1.merge(findType1Conflicts(e,r),findType2Conflicts(e,r)),i={};lodash_1$1.forEach(["u","d"],(function(o){t="u"===o?r:lodash_1$1.values(r).reverse(),lodash_1$1.forEach(["l","r"],(function(r){"r"===r&&(t=lodash_1$1.map(t,(function(e){return lodash_1$1.values(e).reverse()})));var a=("u"===o?e.predecessors:e.successors).bind(e),s=verticalAlignment(e,t,n,a),l=horizontalCompaction(e,t,s.root,s.align,"r"===r);"r"===r&&(l=lodash_1$1.mapValues(l,(function(e){return-e}))),i[o+r]=l}))}));var o=findSmallestWidthAlignment(e,i);return alignCoordinates(i,o),balance(i,e.graph().align)}function sep(e,t,r){return function(n,i,o){var a,s=n.node(i),l=n.node(o),u=0;if(u+=s.width/2,lodash_1$1.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(u+=r?a:-a),a=0,u+=(s.dummy?t:e)/2,u+=(l.dummy?t:e)/2,u+=l.width/2,lodash_1$1.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2}return a&&(u+=r?a:-a),a=0,u}}function width(e,t){return e.node(t).width}var positionX$1=bk.positionX,position_1=position$1;function position$1(e){positionY(e=util$1.asNonCompoundGraph(e)),lodash_1$1.forEach(positionX$1(e),(function(t,r){e.node(r).x=t}))}function positionY(e){var t=util$1.buildLayerMatrix(e),r=e.graph().ranksep,n=0;lodash_1$1.forEach(t,(function(t){var i=lodash_1$1.max(lodash_1$1.map(t,(function(t){return e.node(t).height})));lodash_1$1.forEach(t,(function(t){e.node(t).y=n+i/2})),n+=i+r}))}var normalizeRanks$1=util$1.normalizeRanks,removeEmptyRanks$1=util$1.removeEmptyRanks,util$3=util$1,Graph$7=graphlib_1.Graph,layout_1=layout$1;function layout$1(e,t){var r=t&&t.debugTiming?util$3.time:util$3.notime;r("layout",(function(){var t=r("  buildLayoutGraph",(function(){return buildLayoutGraph(e)}));r("  runLayout",(function(){runLayout(t,r)})),r("  updateInputGraph",(function(){updateInputGraph(e,t)}))}))}function runLayout(e,t){t("    makeSpaceForEdgeLabels",(function(){makeSpaceForEdgeLabels(e)})),t("    removeSelfEdges",(function(){removeSelfEdges(e)})),t("    acyclic",(function(){acyclic.run(e)})),t("    nestingGraph.run",(function(){nestingGraph.run(e)})),t("    rank",(function(){rank_1(util$3.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){injectEdgeLabelProxies(e)})),t("    removeEmptyRanks",(function(){removeEmptyRanks$1(e)})),t("    nestingGraph.cleanup",(function(){nestingGraph.cleanup(e)})),t("    normalizeRanks",(function(){normalizeRanks$1(e)})),t("    assignRankMinMax",(function(){assignRankMinMax(e)})),t("    removeEdgeLabelProxies",(function(){removeEdgeLabelProxies(e)})),t("    normalize.run",(function(){normalize$1.run(e)})),t("    parentDummyChains",(function(){parentDummyChains_1(e)})),t("    addBorderSegments",(function(){addBorderSegments_1(e)})),t("    order",(function(){order_1(e)})),t("    insertSelfEdges",(function(){insertSelfEdges(e)})),t("    adjustCoordinateSystem",(function(){coordinateSystem.adjust(e)})),t("    position",(function(){position_1(e)})),t("    positionSelfEdges",(function(){positionSelfEdges(e)})),t("    removeBorderNodes",(function(){removeBorderNodes(e)})),t("    normalize.undo",(function(){normalize$1.undo(e)})),t("    fixupEdgeLabelCoords",(function(){fixupEdgeLabelCoords(e)})),t("    undoCoordinateSystem",(function(){coordinateSystem.undo(e)})),t("    translateGraph",(function(){translateGraph(e)})),t("    assignNodeIntersects",(function(){assignNodeIntersects(e)})),t("    reversePoints",(function(){reversePointsForReversedEdges(e)})),t("    acyclic.undo",(function(){acyclic.undo(e)}))}function updateInputGraph(e,t){lodash_1$1.forEach(e.nodes(),(function(r){var n=e.node(r),i=t.node(r);n&&(n.x=i.x,n.y=i.y,t.children(r).length&&(n.width=i.width,n.height=i.height))})),lodash_1$1.forEach(e.edges(),(function(r){var n=e.edge(r),i=t.edge(r);n.points=i.points,lodash_1$1.has(i,"x")&&(n.x=i.x,n.y=i.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function buildLayoutGraph(e){var t=new Graph$7({multigraph:!0,compound:!0}),r=canonicalize(e.graph());return t.setGraph(lodash_1$1.merge({},graphDefaults,selectNumberAttrs(r,graphNumAttrs),lodash_1$1.pick(r,graphAttrs))),lodash_1$1.forEach(e.nodes(),(function(r){var n=canonicalize(e.node(r));t.setNode(r,lodash_1$1.defaults(selectNumberAttrs(n,nodeNumAttrs),nodeDefaults)),t.setParent(r,e.parent(r))})),lodash_1$1.forEach(e.edges(),(function(r){var n=canonicalize(e.edge(r));t.setEdge(r,lodash_1$1.merge({},edgeDefaults,selectNumberAttrs(n,edgeNumAttrs),lodash_1$1.pick(n,edgeAttrs)))})),t}function makeSpaceForEdgeLabels(e){var t=e.graph();t.ranksep/=2,lodash_1$1.forEach(e.edges(),(function(r){var n=e.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}function injectEdgeLabelProxies(e){lodash_1$1.forEach(e.edges(),(function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),i={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};util$3.addDummyNode(e,"edge-proxy",i,"_ep")}}))}function assignRankMinMax(e){var t=0;lodash_1$1.forEach(e.nodes(),(function(r){var n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=lodash_1$1.max(t,n.maxRank))})),e.graph().maxRank=t}function removeEdgeLabelProxies(e){lodash_1$1.forEach(e.nodes(),(function(t){var r=e.node(t);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))}))}function translateGraph(e){var t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0;function l(e){var o=e.x,a=e.y,s=e.width,l=e.height;t=Math.min(t,o-s/2),r=Math.max(r,o+s/2),n=Math.min(n,a-l/2),i=Math.max(i,a+l/2)}lodash_1$1.forEach(e.nodes(),(function(t){l(e.node(t))})),lodash_1$1.forEach(e.edges(),(function(t){var r=e.edge(t);lodash_1$1.has(r,"x")&&l(r)})),t-=a,n-=s,lodash_1$1.forEach(e.nodes(),(function(r){var i=e.node(r);i.x-=t,i.y-=n})),lodash_1$1.forEach(e.edges(),(function(r){var i=e.edge(r);lodash_1$1.forEach(i.points,(function(e){e.x-=t,e.y-=n})),lodash_1$1.has(i,"x")&&(i.x-=t),lodash_1$1.has(i,"y")&&(i.y-=n)})),o.width=r-t+a,o.height=i-n+s}function assignNodeIntersects(e){lodash_1$1.forEach(e.edges(),(function(t){var r,n,i=e.edge(t),o=e.node(t.v),a=e.node(t.w);i.points?(r=i.points[0],n=i.points[i.points.length-1]):(i.points=[],r=a,n=o),i.points.unshift(util$3.intersectRect(o,r)),i.points.push(util$3.intersectRect(a,n))}))}function fixupEdgeLabelCoords(e){lodash_1$1.forEach(e.edges(),(function(t){var r=e.edge(t);if(lodash_1$1.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}function reversePointsForReversedEdges(e){lodash_1$1.forEach(e.edges(),(function(t){var r=e.edge(t);r.reversed&&r.points.reverse()}))}function removeBorderNodes(e){lodash_1$1.forEach(e.nodes(),(function(t){if(e.children(t).length){var r=e.node(t),n=e.node(r.borderTop),i=e.node(r.borderBottom),o=e.node(lodash_1$1.last(r.borderLeft)),a=e.node(lodash_1$1.last(r.borderRight));r.width=Math.abs(a.x-o.x),r.height=Math.abs(i.y-n.y),r.x=o.x+r.width/2,r.y=n.y+r.height/2}})),lodash_1$1.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}function removeSelfEdges(e){lodash_1$1.forEach(e.edges(),(function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}function insertSelfEdges(e){var t=util$3.buildLayerMatrix(e);lodash_1$1.forEach(t,(function(t){var r=0;lodash_1$1.forEach(t,(function(t,n){var i=e.node(t);i.order=n+r,lodash_1$1.forEach(i.selfEdges,(function(t){util$3.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:n+ ++r,e:t.e,label:t.label},"_se")})),delete i.selfEdges}))}))}function positionSelfEdges(e){lodash_1$1.forEach(e.nodes(),(function(t){var r=e.node(t);if("selfedge"===r.dummy){var n=e.node(r.e.v),i=n.x+n.width/2,o=n.y,a=r.x-i,s=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],r.label.x=r.x,r.label.y=r.y}}))}function selectNumberAttrs(e,t){return lodash_1$1.mapValues(lodash_1$1.pick(e,t),Number)}function canonicalize(e){var t={};return lodash_1$1.forEach(e,(function(e,r){t[r.toLowerCase()]=e})),t}var Graph$8=graphlib_1.Graph,debug={debugOrdering:debugOrdering};function debugOrdering(e){var t=util$1.buildLayerMatrix(e),r=new Graph$8({compound:!0,multigraph:!0}).setGraph({});return lodash_1$1.forEach(e.nodes(),(function(t){r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)})),lodash_1$1.forEach(e.edges(),(function(e){r.setEdge(e.v,e.w,{},e.name)})),lodash_1$1.forEach(t,(function(e,t){var n="layer"+t;r.setNode(n,{rank:"same"}),lodash_1$1.reduce(e,(function(e,t){return r.setEdge(e,t,{style:"invis"}),t}))})),r}var version$2="0.8.5",dagre={graphlib:graphlib_1,layout:layout_1,debug:debug,util:{time:util$1.time,notime:util$1.notime},version:version$2},cytoscapeDagre=createCommonjsModule((function(e,t){var r;r=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(2),o=r(1),a=r(4);function s(e){this.options=o({},i,e)}s.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,i=function(e,t){return"function"==typeof t?t.apply(e,[e]):t},o=e.boundingBox||{x1:0,y1:0,w:t.width(),h:t.height()};void 0===o.x2&&(o.x2=o.x1+o.w),void 0===o.w&&(o.w=o.x2-o.x1),void 0===o.y2&&(o.y2=o.y1+o.h),void 0===o.h&&(o.h=o.y2-o.y1);var s=new a.graphlib.Graph({multigraph:!0,compound:!0}),l={},u=function(e,t){null!=t&&(l[e]=t)};u("nodesep",e.nodeSep),u("edgesep",e.edgeSep),u("ranksep",e.rankSep),u("rankdir",e.rankDir),u("ranker",e.ranker),s.setGraph(l),s.setDefaultEdgeLabel((function(){return{}})),s.setDefaultNodeLabel((function(){return{}}));for(var c=r.nodes(),h=0;h<c.length;h++){var d=c[h],f=d.layoutDimensions(e);s.setNode(d.id(),{width:f.w,height:f.h,name:d.id()})}for(var p=0;p<c.length;p++){var g=c[p];g.isChild()&&s.setParent(g.id(),g.parent().id())}for(var y=r.edges().stdFilter((function(e){return!e.source().isParent()&&!e.target().isParent()})),v=0;v<y.length;v++){var m=y[v];s.setEdge(m.source().id(),m.target().id(),{minlen:i(m,e.minLen),weight:i(m,e.edgeWeight),name:m.id()},m.id())}a.layout(s);for(var b=s.nodes(),$=0;$<b.length;$++){var _=b[$],w=s.node(_);t.getElementById(_).scratch().dagre=w}var E=void 0;return e.boundingBox?(E={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},c.forEach((function(e){var t=e.scratch().dagre;E.x1=Math.min(E.x1,t.x),E.x2=Math.max(E.x2,t.x),E.y1=Math.min(E.y1,t.y),E.y2=Math.max(E.y2,t.y)})),E.w=E.x2-E.x1,E.h=E.y2-E.y1):E=o,c.layoutPositions(this,e,(function(t){var r=(t="object"===(void 0===t?"undefined":n(t))?t:this).scratch().dagre;return function(t){if(e.boundingBox){var r=0===E.w?0:(t.x-E.x1)/E.w,n=0===E.h?0:(t.y-E.y1)/E.h;return{x:o.x1+r*o.w,y:o.y1+n*o.h}}return t}({x:r.x,y:r.y})})),this},e.exports=s},function(e,t,r){e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((function(t){Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e}},function(e,t,r){var n={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,ranker:void 0,minLen:function(e){return 1},edgeWeight:function(e){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(e,t){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(e,t){return t},ready:function(){},stop:function(){}};e.exports=n},function(e,t,r){var n=r(0),i=function(e){e&&e("layout","dagre",n)};"undefined"!=typeof cytoscape&&i(cytoscape),e.exports=i},function(t,r){t.exports=e}])},e.exports=r(dagre)})),dagre$1=unwrapExports(cytoscapeDagre);class Library{constructor(e){this.container=e,this.initialGraph={type:"",groups:[],nodes:[],edges:[]},this.internalData={nodes:[],edges:[]}}transformToLibraryStructure(e){const{edges:t,nodes:r}=e;return{nodes:this.getTransformedToLibraryNodes(r),edges:this.getTransformedToLibraryEdges(t)}}transformToMainType(e){const{edges:t,nodes:r}=e,{type:n,groups:i}=this.initialGraph;return{type:n,groups:i,nodes:this.getTransformedToMainTypeNodes(r),edges:this.getTransformedToMainTypeEdges(t)}}setBaseGraph(e){if(null!==e){const{nodes:t,edges:r}=this.transformToLibraryStructure(e);this.initialGraph.groups=e.groups,this.internalData.nodes=t,this.internalData.edges=r}}addSubgraph(e){var t;const{nodes:r,edges:n}=this.transformToLibraryStructure(e);this.initialGraph.type=e.type,this.initialGraph.groups=null===(t=this.initialGraph.groups)||void 0===t?void 0:t.concat(e.groups||[]),this.internalData.nodes=this.internalData.nodes.concat(r),this.internalData.edges=this.internalData.edges.concat(n)}}cytoscape_cjs.use(avsdf),cytoscape_cjs.use(fcose),cytoscape_cjs.use(dagre$1);const STYLE=[{selector:"node",style:{label:"data(label)","text-valign":"bottom",color:"#000000","background-color":"#3a7ecf","font-size":"10px"}},{selector:":parent",style:{"background-opacity":.333,"border-color":"#2B65EC","text-valign":"top"}},{selector:"edge",style:{"line-color":"#3a7ecf",opacity:.5,"target-arrow-color":"#3a7ecf","target-arrow-shape":"triangle"}},{selector:'edge[directed="true"]',style:{"curve-style":"bezier"}}];class CytoscapeLibrary extends Library{constructor(e,t){super(e),this.options=t}transformToLibraryStructure(e){const{edges:t,nodes:r,groups:n}=e;return{nodes:[...this.getTransformedToLibraryNodes(r),...this.getTransformedToLibrarGroups(n)],edges:this.getTransformedToLibraryEdges(t)}}getTransformedToLibraryNodes(e){return e.map(e=>{const t={data:{...e}};return t.data.x&&t.data.y&&(t.locked=!0,t.renderedPosition={x:t.data.x,y:t.data.y},delete t.data.x,delete t.data.y),t.data.group&&(t.data.parent=String(t.data.group),delete t.data.group),t})}getTransformedToLibrarGroups(e){return e.map(e=>({data:{...e}}))}getTransformedToLibraryEdges(e){return e.map(e=>{const t={...e};return t.directed=String(!t.isBidirected),delete t.isBidirected,{data:t}})}getTransformedToMainTypeNodes(e){const t=[];return e.map(e=>{const r={...e.data};return r.id=Number(r.id),r.parent&&(r.group=Number(r.parent),t.push(r.group)),delete r.parent,r}).filter(e=>!t.includes(e.id))}getTransformedToMainTypeEdges(e){return e.map(e=>{const t={...e.data};return t.source=Number(t.source),t.target=Number(t.target),t.isBidirected="true"===t.directed,t.isBidirected||delete t.isBidirected,delete t.id,delete t.directed,t})}async visualize(e=!1){const{type:t,...r}=this.options;return this.instance=cytoscape_cjs({container:this.container,elements:this.internalData,layout:{name:t,...r},style:STYLE}),await new Promise((e,t)=>{this.instance.ready(()=>{this.internalData.nodes=this.internalData.nodes.map(e=>({data:{...e.data,...this.instance.$(`node[id="${e.data.id}"]`).position()}})),e()})}),e&&setTimeout(()=>{this.instance.nodes().unlock()},2e3),this.transformToMainType(this.internalData)}}
/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 6.5.1
 * @date    2020-03-27T15:50:07.060Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var commonjsGlobal$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire$1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function createCommonjsModule$1(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}var check=function(e){return e&&e.Math==Math&&e},global_1=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal$1&&commonjsGlobal$1)||Function("return this")(),fails=function(e){try{return!!e()}catch(e){return!0}},descriptors=!fails((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1),f=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor(this,e);return!!t&&t.enumerable}:nativePropertyIsEnumerable,objectPropertyIsEnumerable={f:f},createPropertyDescriptor=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},toString$2={}.toString,classofRaw=function(e){return toString$2.call(e).slice(8,-1)},split="".split,indexedObject=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==classofRaw(e)?split.call(e,""):Object(e)}:Object,requireObjectCoercible=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},toIndexedObject=function(e){return indexedObject(requireObjectCoercible(e))},isObject$2=function(e){return"object"==typeof e?null!==e:"function"==typeof e},toPrimitive=function(e,t){if(!isObject$2(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!isObject$2(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!isObject$2(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!isObject$2(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},hasOwnProperty$g={}.hasOwnProperty,has$1=function(e,t){return hasOwnProperty$g.call(e,t)},document$1$1=global_1.document,EXISTS=isObject$2(document$1$1)&&isObject$2(document$1$1.createElement),documentCreateElement=function(e){return EXISTS?document$1$1.createElement(e):{}},ie8DomDefine=!descriptors&&!fails((function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a})),nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,f$1=descriptors?nativeGetOwnPropertyDescriptor:function(e,t){if(e=toIndexedObject(e),t=toPrimitive(t,!0),ie8DomDefine)try{return nativeGetOwnPropertyDescriptor(e,t)}catch(e){}if(has$1(e,t))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(e,t),e[t])},objectGetOwnPropertyDescriptor={f:f$1},replacement=/#|\.prototype\./,isForced=function(e,t){var r=data$2[normalize$2(e)];return r==POLYFILL||r!=NATIVE&&("function"==typeof t?fails(t):!!t)},normalize$2=isForced.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data$2=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,path={},aFunction=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},functionBindContext=function(e,t,r){if(aFunction(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},anObject=function(e){if(!isObject$2(e))throw TypeError(String(e)+" is not an object");return e},nativeDefineProperty=Object.defineProperty,f$2=descriptors?nativeDefineProperty:function(e,t,r){if(anObject(e),t=toPrimitive(t,!0),anObject(r),ie8DomDefine)try{return nativeDefineProperty(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e},objectDefineProperty={f:f$2},createNonEnumerableProperty=descriptors?function(e,t,r){return objectDefineProperty.f(e,t,createPropertyDescriptor(1,r))}:function(e,t,r){return e[t]=r,e},getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,wrapConstructor=function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},_export=function(e,t){var r,n,i,o,a,s,l,u,c=e.target,h=e.global,d=e.stat,f=e.proto,p=h?global_1:d?global_1[c]:(global_1[c]||{}).prototype,g=h?path:path[c]||(path[c]={}),y=g.prototype;for(i in t)r=!isForced_1(h?i:c+(d?".":"#")+i,e.forced)&&p&&has$1(p,i),a=g[i],r&&(s=e.noTargetGet?(u=getOwnPropertyDescriptor$1(p,i))&&u.value:p[i]),o=r&&s?s:t[i],r&&typeof a==typeof o||(l=e.bind&&r?functionBindContext(o,global_1):e.wrap&&r?wrapConstructor(o):f&&"function"==typeof o?functionBindContext(Function.call,o):o,(e.sham||o&&o.sham||a&&a.sham)&&createNonEnumerableProperty(l,"sham",!0),g[i]=l,f&&(has$1(path,n=c+"Prototype")||createNonEnumerableProperty(path,n,{}),path[n][i]=o,e.real&&y&&!y[i]&&createNonEnumerableProperty(y,i,o)))},isArray$1=Array.isArray||function(e){return"Array"==classofRaw(e)},ceil=Math.ceil,floor=Math.floor,toInteger$1=function(e){return isNaN(e=+e)?0:(e>0?floor:ceil)(e)},min$2=Math.min,toLength=function(e){return e>0?min$2(toInteger$1(e),9007199254740991):0},flattenIntoArray=function(e,t,r,n,i,o,a,s){for(var l,u=i,c=0,h=!!a&&functionBindContext(a,s,3);c<n;){if(c in r){if(l=h?h(r[c],c,t):r[c],o>0&&isArray$1(l))u=flattenIntoArray(e,t,l,toLength(l.length),u,o-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[u]=l}u++}c++}return u},flattenIntoArray_1=flattenIntoArray,toObject=function(e){return Object(requireObjectCoercible(e))},setGlobal=function(e,t){try{createNonEnumerableProperty(global_1,e,t)}catch(r){global_1[e]=t}return t},SHARED="__core-js_shared__",store=global_1[SHARED]||setGlobal(SHARED,{}),sharedStore=store,shared=createCommonjsModule$1((function(e){(e.exports=function(e,t){return sharedStore[e]||(sharedStore[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"pure",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})})),id=0,postfix=Math.random(),uid=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++id+postfix).toString(36)},nativeSymbol=!!Object.getOwnPropertySymbols&&!fails((function(){return!String(Symbol())})),useSymbolAsUid=nativeSymbol&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,WellKnownSymbolsStore=shared("wks"),Symbol$1$1=global_1.Symbol,createWellKnownSymbol=useSymbolAsUid?Symbol$1$1:Symbol$1$1&&Symbol$1$1.withoutSetter||uid,wellKnownSymbol=function(e){return has$1(WellKnownSymbolsStore,e)||(nativeSymbol&&has$1(Symbol$1$1,e)?WellKnownSymbolsStore[e]=Symbol$1$1[e]:WellKnownSymbolsStore[e]=createWellKnownSymbol("Symbol."+e)),WellKnownSymbolsStore[e]},SPECIES=wellKnownSymbol("species"),arraySpeciesCreate=function(e,t){var r;return isArray$1(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!isArray$1(r.prototype)?isObject$2(r)&&null===(r=r[SPECIES])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)};_export({target:"Array",proto:!0},{flatMap:function(e){var t,r=toObject(this),n=toLength(r.length);return aFunction(e),(t=arraySpeciesCreate(r,0)).length=flattenIntoArray_1(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var entryVirtual=function(e){return path[e+"Prototype"]},flatMap=entryVirtual("Array").flatMap,push$1=[].push,createMethod=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,a=5==e||o;return function(s,l,u,c){for(var h,d,f=toObject(s),p=indexedObject(f),g=functionBindContext(l,u,3),y=toLength(p.length),v=0,m=c||arraySpeciesCreate,b=t?m(s,y):r?m(s,0):void 0;y>v;v++)if((a||v in p)&&(d=g(h=p[v],v,f),e))if(t)b[v]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return v;case 2:push$1.call(b,h)}else if(i)return!1;return o?-1:n||i?i:b}},arrayIteration={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6)},aFunction$1=function(e){return"function"==typeof e?e:void 0},getBuiltIn=function(e,t){return arguments.length<2?aFunction$1(path[e])||aFunction$1(global_1[e]):path[e]&&path[e][t]||global_1[e]&&global_1[e][t]},engineUserAgent=getBuiltIn("navigator","userAgent")||"",process=global_1.process,versions=process&&process.versions,v8=versions&&versions.v8,match$1,version$3;v8?(match$1=v8.split("."),version$3=match$1[0]+match$1[1]):engineUserAgent&&(match$1=engineUserAgent.match(/Edge\/(\d+)/),(!match$1||match$1[1]>=74)&&(match$1=engineUserAgent.match(/Chrome\/(\d+)/),match$1&&(version$3=match$1[1])));var engineV8Version=version$3&&+version$3,SPECIES$1=wellKnownSymbol("species"),arrayMethodHasSpeciesSupport=function(e){return engineV8Version>=51||!fails((function(){var t=[];return(t.constructor={})[SPECIES$1]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},defineProperty$1=Object.defineProperty,cache$1={},thrower=function(e){throw e},arrayMethodUsesToLength=function(e,t){if(has$1(cache$1,e))return cache$1[e];t||(t={});var r=[][e],n=!!has$1(t,"ACCESSORS")&&t.ACCESSORS,i=has$1(t,0)?t[0]:thrower,o=has$1(t,1)?t[1]:void 0;return cache$1[e]=!!r&&!fails((function(){if(n&&!descriptors)return!0;var e={length:-1};n?defineProperty$1(e,1,{enumerable:!0,get:thrower}):e[1]=1,r.call(e,i,o)}))},$map=arrayIteration.map,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("map"),USES_TO_LENGTH=arrayMethodUsesToLength("map");_export({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT||!USES_TO_LENGTH},{map:function(e){return $map(this,e,arguments.length>1?arguments[1]:void 0)}});var map$1=entryVirtual("Array").map,ArrayPrototype$1=Array.prototype,map_1$1=function(e){var t=e.map;return e===ArrayPrototype$1||e instanceof Array&&t===ArrayPrototype$1.map?map$1:t},map$1$1=map_1$1,map$2=map$1$1,$filter=arrayIteration.filter,HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport("filter"),USES_TO_LENGTH$1=arrayMethodUsesToLength("filter");_export({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1||!USES_TO_LENGTH$1},{filter:function(e){return $filter(this,e,arguments.length>1?arguments[1]:void 0)}});var filter$2=entryVirtual("Array").filter,ArrayPrototype$2=Array.prototype,filter_1$1=function(e){var t=e.filter;return e===ArrayPrototype$2||e instanceof Array&&t===ArrayPrototype$2.filter?filter$2:t},filter$1$1=filter_1$1,filter$2$1=filter$1$1,createMethod$1=function(e){return function(t,r,n,i){aFunction(r);var o=toObject(t),a=indexedObject(o),s=toLength(o.length),l=e?s-1:0,u=e?-1:1;if(n<2)for(;;){if(l in a){i=a[l],l+=u;break}if(l+=u,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=u)l in a&&(i=r(i,a[l],l,o));return i}},arrayReduce$1={left:createMethod$1(!1),right:createMethod$1(!0)},arrayMethodIsStrict=function(e,t){var r=[][e];return!!r&&fails((function(){r.call(null,t||function(){throw 1},1)}))},$reduce=arrayReduce$1.left,STRICT_METHOD=arrayMethodIsStrict("reduce"),USES_TO_LENGTH$2=arrayMethodUsesToLength("reduce",{1:0});_export({target:"Array",proto:!0,forced:!STRICT_METHOD||!USES_TO_LENGTH$2},{reduce:function(e){return $reduce(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var reduce$1=entryVirtual("Array").reduce,ArrayPrototype$3=Array.prototype,reduce_1$1=function(e){var t=e.reduce;return e===ArrayPrototype$3||e instanceof Array&&t===ArrayPrototype$3.reduce?reduce$1:t},reduce$1$1=reduce_1$1,reduce$2=reduce$1$1,slice=[].slice,factories={},construct=function(e,t,r){if(!(t in factories)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";factories[t]=Function("C,a","return new C("+n.join(",")+")")}return factories[t](e,r)},functionBind=Function.bind||function(e){var t=aFunction(this),r=slice.call(arguments,1),n=function(){var i=r.concat(slice.call(arguments));return this instanceof n?construct(t,i.length,i):t.apply(e,i)};return isObject$2(t.prototype)&&(n.prototype=t.prototype),n};_export({target:"Function",proto:!0},{bind:functionBind});var bind=entryVirtual("Function").bind,FunctionPrototype=Function.prototype,bind_1=function(e){var t=e.bind;return e===FunctionPrototype||e instanceof Function&&t===FunctionPrototype.bind?bind:t},bind$1=bind_1,bind$2=bind$1;function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var classCallCheck=_classCallCheck$1;_export({target:"Object",stat:!0,forced:!descriptors,sham:!descriptors},{defineProperty:objectDefineProperty.f});var defineProperty_1=createCommonjsModule$1((function(e){var t=path.Object,r=e.exports=function(e,r,n){return t.defineProperty(e,r,n)};t.defineProperty.sham&&(r.sham=!0)})),defineProperty$1$1=defineProperty_1,defineProperty$2=defineProperty$1$1;function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),defineProperty$2(e,n.key,n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),r&&_defineProperties$1(e,r),e}var createClass=_createClass$1,defineProperty$3=defineProperty_1,defineProperty$4=defineProperty$3,max$2=Math.max,min$1$1=Math.min,toAbsoluteIndex=function(e,t){var r=toInteger$1(e);return r<0?max$2(r+t,0):min$1$1(r,t)},createMethod$2=function(e){return function(t,r,n){var i,o=toIndexedObject(t),a=toLength(o.length),s=toAbsoluteIndex(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},arrayIncludes$1={includes:createMethod$2(!0),indexOf:createMethod$2(!1)},hiddenKeys={},indexOf=arrayIncludes$1.indexOf,objectKeysInternal=function(e,t){var r,n=toIndexedObject(e),i=0,o=[];for(r in n)!has$1(hiddenKeys,r)&&has$1(n,r)&&o.push(r);for(;t.length>i;)has$1(n,r=t[i++])&&(~indexOf(o,r)||o.push(r));return o},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],objectKeys=Object.keys||function(e){return objectKeysInternal(e,enumBugKeys)},objectDefineProperties=descriptors?Object.defineProperties:function(e,t){anObject(e);for(var r,n=objectKeys(t),i=n.length,o=0;i>o;)objectDefineProperty.f(e,r=n[o++],t[r]);return e};_export({target:"Object",stat:!0,forced:!descriptors,sham:!descriptors},{defineProperties:objectDefineProperties});var defineProperties_1=createCommonjsModule$1((function(e){var t=path.Object,r=e.exports=function(e,r){return t.defineProperties(e,r)};t.defineProperties.sham&&(r.sham=!0)})),defineProperties=defineProperties_1,defineProperties$1=defineProperties,hiddenKeys$1=enumBugKeys.concat("length","prototype"),f$3=Object.getOwnPropertyNames||function(e){return objectKeysInternal(e,hiddenKeys$1)},objectGetOwnPropertyNames={f:f$3},f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},ownKeys=getBuiltIn("Reflect","ownKeys")||function(e){var t=objectGetOwnPropertyNames.f(anObject(e)),r=objectGetOwnPropertySymbols.f;return r?t.concat(r(e)):t},createProperty=function(e,t,r){var n=toPrimitive(t);n in e?objectDefineProperty.f(e,n,createPropertyDescriptor(0,r)):e[n]=r};_export({target:"Object",stat:!0,sham:!descriptors},{getOwnPropertyDescriptors:function(e){for(var t,r,n=toIndexedObject(e),i=objectGetOwnPropertyDescriptor.f,o=ownKeys(n),a={},s=0;o.length>s;)void 0!==(r=i(n,t=o[s++]))&&createProperty(a,t,r);return a}});var getOwnPropertyDescriptors=path.Object.getOwnPropertyDescriptors,getOwnPropertyDescriptors$1=getOwnPropertyDescriptors,getOwnPropertyDescriptors$2=getOwnPropertyDescriptors$1,iterators={},functionToString=Function.toString;"function"!=typeof sharedStore.inspectSource&&(sharedStore.inspectSource=function(e){return functionToString.call(e)});var inspectSource=sharedStore.inspectSource,WeakMap$1=global_1.WeakMap,nativeWeakMap="function"==typeof WeakMap$1&&/native code/.test(inspectSource(WeakMap$1)),keys$1=shared("keys"),sharedKey=function(e){return keys$1[e]||(keys$1[e]=uid(e))},WeakMap$1$1=global_1.WeakMap,set,get$1,has$1$1,enforce=function(e){return has$1$1(e)?get$1(e):set(e,{})},getterFor=function(e){return function(t){var r;if(!isObject$2(t)||(r=get$1(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(nativeWeakMap){var store$1=new WeakMap$1$1,wmget=store$1.get,wmhas=store$1.has,wmset=store$1.set;set=function(e,t){return wmset.call(store$1,e,t),t},get$1=function(e){return wmget.call(store$1,e)||{}},has$1$1=function(e){return wmhas.call(store$1,e)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(e,t){return createNonEnumerableProperty(e,STATE,t),t},get$1=function(e){return has$1(e,STATE)?e[STATE]:{}},has$1$1=function(e){return has$1(e,STATE)}}var internalState={set:set,get:get$1,has:has$1$1,enforce:enforce,getterFor:getterFor},correctPrototypeGetter=!fails((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype=Object.prototype,objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(e){return e=toObject(e),has$1(e,IE_PROTO)?e[IE_PROTO]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectPrototype:null},ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1,IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={});var iteratorsCore={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS},html=getBuiltIn("document","documentElement"),GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO$1=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return LT+SCRIPT+GT+e+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame=function(){var e,t=documentCreateElement("iframe"),r="java"+SCRIPT+":";return t.style.display="none",html.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(scriptTag("document.F=Object")),e.close(),e.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=document.domain&&new ActiveXObject("htmlfile")}catch(e){}NullProtoObject=activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame();for(var e=enumBugKeys.length;e--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[e]];return NullProtoObject()};hiddenKeys[IE_PROTO$1]=!0;var objectCreate$1=Object.create||function(e,t){var r;return null!==e?(EmptyConstructor[PROTOTYPE]=anObject(e),r=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,r[IE_PROTO$1]=e):r=NullProtoObject(),void 0===t?r:objectDefineProperties(r,t)},TO_STRING_TAG=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG]="z";var toStringTagSupport="[object z]"===String(test),TO_STRING_TAG$1=wellKnownSymbol("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},classof=toStringTagSupport?classofRaw:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(t=Object(e),TO_STRING_TAG$1))?r:CORRECT_ARGUMENTS?classofRaw(t):"Object"==(n=classofRaw(t))&&"function"==typeof t.callee?"Arguments":n},objectToString$2=toStringTagSupport?{}.toString:function(){return"[object "+classof(this)+"]"},defineProperty$5=objectDefineProperty.f,TO_STRING_TAG$2=wellKnownSymbol("toStringTag"),setToStringTag=function(e,t,r,n){if(e){var i=r?e:e.prototype;has$1(i,TO_STRING_TAG$2)||defineProperty$5(i,TO_STRING_TAG$2,{configurable:!0,value:t}),n&&!toStringTagSupport&&createNonEnumerableProperty(i,"toString",objectToString$2)}},IteratorPrototype$1=iteratorsCore.IteratorPrototype,returnThis=function(){return this},createIteratorConstructor=function(e,t,r){var n=t+" Iterator";return e.prototype=objectCreate$1(IteratorPrototype$1,{next:createPropertyDescriptor(1,r)}),setToStringTag(e,n,!1,!0),iterators[n]=returnThis,e},aPossiblePrototype=function(e){if(!isObject$2(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return anObject(r),aPossiblePrototype(n),t?e.call(r,n):r.__proto__=n,r}}():void 0),redefine=function(e,t,r,n){n&&n.enumerable?e[t]=r:createNonEnumerableProperty(e,t,r)},IteratorPrototype$2=iteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$1=wellKnownSymbol("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis$1=function(){return this},defineIterator=function(e,t,r,n,i,o,a){createIteratorConstructor(r,t,n);var s,l,u,c=function(e){if(e===i&&g)return g;if(!BUGGY_SAFARI_ITERATORS$1&&e in f)return f[e];switch(e){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,e)}}return function(){return new r(this)}},h=t+" Iterator",d=!1,f=e.prototype,p=f[ITERATOR$1]||f["@@iterator"]||i&&f[i],g=!BUGGY_SAFARI_ITERATORS$1&&p||c(i),y="Array"==t&&f.entries||p;if(y&&(s=objectGetPrototypeOf(y.call(new e)),IteratorPrototype$2!==Object.prototype&&s.next&&(setToStringTag(s,h,!0,!0),iterators[h]=returnThis$1)),i==VALUES&&p&&p.name!==VALUES&&(d=!0,g=function(){return p.call(this)}),a&&f[ITERATOR$1]!==g&&createNonEnumerableProperty(f,ITERATOR$1,g),iterators[t]=g,i)if(l={values:c(VALUES),keys:o?g:c(KEYS),entries:c(ENTRIES)},a)for(u in l)(BUGGY_SAFARI_ITERATORS$1||d||!(u in f))&&redefine(f,u,l[u]);else _export({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS$1||d},l);return l},ARRAY_ITERATOR="Array Iterator",setInternalState=internalState.set,getInternalState=internalState.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",(function(e,t){setInternalState(this,{type:ARRAY_ITERATOR,target:toIndexedObject(e),index:0,kind:t})}),(function(){var e=getInternalState(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");iterators.Arguments=iterators.Array;var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},TO_STRING_TAG$3=wellKnownSymbol("toStringTag");for(var COLLECTION_NAME in domIterables){var Collection$1=global_1[COLLECTION_NAME],CollectionPrototype=Collection$1&&Collection$1.prototype;CollectionPrototype&&classof(CollectionPrototype)!==TO_STRING_TAG$3&&createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG$3,COLLECTION_NAME),iterators[COLLECTION_NAME]=iterators.Array}var $forEach=arrayIteration.forEach,STRICT_METHOD$1=arrayMethodIsStrict("forEach"),USES_TO_LENGTH$3=arrayMethodUsesToLength("forEach"),arrayForEach=STRICT_METHOD$1&&USES_TO_LENGTH$3?[].forEach:function(e){return $forEach(this,e,arguments.length>1?arguments[1]:void 0)};_export({target:"Array",proto:!0,forced:[].forEach!=arrayForEach},{forEach:arrayForEach});var forEach$1=entryVirtual("Array").forEach,forEach$1$1=forEach$1,ArrayPrototype$4=Array.prototype,DOMIterables={DOMTokenList:!0,NodeList:!0},forEach_1$1=function(e){var t=e.forEach;return e===ArrayPrototype$4||e instanceof Array&&t===ArrayPrototype$4.forEach||DOMIterables.hasOwnProperty(classof(e))?forEach$1$1:t},forEach$2=forEach_1$1,nativeGetOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,FAILS_ON_PRIMITIVES=fails((function(){nativeGetOwnPropertyDescriptor$1(1)})),FORCED=!descriptors||FAILS_ON_PRIMITIVES;_export({target:"Object",stat:!0,forced:FORCED,sham:!descriptors},{getOwnPropertyDescriptor:function(e,t){return nativeGetOwnPropertyDescriptor$1(toIndexedObject(e),t)}});var getOwnPropertyDescriptor_1=createCommonjsModule$1((function(e){var t=path.Object,r=e.exports=function(e,r){return t.getOwnPropertyDescriptor(e,r)};t.getOwnPropertyDescriptor.sham&&(r.sham=!0)})),getOwnPropertyDescriptor$2=getOwnPropertyDescriptor_1,getOwnPropertyDescriptor$3=getOwnPropertyDescriptor$2,nativeGetOwnPropertyNames=objectGetOwnPropertyNames.f,toString$1$1={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(e){try{return nativeGetOwnPropertyNames(e)}catch(e){return windowNames.slice()}},f$5=function(e){return windowNames&&"[object Window]"==toString$1$1.call(e)?getWindowNames(e):nativeGetOwnPropertyNames(toIndexedObject(e))},objectGetOwnPropertyNamesExternal={f:f$5},f$6=wellKnownSymbol,wellKnownSymbolWrapped={f:f$6},defineProperty$6=objectDefineProperty.f,defineWellKnownSymbol=function(e){var t=path.Symbol||(path.Symbol={});has$1(t,e)||defineProperty$6(t,e,{value:wellKnownSymbolWrapped.f(e)})},$forEach$1=arrayIteration.forEach,HIDDEN=sharedKey("hidden"),SYMBOL="Symbol",PROTOTYPE$1="prototype",TO_PRIMITIVE=wellKnownSymbol("toPrimitive"),setInternalState$1=internalState.set,getInternalState$1=internalState.getterFor(SYMBOL),ObjectPrototype$1=Object[PROTOTYPE$1],$Symbol=global_1.Symbol,$stringify=getBuiltIn("JSON","stringify"),nativeGetOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,nativeDefineProperty$1=objectDefineProperty.f,nativeGetOwnPropertyNames$1=objectGetOwnPropertyNamesExternal.f,nativePropertyIsEnumerable$1=objectPropertyIsEnumerable.f,AllSymbols=shared("symbols"),ObjectPrototypeSymbols=shared("op-symbols"),StringToSymbolRegistry=shared("string-to-symbol-registry"),SymbolToStringRegistry=shared("symbol-to-string-registry"),WellKnownSymbolsStore$1=shared("wks"),QObject=global_1.QObject,USE_SETTER=!QObject||!QObject[PROTOTYPE$1]||!QObject[PROTOTYPE$1].findChild,setSymbolDescriptor=descriptors&&fails((function(){return 7!=objectCreate$1(nativeDefineProperty$1({},"a",{get:function(){return nativeDefineProperty$1(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=nativeGetOwnPropertyDescriptor$2(ObjectPrototype$1,t);n&&delete ObjectPrototype$1[t],nativeDefineProperty$1(e,t,r),n&&e!==ObjectPrototype$1&&nativeDefineProperty$1(ObjectPrototype$1,t,n)}:nativeDefineProperty$1,wrap=function(e,t){var r=AllSymbols[e]=objectCreate$1($Symbol[PROTOTYPE$1]);return setInternalState$1(r,{type:SYMBOL,tag:e,description:t}),descriptors||(r.description=t),r},isSymbol$2=useSymbolAsUid?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof $Symbol},$defineProperty=function(e,t,r){e===ObjectPrototype$1&&$defineProperty(ObjectPrototypeSymbols,t,r),anObject(e);var n=toPrimitive(t,!0);return anObject(r),has$1(AllSymbols,n)?(r.enumerable?(has$1(e,HIDDEN)&&e[HIDDEN][n]&&(e[HIDDEN][n]=!1),r=objectCreate$1(r,{enumerable:createPropertyDescriptor(0,!1)})):(has$1(e,HIDDEN)||nativeDefineProperty$1(e,HIDDEN,createPropertyDescriptor(1,{})),e[HIDDEN][n]=!0),setSymbolDescriptor(e,n,r)):nativeDefineProperty$1(e,n,r)},$defineProperties=function(e,t){anObject(e);var r=toIndexedObject(t),n=objectKeys(r).concat($getOwnPropertySymbols(r));return $forEach$1(n,(function(t){descriptors&&!$propertyIsEnumerable.call(r,t)||$defineProperty(e,t,r[t])})),e},$create=function(e,t){return void 0===t?objectCreate$1(e):$defineProperties(objectCreate$1(e),t)},$propertyIsEnumerable=function(e){var t=toPrimitive(e,!0),r=nativePropertyIsEnumerable$1.call(this,t);return!(this===ObjectPrototype$1&&has$1(AllSymbols,t)&&!has$1(ObjectPrototypeSymbols,t))&&(!(r||!has$1(this,t)||!has$1(AllSymbols,t)||has$1(this,HIDDEN)&&this[HIDDEN][t])||r)},$getOwnPropertyDescriptor=function(e,t){var r=toIndexedObject(e),n=toPrimitive(t,!0);if(r!==ObjectPrototype$1||!has$1(AllSymbols,n)||has$1(ObjectPrototypeSymbols,n)){var i=nativeGetOwnPropertyDescriptor$2(r,n);return!i||!has$1(AllSymbols,n)||has$1(r,HIDDEN)&&r[HIDDEN][n]||(i.enumerable=!0),i}},$getOwnPropertyNames=function(e){var t=nativeGetOwnPropertyNames$1(toIndexedObject(e)),r=[];return $forEach$1(t,(function(e){has$1(AllSymbols,e)||has$1(hiddenKeys,e)||r.push(e)})),r},$getOwnPropertySymbols=function(e){var t=e===ObjectPrototype$1,r=nativeGetOwnPropertyNames$1(t?ObjectPrototypeSymbols:toIndexedObject(e)),n=[];return $forEach$1(r,(function(e){!has$1(AllSymbols,e)||t&&!has$1(ObjectPrototype$1,e)||n.push(AllSymbols[e])})),n};if(nativeSymbol||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=uid(e),r=function(e){this===ObjectPrototype$1&&r.call(ObjectPrototypeSymbols,e),has$1(this,HIDDEN)&&has$1(this[HIDDEN],t)&&(this[HIDDEN][t]=!1),setSymbolDescriptor(this,t,createPropertyDescriptor(1,e))};return descriptors&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype$1,t,{configurable:!0,set:r}),wrap(t,e)},redefine($Symbol[PROTOTYPE$1],"toString",(function(){return getInternalState$1(this).tag})),redefine($Symbol,"withoutSetter",(function(e){return wrap(uid(e),e)})),objectPropertyIsEnumerable.f=$propertyIsEnumerable,objectDefineProperty.f=$defineProperty,objectGetOwnPropertyDescriptor.f=$getOwnPropertyDescriptor,objectGetOwnPropertyNames.f=objectGetOwnPropertyNamesExternal.f=$getOwnPropertyNames,objectGetOwnPropertySymbols.f=$getOwnPropertySymbols,wellKnownSymbolWrapped.f=function(e){return wrap(wellKnownSymbol(e),e)},descriptors&&nativeDefineProperty$1($Symbol[PROTOTYPE$1],"description",{configurable:!0,get:function(){return getInternalState$1(this).description}})),_export({global:!0,wrap:!0,forced:!nativeSymbol,sham:!nativeSymbol},{Symbol:$Symbol}),$forEach$1(objectKeys(WellKnownSymbolsStore$1),(function(e){defineWellKnownSymbol(e)})),_export({target:SYMBOL,stat:!0,forced:!nativeSymbol},{for:function(e){var t=String(e);if(has$1(StringToSymbolRegistry,t))return StringToSymbolRegistry[t];var r=$Symbol(t);return StringToSymbolRegistry[t]=r,SymbolToStringRegistry[r]=t,r},keyFor:function(e){if(!isSymbol$2(e))throw TypeError(e+" is not a symbol");if(has$1(SymbolToStringRegistry,e))return SymbolToStringRegistry[e]},useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}}),_export({target:"Object",stat:!0,forced:!nativeSymbol,sham:!descriptors},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor}),_export({target:"Object",stat:!0,forced:!nativeSymbol},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),_export({target:"Object",stat:!0,forced:fails((function(){objectGetOwnPropertySymbols.f(1)}))},{getOwnPropertySymbols:function(e){return objectGetOwnPropertySymbols.f(toObject(e))}}),$stringify){var FORCED_JSON_STRINGIFY=!nativeSymbol||fails((function(){var e=$Symbol();return"[null]"!=$stringify([e])||"{}"!=$stringify({a:e})||"{}"!=$stringify(Object(e))}));_export({target:"JSON",stat:!0,forced:FORCED_JSON_STRINGIFY},{stringify:function(e,t,r){for(var n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t,(isObject$2(t)||void 0!==e)&&!isSymbol$2(e))return isArray$1(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!isSymbol$2(t))return t}),i[1]=t,$stringify.apply(null,i)}})}$Symbol[PROTOTYPE$1][TO_PRIMITIVE]||createNonEnumerableProperty($Symbol[PROTOTYPE$1],TO_PRIMITIVE,$Symbol[PROTOTYPE$1].valueOf),setToStringTag($Symbol,SYMBOL),hiddenKeys[HIDDEN]=!0;var getOwnPropertySymbols=path.Object.getOwnPropertySymbols,getOwnPropertySymbols$1=getOwnPropertySymbols,getOwnPropertySymbols$2=getOwnPropertySymbols$1,createMethod$3=function(e){return function(t,r){var n,i,o=String(requireObjectCoercible(t)),a=toInteger$1(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):n:e?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$3(!1),charAt:createMethod$3(!0)},charAt=stringMultibyte.charAt,STRING_ITERATOR="String Iterator",setInternalState$2=internalState.set,getInternalState$2=internalState.getterFor(STRING_ITERATOR);defineIterator(String,"String",(function(e){setInternalState$2(this,{type:STRING_ITERATOR,string:String(e),index:0})}),(function(){var e,t=getInternalState$2(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=charAt(r,n),t.index+=e.length,{value:e,done:!1})}));var ITERATOR$2=wellKnownSymbol("iterator"),getIteratorMethod=function(e){if(null!=e)return e[ITERATOR$2]||e["@@iterator"]||iterators[classof(e)]},getIterator=function(e){var t=getIteratorMethod(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return anObject(t.call(e))},getIterator_1=getIterator,getIterator$1=getIterator_1,getIteratorMethod_1=getIteratorMethod,getIteratorMethod$1=getIteratorMethod_1,IS_CONCAT_SPREADABLE=wellKnownSymbol("isConcatSpreadable"),MAX_SAFE_INTEGER$2=9007199254740991,MAXIMUM_ALLOWED_INDEX_EXCEEDED="Maximum allowed index exceeded",IS_CONCAT_SPREADABLE_SUPPORT=engineV8Version>=51||!fails((function(){var e=[];return e[IS_CONCAT_SPREADABLE]=!1,e.concat()[0]!==e})),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(e){if(!isObject$2(e))return!1;var t=e[IS_CONCAT_SPREADABLE];return void 0!==t?!!t:isArray$1(e)},FORCED$1=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;_export({target:"Array",proto:!0,forced:FORCED$1},{concat:function(e){var t,r,n,i,o,a=toObject(this),s=arraySpeciesCreate(a,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?a:arguments[t],isConcatSpreadable(o)){if(l+(i=toLength(o.length))>MAX_SAFE_INTEGER$2)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(r=0;r<i;r++,l++)r in o&&createProperty(s,l,o[r])}else{if(l>=MAX_SAFE_INTEGER$2)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);createProperty(s,l++,o)}return s.length=l,s}});var es_object_toString=Object.freeze({__proto__:null});defineWellKnownSymbol("asyncIterator");var es_symbol_description=Object.freeze({__proto__:null});defineWellKnownSymbol("hasInstance"),defineWellKnownSymbol("isConcatSpreadable"),defineWellKnownSymbol("iterator"),defineWellKnownSymbol("match"),defineWellKnownSymbol("matchAll"),defineWellKnownSymbol("replace"),defineWellKnownSymbol("search"),defineWellKnownSymbol("species"),defineWellKnownSymbol("split"),defineWellKnownSymbol("toPrimitive"),defineWellKnownSymbol("toStringTag"),defineWellKnownSymbol("unscopables"),setToStringTag(Math,"Math",!0),setToStringTag(global_1.JSON,"JSON",!0),getCjsExportFromNamespace(es_object_toString),getCjsExportFromNamespace(es_symbol_description);var symbol=path.Symbol,symbol$1=symbol,symbol$2=symbol$1,callWithSafeIterationClosing=function(e,t,r,n){try{return n?t(anObject(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&anObject(i.call(e)),t}},ITERATOR$3=wellKnownSymbol("iterator"),ArrayPrototype$5=Array.prototype,isArrayIteratorMethod=function(e){return void 0!==e&&(iterators.Array===e||ArrayPrototype$5[ITERATOR$3]===e)},arrayFrom=function(e){var t,r,n,i,o,a,s=toObject(e),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,d=getIteratorMethod(s),f=0;if(h&&(c=functionBindContext(c,u>2?arguments[2]:void 0,2)),null==d||l==Array&&isArrayIteratorMethod(d))for(r=new l(t=toLength(s.length));t>f;f++)a=h?c(s[f],f):s[f],createProperty(r,f,a);else for(o=(i=d.call(s)).next,r=new l;!(n=o.call(i)).done;f++)a=h?callWithSafeIterationClosing(i,c,[n.value,f],!0):n.value,createProperty(r,f,a);return r.length=f,r},ITERATOR$4=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$4]=function(){return this},Array.from(iteratorWithReturn,(function(){throw 2}))}catch(error){}var checkCorrectnessOfIteration=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var r=!1;try{var n={};n[ITERATOR$4]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},INCORRECT_ITERATION=!checkCorrectnessOfIteration((function(e){Array.from(e)}));_export({target:"Array",stat:!0,forced:INCORRECT_ITERATION},{from:arrayFrom});var from_1=path.Array.from,from_1$1=from_1,from_1$2=from_1$1,HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport("slice"),USES_TO_LENGTH$4=arrayMethodUsesToLength("slice",{ACCESSORS:!0,0:0,1:2}),SPECIES$2=wellKnownSymbol("species"),nativeSlice=[].slice,max$1$1=Math.max;_export({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2||!USES_TO_LENGTH$4},{slice:function(e,t){var r,n,i,o=toIndexedObject(this),a=toLength(o.length),s=toAbsoluteIndex(e,a),l=toAbsoluteIndex(void 0===t?a:t,a);if(isArray$1(o)&&("function"!=typeof(r=o.constructor)||r!==Array&&!isArray$1(r.prototype)?isObject$2(r)&&null===(r=r[SPECIES$2])&&(r=void 0):r=void 0,r===Array||void 0===r))return nativeSlice.call(o,s,l);for(n=new(void 0===r?Array:r)(max$1$1(l-s,0)),i=0;s<l;s++,i++)s in o&&createProperty(n,i,o[s]);return n.length=i,n}});var slice$1=entryVirtual("Array").slice,ArrayPrototype$6=Array.prototype,slice_1=function(e){var t=e.slice;return e===ArrayPrototype$6||e instanceof Array&&t===ArrayPrototype$6.slice?slice$1:t},slice$2=slice_1,slice$3=slice$2,nativeConstruct=getBuiltIn("Reflect","construct"),NEW_TARGET_BUG=fails((function(){function e(){}return!(nativeConstruct((function(){}),[],e)instanceof e)})),ARGS_BUG=!fails((function(){nativeConstruct((function(){}))})),FORCED$2=NEW_TARGET_BUG||ARGS_BUG;_export({target:"Reflect",stat:!0,forced:FORCED$2,sham:FORCED$2},{construct:function(e,t){aFunction(e),anObject(t);var r=arguments.length<3?e:aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return nativeConstruct(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(functionBind.apply(e,n))}var i=r.prototype,o=objectCreate$1(isObject$2(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return isObject$2(a)?a:o}});var construct$1=path.Reflect.construct,construct$2=construct$1,construct$3=construct$2,entries=entryVirtual("Array").entries,entries$1=entries,ArrayPrototype$7=Array.prototype,DOMIterables$1={DOMTokenList:!0,NodeList:!0},entries_1=function(e){var t=e.entries;return e===ArrayPrototype$7||e instanceof Array&&t===ArrayPrototype$7.entries||DOMIterables$1.hasOwnProperty(classof(e))?entries$1:t},entries$2=entries_1,runtime_1=createCommonjsModule$1((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r,n){var i=t&&t.prototype instanceof c?t:c,o=Object.create(i.prototype),a=new w(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return x()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function c(){}function h(){}function d(){}var f={};f[i]=function(){return this};var p=Object.getPrototypeOf,g=p&&p(p(E([])));g&&g!==t&&r.call(g,i)&&(f=g);var y=d.prototype=c.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function m(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=y.constructor=d,d.constructor=h,d[a]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),m.prototype[o]=function(){return this},e.AsyncIterator=m,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new m(s(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(y),y[a]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}})),regenerator=runtime_1,iterator=wellKnownSymbolWrapped.f("iterator"),iterator$1=iterator,iterator$2=iterator$1,$stringify$1=getBuiltIn("JSON","stringify"),re=/[\uD800-\uDFFF]/g,low=/^[\uD800-\uDBFF]$/,hi=/^[\uDC00-\uDFFF]$/,fix=function(e,t,r){var n=r.charAt(t-1),i=r.charAt(t+1);return low.test(e)&&!hi.test(i)||hi.test(e)&&!low.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},FORCED$3=fails((function(){return'"\\udf06\\ud834"'!==$stringify$1("\udf06\ud834")||'"\\udead"'!==$stringify$1("\udead")}));$stringify$1&&_export({target:"JSON",stat:!0,forced:FORCED$3},{stringify:function(e,t,r){var n=$stringify$1.apply(null,arguments);return"string"==typeof n?n.replace(re,fix):n}}),path.JSON||(path.JSON={stringify:JSON.stringify});var stringify=function(e,t,r){return path.JSON.stringify.apply(null,arguments)},stringify$1=stringify,stringify$2=stringify$1;function _defineProperty$2(e,t,r){return t in e?defineProperty$2(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var defineProperty$7=_defineProperty$2,values$1=entryVirtual("Array").values,values$1$1=values$1,ArrayPrototype$8=Array.prototype,DOMIterables$2={DOMTokenList:!0,NodeList:!0},values_1$1=function(e){var t=e.values;return e===ArrayPrototype$8||e instanceof Array&&t===ArrayPrototype$8.values||DOMIterables$2.hasOwnProperty(classof(e))?values$1$1:t},values$2=values_1$1,test$1=[],nativeSort=test$1.sort,FAILS_ON_UNDEFINED=fails((function(){test$1.sort(void 0)})),FAILS_ON_NULL=fails((function(){test$1.sort(null)})),STRICT_METHOD$2=arrayMethodIsStrict("sort"),FORCED$4=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD$2;_export({target:"Array",proto:!0,forced:FORCED$4},{sort:function(e){return void 0===e?nativeSort.call(toObject(this)):nativeSort.call(toObject(this),aFunction(e))}});var sort$1=entryVirtual("Array").sort,ArrayPrototype$9=Array.prototype,sort_1$1=function(e){var t=e.sort;return e===ArrayPrototype$9||e instanceof Array&&t===ArrayPrototype$9.sort?sort$1:t},sort$1$1=sort_1$1,sort$2=sort$1$1,keys$1$1=entryVirtual("Array").keys,keys$2=keys$1$1,ArrayPrototype$a=Array.prototype,DOMIterables$3={DOMTokenList:!0,NodeList:!0},keys_1$1=function(e){var t=e.keys;return e===ArrayPrototype$a||e instanceof Array&&t===ArrayPrototype$a.keys||DOMIterables$3.hasOwnProperty(classof(e))?keys$2:t},keys$3=keys_1$1;_export({target:"Array",stat:!0},{isArray:isArray$1});var isArray$1$1=path.Array.isArray,isArray$2=isArray$1$1,isArray$3=isArray$2;function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var arrayLikeToArray=_arrayLikeToArray;function _arrayWithoutHoles(e){if(isArray$3(e))return arrayLikeToArray(e)}var arrayWithoutHoles=_arrayWithoutHoles,from_1$3=from_1,from_1$4=from_1$3,ITERATOR$5=wellKnownSymbol("iterator"),isIterable=function(e){var t=Object(e);return void 0!==t[ITERATOR$5]||"@@iterator"in t||iterators.hasOwnProperty(classof(t))},isIterable_1=isIterable,isIterable$1=isIterable_1;defineWellKnownSymbol("asyncDispose"),defineWellKnownSymbol("dispose"),defineWellKnownSymbol("observable"),defineWellKnownSymbol("patternMatch"),defineWellKnownSymbol("replaceAll");var symbol$3=symbol,symbol$4=symbol$3;function _iterableToArray(e){if(void 0!==symbol$4&&isIterable$1(Object(e)))return from_1$4(e)}var iterableToArray=_iterableToArray,slice$4=slice_1,slice$5=slice$4;function _unsupportedIterableToArray(e,t){var r;if(e){if("string"==typeof e)return arrayLikeToArray(e,t);var n=slice$5(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?from_1$4(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?arrayLikeToArray(e,t):void 0}}var unsupportedIterableToArray=_unsupportedIterableToArray;function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var nonIterableSpread=_nonIterableSpread;function _toConsumableArray(e){return arrayWithoutHoles(e)||iterableToArray(e)||unsupportedIterableToArray(e)||nonIterableSpread()}var toConsumableArray=_toConsumableArray,concat=entryVirtual("Array").concat,ArrayPrototype$b=Array.prototype,concat_1=function(e){var t=e.concat;return e===ArrayPrototype$b||e instanceof Array&&t===ArrayPrototype$b.concat?concat:t},concat$1=concat_1,concat$2=concat$1,nativeAssign=Object.assign,defineProperty$8=Object.defineProperty,objectAssign=!nativeAssign||fails((function(){if(descriptors&&1!==nativeAssign({b:1},nativeAssign(defineProperty$8({},"a",{enumerable:!0,get:function(){defineProperty$8(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=nativeAssign({},e)[r]||"abcdefghijklmnopqrst"!=objectKeys(nativeAssign({},t)).join("")}))?function(e,t){for(var r=toObject(e),n=arguments.length,i=1,o=objectGetOwnPropertySymbols.f,a=objectPropertyIsEnumerable.f;n>i;)for(var s,l=indexedObject(arguments[i++]),u=o?objectKeys(l).concat(o(l)):objectKeys(l),c=u.length,h=0;c>h;)s=u[h++],descriptors&&!a.call(l,s)||(r[s]=l[s]);return r}:nativeAssign;_export({target:"Object",stat:!0,forced:Object.assign!==objectAssign},{assign:objectAssign});var assign$3=path.Object.assign,assign$1$1=assign$3,assign$2$1=assign$1$1,$some=arrayIteration.some,STRICT_METHOD$3=arrayMethodIsStrict("some"),USES_TO_LENGTH$5=arrayMethodUsesToLength("some");_export({target:"Array",proto:!0,forced:!STRICT_METHOD$3||!USES_TO_LENGTH$5},{some:function(e){return $some(this,e,arguments.length>1?arguments[1]:void 0)}});var some=entryVirtual("Array").some,ArrayPrototype$c=Array.prototype,some_1=function(e){var t=e.some;return e===ArrayPrototype$c||e instanceof Array&&t===ArrayPrototype$c.some?some:t},some$1=some_1,some$2=some$1,iterator$3=iterator,iterator$4=iterator$3,_typeof_1=createCommonjsModule$1((function(e){function t(r){return e.exports=t="function"==typeof symbol$4&&"symbol"==typeof iterator$4?function(e){return typeof e}:function(e){return e&&"function"==typeof symbol$4&&e.constructor===symbol$4&&e!==symbol$4.prototype?"symbol":typeof e},t(r)}e.exports=t})),FAILS_ON_PRIMITIVES$1=fails((function(){objectKeys(1)}));_export({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$1},{keys:function(e){return objectKeys(toObject(e))}});var keys$4=path.Object.keys,keys$5=keys$4,keys$6=keys$5,freezing=!fails((function(){return Object.isExtensible(Object.preventExtensions({}))})),internalMetadata=createCommonjsModule$1((function(e){var t=objectDefineProperty.f,r=uid("meta"),n=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,r,{value:{objectID:"O"+ ++n,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!isObject$2(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!has$1(e,r)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[r].objectID},getWeakData:function(e,t){if(!has$1(e,r)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[r].weakData},onFreeze:function(e){return freezing&&a.REQUIRED&&i(e)&&!has$1(e,r)&&o(e),e}};hiddenKeys[r]=!0})),internalMetadata_1=internalMetadata.REQUIRED,internalMetadata_2=internalMetadata.fastKey,internalMetadata_3=internalMetadata.getWeakData,internalMetadata_4=internalMetadata.onFreeze,iterate_1=createCommonjsModule$1((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,r,n,i,o){var a,s,l,u,c,h,d,f=functionBindContext(r,n,i?2:1);if(o)a=e;else{if("function"!=typeof(s=getIteratorMethod(e)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(s)){for(l=0,u=toLength(e.length);u>l;l++)if((c=i?f(anObject(d=e[l])[0],d[1]):f(e[l]))&&c instanceof t)return c;return new t(!1)}a=s.call(e)}for(h=a.next;!(d=h.call(a)).done;)if("object"==typeof(c=callWithSafeIterationClosing(a,f,d.value,i))&&c&&c instanceof t)return c;return new t(!1)}).stop=function(e){return new t(!0,e)}})),anInstance=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},defineProperty$9=objectDefineProperty.f,forEach$3=arrayIteration.forEach,setInternalState$3=internalState.set,internalStateGetterFor=internalState.getterFor,collection$1=function(e,t,r){var n,i=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),a=i?"set":"add",s=global_1[e],l=s&&s.prototype,u={};if(descriptors&&"function"==typeof s&&(o||l.forEach&&!fails((function(){(new s).entries().next()})))){n=t((function(t,r){setInternalState$3(anInstance(t,n,e),{type:e,collection:new s}),null!=r&&iterate_1(r,t[a],t,i)}));var c=internalStateGetterFor(e);forEach$3(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in l)||o&&"clear"==e||createNonEnumerableProperty(n.prototype,e,(function(r,n){var i=c(this).collection;if(!t&&o&&!isObject$2(r))return"get"==e&&void 0;var a=i[e](0===r?0:r,n);return t?this:a}))})),o||defineProperty$9(n.prototype,"size",{configurable:!0,get:function(){return c(this).collection.size}})}else n=r.getConstructor(t,e,i,a),internalMetadata.REQUIRED=!0;return setToStringTag(n,e,!1,!0),u[e]=n,_export({global:!0,forced:!0},u),o||r.setStrong(n,e,i),n},redefineAll=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:redefine(e,n,t[n],r);return e},SPECIES$3=wellKnownSymbol("species"),setSpecies=function(e){var t=getBuiltIn(e),r=objectDefineProperty.f;descriptors&&t&&!t[SPECIES$3]&&r(t,SPECIES$3,{configurable:!0,get:function(){return this}})},defineProperty$a=objectDefineProperty.f,fastKey=internalMetadata.fastKey,setInternalState$4=internalState.set,internalStateGetterFor$1=internalState.getterFor,collectionStrong={getConstructor:function(e,t,r,n){var i=e((function(e,o){anInstance(e,i,t),setInternalState$4(e,{type:t,index:objectCreate$1(null),first:void 0,last:void 0,size:0}),descriptors||(e.size=0),null!=o&&iterate_1(o,e[n],e,r)})),o=internalStateGetterFor$1(t),a=function(e,t,r){var n,i,a=o(e),l=s(e,t);return l?l.value=r:(a.last=l={index:i=fastKey(t,!0),key:t,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=l),n&&(n.next=l),descriptors?a.size++:e.size++,"F"!==i&&(a.index[i]=l)),e},s=function(e,t){var r,n=o(e),i=fastKey(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return redefineAll(i.prototype,{clear:function(){for(var e=o(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,descriptors?e.size=0:this.size=0},delete:function(e){var t=o(this),r=s(this,e);if(r){var n=r.next,i=r.previous;delete t.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),t.first==r&&(t.first=n),t.last==r&&(t.last=i),descriptors?t.size--:this.size--}return!!r},forEach:function(e){for(var t,r=o(this),n=functionBindContext(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),redefineAll(i.prototype,r?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),descriptors&&defineProperty$a(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=internalStateGetterFor$1(t),o=internalStateGetterFor$1(n);defineIterator(e,t,(function(e,t){setInternalState$4(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),setSpecies(t)}},es_map=collection$1("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),collectionStrong),map$3=path.Map,map$4=map$3,map$5=map$4,isArray$4=isArray$1$1,isArray$5=isArray$4;function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var assertThisInitialized=_assertThisInitialized;function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof_1(t)&&"function"!=typeof t?assertThisInitialized(e):t}var possibleConstructorReturn=_possibleConstructorReturn,FAILS_ON_PRIMITIVES$2=fails((function(){objectGetPrototypeOf(1)}));_export({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$2,sham:!correctPrototypeGetter},{getPrototypeOf:function(e){return objectGetPrototypeOf(toObject(e))}});var getPrototypeOf=path.Object.getPrototypeOf,getPrototypeOf$1=getPrototypeOf,getPrototypeOf$2=getPrototypeOf$1;_export({target:"Object",stat:!0},{setPrototypeOf:objectSetPrototypeOf});var setPrototypeOf=path.Object.setPrototypeOf,setPrototypeOf$1=setPrototypeOf,setPrototypeOf$2=setPrototypeOf$1,getPrototypeOf$3=createCommonjsModule$1((function(e){function t(r){return e.exports=t=setPrototypeOf$2?getPrototypeOf$2:function(e){return e.__proto__||getPrototypeOf$2(e)},t(r)}e.exports=t}));_export({target:"Object",stat:!0,sham:!descriptors},{create:objectCreate$1});var Object$1=path.Object,create=function(e,t){return Object$1.create(e,t)},create$1=create,create$2=create$1,setPrototypeOf$3=createCommonjsModule$1((function(e){function t(r,n){return e.exports=t=setPrototypeOf$2||function(e,t){return e.__proto__=t,e},t(r,n)}e.exports=t}));function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=create$2(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&setPrototypeOf$3(e,t)}var inherits=_inherits,getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),rnds8=new Uint8Array(16);function rng(){if(!getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}for(var byteToHex=[],i$1=0;i$1<256;++i$1)byteToHex[i$1]=(i$1+256).toString(16).substr(1);function bytesToUuid(e,t){var r=t||0,n=byteToHex;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}function v4(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||rng)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||bytesToUuid(i)}var create$3=create,create$4=create$3,whitespaces="\t\n\v\f\r \u2028\u2029\ufeff",whitespace="["+whitespaces+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod$4=function(e){return function(t){var r=String(requireObjectCoercible(t));return 1&e&&(r=r.replace(ltrim,"")),2&e&&(r=r.replace(rtrim,"")),r}},stringTrim={start:createMethod$4(1),end:createMethod$4(2),trim:createMethod$4(3)},non="",stringTrimForced=function(e){return fails((function(){return!!whitespaces[e]()||non[e]()!=non||whitespaces[e].name!==e}))},$trim=stringTrim.trim;_export({target:"String",proto:!0,forced:stringTrimForced("trim")},{trim:function(){return $trim(this)}});var trim=entryVirtual("String").trim,trim$1=stringTrim.trim,$parseInt=global_1.parseInt,hex=/^[+-]?0[Xx]/,FORCED$5=8!==$parseInt(whitespaces+"08")||22!==$parseInt(whitespaces+"0x16"),numberParseInt=FORCED$5?function(e,t){var r=trim$1(String(e));return $parseInt(r,t>>>0||(hex.test(r)?16:10))}:$parseInt;_export({global:!0,forced:parseInt!=numberParseInt},{parseInt:numberParseInt});var propertyIsEnumerable$2=objectPropertyIsEnumerable.f,createMethod$5=function(e){return function(t){for(var r,n=toIndexedObject(t),i=objectKeys(n),o=i.length,a=0,s=[];o>a;)r=i[a++],descriptors&&!propertyIsEnumerable$2.call(n,r)||s.push(e?[r,n[r]]:n[r]);return s}},objectToArray={entries:createMethod$5(!0),values:createMethod$5(!1)},$values=objectToArray.values;_export({target:"Object",stat:!0},{values:function(e){return $values(e)}});var values$3=path.Object.values,getPrototypeOf$4=getPrototypeOf,getPrototypeOf$5=getPrototypeOf$4,$indexOf=arrayIncludes$1.indexOf,nativeIndexOf=[].indexOf,NEGATIVE_ZERO=!!nativeIndexOf&&1/[1].indexOf(1,-0)<0,STRICT_METHOD$4=arrayMethodIsStrict("indexOf"),USES_TO_LENGTH$6=arrayMethodUsesToLength("indexOf",{ACCESSORS:!0,1:0});_export({target:"Array",proto:!0,forced:NEGATIVE_ZERO||!STRICT_METHOD$4||!USES_TO_LENGTH$6},{indexOf:function(e){return NEGATIVE_ZERO?nativeIndexOf.apply(this,arguments)||0:$indexOf(this,e,arguments.length>1?arguments[1]:void 0)}});var indexOf$1=entryVirtual("Array").indexOf;function _arrayWithHoles$1(e){if(isArray$3(e))return e}var arrayWithHoles=_arrayWithHoles$1;function _iterableToArrayLimit$1(e,t){if(void 0!==symbol$4&&isIterable$1(Object(e))){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=getIterator$1(e);!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}var iterableToArrayLimit=_iterableToArrayLimit$1;function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var nonIterableRest=_nonIterableRest$1;function _slicedToArray$1(e,t){return arrayWithHoles(e)||iterableToArrayLimit(e,t)||unsupportedIterableToArray(e,t)||nonIterableRest()}var slicedToArray=_slicedToArray$1;_export({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var now$2=path.Date.now;function isNumber(e){return e instanceof Number||"number"==typeof e}function isString$1(e){return e instanceof String||"string"==typeof e}function copyOrDelete(e,t,r,n){var i=!1;!0===n&&(i=null===t[r]&&void 0!==e[r]),i?delete e[r]:e[r]=t[r]}function deepExtend(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)||!0===r)if("object"===_typeof_1(t[i])&&null!==t[i]&&getPrototypeOf$5(t[i])===Object.prototype)void 0===e[i]?e[i]=deepExtend({},t[i],r):"object"===_typeof_1(e[i])&&null!==e[i]&&getPrototypeOf$5(e[i])===Object.prototype?deepExtend(e[i],t[i],r):copyOrDelete(e,t,i,n);else if(isArray$5(t[i])){var o;e[i]=slice$3(o=t[i]).call(o)}else copyOrDelete(e,t,i,n);return e}function getType(e){var t=_typeof_1(e);return"object"===t?null===e?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":isArray$5(e)?"Array":e instanceof Date?"Date":"Object":"number"===t?"Number":"boolean"===t?"Boolean":"string"===t?"String":void 0===t?"undefined":t}var moment=createCommonjsModule$1((function(e,t){e.exports=function(){var t,r;function n(){return t.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var r,n=[];for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){for(var r in t)c(t,r)&&(e[r]=t[r]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,r,n){return Et(e,t,r,n,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=f(e),n=r.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function g(e){var t=d(NaN);return null!=e?h(f(t),e):f(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var y=n.momentProperties=[];function v(e,t){var r,n,i;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=f(t)),a(t._locale)||(e._locale=t._locale),y.length>0)for(r=0;r<y.length;r++)a(i=t[n=y[r]])||(e[n]=i);return e}var m=!1;function b(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===m&&(m=!0,n.updateOffset(this),m=!1)}function $(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function _(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=_(t)),r}function E(e,t,r){var n,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(n=0;n<i;n++)(r&&e[n]!==t[n]||!r&&w(e[n])!==w(t[n]))&&a++;return a+o}function x(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function T(e,t){var r=!0;return h((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}x(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)}),t)}var S,O={};function C(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),O[e]||(x(t),O[e]=!0)}function k(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function P(e,t){var r,n=h({},e);for(r in t)c(t,r)&&(o(e[r])&&o(t[r])?(n[r]={},h(n[r],e[r]),h(n[r],t[r])):null!=t[r]?n[r]=t[r]:delete n[r]);for(r in e)c(e,r)&&!c(t,r)&&o(e[r])&&(n[r]=h({},n[r]));return n}function A(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)c(e,t)&&r.push(t);return r};var I={};function D(e,t){var r=e.toLowerCase();I[r]=I[r+"s"]=I[t]=e}function N(e){return"string"==typeof e?I[e]||I[e.toLowerCase()]:void 0}function M(e){var t,r,n={};for(r in e)c(e,r)&&(t=N(r))&&(n[t]=e[r]);return n}var R={};function L(e,t){R[e]=t}function j(e,t,r){var n=""+Math.abs(e),i=t-n.length;return(e>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},G={};function U(e,t,r,n){var i=n;"string"==typeof n&&(i=function(){return this[n]()}),e&&(G[e]=i),t&&(G[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),r&&(G[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function H(e,t){return e.isValid()?(t=V(t,e.localeData()),z[t]=z[t]||function(e){var t,r,n,i=e.match(F);for(t=0,r=i.length;t<r;t++)G[i[t]]?i[t]=G[i[t]]:i[t]=(n=i[t]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(t){var n,o="";for(n=0;n<r;n++)o+=k(i[n])?i[n].call(t,e):i[n];return o}}(t),z[t](e)):e.localeData().invalidDate()}function V(e,t){var r=5;function n(e){return t.longDateFormat(e)||e}for(B.lastIndex=0;r>=0&&B.test(e);)e=e.replace(B,n),B.lastIndex=0,r-=1;return e}var Y=/\d/,W=/\d\d/,q=/\d{3}/,X=/\d{4}/,K=/[+-]?\d{6}/,Z=/\d\d?/,Q=/\d\d\d\d?/,J=/\d\d\d\d\d\d?/,ee=/\d{1,3}/,te=/\d{1,4}/,re=/[+-]?\d{1,6}/,ne=/\d+/,ie=/[+-]?\d+/,oe=/Z|[+-]\d\d:?\d\d/gi,ae=/Z|[+-]\d\d(?::?\d\d)?/gi,se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,le={};function ue(e,t,r){le[e]=k(t)?t:function(e,n){return e&&r?r:t}}function ce(e,t){return c(le,e)?le[e](t._strict,t._locale):new RegExp(he(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,r,n,i){return t||r||n||i}))))}function he(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var de={};function fe(e,t){var r,n=t;for("string"==typeof e&&(e=[e]),s(t)&&(n=function(e,r){r[t]=w(e)}),r=0;r<e.length;r++)de[e[r]]=n}function pe(e,t){fe(e,(function(e,r,n,i){n._w=n._w||{},t(e,n._w,n,i)}))}function ge(e,t,r){null!=t&&c(de,e)&&de[e](t,r._a,r,e)}function ye(e){return ve(e)?366:365}function ve(e){return e%4==0&&e%100!=0||e%400==0}U("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),U(0,["YY",2],0,(function(){return this.year()%100})),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),D("year","y"),L("year",1),ue("Y",ie),ue("YY",Z,W),ue("YYYY",te,X),ue("YYYYY",re,K),ue("YYYYYY",re,K),fe(["YYYYY","YYYYYY"],0),fe("YYYY",(function(e,t){t[0]=2===e.length?n.parseTwoDigitYear(e):w(e)})),fe("YY",(function(e,t){t[0]=n.parseTwoDigitYear(e)})),fe("Y",(function(e,t){t[0]=parseInt(e,10)})),n.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var me,be=$e("FullYear",!0);function $e(e,t){return function(r){return null!=r?(we(this,e,r),n.updateOffset(this,t),this):_e(this,e)}}function _e(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function we(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&ve(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Ee(r,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function Ee(e,t){if(isNaN(e)||isNaN(t))return NaN;var r,n=(t%(r=12)+r)%r;return e+=(t-n)/12,1===n?ve(e)?29:28:31-n%7%2}me=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},U("M",["MM",2],"Mo",(function(){return this.month()+1})),U("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),U("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),D("month","M"),L("month",8),ue("M",Z),ue("MM",Z,W),ue("MMM",(function(e,t){return t.monthsShortRegex(e)})),ue("MMMM",(function(e,t){return t.monthsRegex(e)})),fe(["M","MM"],(function(e,t){t[1]=w(e)-1})),fe(["MMM","MMMM"],(function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);null!=i?t[1]=i:f(r).invalidMonth=e}));var xe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Te="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Se="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Oe(e,t,r){var n,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=d([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(i=me.call(this._shortMonthsParse,a))?i:null:-1!==(i=me.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=me.call(this._shortMonthsParse,a))||-1!==(i=me.call(this._longMonthsParse,a))?i:null:-1!==(i=me.call(this._longMonthsParse,a))||-1!==(i=me.call(this._shortMonthsParse,a))?i:null}function Ce(e,t){var r;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(!s(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),Ee(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function ke(e){return null!=e?(Ce(this,e),n.updateOffset(this,!0),this):_e(this,"Month")}var Pe=se,Ae=se;function Ie(){function e(e,t){return t.length-e.length}var t,r,n=[],i=[],o=[];for(t=0;t<12;t++)r=d([2e3,t]),n.push(this.monthsShort(r,"")),i.push(this.months(r,"")),o.push(this.months(r,"")),o.push(this.monthsShort(r,""));for(n.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)n[t]=he(n[t]),i[t]=he(i[t]);for(t=0;t<24;t++)o[t]=he(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function De(e,t,r,n,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,r,n,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,r,n,i,o,a),s}function Ne(e){var t;if(e<100&&e>=0){var r=Array.prototype.slice.call(arguments);r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function Me(e,t,r){var n=7+t-r;return-(7+Ne(e,0,n).getUTCDay()-t)%7+n-1}function Re(e,t,r,n,i){var o,a,s=1+7*(t-1)+(7+r-n)%7+Me(e,n,i);return s<=0?a=ye(o=e-1)+s:s>ye(e)?(o=e+1,a=s-ye(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Le(e,t,r){var n,i,o=Me(e.year(),t,r),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?n=a+je(i=e.year()-1,t,r):a>je(e.year(),t,r)?(n=a-je(e.year(),t,r),i=e.year()+1):(i=e.year(),n=a),{week:n,year:i}}function je(e,t,r){var n=Me(e,t,r),i=Me(e+1,t,r);return(ye(e)-n+i)/7}function Fe(e,t){return e.slice(t,7).concat(e.slice(0,t))}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),L("week",5),L("isoWeek",5),ue("w",Z),ue("ww",Z,W),ue("W",Z),ue("WW",Z,W),pe(["w","ww","W","WW"],(function(e,t,r,n){t[n.substr(0,1)]=w(e)})),U("d",0,"do","day"),U("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),U("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),U("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),ue("d",Z),ue("e",Z),ue("E",Z),ue("dd",(function(e,t){return t.weekdaysMinRegex(e)})),ue("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),ue("dddd",(function(e,t){return t.weekdaysRegex(e)})),pe(["dd","ddd","dddd"],(function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);null!=i?t.d=i:f(r).invalidWeekday=e})),pe(["d","e","E"],(function(e,t,r,n){t[n]=w(e)}));var Be="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ge="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ue(e,t,r){var n,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=d([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(i=me.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=me.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=me.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=me.call(this._weekdaysParse,a))||-1!==(i=me.call(this._shortWeekdaysParse,a))||-1!==(i=me.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=me.call(this._shortWeekdaysParse,a))||-1!==(i=me.call(this._weekdaysParse,a))||-1!==(i=me.call(this._minWeekdaysParse,a))?i:null:-1!==(i=me.call(this._minWeekdaysParse,a))||-1!==(i=me.call(this._weekdaysParse,a))||-1!==(i=me.call(this._shortWeekdaysParse,a))?i:null}var He=se,Ve=se,Ye=se;function We(){function e(e,t){return t.length-e.length}var t,r,n,i,o,a=[],s=[],l=[],u=[];for(t=0;t<7;t++)r=d([2e3,1]).day(t),n=this.weekdaysMin(r,""),i=this.weekdaysShort(r,""),o=this.weekdays(r,""),a.push(n),s.push(i),l.push(o),u.push(n),u.push(i),u.push(o);for(a.sort(e),s.sort(e),l.sort(e),u.sort(e),t=0;t<7;t++)s[t]=he(s[t]),l[t]=he(l[t]),u[t]=he(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function qe(){return this.hours()%12||12}function Xe(e,t){U(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Ke(e,t){return t._meridiemParse}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,qe),U("k",["kk",2],0,(function(){return this.hours()||24})),U("hmm",0,0,(function(){return""+qe.apply(this)+j(this.minutes(),2)})),U("hmmss",0,0,(function(){return""+qe.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)})),U("Hmm",0,0,(function(){return""+this.hours()+j(this.minutes(),2)})),U("Hmmss",0,0,(function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)})),Xe("a",!0),Xe("A",!1),D("hour","h"),L("hour",13),ue("a",Ke),ue("A",Ke),ue("H",Z),ue("h",Z),ue("k",Z),ue("HH",Z,W),ue("hh",Z,W),ue("kk",Z,W),ue("hmm",Q),ue("hmmss",J),ue("Hmm",Q),ue("Hmmss",J),fe(["H","HH"],3),fe(["k","kk"],(function(e,t,r){var n=w(e);t[3]=24===n?0:n})),fe(["a","A"],(function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e})),fe(["h","hh"],(function(e,t,r){t[3]=w(e),f(r).bigHour=!0})),fe("hmm",(function(e,t,r){var n=e.length-2;t[3]=w(e.substr(0,n)),t[4]=w(e.substr(n)),f(r).bigHour=!0})),fe("hmmss",(function(e,t,r){var n=e.length-4,i=e.length-2;t[3]=w(e.substr(0,n)),t[4]=w(e.substr(n,2)),t[5]=w(e.substr(i)),f(r).bigHour=!0})),fe("Hmm",(function(e,t,r){var n=e.length-2;t[3]=w(e.substr(0,n)),t[4]=w(e.substr(n))})),fe("Hmmss",(function(e,t,r){var n=e.length-4,i=e.length-2;t[3]=w(e.substr(0,n)),t[4]=w(e.substr(n,2)),t[5]=w(e.substr(i))}));var Ze,Qe=$e("Hours",!0),Je={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Te,monthsShort:Se,week:{dow:0,doy:6},weekdays:Be,weekdaysMin:Ge,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},et={},tt={};function rt(e){return e?e.toLowerCase().replace("_","-"):e}function nt(t){var r=null;if(!et[t]&&e&&e.exports)try{r=Ze._abbr,commonjsRequire$1("./locale/"+t),it(r)}catch(e){}return et[t]}function it(e,t){var r;return e&&((r=a(t)?at(e):ot(e,t))?Ze=r:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Ze._abbr}function ot(e,t){if(null!==t){var r,n=Je;if(t.abbr=e,null!=et[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=et[e]._config;else if(null!=t.parentLocale)if(null!=et[t.parentLocale])n=et[t.parentLocale]._config;else{if(null==(r=nt(t.parentLocale)))return tt[t.parentLocale]||(tt[t.parentLocale]=[]),tt[t.parentLocale].push({name:e,config:t}),null;n=r._config}return et[e]=new A(P(n,t)),tt[e]&&tt[e].forEach((function(e){ot(e.name,e.config)})),it(e),et[e]}return delete et[e],null}function at(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ze;if(!i(e)){if(t=nt(e))return t;e=[e]}return function(e){for(var t,r,n,i,o=0;o<e.length;){for(t=(i=rt(e[o]).split("-")).length,r=(r=rt(e[o+1]))?r.split("-"):null;t>0;){if(n=nt(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&E(i,r,!0)>=t-1)break;t--}o++}return Ze}(e)}function st(e){var t,r=e._a;return r&&-2===f(e).overflow&&(t=r[1]<0||r[1]>11?1:r[2]<1||r[2]>Ee(r[0],r[1])?2:r[3]<0||r[3]>24||24===r[3]&&(0!==r[4]||0!==r[5]||0!==r[6])?3:r[4]<0||r[4]>59?4:r[5]<0||r[5]>59?5:r[6]<0||r[6]>999?6:-1,f(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),f(e)._overflowWeeks&&-1===t&&(t=7),f(e)._overflowWeekday&&-1===t&&(t=8),f(e).overflow=t),e}function lt(e,t,r){return null!=e?e:null!=t?t:r}function ut(e){var t,r,i,o,a,s=[];if(!e._d){for(i=function(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,r,n,i,o,a,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,a=4,r=lt(t.GG,e._a[0],Le(xt(),1,4).year),n=lt(t.W,1),((i=lt(t.E,1))<1||i>7)&&(l=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var u=Le(xt(),o,a);r=lt(t.gg,e._a[0],u.year),n=lt(t.w,u.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(l=!0)):i=o}n<1||n>je(r,o,a)?f(e)._overflowWeeks=!0:null!=l?f(e)._overflowWeekday=!0:(s=Re(r,n,i,o,a),e._a[0]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=lt(e._a[0],i[0]),(e._dayOfYear>ye(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),r=Ne(a,0,e._dayOfYear),e._a[1]=r.getUTCMonth(),e._a[2]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?Ne:De).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(f(e).weekdayMismatch=!0)}}var ct=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,dt=/Z|[+-]\d\d(?::?\d\d)?/,ft=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],pt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],gt=/^\/?Date\((\-?\d+)/i;function yt(e){var t,r,n,i,o,a,s=e._i,l=ct.exec(s)||ht.exec(s);if(l){for(f(e).iso=!0,t=0,r=ft.length;t<r;t++)if(ft[t][1].exec(l[1])){i=ft[t][0],n=!1!==ft[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,r=pt.length;t<r;t++)if(pt[t][1].exec(l[3])){o=(l[2]||" ")+pt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!n&&null!=o)return void(e._isValid=!1);if(l[4]){if(!dt.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),_t(e)}else e._isValid=!1}var vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function mt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var bt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function $t(e){var t,r,n,i,o,a,s,l=vt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(l){var u=(t=l[4],r=l[3],n=l[2],i=l[5],o=l[6],a=l[7],s=[mt(t),Se.indexOf(r),parseInt(n,10),parseInt(i,10),parseInt(o,10)],a&&s.push(parseInt(a,10)),s);if(!function(e,t,r){return!e||ze.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(r).weekdayMismatch=!0,r._isValid=!1,!1)}(l[1],u,e))return;e._a=u,e._tzm=function(e,t,r){if(e)return bt[e];if(t)return 0;var n=parseInt(r,10),i=n%100;return(n-i)/100*60+i}(l[8],l[9],l[10]),e._d=Ne.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function _t(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],f(e).empty=!0;var t,r,i,o,a,s=""+e._i,l=s.length,u=0;for(i=V(e._f,e._locale).match(F)||[],t=0;t<i.length;t++)o=i[t],(r=(s.match(ce(o,e))||[])[0])&&((a=s.substr(0,s.indexOf(r))).length>0&&f(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),u+=r.length),G[o]?(r?f(e).empty=!1:f(e).unusedTokens.push(o),ge(o,r,e)):e._strict&&!r&&f(e).unusedTokens.push(o);f(e).charsLeftOver=l-u,s.length>0&&f(e).unusedInput.push(s),e._a[3]<=12&&!0===f(e).bigHour&&e._a[3]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[3]=function(e,t,r){var n;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):null!=e.isPM?((n=e.isPM(r))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),ut(e),st(e)}else $t(e);else yt(e)}function wt(e){var t=e._i,r=e._f;return e._locale=e._locale||at(e._l),null===t||void 0===r&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),$(t)?new b(st(t)):(l(t)?e._d=t:i(r)?function(e){var t,r,n,i,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],_t(t),p(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==n||o<n)&&(n=o,r=t));h(e,r||t)}(e):r?_t(e):function(e){var t=e._i;a(t)?e._d=new Date(n.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=gt.exec(e._i);null===t?(yt(e),!1===e._isValid&&(delete e._isValid,$t(e),!1===e._isValid&&(delete e._isValid,n.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):i(t)?(e._a=u(t.slice(0),(function(e){return parseInt(e,10)})),ut(e)):o(t)?function(e){if(!e._d){var t=M(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),ut(e)}}(e):s(t)?e._d=new Date(t):n.createFromInputFallback(e)}(e),p(e)||(e._d=null),e))}function Et(e,t,r,n,a){var s,l={};return!0!==r&&!1!==r||(n=r,r=void 0),(o(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||i(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=a,l._l=r,l._i=e,l._f=t,l._strict=n,(s=new b(st(wt(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function xt(e,t,r,n){return Et(e,t,r,n,!1)}n.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var Tt=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=xt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),St=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=xt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Ot(e,t){var r,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return xt();for(r=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r}var Ct=["year","quarter","month","week","day","hour","minute","second","millisecond"];function kt(e){var t=M(e),r=t.year||0,n=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===me.call(Ct,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,n=0;n<Ct.length;++n)if(e[Ct[n]]){if(r)return!1;parseFloat(e[Ct[n]])!==w(e[Ct[n]])&&(r=!0)}return!0}(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*n+12*r,this._data={},this._locale=at(),this._bubble()}function Pt(e){return e instanceof kt}function At(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function It(e,t){U(e,0,0,(function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+j(~~(e/60),2)+t+j(~~e%60,2)}))}It("Z",":"),It("ZZ",""),ue("Z",ae),ue("ZZ",ae),fe(["Z","ZZ"],(function(e,t,r){r._useUTC=!0,r._tzm=Nt(ae,e)}));var Dt=/([\+\-]|\d\d)/gi;function Nt(e,t){var r=(t||"").match(e);if(null===r)return null;var n=((r[r.length-1]||[])+"").match(Dt)||["-",0,0],i=60*n[1]+w(n[2]);return 0===i?0:"+"===n[0]?i:-i}function Mt(e,t){var r,i;return t._isUTC?(r=t.clone(),i=($(e)||l(e)?e.valueOf():xt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):xt(e).local()}function Rt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Lt(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var jt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ft=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bt(e,t){var r,n,i,o,a,l,u=e,h=null;return Pt(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(u={},t?u[t]=e:u.milliseconds=e):(h=jt.exec(e))?(r="-"===h[1]?-1:1,u={y:0,d:w(h[2])*r,h:w(h[3])*r,m:w(h[4])*r,s:w(h[5])*r,ms:w(At(1e3*h[6]))*r}):(h=Ft.exec(e))?(r="-"===h[1]?-1:1,u={y:zt(h[2],r),M:zt(h[3],r),w:zt(h[4],r),d:zt(h[5],r),h:zt(h[6],r),m:zt(h[7],r),s:zt(h[8],r)}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(o=xt(u.from),a=xt(u.to),i=o.isValid()&&a.isValid()?(a=Mt(a,o),o.isBefore(a)?l=Gt(o,a):((l=Gt(a,o)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(u={}).ms=i.milliseconds,u.M=i.months),n=new kt(u),Pt(e)&&c(e,"_locale")&&(n._locale=e._locale),n}function zt(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Gt(e,t){var r={};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Ut(e,t){return function(r,n){var i;return null===n||isNaN(+n)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),Ht(this,Bt(r="string"==typeof r?+r:r,n),e),this}}function Ht(e,t,r,i){var o=t._milliseconds,a=At(t._days),s=At(t._months);e.isValid()&&(i=null==i||i,s&&Ce(e,_e(e,"Month")+s*r),a&&we(e,"Date",_e(e,"Date")+a*r),o&&e._d.setTime(e._d.valueOf()+o*r),i&&n.updateOffset(e,a||s))}Bt.fn=kt.prototype,Bt.invalid=function(){return Bt(NaN)};var Vt=Ut(1,"add"),Yt=Ut(-1,"subtract");function Wt(e,t){var r=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(r,"months");return-(r+(t-n<0?(t-n)/(n-e.clone().add(r-1,"months")):(t-n)/(e.clone().add(r+1,"months")-n)))||0}function qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=at(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function Kt(){return this._locale}function Zt(e,t){return(e%t+t)%t}function Qt(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-126227808e5:new Date(e,t,r).valueOf()}function Jt(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-126227808e5:Date.UTC(e,t,r)}function er(e,t){U(0,[e,e.length],0,t)}function tr(e,t,r,n,i){var o;return null==e?Le(this,n,i).year:(t>(o=je(e,n,i))&&(t=o),rr.call(this,e,t,r,n,i))}function rr(e,t,r,n,i){var o=Re(e,t,r,n,i),a=Ne(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}U(0,["gg",2],0,(function(){return this.weekYear()%100})),U(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),er("gggg","weekYear"),er("ggggg","weekYear"),er("GGGG","isoWeekYear"),er("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),ue("G",ie),ue("g",ie),ue("GG",Z,W),ue("gg",Z,W),ue("GGGG",te,X),ue("gggg",te,X),ue("GGGGG",re,K),ue("ggggg",re,K),pe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,r,n){t[n.substr(0,2)]=w(e)})),pe(["gg","GG"],(function(e,t,r,i){t[i]=n.parseTwoDigitYear(e)})),U("Q",0,"Qo","quarter"),D("quarter","Q"),L("quarter",7),ue("Q",Y),fe("Q",(function(e,t){t[1]=3*(w(e)-1)})),U("D",["DD",2],"Do","date"),D("date","D"),L("date",9),ue("D",Z),ue("DD",Z,W),ue("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),fe(["D","DD"],2),fe("Do",(function(e,t){t[2]=w(e.match(Z)[0])}));var nr=$e("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),L("dayOfYear",4),ue("DDD",ee),ue("DDDD",q),fe(["DDD","DDDD"],(function(e,t,r){r._dayOfYear=w(e)})),U("m",["mm",2],0,"minute"),D("minute","m"),L("minute",14),ue("m",Z),ue("mm",Z,W),fe(["m","mm"],4);var ir=$e("Minutes",!1);U("s",["ss",2],0,"second"),D("second","s"),L("second",15),ue("s",Z),ue("ss",Z,W),fe(["s","ss"],5);var or,ar=$e("Seconds",!1);for(U("S",0,0,(function(){return~~(this.millisecond()/100)})),U(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),U(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),U(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),U(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),U(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),U(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),D("millisecond","ms"),L("millisecond",16),ue("S",ee,Y),ue("SS",ee,W),ue("SSS",ee,q),or="SSSS";or.length<=9;or+="S")ue(or,ne);function sr(e,t){t[6]=w(1e3*("0."+e))}for(or="S";or.length<=9;or+="S")fe(or,sr);var lr=$e("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var ur=b.prototype;function cr(e){return e}ur.add=Vt,ur.calendar=function(e,t){var r=e||xt(),i=Mt(r,this).startOf("day"),o=n.calendarFormat(this,i)||"sameElse",a=t&&(k(t[o])?t[o].call(this,r):t[o]);return this.format(a||this.localeData().calendar(o,this,xt(r)))},ur.clone=function(){return new b(this)},ur.diff=function(e,t,r){var n,i,o;if(!this.isValid())return NaN;if(!(n=Mt(e,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),t=N(t)){case"year":o=Wt(this,n)/12;break;case"month":o=Wt(this,n);break;case"quarter":o=Wt(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-i)/864e5;break;case"week":o=(this-n-i)/6048e5;break;default:o=this-n}return r?o:_(o)},ur.endOf=function(e){var t;if(void 0===(e=N(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?Jt:Qt;switch(e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-Zt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-Zt(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-Zt(t,1e3)-1}return this._d.setTime(t),n.updateOffset(this,!0),this},ur.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)},ur.from=function(e,t){return this.isValid()&&($(e)&&e.isValid()||xt(e).isValid())?Bt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ur.fromNow=function(e){return this.from(xt(),e)},ur.to=function(e,t){return this.isValid()&&($(e)&&e.isValid()||xt(e).isValid())?Bt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ur.toNow=function(e){return this.to(xt(),e)},ur.get=function(e){return k(this[e=N(e)])?this[e]():this},ur.invalidAt=function(){return f(this).overflow},ur.isAfter=function(e,t){var r=$(e)?e:xt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=N(t)||"millisecond")?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())},ur.isBefore=function(e,t){var r=$(e)?e:xt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=N(t)||"millisecond")?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())},ur.isBetween=function(e,t,r,n){var i=$(e)?e:xt(e),o=$(t)?t:xt(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(n=n||"()")[0]?this.isAfter(i,r):!this.isBefore(i,r))&&(")"===n[1]?this.isBefore(o,r):!this.isAfter(o,r))},ur.isSame=function(e,t){var r,n=$(e)?e:xt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=N(t)||"millisecond")?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))},ur.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ur.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ur.isValid=function(){return p(this)},ur.lang=Xt,ur.locale=qt,ur.localeData=Kt,ur.max=St,ur.min=Tt,ur.parsingFlags=function(){return h({},f(this))},ur.set=function(e,t){if("object"==typeof e)for(var r=function(e){var t=[];for(var r in e)t.push({unit:r,priority:R[r]});return t.sort((function(e,t){return e.priority-t.priority})),t}(e=M(e)),n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit]);else if(k(this[e=N(e)]))return this[e](t);return this},ur.startOf=function(e){var t;if(void 0===(e=N(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?Jt:Qt;switch(e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Zt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=Zt(t,6e4);break;case"second":t=this._d.valueOf(),t-=Zt(t,1e3)}return this._d.setTime(t),n.updateOffset(this,!0),this},ur.subtract=Yt,ur.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ur.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ur.toDate=function(){return new Date(this.valueOf())},ur.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?H(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):k(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(r,"Z")):H(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ur.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(r+n+"-MM-DD[T]HH:mm:ss.SSS"+i)},ur.toJSON=function(){return this.isValid()?this.toISOString():null},ur.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ur.unix=function(){return Math.floor(this.valueOf()/1e3)},ur.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ur.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ur.year=be,ur.isLeapYear=function(){return ve(this.year())},ur.weekYear=function(e){return tr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ur.isoWeekYear=function(e){return tr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ur.quarter=ur.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ur.month=ke,ur.daysInMonth=function(){return Ee(this.year(),this.month())},ur.week=ur.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ur.isoWeek=ur.isoWeeks=function(e){var t=Le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ur.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},ur.isoWeeksInYear=function(){return je(this.year(),1,4)},ur.date=nr,ur.day=ur.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ur.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ur.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},ur.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ur.hour=ur.hours=Qe,ur.minute=ur.minutes=ir,ur.second=ur.seconds=ar,ur.millisecond=ur.milliseconds=lr,ur.utcOffset=function(e,t,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Nt(ae,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(i=Rt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?Ht(this,Bt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Rt(this)},ur.utc=function(e){return this.utcOffset(0,e)},ur.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Rt(this),"m")),this},ur.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Nt(oe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ur.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?xt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ur.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ur.isLocal=function(){return!!this.isValid()&&!this._isUTC},ur.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ur.isUtc=Lt,ur.isUTC=Lt,ur.zoneAbbr=function(){return this._isUTC?"UTC":""},ur.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ur.dates=T("dates accessor is deprecated. Use date instead.",nr),ur.months=T("months accessor is deprecated. Use month instead",ke),ur.years=T("years accessor is deprecated. Use year instead",be),ur.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),ur.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),(e=wt(e))._a){var t=e._isUTC?d(e._a):xt(e._a);this._isDSTShifted=this.isValid()&&E(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var hr=A.prototype;function dr(e,t,r,n){var i=at(),o=d().set(n,t);return i[r](o,e)}function fr(e,t,r){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return dr(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=dr(e,n,r,"month");return i}function pr(e,t,r,n){"boolean"==typeof e?(s(t)&&(r=t,t=void 0),t=t||""):(r=t=e,e=!1,s(t)&&(r=t,t=void 0),t=t||"");var i,o=at(),a=e?o._week.dow:0;if(null!=r)return dr(t,(r+a)%7,n,"day");var l=[];for(i=0;i<7;i++)l[i]=dr(t,(i+a)%7,n,"day");return l}hr.calendar=function(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return k(n)?n.call(t,r):n},hr.longDateFormat=function(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},hr.invalidDate=function(){return this._invalidDate},hr.ordinal=function(e){return this._ordinal.replace("%d",e)},hr.preparse=cr,hr.postformat=cr,hr.relativeTime=function(e,t,r,n){var i=this._relativeTime[r];return k(i)?i(e,t,r,n):i.replace(/%d/i,e)},hr.pastFuture=function(e,t){var r=this._relativeTime[e>0?"future":"past"];return k(r)?r(t):r.replace(/%s/i,t)},hr.set=function(e){var t,r;for(r in e)k(t=e[r])?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},hr.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||xe).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},hr.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[xe.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},hr.monthsParse=function(e,t,r){var n,i,o;if(this._monthsParseExact)return Oe.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=d([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}},hr.monthsRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ie.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Ae),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},hr.monthsShortRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ie.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Pe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},hr.week=function(e){return Le(e,this._week.dow,this._week.doy).week},hr.firstDayOfYear=function(){return this._week.doy},hr.firstDayOfWeek=function(){return this._week.dow},hr.weekdays=function(e,t){var r=i(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Fe(r,this._week.dow):e?r[e.day()]:r},hr.weekdaysMin=function(e){return!0===e?Fe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},hr.weekdaysShort=function(e){return!0===e?Fe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},hr.weekdaysParse=function(e,t,r){var n,i,o;if(this._weekdaysParseExact)return Ue.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=d([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}},hr.weekdaysRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=He),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},hr.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ve),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},hr.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||We.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ye),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},hr.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},hr.meridiem=function(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"},it("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=T("moment.lang is deprecated. Use moment.locale instead.",it),n.langData=T("moment.langData is deprecated. Use moment.localeData instead.",at);var gr=Math.abs;function yr(e,t,r,n){var i=Bt(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function vr(e){return e<0?Math.floor(e):Math.ceil(e)}function mr(e){return 4800*e/146097}function br(e){return 146097*e/4800}function $r(e){return function(){return this.as(e)}}var _r=$r("ms"),wr=$r("s"),Er=$r("m"),xr=$r("h"),Tr=$r("d"),Sr=$r("w"),Or=$r("M"),Cr=$r("Q"),kr=$r("y");function Pr(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ar=Pr("milliseconds"),Ir=Pr("seconds"),Dr=Pr("minutes"),Nr=Pr("hours"),Mr=Pr("days"),Rr=Pr("months"),Lr=Pr("years"),jr=Math.round,Fr={ss:44,s:45,m:45,h:22,d:26,M:11};function Br(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}function zr(e,t,r){var n=Bt(e).abs(),i=jr(n.as("s")),o=jr(n.as("m")),a=jr(n.as("h")),s=jr(n.as("d")),l=jr(n.as("M")),u=jr(n.as("y")),c=i<=Fr.ss&&["s",i]||i<Fr.s&&["ss",i]||o<=1&&["m"]||o<Fr.m&&["mm",o]||a<=1&&["h"]||a<Fr.h&&["hh",a]||s<=1&&["d"]||s<Fr.d&&["dd",s]||l<=1&&["M"]||l<Fr.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=r,Br.apply(null,c)}var Gr=Math.abs;function Ur(e){return(e>0)-(e<0)||+e}function Hr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r=Gr(this._milliseconds)/1e3,n=Gr(this._days),i=Gr(this._months);e=_(r/60),t=_(e/60),r%=60,e%=60;var o=_(i/12),a=i%=12,s=n,l=t,u=e,c=r?r.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var d=h<0?"-":"",f=Ur(this._months)!==Ur(h)?"-":"",p=Ur(this._days)!==Ur(h)?"-":"",g=Ur(this._milliseconds)!==Ur(h)?"-":"";return d+"P"+(o?f+o+"Y":"")+(a?f+a+"M":"")+(s?p+s+"D":"")+(l||u||c?"T":"")+(l?g+l+"H":"")+(u?g+u+"M":"")+(c?g+c+"S":"")}var Vr=kt.prototype;return Vr.isValid=function(){return this._isValid},Vr.abs=function(){var e=this._data;return this._milliseconds=gr(this._milliseconds),this._days=gr(this._days),this._months=gr(this._months),e.milliseconds=gr(e.milliseconds),e.seconds=gr(e.seconds),e.minutes=gr(e.minutes),e.hours=gr(e.hours),e.months=gr(e.months),e.years=gr(e.years),this},Vr.add=function(e,t){return yr(this,e,t,1)},Vr.subtract=function(e,t){return yr(this,e,t,-1)},Vr.as=function(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if("month"===(e=N(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,r=this._months+mr(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(br(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},Vr.asMilliseconds=_r,Vr.asSeconds=wr,Vr.asMinutes=Er,Vr.asHours=xr,Vr.asDays=Tr,Vr.asWeeks=Sr,Vr.asMonths=Or,Vr.asQuarters=Cr,Vr.asYears=kr,Vr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN},Vr._bubble=function(){var e,t,r,n,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*vr(br(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=_(o/1e3),l.seconds=e%60,t=_(e/60),l.minutes=t%60,r=_(t/60),l.hours=r%24,a+=_(r/24),i=_(mr(a)),s+=i,a-=vr(br(i)),n=_(s/12),s%=12,l.days=a,l.months=s,l.years=n,this},Vr.clone=function(){return Bt(this)},Vr.get=function(e){return e=N(e),this.isValid()?this[e+"s"]():NaN},Vr.milliseconds=Ar,Vr.seconds=Ir,Vr.minutes=Dr,Vr.hours=Nr,Vr.days=Mr,Vr.weeks=function(){return _(this.days()/7)},Vr.months=Rr,Vr.years=Lr,Vr.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),r=zr(this,!e,t);return e&&(r=t.pastFuture(+this,r)),t.postformat(r)},Vr.toISOString=Hr,Vr.toString=Hr,Vr.toJSON=Hr,Vr.locale=qt,Vr.localeData=Kt,Vr.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Hr),Vr.lang=Xt,U("X",0,0,"unix"),U("x",0,0,"valueOf"),ue("x",ie),ue("X",/[+-]?\d+(\.\d{1,3})?/),fe("X",(function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))})),fe("x",(function(e,t,r){r._d=new Date(w(e))})),n.version="2.24.0",t=xt,n.fn=ur,n.min=function(){var e=[].slice.call(arguments,0);return Ot("isBefore",e)},n.max=function(){var e=[].slice.call(arguments,0);return Ot("isAfter",e)},n.now=function(){return Date.now?Date.now():+new Date},n.utc=d,n.unix=function(e){return xt(1e3*e)},n.months=function(e,t){return fr(e,t,"months")},n.isDate=l,n.locale=it,n.invalid=g,n.duration=Bt,n.isMoment=$,n.weekdays=function(e,t,r){return pr(e,t,r,"weekdays")},n.parseZone=function(){return xt.apply(null,arguments).parseZone()},n.localeData=at,n.isDuration=Pt,n.monthsShort=function(e,t){return fr(e,t,"monthsShort")},n.weekdaysMin=function(e,t,r){return pr(e,t,r,"weekdaysMin")},n.defineLocale=ot,n.updateLocale=function(e,t){if(null!=t){var r,n,i=Je;null!=(n=nt(e))&&(i=n._config),(r=new A(t=P(i,t))).parentLocale=et[e],et[e]=r,it(e)}else null!=et[e]&&(null!=et[e].parentLocale?et[e]=et[e].parentLocale:null!=et[e]&&delete et[e]);return et[e]},n.locales=function(){return S(et)},n.weekdaysShort=function(e,t,r){return pr(e,t,r,"weekdaysShort")},n.normalizeUnits=N,n.relativeTimeRounding=function(e){return void 0===e?jr:"function"==typeof e&&(jr=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==Fr[e]&&(void 0===t?Fr[e]:(Fr[e]=t,"s"===e&&(Fr.ss=t-1),!0))},n.calendarFormat=function(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},n.prototype=ur,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()})),ASPDateRegex=/^\/?Date\((-?\d+)/i;function isMoment(e){return moment.isMoment(e)}function convert(e,t){var r;if(void 0!==e){if(null===e)return null;if(!t)return e;if("string"!=typeof t&&!(t instanceof String))throw new Error("Type must be a string");switch(t){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":return isString$1(e)&&!isNaN(Date.parse(e))?moment(e).valueOf():Number(e.valueOf());case"string":case"String":return String(e);case"Date":if(isNumber(e))return new Date(e);if(e instanceof Date)return new Date(e.valueOf());if(isMoment(e))return new Date(e.valueOf());if(isString$1(e))return(r=ASPDateRegex.exec(e))?new Date(Number(r[1])):moment(new Date(e)).toDate();throw new Error("Cannot convert object of type "+getType(e)+" to type Date");case"Moment":if(isNumber(e))return moment(e);if(e instanceof Date)return moment(e.valueOf());if(isMoment(e))return moment(e);if(isString$1(e))return r=ASPDateRegex.exec(e),moment(r?Number(r[1]):e);throw new Error("Cannot convert object of type "+getType(e)+" to type Date");case"ISODate":if(isNumber(e))return new Date(e);if(e instanceof Date)return e.toISOString();if(isMoment(e))return e.toDate().toISOString();if(isString$1(e))return(r=ASPDateRegex.exec(e))?new Date(Number(r[1])).toISOString():moment(e).format();throw new Error("Cannot convert object of type "+getType(e)+" to type ISODate");case"ASPDate":if(isNumber(e))return"/Date("+e+")/";if(e instanceof Date||isMoment(e))return"/Date("+e.valueOf()+")/";if(isString$1(e))return"/Date("+((r=ASPDateRegex.exec(e))?new Date(Number(r[1])).valueOf():new Date(e).valueOf())+")/";throw new Error("Cannot convert object of type "+getType(e)+" to type ASPDate");default:throw new Error("Unknown type ".concat(t))}}}function isId(e){return"string"==typeof e||"number"==typeof e}var HAS_SPECIES_SUPPORT$3=arrayMethodHasSpeciesSupport("splice"),USES_TO_LENGTH$7=arrayMethodUsesToLength("splice",{ACCESSORS:!0,0:0,1:2}),max$2$1=Math.max,min$2$1=Math.min,MAX_SAFE_INTEGER$1$1=9007199254740991,MAXIMUM_ALLOWED_LENGTH_EXCEEDED="Maximum allowed length exceeded";_export({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$3||!USES_TO_LENGTH$7},{splice:function(e,t){var r,n,i,o,a,s,l=toObject(this),u=toLength(l.length),c=toAbsoluteIndex(e,u),h=arguments.length;if(0===h?r=n=0:1===h?(r=0,n=u-c):(r=h-2,n=min$2$1(max$2$1(toInteger$1(t),0),u-c)),u+r-n>MAX_SAFE_INTEGER$1$1)throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);for(i=arraySpeciesCreate(l,n),o=0;o<n;o++)(a=c+o)in l&&createProperty(i,o,l[a]);if(i.length=n,r<n){for(o=c;o<u-n;o++)s=o+r,(a=o+n)in l?l[s]=l[a]:delete l[s];for(o=u;o>u-n+r;o--)delete l[o-1]}else if(r>n)for(o=u-n;o>c;o--)s=o+r-1,(a=o+n-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<r;o++)l[o+c]=arguments[o+2];return l.length=u-n+r,i}});var splice$1=entryVirtual("Array").splice,ArrayPrototype$d=Array.prototype,splice_1=function(e){var t=e.splice;return e===ArrayPrototype$d||e instanceof Array&&t===ArrayPrototype$d.splice?splice$1:t},splice$1$1=splice_1,splice$2=splice$1$1,slice$6=[].slice,MSIE=/MSIE .\./.test(engineUserAgent),wrap$1=function(e){return function(t,r){var n=arguments.length>2,i=n?slice$6.call(arguments,2):void 0;return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};_export({global:!0,bind:!0,forced:MSIE},{setTimeout:wrap$1(global_1.setTimeout),setInterval:wrap$1(global_1.setInterval)});var setTimeout$1=path.setTimeout,setTimeout$1$1=setTimeout$1,Queue=function(){function e(t){classCallCheck(this,e),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(t)}return createClass(e,[{key:"setOptions",value:function(e){e&&void 0!==e.delay&&(this.delay=e.delay),e&&void 0!==e.max&&(this.max=e.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var e=this._extended.object,t=this._extended.methods,r=0;r<t.length;r++){var n=t[r];n.original?e[n.name]=n.original:delete e[n.name]}this._extended=null}}},{key:"replace",value:function(e,t){var r=this,n=e[t];if(!n)throw new Error("Method "+t+" undefined");e[t]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r.queue({args:t,fn:n,context:this})}}},{key:"queue",value:function(e){"function"==typeof e?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var e=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=setTimeout$1$1((function(){e.flush()}),this.delay))}},{key:"flush",value:function(){var e,t;forEach$2(e=splice$2(t=this._queue).call(t,0)).call(e,(function(e){e.fn.apply(e.context||e.fn,e.args||[])}))}}],[{key:"extend",value:function(t,r){var n=new e(r);if(void 0!==t.flush)throw new Error("Target object already has a property flush");t.flush=function(){n.flush()};var i=[{name:"flush",original:void 0}];if(r&&r.replace)for(var o=0;o<r.replace.length;o++){var a=r.replace[o];i.push({name:a,original:t[a]}),n.replace(t,a)}return n._extended={object:t,methods:i},n}}]),e}(),DataSetPart=function(){function e(){classCallCheck(this,e),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=e.prototype.on,this.unsubscribe=e.prototype.off}return createClass(e,[{key:"_trigger",value:function(e,t,r){var n,i;if("*"===e)throw new Error("Cannot trigger event *");forEach$2(n=concat$2(i=[]).call(i,toConsumableArray(this._subscribers[e]),toConsumableArray(this._subscribers["*"]))).call(n,(function(n){n(e,t,null!=r?r:null)}))}},{key:"on",value:function(e,t){"function"==typeof t&&this._subscribers[e].push(t)}},{key:"off",value:function(e,t){var r;this._subscribers[e]=filter$2$1(r=this._subscribers[e]).call(r,(function(e){return e!==t}))}}]),e}(),es_set=collection$1("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),collectionStrong),set$1=path.Set,set$2=set$1,set$3=set$2;function _createForOfIteratorHelper(e){if(void 0===symbol$2||null==getIteratorMethod$1(e)){if(isArray$5(e)||(e=_unsupportedIterableToArray$1(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,a=!1;return{s:function(){n=getIterator$1(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray$1(e,t){var r;if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var n=slice$3(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?from_1$2(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var DataStream=function(){function e(t){classCallCheck(this,e),this._pairs=t}return createClass(e,[{key:iterator$2,value:regenerator.mark((function e(){var t,r,n,i,o;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._pairs),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=slicedToArray(r.value,2),i=n[0],o=n[1],e.next=7,[i,o];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"entries",value:regenerator.mark((function e(){var t,r,n,i,o;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._pairs),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=slicedToArray(r.value,2),i=n[0],o=n[1],e.next=7,[i,o];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"keys",value:regenerator.mark((function e(){var t,r,n,i;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._pairs),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=slicedToArray(r.value,1),i=n[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:regenerator.mark((function e(){var t,r,n,i;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._pairs),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=slicedToArray(r.value,2),i=n[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var e;return map$2(e=toConsumableArray(this._pairs)).call(e,(function(e){return e[0]}))}},{key:"toItemArray",value:function(){var e;return map$2(e=toConsumableArray(this._pairs)).call(e,(function(e){return e[1]}))}},{key:"toEntryArray",value:function(){return toConsumableArray(this._pairs)}},{key:"toObjectMap",value:function(){var e,t=create$4(null),r=_createForOfIteratorHelper(this._pairs);try{for(r.s();!(e=r.n()).done;){var n=slicedToArray(e.value,2),i=n[0],o=n[1];t[i]=o}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"toMap",value:function(){return new map$5(this._pairs)}},{key:"toIdSet",value:function(){return new set$3(this.toIdArray())}},{key:"toItemSet",value:function(){return new set$3(this.toItemArray())}},{key:"cache",value:function(){return new e(toConsumableArray(this._pairs))}},{key:"distinct",value:function(e){var t,r=new set$3,n=_createForOfIteratorHelper(this._pairs);try{for(n.s();!(t=n.n()).done;){var i=slicedToArray(t.value,2),o=i[0],a=i[1];r.add(e(a,o))}}catch(e){n.e(e)}finally{n.f()}return r}},{key:"filter",value:function(t){var r=this._pairs;return new e(defineProperty$7({},iterator$2,regenerator.mark((function e(){var n,i,o,a,s;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_createForOfIteratorHelper(r),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=10;break}if(o=slicedToArray(i.value,2),a=o[0],s=o[1],!t(s,a)){e.next=8;break}return e.next=8,[a,s];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])}))))}},{key:"forEach",value:function(e){var t,r=_createForOfIteratorHelper(this._pairs);try{for(r.s();!(t=r.n()).done;){var n=slicedToArray(t.value,2),i=n[0];e(n[1],i)}}catch(e){r.e(e)}finally{r.f()}}},{key:"map",value:function(t){var r=this._pairs;return new e(defineProperty$7({},iterator$2,regenerator.mark((function e(){var n,i,o,a,s;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_createForOfIteratorHelper(r),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=9;break}return o=slicedToArray(i.value,2),a=o[0],s=o[1],e.next=7,[a,t(s,a)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))))}},{key:"max",value:function(e){var t=getIterator$1(this._pairs),r=t.next();if(r.done)return null;for(var n=r.value[1],i=e(r.value[1],r.value[0]);!(r=t.next()).done;){var o=slicedToArray(r.value,2),a=o[0],s=o[1],l=e(s,a);l>i&&(i=l,n=s)}return n}},{key:"min",value:function(e){var t=getIterator$1(this._pairs),r=t.next();if(r.done)return null;for(var n=r.value[1],i=e(r.value[1],r.value[0]);!(r=t.next()).done;){var o=slicedToArray(r.value,2),a=o[0],s=o[1],l=e(s,a);l<i&&(i=l,n=s)}return n}},{key:"reduce",value:function(e,t){var r,n=_createForOfIteratorHelper(this._pairs);try{for(n.s();!(r=n.n()).done;){var i=slicedToArray(r.value,2),o=i[0];t=e(t,i[1],o)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"sort",value:function(t){var r=this;return new e(defineProperty$7({},iterator$2,(function(){var e;return getIterator$1(sort$2(e=toConsumableArray(r._pairs)).call(e,(function(e,r){var n=slicedToArray(e,2),i=n[0],o=n[1],a=slicedToArray(r,2),s=a[0],l=a[1];return t(o,l,i,s)})))})))}}]),e}();function ownKeys$1(e,t){var r=keys$6(e);if(getOwnPropertySymbols$2){var n=getOwnPropertySymbols$2(e);t&&(n=filter$2$1(n).call(n,(function(t){return getOwnPropertyDescriptor$3(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)forEach$2(r=ownKeys$1(Object(n),!0)).call(r,(function(t){defineProperty$7(e,t,n[t])}));else if(getOwnPropertyDescriptors$2)defineProperties$1(e,getOwnPropertyDescriptors$2(n));else{var i;forEach$2(i=ownKeys$1(Object(n))).call(i,(function(t){defineProperty$4(e,t,getOwnPropertyDescriptor$3(n,t))}))}}return e}function _createForOfIteratorHelper$1(e){if(void 0===symbol$2||null==getIteratorMethod$1(e)){if(isArray$5(e)||(e=_unsupportedIterableToArray$2(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,a=!1;return{s:function(){n=getIterator$1(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray$2(e,t){var r;if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,t);var n=slice$3(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?from_1$2(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$2(e,t):void 0}}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _createSuper(e){return function(){var t,r=getPrototypeOf$3(e);if(_isNativeReflectConstruct()){var n=getPrototypeOf$3(this).constructor;t=construct$3(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!construct$3)return!1;if(construct$3.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3(Date,[],(function(){}))),!0}catch(e){return!1}}var warnTypeCorectionDeprecation=function(){console.warn("Type coercion has been deprecated. Please, use data pipes instead. See https://visjs.github.io/vis-data/data/datapipe.html#TypeCoercion for more details with working migration example.")},DataSet=function(e){inherits(r,DataSetPart);var t=_createSuper(r);function r(e,n){var i;if(classCallCheck(this,r),i=t.call(this),e&&!isArray$5(e)&&(n=e,e=[]),i._options=n||{},i._data=new map$5,i.length=0,i._idProp=i._options.fieldId||"id",i._type={},i._options.type){warnTypeCorectionDeprecation();for(var o=keys$6(i._options.type),a=0,s=o.length;a<s;a++){var l=o[a],u=i._options.type[l];i._type[l]="Date"==u||"ISODate"==u||"ASPDate"==u?"Date":u}}return e&&e.length&&i.add(e),i.setOptions(n),i}return createClass(r,[{key:"setOptions",value:function(e){e&&void 0!==e.queue&&(!1===e.queue?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=Queue.extend(this,{replace:["add","update","remove"]})),e.queue&&"object"===_typeof_1(e.queue)&&this._queue.setOptions(e.queue)))}},{key:"add",value:function(e,t){var r,n=this,i=[];if(isArray$5(e)){var o=map$2(e).call(e,(function(e){return e[n._idProp]}));if(some$2(o).call(o,(function(e){return n._data.has(e)})))throw new Error("A duplicate id was found in the parameter array.");for(var a=0,s=e.length;a<s;a++)r=this._addItem(e[a]),i.push(r)}else{if(!e||"object"!==_typeof_1(e))throw new Error("Unknown dataType");r=this._addItem(e),i.push(r)}return i.length&&this._trigger("add",{items:i},t),i}},{key:"update",value:function(e,t){var r=this,n=[],i=[],o=[],a=[],s=this._idProp,l=function(e){var t=e[s];if(null!=t&&r._data.has(t)){var l=e,u=assign$2$1({},r._data.get(t)),c=r._updateItem(l);i.push(c),a.push(l),o.push(u)}else{var h=r._addItem(e);n.push(h)}};if(isArray$5(e))for(var u=0,c=e.length;u<c;u++)e[u]&&"object"===_typeof_1(e[u])?l(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else{if(!e||"object"!==_typeof_1(e))throw new Error("Unknown dataType");l(e)}if(n.length&&this._trigger("add",{items:n},t),i.length){var h={items:i,oldData:o,data:a};this._trigger("update",h,t)}return concat$2(n).call(n,i)}},{key:"updateOnly",value:function(e,t){var r,n=this;isArray$5(e)||(e=[e]);var i=map$2(r=map$2(e).call(e,(function(e){var t=n._data.get(e[n._idProp]);if(null==t)throw new Error("Updating non-existent items is not allowed.");return{oldData:t,update:e}}))).call(r,(function(e){var t=e.oldData,r=e.update,i=t[n._idProp],o=deepExtend(deepExtend({},t),r);return n._data.set(i,o),{id:i,oldData:t,updatedData:o}}));if(i.length){var o={items:map$2(i).call(i,(function(e){return e.id})),oldData:map$2(i).call(i,(function(e){return e.oldData})),data:map$2(i).call(i,(function(e){return e.updatedData}))};return this._trigger("update",o,t),o.items}return[]}},{key:"get",value:function(e,t){var r=void 0,n=void 0,i=void 0;isId(e)?(r=e,i=t):isArray$5(e)?(n=e,i=t):i=e;var o=i&&"Object"===i.returnType?"Object":"Array",a=i&&i.type||this._options.type,s=i&&filter$2$1(i),l=[],u=null,c=null,h=null;if(null!=r)(u=this._getItem(r,a))&&s&&!s(u)&&(u=null);else if(null!=n)for(var d=0,f=n.length;d<f;d++)null==(u=this._getItem(n[d],a))||s&&!s(u)||l.push(u);else for(var p,g=0,y=(c=toConsumableArray(keys$3(p=this._data).call(p))).length;g<y;g++)h=c[g],null==(u=this._getItem(h,a))||s&&!s(u)||l.push(u);if(i&&i.order&&null==r&&this._sort(l,i.order),i&&i.fields){var v=i.fields;if(null!=r&&null!=u)u=this._filterFields(u,v);else for(var m=0,b=l.length;m<b;m++)l[m]=this._filterFields(l[m],v)}if("Object"==o){for(var $={},_=0,w=l.length;_<w;_++){var E=l[_];$[E[this._idProp]]=E}return $}return null!=r?u:l}},{key:"getIds",value:function(e){var t,r,n=this._data,i=e&&filter$2$1(e),o=e&&e.order,a=e&&e.type||this._options.type,s=toConsumableArray(keys$3(n).call(n)),l=[];if(i)if(o){r=[];for(var u=0,c=s.length;u<c;u++){var h=s[u];i(t=this._getItem(h,a))&&r.push(t)}this._sort(r,o);for(var d=0,f=r.length;d<f;d++)l.push(r[d][this._idProp])}else for(var p=0,g=s.length;p<g;p++){var y=s[p];i(t=this._getItem(y,a))&&l.push(t[this._idProp])}else if(o){r=[];for(var v=0,m=s.length;v<m;v++){var b=s[v];r.push(n.get(b))}this._sort(r,o);for(var $=0,_=r.length;$<_;$++)l.push(r[$][this._idProp])}else for(var w=0,E=s.length;w<E;w++){var x=s[w];t=n.get(x),l.push(t[this._idProp])}return l}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(e,t){var r=t&&filter$2$1(t),n=t&&t.type||this._options.type,i=this._data,o=toConsumableArray(keys$3(i).call(i));if(t&&t.order)for(var a=this.get(t),s=0,l=a.length;s<l;s++){var u=a[s];e(u,u[this._idProp])}else for(var c=0,h=o.length;c<h;c++){var d=o[c],f=this._getItem(d,n);r&&!r(f)||e(f,d)}}},{key:"map",value:function(e,t){for(var r=t&&filter$2$1(t),n=t&&t.type||this._options.type,i=[],o=this._data,a=toConsumableArray(keys$3(o).call(o)),s=0,l=a.length;s<l;s++){var u=a[s],c=this._getItem(u,n);r&&!r(c)||i.push(e(c,u))}return t&&t.order&&this._sort(i,t.order),i}},{key:"_filterFields",value:function(e,t){var r;return e?reduce$2(r=isArray$5(t)?t:keys$6(t)).call(r,(function(t,r){return t[r]=e[r],t}),{}):e}},{key:"_sort",value:function(e,t){if("string"==typeof t){var r=t;sort$2(e).call(e,(function(e,t){var n=e[r],i=t[r];return n>i?1:n<i?-1:0}))}else{if("function"!=typeof t)throw new TypeError("Order must be a function or a string");sort$2(e).call(e,t)}}},{key:"remove",value:function(e,t){for(var r=[],n=[],i=isArray$5(e)?e:[e],o=0,a=i.length;o<a;o++){var s=this._remove(i[o]);if(s){var l=s[this._idProp];null!=l&&(r.push(l),n.push(s))}}return r.length&&this._trigger("remove",{items:r,oldData:n},t),r}},{key:"_remove",value:function(e){var t;if(isId(e)?t=e:e&&"object"===_typeof_1(e)&&(t=e[this._idProp]),null!=t&&this._data.has(t)){var r=this._data.get(t)||null;return this._data.delete(t),--this.length,r}return null}},{key:"clear",value:function(e){for(var t,r=toConsumableArray(keys$3(t=this._data).call(t)),n=[],i=0,o=r.length;i<o;i++)n.push(this._data.get(r[i]));return this._data.clear(),this.length=0,this._trigger("remove",{items:r,oldData:n},e),r}},{key:"max",value:function(e){var t,r,n=null,i=null,o=_createForOfIteratorHelper$1(values$2(t=this._data).call(t));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a[e];"number"==typeof s&&(null==i||s>i)&&(n=a,i=s)}}catch(e){o.e(e)}finally{o.f()}return n||null}},{key:"min",value:function(e){var t,r,n=null,i=null,o=_createForOfIteratorHelper$1(values$2(t=this._data).call(t));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a[e];"number"==typeof s&&(null==i||s<i)&&(n=a,i=s)}}catch(e){o.e(e)}finally{o.f()}return n||null}},{key:"distinct",value:function(e){for(var t=this._data,r=toConsumableArray(keys$3(t).call(t)),n=[],i=this._options.type&&this._options.type[e]||null,o=0,a=0,s=r.length;a<s;a++){for(var l=r[a],u=t.get(l)[e],c=!1,h=0;h<o;h++)if(n[h]==u){c=!0;break}c||void 0===u||(n[o]=u,o++)}if(i)for(var d=0,f=n.length;d<f;d++)n[d]=convert(n[d],i);return n}},{key:"_addItem",value:function(e){var t=e[this._idProp];if(null!=t){if(this._data.has(t))throw new Error("Cannot add item: item with id "+t+" already exists")}else t=v4(),e[this._idProp]=t;for(var r={},n=keys$6(e),i=0,o=n.length;i<o;i++){var a=n[i],s=this._type[a];r[a]=convert(e[a],s)}return this._data.set(t,r),++this.length,t}},{key:"_getItem",value:function(e,t){var r,n=this._data.get(e);if(!n)return null;var i=keys$6(n);if(t){warnTypeCorectionDeprecation(),r={};for(var o=0,a=i.length;o<a;o++){var s=i[o],l=n[s];r[s]=convert(l,t[s])}}else r=_objectSpread({},n);return null==r[this._idProp]&&(r[this._idProp]=n.id),r}},{key:"_updateItem",value:function(e){var t=e[this._idProp];if(null==t)throw new Error("Cannot update item: item has no id (item: "+stringify$2(e)+")");var r=this._data.get(t);if(!r)throw new Error("Cannot update item: no item with id "+t+" found");for(var n=keys$6(e),i=0,o=n.length;i<o;i++){var a=n[i],s=this._type[a];r[a]=convert(e[a],s)}return t}},{key:"stream",value:function(e){if(e){var t=this._data;return new DataStream(defineProperty$7({},iterator$2,regenerator.mark((function r(){var n,i,o,a;return regenerator.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=_createForOfIteratorHelper$1(e),r.prev=1,n.s();case 3:if((i=n.n()).done){r.next=11;break}if(o=i.value,null==(a=t.get(o))){r.next=9;break}return r.next=9,[o,a];case 9:r.next=3;break;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),n.e(r.t0);case 16:return r.prev=16,n.f(),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,13,16,19]])}))))}var r;return new DataStream(defineProperty$7({},iterator$2,bind$2(r=entries$2(this._data)).call(r,this._data)))}}]),r}();function _createSuper$1(e){return function(){var t,r=getPrototypeOf$3(e);if(_isNativeReflectConstruct$1()){var n=getPrototypeOf$3(this).constructor;t=construct$3(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!construct$3)return!1;if(construct$3.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3(Date,[],(function(){}))),!0}catch(e){return!1}}var DataView$1=function(e){inherits(r,DataSetPart);var t=_createSuper$1(r);function r(e,n){var i,o;return classCallCheck(this,r),(o=t.call(this)).length=0,o._ids=new set$3,o._options=n||{},o._listener=bind$2(i=o._onEvent).call(i,assertThisInitialized(o)),o.setData(e),o}return createClass(r,[{key:"setData",value:function(e){if(this._data){this._data.off&&this._data.off("*",this._listener);var t=this._data.getIds({filter:filter$2$1(this._options)}),r=this._data.get(t);this._ids.clear(),this.length=0,this._trigger("remove",{items:t,oldData:r})}if(null!=e){this._data=e;for(var n=this._data.getIds({filter:filter$2$1(this._options)}),i=0,o=n.length;i<o;i++){var a=n[i];this._ids.add(a)}this.length=n.length,this._trigger("add",{items:n})}else this._data=new DataSet;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var e=this._data.getIds({filter:filter$2$1(this._options)}),t=toConsumableArray(this._ids),r={},n=[],i=[],o=[],a=0,s=e.length;a<s;a++){var l=e[a];r[l]=!0,this._ids.has(l)||(n.push(l),this._ids.add(l))}for(var u=0,c=t.length;u<c;u++){var h=t[u],d=this._data.get(h);null==d?console.error("If you see this, report it please."):r[h]||(i.push(h),o.push(d),this._ids.delete(h))}this.length+=n.length-i.length,n.length&&this._trigger("add",{items:n}),i.length&&this._trigger("remove",{items:i,oldData:o})}},{key:"get",value:function(e,t){if(null==this._data)return null;var r,n=null;isId(e)||isArray$5(e)?(n=e,r=t):r=e;var i=assign$2$1({},this._options,r),o=filter$2$1(this._options),a=r&&filter$2$1(r);return o&&a&&(i.filter=function(e){return o(e)&&a(e)}),null==n?this._data.get(i):this._data.get(n,i)}},{key:"getIds",value:function(e){if(this._data.length){var t,r=filter$2$1(this._options),n=null!=e?filter$2$1(e):null;return t=n?r?function(e){return r(e)&&n(e)}:n:r,this._data.getIds({filter:t,order:e&&e.order})}return[]}},{key:"forEach",value:function(e,t){if(this._data){var r,n,i=filter$2$1(this._options),o=t&&filter$2$1(t);n=o?i?function(e){return i(e)&&o(e)}:o:i,forEach$2(r=this._data).call(r,e,{filter:n,order:t&&t.order})}}},{key:"map",value:function(e,t){if(this._data){var r,n,i=filter$2$1(this._options),o=t&&filter$2$1(t);return n=o?i?function(e){return i(e)&&o(e)}:o:i,map$2(r=this._data).call(r,e,{filter:n,order:t&&t.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(e){var t;return this._data.stream(e||defineProperty$7({},iterator$2,bind$2(t=keys$3(this._ids)).call(t,this._ids)))}},{key:"dispose",value:function(){var e;(null===(e=this._data)||void 0===e?void 0:e.off)&&this._data.off("*",this._listener);var t="This data view has already been disposed of.";defineProperty$4(this,"_data",{get:function(){throw new Error(t)},set:function(){throw new Error(t)},configurable:!1})}},{key:"_onEvent",value:function(e,t,r){if(t&&t.items&&this._data){var n=t.items,i=[],o=[],a=[],s=[],l=[],u=[];switch(e){case"add":for(var c=0,h=n.length;c<h;c++){var d=n[c];this.get(d)&&(this._ids.add(d),i.push(d))}break;case"update":for(var f=0,p=n.length;f<p;f++){var g=n[f];this.get(g)?this._ids.has(g)?(o.push(g),l.push(t.data[f]),s.push(t.oldData[f])):(this._ids.add(g),i.push(g)):this._ids.has(g)&&(this._ids.delete(g),a.push(g),u.push(t.oldData[f]))}break;case"remove":for(var y=0,v=n.length;y<v;y++){var m=n[y];this._ids.has(m)&&(this._ids.delete(m),a.push(m),u.push(t.oldData[y]))}}this.length+=i.length-a.length,i.length&&this._trigger("add",{items:i},r),o.length&&this._trigger("update",{items:o,oldData:s,data:l},r),a.length&&this._trigger("remove",{items:a,oldData:u},r)}}}]),r}(),commonjsGlobal$2="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 7.6.2
 * @date    2020-04-23T07:20:50.177Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function unwrapExports$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule$2(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace$1(e){return e&&e.default||e}var check$1=function(e){return e&&e.Math==Math&&e},global_1$1=check$1("object"==typeof globalThis&&globalThis)||check$1("object"==typeof window&&window)||check$1("object"==typeof self&&self)||check$1("object"==typeof commonjsGlobal$2&&commonjsGlobal$2)||Function("return this")(),fails$1=function(e){try{return!!e()}catch(e){return!0}},descriptors$1=!fails$1((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),nativePropertyIsEnumerable$2={}.propertyIsEnumerable,getOwnPropertyDescriptor$4=Object.getOwnPropertyDescriptor,NASHORN_BUG$1=getOwnPropertyDescriptor$4&&!nativePropertyIsEnumerable$2.call({1:2},1),f$7=NASHORN_BUG$1?function(e){var t=getOwnPropertyDescriptor$4(this,e);return!!t&&t.enumerable}:nativePropertyIsEnumerable$2,objectPropertyIsEnumerable$1={f:f$7},createPropertyDescriptor$1=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},toString$3={}.toString,classofRaw$1=function(e){return toString$3.call(e).slice(8,-1)},split$1="".split,indexedObject$1=fails$1((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==classofRaw$1(e)?split$1.call(e,""):Object(e)}:Object,requireObjectCoercible$1=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},toIndexedObject$1=function(e){return indexedObject$1(requireObjectCoercible$1(e))},isObject$3=function(e){return"object"==typeof e?null!==e:"function"==typeof e},toPrimitive$1=function(e,t){if(!isObject$3(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!isObject$3(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!isObject$3(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!isObject$3(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},hasOwnProperty$h={}.hasOwnProperty,has$2=function(e,t){return hasOwnProperty$h.call(e,t)},document$1$2=global_1$1.document,EXISTS$1=isObject$3(document$1$2)&&isObject$3(document$1$2.createElement),documentCreateElement$1=function(e){return EXISTS$1?document$1$2.createElement(e):{}},ie8DomDefine$1=!descriptors$1&&!fails$1((function(){return 7!=Object.defineProperty(documentCreateElement$1("div"),"a",{get:function(){return 7}}).a})),nativeGetOwnPropertyDescriptor$3=Object.getOwnPropertyDescriptor,f$1$1=descriptors$1?nativeGetOwnPropertyDescriptor$3:function(e,t){if(e=toIndexedObject$1(e),t=toPrimitive$1(t,!0),ie8DomDefine$1)try{return nativeGetOwnPropertyDescriptor$3(e,t)}catch(e){}if(has$2(e,t))return createPropertyDescriptor$1(!objectPropertyIsEnumerable$1.f.call(e,t),e[t])},objectGetOwnPropertyDescriptor$1={f:f$1$1},replacement$1=/#|\.prototype\./,isForced$1=function(e,t){var r=data$3[normalize$3(e)];return r==POLYFILL$1||r!=NATIVE$1&&("function"==typeof t?fails$1(t):!!t)},normalize$3=isForced$1.normalize=function(e){return String(e).replace(replacement$1,".").toLowerCase()},data$3=isForced$1.data={},NATIVE$1=isForced$1.NATIVE="N",POLYFILL$1=isForced$1.POLYFILL="P",isForced_1$1=isForced$1,path$1={},aFunction$2=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},functionBindContext$1=function(e,t,r){if(aFunction$2(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},anObject$1=function(e){if(!isObject$3(e))throw TypeError(String(e)+" is not an object");return e},nativeDefineProperty$2=Object.defineProperty,f$2$1=descriptors$1?nativeDefineProperty$2:function(e,t,r){if(anObject$1(e),t=toPrimitive$1(t,!0),anObject$1(r),ie8DomDefine$1)try{return nativeDefineProperty$2(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e},objectDefineProperty$1={f:f$2$1},createNonEnumerableProperty$1=descriptors$1?function(e,t,r){return objectDefineProperty$1.f(e,t,createPropertyDescriptor$1(1,r))}:function(e,t,r){return e[t]=r,e},getOwnPropertyDescriptor$1$1=objectGetOwnPropertyDescriptor$1.f,wrapConstructor$1=function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},_export$1=function(e,t){var r,n,i,o,a,s,l,u,c=e.target,h=e.global,d=e.stat,f=e.proto,p=h?global_1$1:d?global_1$1[c]:(global_1$1[c]||{}).prototype,g=h?path$1:path$1[c]||(path$1[c]={}),y=g.prototype;for(i in t)r=!isForced_1$1(h?i:c+(d?".":"#")+i,e.forced)&&p&&has$2(p,i),a=g[i],r&&(s=e.noTargetGet?(u=getOwnPropertyDescriptor$1$1(p,i))&&u.value:p[i]),o=r&&s?s:t[i],r&&typeof a==typeof o||(l=e.bind&&r?functionBindContext$1(o,global_1$1):e.wrap&&r?wrapConstructor$1(o):f&&"function"==typeof o?functionBindContext$1(Function.call,o):o,(e.sham||o&&o.sham||a&&a.sham)&&createNonEnumerableProperty$1(l,"sham",!0),g[i]=l,f&&(has$2(path$1,n=c+"Prototype")||createNonEnumerableProperty$1(path$1,n,{}),path$1[n][i]=o,e.real&&y&&!y[i]&&createNonEnumerableProperty$1(y,i,o)))},slice$7=[].slice,factories$1={},construct$4=function(e,t,r){if(!(t in factories$1)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";factories$1[t]=Function("C,a","return new C("+n.join(",")+")")}return factories$1[t](e,r)},functionBind$1=Function.bind||function(e){var t=aFunction$2(this),r=slice$7.call(arguments,1),n=function(){var i=r.concat(slice$7.call(arguments));return this instanceof n?construct$4(t,i.length,i):t.apply(e,i)};return isObject$3(t.prototype)&&(n.prototype=t.prototype),n};_export$1({target:"Function",proto:!0},{bind:functionBind$1});var entryVirtual$1=function(e){return path$1[e+"Prototype"]},bind$3=entryVirtual$1("Function").bind,FunctionPrototype$1=Function.prototype,bind_1$1=function(e){var t=e.bind;return e===FunctionPrototype$1||e instanceof Function&&t===FunctionPrototype$1.bind?bind$3:t},bind$1$1=bind_1$1,bind$2$1=bind$1$1;function drawCircle(e,t,r,n){e.beginPath(),e.arc(t,r,n,0,2*Math.PI,!1),e.closePath()}function drawSquare(e,t,r,n){e.beginPath(),e.rect(t-n,r-n,2*n,2*n),e.closePath()}function drawTriangle(e,t,r,n){e.beginPath(),r+=.275*(n*=1.15);var i=2*n,o=i/2,a=Math.sqrt(3)/6*i,s=Math.sqrt(i*i-o*o);e.moveTo(t,r-(s-a)),e.lineTo(t+o,r+a),e.lineTo(t-o,r+a),e.lineTo(t,r-(s-a)),e.closePath()}function drawTriangleDown(e,t,r,n){e.beginPath(),r-=.275*(n*=1.15);var i=2*n,o=i/2,a=Math.sqrt(3)/6*i,s=Math.sqrt(i*i-o*o);e.moveTo(t,r+(s-a)),e.lineTo(t+o,r-a),e.lineTo(t-o,r-a),e.lineTo(t,r+(s-a)),e.closePath()}function drawStar(e,t,r,n){e.beginPath(),r+=.1*(n*=.82);for(var i=0;i<10;i++){var o=i%2==0?1.3*n:.5*n;e.lineTo(t+o*Math.sin(2*i*Math.PI/10),r-o*Math.cos(2*i*Math.PI/10))}e.closePath()}function drawDiamond(e,t,r,n){e.beginPath(),e.lineTo(t,r+n),e.lineTo(t+n,r),e.lineTo(t,r-n),e.lineTo(t-n,r),e.closePath()}function drawRoundRect(e,t,r,n,i,o){var a=Math.PI/180;n-2*o<0&&(o=n/2),i-2*o<0&&(o=i/2),e.beginPath(),e.moveTo(t+o,r),e.lineTo(t+n-o,r),e.arc(t+n-o,r+o,o,270*a,360*a,!1),e.lineTo(t+n,r+i-o),e.arc(t+n-o,r+i-o,o,0,90*a,!1),e.lineTo(t+o,r+i),e.arc(t+o,r+i-o,o,90*a,180*a,!1),e.lineTo(t,r+o),e.arc(t+o,r+o,o,180*a,270*a,!1),e.closePath()}function drawEllipse(e,t,r,n,i){var o=n/2*.5522848,a=i/2*.5522848,s=t+n,l=r+i,u=t+n/2,c=r+i/2;e.beginPath(),e.moveTo(t,c),e.bezierCurveTo(t,c-a,u-o,r,u,r),e.bezierCurveTo(u+o,r,s,c-a,s,c),e.bezierCurveTo(s,c+a,u+o,l,u,l),e.bezierCurveTo(u-o,l,t,c+a,t,c),e.closePath()}function drawDatabase(e,t,r,n,i){var o=i*(1/3),a=n/2*.5522848,s=o/2*.5522848,l=t+n,u=r+o,c=t+n/2,h=r+o/2,d=r+(i-o/2),f=r+i;e.beginPath(),e.moveTo(l,h),e.bezierCurveTo(l,h+s,c+a,u,c,u),e.bezierCurveTo(c-a,u,t,h+s,t,h),e.bezierCurveTo(t,h-s,c-a,r,c,r),e.bezierCurveTo(c+a,r,l,h-s,l,h),e.lineTo(l,d),e.bezierCurveTo(l,d+s,c+a,f,c,f),e.bezierCurveTo(c-a,f,t,d+s,t,d),e.lineTo(t,h)}function drawDashedLine(e,t,r,n,i,o){e.beginPath(),e.moveTo(t,r);for(var a=o.length,s=n-t,l=i-r,u=l/s,c=Math.sqrt(s*s+l*l),h=0,d=!0,f=0,p=+o[0];c>=.1;)(p=+o[h++%a])>c&&(p=c),f=Math.sqrt(p*p/(1+u*u)),t+=f=s<0?-f:f,r+=u*f,!0===d?e.lineTo(t,r):e.moveTo(t,r),c-=p,d=!d}function drawHexagon(e,t,r,n){e.beginPath();var i=2*Math.PI/6;e.moveTo(t+n,r);for(var o=1;o<6;o++)e.lineTo(t+n*Math.cos(i*o),r+n*Math.sin(i*o));e.closePath()}var shapeMap={circle:drawCircle,dashedLine:drawDashedLine,database:drawDatabase,diamond:drawDiamond,ellipse:drawEllipse,ellipse_vis:drawEllipse,hexagon:drawHexagon,roundRect:drawRoundRect,square:drawSquare,star:drawStar,triangle:drawTriangle,triangleDown:drawTriangleDown};function getShape(e){return Object.prototype.hasOwnProperty.call(shapeMap,e)?shapeMap[e]:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[e].call(t,n)}}var componentEmitter=createCommonjsModule$2((function(e){function t(e){if(e)return function(e){for(var r in t.prototype)e[r]=t.prototype[r];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}})),iterators$1={},setGlobal$1=function(e,t){try{createNonEnumerableProperty$1(global_1$1,e,t)}catch(r){global_1$1[e]=t}return t},SHARED$1="__core-js_shared__",store$2=global_1$1[SHARED$1]||setGlobal$1(SHARED$1,{}),sharedStore$1=store$2,functionToString$1=Function.toString;"function"!=typeof sharedStore$1.inspectSource&&(sharedStore$1.inspectSource=function(e){return functionToString$1.call(e)});var inspectSource$1=sharedStore$1.inspectSource,WeakMap$2=global_1$1.WeakMap,nativeWeakMap$1="function"==typeof WeakMap$2&&/native code/.test(inspectSource$1(WeakMap$2)),shared$1=createCommonjsModule$2((function(e){(e.exports=function(e,t){return sharedStore$1[e]||(sharedStore$1[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"pure",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})})),id$1=0,postfix$1=Math.random(),uid$1=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++id$1+postfix$1).toString(36)},keys$7=shared$1("keys"),sharedKey$1=function(e){return keys$7[e]||(keys$7[e]=uid$1(e))},hiddenKeys$2={},WeakMap$1$2=global_1$1.WeakMap,set$4,get$2,has$1$2,enforce$1=function(e){return has$1$2(e)?get$2(e):set$4(e,{})},getterFor$1=function(e){return function(t){var r;if(!isObject$3(t)||(r=get$2(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(nativeWeakMap$1){var store$1$1=new WeakMap$1$2,wmget$1=store$1$1.get,wmhas$1=store$1$1.has,wmset$1=store$1$1.set;set$4=function(e,t){return wmset$1.call(store$1$1,e,t),t},get$2=function(e){return wmget$1.call(store$1$1,e)||{}},has$1$2=function(e){return wmhas$1.call(store$1$1,e)}}else{var STATE$1=sharedKey$1("state");hiddenKeys$2[STATE$1]=!0,set$4=function(e,t){return createNonEnumerableProperty$1(e,STATE$1,t),t},get$2=function(e){return has$2(e,STATE$1)?e[STATE$1]:{}},has$1$2=function(e){return has$2(e,STATE$1)}}var internalState$1={set:set$4,get:get$2,has:has$1$2,enforce:enforce$1,getterFor:getterFor$1},toObject$1=function(e){return Object(requireObjectCoercible$1(e))},correctPrototypeGetter$1=!fails$1((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),IE_PROTO$2=sharedKey$1("IE_PROTO"),ObjectPrototype$2=Object.prototype,objectGetPrototypeOf$1=correctPrototypeGetter$1?Object.getPrototypeOf:function(e){return e=toObject$1(e),has$2(e,IE_PROTO$2)?e[IE_PROTO$2]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectPrototype$2:null},nativeSymbol$1=!!Object.getOwnPropertySymbols&&!fails$1((function(){return!String(Symbol())})),useSymbolAsUid$1=nativeSymbol$1&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,WellKnownSymbolsStore$2=shared$1("wks"),Symbol$1$2=global_1$1.Symbol,createWellKnownSymbol$1=useSymbolAsUid$1?Symbol$1$2:Symbol$1$2&&Symbol$1$2.withoutSetter||uid$1,wellKnownSymbol$1=function(e){return has$2(WellKnownSymbolsStore$2,e)||(nativeSymbol$1&&has$2(Symbol$1$2,e)?WellKnownSymbolsStore$2[e]=Symbol$1$2[e]:WellKnownSymbolsStore$2[e]=createWellKnownSymbol$1("Symbol."+e)),WellKnownSymbolsStore$2[e]},ITERATOR$6=wellKnownSymbol$1("iterator"),BUGGY_SAFARI_ITERATORS$2=!1,IteratorPrototype$3,PrototypeOfArrayIteratorPrototype$1,arrayIterator$1;[].keys&&(arrayIterator$1=[].keys(),"next"in arrayIterator$1?(PrototypeOfArrayIteratorPrototype$1=objectGetPrototypeOf$1(objectGetPrototypeOf$1(arrayIterator$1)),PrototypeOfArrayIteratorPrototype$1!==Object.prototype&&(IteratorPrototype$3=PrototypeOfArrayIteratorPrototype$1)):BUGGY_SAFARI_ITERATORS$2=!0),null==IteratorPrototype$3&&(IteratorPrototype$3={});var iteratorsCore$1={IteratorPrototype:IteratorPrototype$3,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$2},ceil$1=Math.ceil,floor$1=Math.floor,toInteger$2=function(e){return isNaN(e=+e)?0:(e>0?floor$1:ceil$1)(e)},min$3=Math.min,toLength$1=function(e){return e>0?min$3(toInteger$2(e),9007199254740991):0},max$3=Math.max,min$1$2=Math.min,toAbsoluteIndex$1=function(e,t){var r=toInteger$2(e);return r<0?max$3(r+t,0):min$1$2(r,t)},createMethod$6=function(e){return function(t,r,n){var i,o=toIndexedObject$1(t),a=toLength$1(o.length),s=toAbsoluteIndex$1(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},arrayIncludes$2={includes:createMethod$6(!0),indexOf:createMethod$6(!1)},indexOf$2=arrayIncludes$2.indexOf,objectKeysInternal$1=function(e,t){var r,n=toIndexedObject$1(e),i=0,o=[];for(r in n)!has$2(hiddenKeys$2,r)&&has$2(n,r)&&o.push(r);for(;t.length>i;)has$2(n,r=t[i++])&&(~indexOf$2(o,r)||o.push(r));return o},enumBugKeys$1=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],objectKeys$1=Object.keys||function(e){return objectKeysInternal$1(e,enumBugKeys$1)},objectDefineProperties$1=descriptors$1?Object.defineProperties:function(e,t){anObject$1(e);for(var r,n=objectKeys$1(t),i=n.length,o=0;i>o;)objectDefineProperty$1.f(e,r=n[o++],t[r]);return e},aFunction$1$1=function(e){return"function"==typeof e?e:void 0},getBuiltIn$1=function(e,t){return arguments.length<2?aFunction$1$1(path$1[e])||aFunction$1$1(global_1$1[e]):path$1[e]&&path$1[e][t]||global_1$1[e]&&global_1$1[e][t]},html$1=getBuiltIn$1("document","documentElement"),GT$1=">",LT$1="<",PROTOTYPE$2="prototype",SCRIPT$1="script",IE_PROTO$1$1=sharedKey$1("IE_PROTO"),EmptyConstructor$1=function(){},scriptTag$1=function(e){return LT$1+SCRIPT$1+GT$1+e+LT$1+"/"+SCRIPT$1+GT$1},NullProtoObjectViaActiveX$1=function(e){e.write(scriptTag$1("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame$1=function(){var e,t=documentCreateElement$1("iframe"),r="java"+SCRIPT$1+":";return t.style.display="none",html$1.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(scriptTag$1("document.F=Object")),e.close(),e.F},activeXDocument$1,NullProtoObject$1=function(){try{activeXDocument$1=document.domain&&new ActiveXObject("htmlfile")}catch(e){}NullProtoObject$1=activeXDocument$1?NullProtoObjectViaActiveX$1(activeXDocument$1):NullProtoObjectViaIFrame$1();for(var e=enumBugKeys$1.length;e--;)delete NullProtoObject$1[PROTOTYPE$2][enumBugKeys$1[e]];return NullProtoObject$1()};hiddenKeys$2[IE_PROTO$1$1]=!0;var objectCreate$2=Object.create||function(e,t){var r;return null!==e?(EmptyConstructor$1[PROTOTYPE$2]=anObject$1(e),r=new EmptyConstructor$1,EmptyConstructor$1[PROTOTYPE$2]=null,r[IE_PROTO$1$1]=e):r=NullProtoObject$1(),void 0===t?r:objectDefineProperties$1(r,t)},TO_STRING_TAG$4=wellKnownSymbol$1("toStringTag"),test$2={};test$2[TO_STRING_TAG$4]="z";var toStringTagSupport$1="[object z]"===String(test$2),TO_STRING_TAG$1$1=wellKnownSymbol$1("toStringTag"),CORRECT_ARGUMENTS$1="Arguments"==classofRaw$1(function(){return arguments}()),tryGet$1=function(e,t){try{return e[t]}catch(e){}},classof$1=toStringTagSupport$1?classofRaw$1:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet$1(t=Object(e),TO_STRING_TAG$1$1))?r:CORRECT_ARGUMENTS$1?classofRaw$1(t):"Object"==(n=classofRaw$1(t))&&"function"==typeof t.callee?"Arguments":n},objectToString$3=toStringTagSupport$1?{}.toString:function(){return"[object "+classof$1(this)+"]"},defineProperty$b=objectDefineProperty$1.f,TO_STRING_TAG$2$1=wellKnownSymbol$1("toStringTag"),setToStringTag$1=function(e,t,r,n){if(e){var i=r?e:e.prototype;has$2(i,TO_STRING_TAG$2$1)||defineProperty$b(i,TO_STRING_TAG$2$1,{configurable:!0,value:t}),n&&!toStringTagSupport$1&&createNonEnumerableProperty$1(i,"toString",objectToString$3)}},IteratorPrototype$1$1=iteratorsCore$1.IteratorPrototype,returnThis$2=function(){return this},createIteratorConstructor$1=function(e,t,r){var n=t+" Iterator";return e.prototype=objectCreate$2(IteratorPrototype$1$1,{next:createPropertyDescriptor$1(1,r)}),setToStringTag$1(e,n,!1,!0),iterators$1[n]=returnThis$2,e},aPossiblePrototype$1=function(e){if(!isObject$3(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},objectSetPrototypeOf$1=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return anObject$1(r),aPossiblePrototype$1(n),t?e.call(r,n):r.__proto__=n,r}}():void 0),redefine$1=function(e,t,r,n){n&&n.enumerable?e[t]=r:createNonEnumerableProperty$1(e,t,r)},IteratorPrototype$2$1=iteratorsCore$1.IteratorPrototype,BUGGY_SAFARI_ITERATORS$1$1=iteratorsCore$1.BUGGY_SAFARI_ITERATORS,ITERATOR$1$1=wellKnownSymbol$1("iterator"),KEYS$1="keys",VALUES$1="values",ENTRIES$1="entries",returnThis$1$1=function(){return this},defineIterator$1=function(e,t,r,n,i,o,a){createIteratorConstructor$1(r,t,n);var s,l,u,c=function(e){if(e===i&&g)return g;if(!BUGGY_SAFARI_ITERATORS$1$1&&e in f)return f[e];switch(e){case KEYS$1:case VALUES$1:case ENTRIES$1:return function(){return new r(this,e)}}return function(){return new r(this)}},h=t+" Iterator",d=!1,f=e.prototype,p=f[ITERATOR$1$1]||f["@@iterator"]||i&&f[i],g=!BUGGY_SAFARI_ITERATORS$1$1&&p||c(i),y="Array"==t&&f.entries||p;if(y&&(s=objectGetPrototypeOf$1(y.call(new e)),IteratorPrototype$2$1!==Object.prototype&&s.next&&(setToStringTag$1(s,h,!0,!0),iterators$1[h]=returnThis$1$1)),i==VALUES$1&&p&&p.name!==VALUES$1&&(d=!0,g=function(){return p.call(this)}),a&&f[ITERATOR$1$1]!==g&&createNonEnumerableProperty$1(f,ITERATOR$1$1,g),iterators$1[t]=g,i)if(l={values:c(VALUES$1),keys:o?g:c(KEYS$1),entries:c(ENTRIES$1)},a)for(u in l)(BUGGY_SAFARI_ITERATORS$1$1||d||!(u in f))&&redefine$1(f,u,l[u]);else _export$1({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS$1$1||d},l);return l},ARRAY_ITERATOR$1="Array Iterator",setInternalState$5=internalState$1.set,getInternalState$3=internalState$1.getterFor(ARRAY_ITERATOR$1),es_array_iterator$1=defineIterator$1(Array,"Array",(function(e,t){setInternalState$5(this,{type:ARRAY_ITERATOR$1,target:toIndexedObject$1(e),index:0,kind:t})}),(function(){var e=getInternalState$3(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");iterators$1.Arguments=iterators$1.Array;var domIterables$1={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},TO_STRING_TAG$3$1=wellKnownSymbol$1("toStringTag");for(var COLLECTION_NAME$1 in domIterables$1){var Collection$2=global_1$1[COLLECTION_NAME$1],CollectionPrototype$1=Collection$2&&Collection$2.prototype;CollectionPrototype$1&&classof$1(CollectionPrototype$1)!==TO_STRING_TAG$3$1&&createNonEnumerableProperty$1(CollectionPrototype$1,TO_STRING_TAG$3$1,COLLECTION_NAME$1),iterators$1[COLLECTION_NAME$1]=iterators$1.Array}var createMethod$1$1=function(e){return function(t,r){var n,i,o=String(requireObjectCoercible$1(t)),a=toInteger$2(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):n:e?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}},stringMultibyte$1={codeAt:createMethod$1$1(!1),charAt:createMethod$1$1(!0)},charAt$1=stringMultibyte$1.charAt,STRING_ITERATOR$1="String Iterator",setInternalState$1$1=internalState$1.set,getInternalState$1$1=internalState$1.getterFor(STRING_ITERATOR$1);defineIterator$1(String,"String",(function(e){setInternalState$1$1(this,{type:STRING_ITERATOR$1,string:String(e),index:0})}),(function(){var e,t=getInternalState$1$1(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=charAt$1(r,n),t.index+=e.length,{value:e,done:!1})}));var ITERATOR$2$1=wellKnownSymbol$1("iterator"),getIteratorMethod$2=function(e){if(null!=e)return e[ITERATOR$2$1]||e["@@iterator"]||iterators$1[classof$1(e)]},getIterator$2=function(e){var t=getIteratorMethod$2(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return anObject$1(t.call(e))},getIterator_1$1=getIterator$2,getIterator$1$1=getIterator_1$1,getIteratorMethod_1$1=getIteratorMethod$2,getIteratorMethod$1$1=getIteratorMethod_1$1,isArray$6=Array.isArray||function(e){return"Array"==classofRaw$1(e)},createProperty$1=function(e,t,r){var n=toPrimitive$1(t);n in e?objectDefineProperty$1.f(e,n,createPropertyDescriptor$1(0,r)):e[n]=r},SPECIES$4=wellKnownSymbol$1("species"),arraySpeciesCreate$1=function(e,t){var r;return isArray$6(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!isArray$6(r.prototype)?isObject$3(r)&&null===(r=r[SPECIES$4])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},engineUserAgent$1=getBuiltIn$1("navigator","userAgent")||"",process$1=global_1$1.process,versions$1=process$1&&process$1.versions,v8$1=versions$1&&versions$1.v8,match$2,version$4;v8$1?(match$2=v8$1.split("."),version$4=match$2[0]+match$2[1]):engineUserAgent$1&&(match$2=engineUserAgent$1.match(/Edge\/(\d+)/),(!match$2||match$2[1]>=74)&&(match$2=engineUserAgent$1.match(/Chrome\/(\d+)/),match$2&&(version$4=match$2[1])));var engineV8Version$1=version$4&&+version$4,SPECIES$1$1=wellKnownSymbol$1("species"),arrayMethodHasSpeciesSupport$1=function(e){return engineV8Version$1>=51||!fails$1((function(){var t=[];return(t.constructor={})[SPECIES$1$1]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},IS_CONCAT_SPREADABLE$1=wellKnownSymbol$1("isConcatSpreadable"),MAX_SAFE_INTEGER$3=9007199254740991,MAXIMUM_ALLOWED_INDEX_EXCEEDED$1="Maximum allowed index exceeded",IS_CONCAT_SPREADABLE_SUPPORT$1=engineV8Version$1>=51||!fails$1((function(){var e=[];return e[IS_CONCAT_SPREADABLE$1]=!1,e.concat()[0]!==e})),SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport$1("concat"),isConcatSpreadable$1=function(e){if(!isObject$3(e))return!1;var t=e[IS_CONCAT_SPREADABLE$1];return void 0!==t?!!t:isArray$6(e)},FORCED$6=!IS_CONCAT_SPREADABLE_SUPPORT$1||!SPECIES_SUPPORT$1;_export$1({target:"Array",proto:!0,forced:FORCED$6},{concat:function(e){var t,r,n,i,o,a=toObject$1(this),s=arraySpeciesCreate$1(a,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?a:arguments[t],isConcatSpreadable$1(o)){if(l+(i=toLength$1(o.length))>MAX_SAFE_INTEGER$3)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED$1);for(r=0;r<i;r++,l++)r in o&&createProperty$1(s,l,o[r])}else{if(l>=MAX_SAFE_INTEGER$3)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED$1);createProperty$1(s,l++,o)}return s.length=l,s}});var es_object_toString$1=Object.freeze({__proto__:null}),hiddenKeys$1$1=enumBugKeys$1.concat("length","prototype"),f$3$1=Object.getOwnPropertyNames||function(e){return objectKeysInternal$1(e,hiddenKeys$1$1)},objectGetOwnPropertyNames$1={f:f$3$1},nativeGetOwnPropertyNames$2=objectGetOwnPropertyNames$1.f,toString$1$2={}.toString,windowNames$1="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames$1=function(e){try{return nativeGetOwnPropertyNames$2(e)}catch(e){return windowNames$1.slice()}},f$4$1=function(e){return windowNames$1&&"[object Window]"==toString$1$2.call(e)?getWindowNames$1(e):nativeGetOwnPropertyNames$2(toIndexedObject$1(e))},objectGetOwnPropertyNamesExternal$1={f:f$4$1},f$5$1=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols$1={f:f$5$1},f$6$1=wellKnownSymbol$1,wellKnownSymbolWrapped$1={f:f$6$1},defineProperty$1$2=objectDefineProperty$1.f,defineWellKnownSymbol$1=function(e){var t=path$1.Symbol||(path$1.Symbol={});has$2(t,e)||defineProperty$1$2(t,e,{value:wellKnownSymbolWrapped$1.f(e)})},push$2=[].push,createMethod$2$1=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,a=5==e||o;return function(s,l,u,c){for(var h,d,f=toObject$1(s),p=indexedObject$1(f),g=functionBindContext$1(l,u,3),y=toLength$1(p.length),v=0,m=c||arraySpeciesCreate$1,b=t?m(s,y):r?m(s,0):void 0;y>v;v++)if((a||v in p)&&(d=g(h=p[v],v,f),e))if(t)b[v]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return v;case 2:push$2.call(b,h)}else if(i)return!1;return o?-1:n||i?i:b}},arrayIteration$1={forEach:createMethod$2$1(0),map:createMethod$2$1(1),filter:createMethod$2$1(2),some:createMethod$2$1(3),every:createMethod$2$1(4),find:createMethod$2$1(5),findIndex:createMethod$2$1(6)},$forEach$2=arrayIteration$1.forEach,HIDDEN$1=sharedKey$1("hidden"),SYMBOL$1="Symbol",PROTOTYPE$1$1="prototype",TO_PRIMITIVE$1=wellKnownSymbol$1("toPrimitive"),setInternalState$2$1=internalState$1.set,getInternalState$2$1=internalState$1.getterFor(SYMBOL$1),ObjectPrototype$1$1=Object[PROTOTYPE$1$1],$Symbol$1=global_1$1.Symbol,$stringify$2=getBuiltIn$1("JSON","stringify"),nativeGetOwnPropertyDescriptor$1$1=objectGetOwnPropertyDescriptor$1.f,nativeDefineProperty$1$1=objectDefineProperty$1.f,nativeGetOwnPropertyNames$1$1=objectGetOwnPropertyNamesExternal$1.f,nativePropertyIsEnumerable$1$1=objectPropertyIsEnumerable$1.f,AllSymbols$1=shared$1("symbols"),ObjectPrototypeSymbols$1=shared$1("op-symbols"),StringToSymbolRegistry$1=shared$1("string-to-symbol-registry"),SymbolToStringRegistry$1=shared$1("symbol-to-string-registry"),WellKnownSymbolsStore$1$1=shared$1("wks"),QObject$1=global_1$1.QObject,USE_SETTER$1=!QObject$1||!QObject$1[PROTOTYPE$1$1]||!QObject$1[PROTOTYPE$1$1].findChild,setSymbolDescriptor$1=descriptors$1&&fails$1((function(){return 7!=objectCreate$2(nativeDefineProperty$1$1({},"a",{get:function(){return nativeDefineProperty$1$1(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=nativeGetOwnPropertyDescriptor$1$1(ObjectPrototype$1$1,t);n&&delete ObjectPrototype$1$1[t],nativeDefineProperty$1$1(e,t,r),n&&e!==ObjectPrototype$1$1&&nativeDefineProperty$1$1(ObjectPrototype$1$1,t,n)}:nativeDefineProperty$1$1,wrap$2=function(e,t){var r=AllSymbols$1[e]=objectCreate$2($Symbol$1[PROTOTYPE$1$1]);return setInternalState$2$1(r,{type:SYMBOL$1,tag:e,description:t}),descriptors$1||(r.description=t),r},isSymbol$3=useSymbolAsUid$1?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof $Symbol$1},$defineProperty$1=function(e,t,r){e===ObjectPrototype$1$1&&$defineProperty$1(ObjectPrototypeSymbols$1,t,r),anObject$1(e);var n=toPrimitive$1(t,!0);return anObject$1(r),has$2(AllSymbols$1,n)?(r.enumerable?(has$2(e,HIDDEN$1)&&e[HIDDEN$1][n]&&(e[HIDDEN$1][n]=!1),r=objectCreate$2(r,{enumerable:createPropertyDescriptor$1(0,!1)})):(has$2(e,HIDDEN$1)||nativeDefineProperty$1$1(e,HIDDEN$1,createPropertyDescriptor$1(1,{})),e[HIDDEN$1][n]=!0),setSymbolDescriptor$1(e,n,r)):nativeDefineProperty$1$1(e,n,r)},$defineProperties$1=function(e,t){anObject$1(e);var r=toIndexedObject$1(t),n=objectKeys$1(r).concat($getOwnPropertySymbols$1(r));return $forEach$2(n,(function(t){descriptors$1&&!$propertyIsEnumerable$1.call(r,t)||$defineProperty$1(e,t,r[t])})),e},$create$1=function(e,t){return void 0===t?objectCreate$2(e):$defineProperties$1(objectCreate$2(e),t)},$propertyIsEnumerable$1=function(e){var t=toPrimitive$1(e,!0),r=nativePropertyIsEnumerable$1$1.call(this,t);return!(this===ObjectPrototype$1$1&&has$2(AllSymbols$1,t)&&!has$2(ObjectPrototypeSymbols$1,t))&&(!(r||!has$2(this,t)||!has$2(AllSymbols$1,t)||has$2(this,HIDDEN$1)&&this[HIDDEN$1][t])||r)},$getOwnPropertyDescriptor$1=function(e,t){var r=toIndexedObject$1(e),n=toPrimitive$1(t,!0);if(r!==ObjectPrototype$1$1||!has$2(AllSymbols$1,n)||has$2(ObjectPrototypeSymbols$1,n)){var i=nativeGetOwnPropertyDescriptor$1$1(r,n);return!i||!has$2(AllSymbols$1,n)||has$2(r,HIDDEN$1)&&r[HIDDEN$1][n]||(i.enumerable=!0),i}},$getOwnPropertyNames$1=function(e){var t=nativeGetOwnPropertyNames$1$1(toIndexedObject$1(e)),r=[];return $forEach$2(t,(function(e){has$2(AllSymbols$1,e)||has$2(hiddenKeys$2,e)||r.push(e)})),r},$getOwnPropertySymbols$1=function(e){var t=e===ObjectPrototype$1$1,r=nativeGetOwnPropertyNames$1$1(t?ObjectPrototypeSymbols$1:toIndexedObject$1(e)),n=[];return $forEach$2(r,(function(e){!has$2(AllSymbols$1,e)||t&&!has$2(ObjectPrototype$1$1,e)||n.push(AllSymbols$1[e])})),n};if(nativeSymbol$1||($Symbol$1=function(){if(this instanceof $Symbol$1)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=uid$1(e),r=function(e){this===ObjectPrototype$1$1&&r.call(ObjectPrototypeSymbols$1,e),has$2(this,HIDDEN$1)&&has$2(this[HIDDEN$1],t)&&(this[HIDDEN$1][t]=!1),setSymbolDescriptor$1(this,t,createPropertyDescriptor$1(1,e))};return descriptors$1&&USE_SETTER$1&&setSymbolDescriptor$1(ObjectPrototype$1$1,t,{configurable:!0,set:r}),wrap$2(t,e)},redefine$1($Symbol$1[PROTOTYPE$1$1],"toString",(function(){return getInternalState$2$1(this).tag})),redefine$1($Symbol$1,"withoutSetter",(function(e){return wrap$2(uid$1(e),e)})),objectPropertyIsEnumerable$1.f=$propertyIsEnumerable$1,objectDefineProperty$1.f=$defineProperty$1,objectGetOwnPropertyDescriptor$1.f=$getOwnPropertyDescriptor$1,objectGetOwnPropertyNames$1.f=objectGetOwnPropertyNamesExternal$1.f=$getOwnPropertyNames$1,objectGetOwnPropertySymbols$1.f=$getOwnPropertySymbols$1,wellKnownSymbolWrapped$1.f=function(e){return wrap$2(wellKnownSymbol$1(e),e)},descriptors$1&&nativeDefineProperty$1$1($Symbol$1[PROTOTYPE$1$1],"description",{configurable:!0,get:function(){return getInternalState$2$1(this).description}})),_export$1({global:!0,wrap:!0,forced:!nativeSymbol$1,sham:!nativeSymbol$1},{Symbol:$Symbol$1}),$forEach$2(objectKeys$1(WellKnownSymbolsStore$1$1),(function(e){defineWellKnownSymbol$1(e)})),_export$1({target:SYMBOL$1,stat:!0,forced:!nativeSymbol$1},{for:function(e){var t=String(e);if(has$2(StringToSymbolRegistry$1,t))return StringToSymbolRegistry$1[t];var r=$Symbol$1(t);return StringToSymbolRegistry$1[t]=r,SymbolToStringRegistry$1[r]=t,r},keyFor:function(e){if(!isSymbol$3(e))throw TypeError(e+" is not a symbol");if(has$2(SymbolToStringRegistry$1,e))return SymbolToStringRegistry$1[e]},useSetter:function(){USE_SETTER$1=!0},useSimple:function(){USE_SETTER$1=!1}}),_export$1({target:"Object",stat:!0,forced:!nativeSymbol$1,sham:!descriptors$1},{create:$create$1,defineProperty:$defineProperty$1,defineProperties:$defineProperties$1,getOwnPropertyDescriptor:$getOwnPropertyDescriptor$1}),_export$1({target:"Object",stat:!0,forced:!nativeSymbol$1},{getOwnPropertyNames:$getOwnPropertyNames$1,getOwnPropertySymbols:$getOwnPropertySymbols$1}),_export$1({target:"Object",stat:!0,forced:fails$1((function(){objectGetOwnPropertySymbols$1.f(1)}))},{getOwnPropertySymbols:function(e){return objectGetOwnPropertySymbols$1.f(toObject$1(e))}}),$stringify$2){var FORCED_JSON_STRINGIFY$1=!nativeSymbol$1||fails$1((function(){var e=$Symbol$1();return"[null]"!=$stringify$2([e])||"{}"!=$stringify$2({a:e})||"{}"!=$stringify$2(Object(e))}));_export$1({target:"JSON",stat:!0,forced:FORCED_JSON_STRINGIFY$1},{stringify:function(e,t,r){for(var n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t,(isObject$3(t)||void 0!==e)&&!isSymbol$3(e))return isArray$6(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!isSymbol$3(t))return t}),i[1]=t,$stringify$2.apply(null,i)}})}$Symbol$1[PROTOTYPE$1$1][TO_PRIMITIVE$1]||createNonEnumerableProperty$1($Symbol$1[PROTOTYPE$1$1],TO_PRIMITIVE$1,$Symbol$1[PROTOTYPE$1$1].valueOf),setToStringTag$1($Symbol$1,SYMBOL$1),hiddenKeys$2[HIDDEN$1]=!0,defineWellKnownSymbol$1("asyncIterator");var es_symbol_description$1=Object.freeze({__proto__:null});defineWellKnownSymbol$1("hasInstance"),defineWellKnownSymbol$1("isConcatSpreadable"),defineWellKnownSymbol$1("iterator"),defineWellKnownSymbol$1("match"),defineWellKnownSymbol$1("matchAll"),defineWellKnownSymbol$1("replace"),defineWellKnownSymbol$1("search"),defineWellKnownSymbol$1("species"),defineWellKnownSymbol$1("split"),defineWellKnownSymbol$1("toPrimitive"),defineWellKnownSymbol$1("toStringTag"),defineWellKnownSymbol$1("unscopables"),setToStringTag$1(Math,"Math",!0),setToStringTag$1(global_1$1.JSON,"JSON",!0),getCjsExportFromNamespace$1(es_object_toString$1),getCjsExportFromNamespace$1(es_symbol_description$1);var symbol$5=path$1.Symbol,symbol$1$1=symbol$5,symbol$2$1=symbol$1$1,callWithSafeIterationClosing$1=function(e,t,r,n){try{return n?t(anObject$1(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&anObject$1(i.call(e)),t}},ITERATOR$3$1=wellKnownSymbol$1("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$1=function(e){return void 0!==e&&(iterators$1.Array===e||ArrayPrototype[ITERATOR$3$1]===e)},arrayFrom$1=function(e){var t,r,n,i,o,a,s=toObject$1(e),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,d=getIteratorMethod$2(s),f=0;if(h&&(c=functionBindContext$1(c,u>2?arguments[2]:void 0,2)),null==d||l==Array&&isArrayIteratorMethod$1(d))for(r=new l(t=toLength$1(s.length));t>f;f++)a=h?c(s[f],f):s[f],createProperty$1(r,f,a);else for(o=(i=d.call(s)).next,r=new l;!(n=o.call(i)).done;f++)a=h?callWithSafeIterationClosing$1(i,c,[n.value,f],!0):n.value,createProperty$1(r,f,a);return r.length=f,r},ITERATOR$4$1=wellKnownSymbol$1("iterator"),SAFE_CLOSING$1=!1;try{var called$1=0,iteratorWithReturn$1={next:function(){return{done:!!called$1++}},return:function(){SAFE_CLOSING$1=!0}};iteratorWithReturn$1[ITERATOR$4$1]=function(){return this},Array.from(iteratorWithReturn$1,(function(){throw 2}))}catch(error){}var checkCorrectnessOfIteration$1=function(e,t){if(!t&&!SAFE_CLOSING$1)return!1;var r=!1;try{var n={};n[ITERATOR$4$1]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},INCORRECT_ITERATION$1=!checkCorrectnessOfIteration$1((function(e){Array.from(e)}));_export$1({target:"Array",stat:!0,forced:INCORRECT_ITERATION$1},{from:arrayFrom$1});var from_1$5=path$1.Array.from,from_1$1$1=from_1$5,from_1$2$1=from_1$1$1;_export$1({target:"Object",stat:!0,forced:!descriptors$1,sham:!descriptors$1},{defineProperty:objectDefineProperty$1.f});var defineProperty_1$1=createCommonjsModule$2((function(e){var t=path$1.Object,r=e.exports=function(e,r,n){return t.defineProperty(e,r,n)};t.defineProperty.sham&&(r.sham=!0)})),defineProperty$2$1=defineProperty_1$1,defineProperty$3$1=defineProperty$2$1;_export$1({target:"Object",stat:!0,forced:!descriptors$1,sham:!descriptors$1},{defineProperties:objectDefineProperties$1});var defineProperties_1$1=createCommonjsModule$2((function(e){var t=path$1.Object,r=e.exports=function(e,r){return t.defineProperties(e,r)};t.defineProperties.sham&&(r.sham=!0)})),defineProperties$2=defineProperties_1$1,defineProperties$1$1=defineProperties$2,ownKeys$2=getBuiltIn$1("Reflect","ownKeys")||function(e){var t=objectGetOwnPropertyNames$1.f(anObject$1(e)),r=objectGetOwnPropertySymbols$1.f;return r?t.concat(r(e)):t};_export$1({target:"Object",stat:!0,sham:!descriptors$1},{getOwnPropertyDescriptors:function(e){for(var t,r,n=toIndexedObject$1(e),i=objectGetOwnPropertyDescriptor$1.f,o=ownKeys$2(n),a={},s=0;o.length>s;)void 0!==(r=i(n,t=o[s++]))&&createProperty$1(a,t,r);return a}});var getOwnPropertyDescriptors$3=path$1.Object.getOwnPropertyDescriptors,getOwnPropertyDescriptors$1$1=getOwnPropertyDescriptors$3,getOwnPropertyDescriptors$2$1=getOwnPropertyDescriptors$1$1,nativeGetOwnPropertyDescriptor$2$1=objectGetOwnPropertyDescriptor$1.f,FAILS_ON_PRIMITIVES$3=fails$1((function(){nativeGetOwnPropertyDescriptor$2$1(1)})),FORCED$1$1=!descriptors$1||FAILS_ON_PRIMITIVES$3;_export$1({target:"Object",stat:!0,forced:FORCED$1$1,sham:!descriptors$1},{getOwnPropertyDescriptor:function(e,t){return nativeGetOwnPropertyDescriptor$2$1(toIndexedObject$1(e),t)}});var getOwnPropertyDescriptor_1$1=createCommonjsModule$2((function(e){var t=path$1.Object,r=e.exports=function(e,r){return t.getOwnPropertyDescriptor(e,r)};t.getOwnPropertyDescriptor.sham&&(r.sham=!0)})),getOwnPropertyDescriptor$2$1=getOwnPropertyDescriptor_1$1,getOwnPropertyDescriptor$3$1=getOwnPropertyDescriptor$2$1,getOwnPropertySymbols$3=path$1.Object.getOwnPropertySymbols,getOwnPropertySymbols$1$1=getOwnPropertySymbols$3,getOwnPropertySymbols$2$1=getOwnPropertySymbols$1$1;_export$1({target:"Object",stat:!0,sham:!descriptors$1},{create:objectCreate$2});var Object$1$1=path$1.Object,create$5=function(e,t){return Object$1$1.create(e,t)},create$1$1=create$5,create$2$1=create$1$1,defineProperty$4$1=defineProperty_1$1,defineProperty$5$1=defineProperty$4$1;function _defineProperty$3(e,t,r){return t in e?defineProperty$5$1(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var defineProperty$6$1=_defineProperty$3,FAILS_ON_PRIMITIVES$1$1=fails$1((function(){objectKeys$1(1)}));_export$1({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$1$1},{keys:function(e){return objectKeys$1(toObject$1(e))}});var keys$1$2=path$1.Object.keys,keys$2$1=keys$1$2,keys$3$1=keys$2$1,whitespaces$1="\t\n\v\f\r \u2028\u2029\ufeff",whitespace$1="["+whitespaces$1+"]",ltrim$1=RegExp("^"+whitespace$1+whitespace$1+"*"),rtrim$1=RegExp(whitespace$1+whitespace$1+"*$"),createMethod$3$1=function(e){return function(t){var r=String(requireObjectCoercible$1(t));return 1&e&&(r=r.replace(ltrim$1,"")),2&e&&(r=r.replace(rtrim$1,"")),r}},stringTrim$1={start:createMethod$3$1(1),end:createMethod$3$1(2),trim:createMethod$3$1(3)},non$1="",stringTrimForced$1=function(e){return fails$1((function(){return!!whitespaces$1[e]()||non$1[e]()!=non$1||whitespaces$1[e].name!==e}))},$trim$1=stringTrim$1.trim;_export$1({target:"String",proto:!0,forced:stringTrimForced$1("trim")},{trim:function(){return $trim$1(this)}});var trim$2=entryVirtual$1("String").trim,arrayMethodIsStrict$1=function(e,t){var r=[][e];return!!r&&fails$1((function(){r.call(null,t||function(){throw 1},1)}))},defineProperty$7$1=Object.defineProperty,cache$2={},thrower$1=function(e){throw e},arrayMethodUsesToLength$1=function(e,t){if(has$2(cache$2,e))return cache$2[e];t||(t={});var r=[][e],n=!!has$2(t,"ACCESSORS")&&t.ACCESSORS,i=has$2(t,0)?t[0]:thrower$1,o=has$2(t,1)?t[1]:void 0;return cache$2[e]=!!r&&!fails$1((function(){if(n&&!descriptors$1)return!0;var e={length:-1};n?defineProperty$7$1(e,1,{enumerable:!0,get:thrower$1}):e[1]=1,r.call(e,i,o)}))},$forEach$1$1=arrayIteration$1.forEach,STRICT_METHOD$5=arrayMethodIsStrict$1("forEach"),USES_TO_LENGTH$8=arrayMethodUsesToLength$1("forEach"),arrayForEach$1=STRICT_METHOD$5&&USES_TO_LENGTH$8?[].forEach:function(e){return $forEach$1$1(this,e,arguments.length>1?arguments[1]:void 0)};_export$1({target:"Array",proto:!0,forced:[].forEach!=arrayForEach$1},{forEach:arrayForEach$1});var forEach$4=entryVirtual$1("Array").forEach,forEach$1$2=forEach$4,ArrayPrototype$1$1=Array.prototype,DOMIterables$4={DOMTokenList:!0,NodeList:!0},forEach_1$2=function(e){var t=e.forEach;return e===ArrayPrototype$1$1||e instanceof Array&&t===ArrayPrototype$1$1.forEach||DOMIterables$4.hasOwnProperty(classof$1(e))?forEach$1$2:t},forEach$2$1=forEach_1$2,$map$1=arrayIteration$1.map,HAS_SPECIES_SUPPORT$4=arrayMethodHasSpeciesSupport$1("map"),USES_TO_LENGTH$1$1=arrayMethodUsesToLength$1("map");_export$1({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$4||!USES_TO_LENGTH$1$1},{map:function(e){return $map$1(this,e,arguments.length>1?arguments[1]:void 0)}});var map$6=entryVirtual$1("Array").map,ArrayPrototype$2$1=Array.prototype,map_1$2=function(e){var t=e.map;return e===ArrayPrototype$2$1||e instanceof Array&&t===ArrayPrototype$2$1.map?map$6:t},map$1$2=map_1$2,map$2$1=map$1$2,trim$1$1=stringTrim$1.trim,$parseInt$1=global_1$1.parseInt,hex$1=/^[+-]?0[Xx]/,FORCED$2$1=8!==$parseInt$1(whitespaces$1+"08")||22!==$parseInt$1(whitespaces$1+"0x16"),numberParseInt$1=FORCED$2$1?function(e,t){var r=trim$1$1(String(e));return $parseInt$1(r,t>>>0||(hex$1.test(r)?16:10))}:$parseInt$1;_export$1({global:!0,forced:parseInt!=numberParseInt$1},{parseInt:numberParseInt$1});var _parseInt=path$1.parseInt,_parseInt$1=_parseInt,_parseInt$2=_parseInt$1,propertyIsEnumerable$3=objectPropertyIsEnumerable$1.f,createMethod$4$1=function(e){return function(t){for(var r,n=toIndexedObject$1(t),i=objectKeys$1(n),o=i.length,a=0,s=[];o>a;)r=i[a++],descriptors$1&&!propertyIsEnumerable$3.call(n,r)||s.push(e?[r,n[r]]:n[r]);return s}},objectToArray$1={entries:createMethod$4$1(!0),values:createMethod$4$1(!1)},$values$1=objectToArray$1.values;_export$1({target:"Object",stat:!0},{values:function(e){return $values$1(e)}});var values$4=path$1.Object.values,$filter$1=arrayIteration$1.filter,HAS_SPECIES_SUPPORT$1$1=arrayMethodHasSpeciesSupport$1("filter"),USES_TO_LENGTH$2$1=arrayMethodUsesToLength$1("filter");_export$1({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1$1||!USES_TO_LENGTH$2$1},{filter:function(e){return $filter$1(this,e,arguments.length>1?arguments[1]:void 0)}});var filter$3=entryVirtual$1("Array").filter,ArrayPrototype$3$1=Array.prototype,filter_1$2=function(e){var t=e.filter;return e===ArrayPrototype$3$1||e instanceof Array&&t===ArrayPrototype$3$1.filter?filter$3:t},filter$1$2=filter_1$2,filter$2$2=filter$1$2,concat$3=entryVirtual$1("Array").concat,ArrayPrototype$4$1=Array.prototype,concat_1$1=function(e){var t=e.concat;return e===ArrayPrototype$4$1||e instanceof Array&&t===ArrayPrototype$4$1.concat?concat$3:t},concat$1$1=concat_1$1,concat$2$1=concat$1$1;_export$1({target:"Array",stat:!0},{isArray:isArray$6});var isArray$1$2=path$1.Array.isArray,isArray$2$1=isArray$1$2,isArray$3$1=isArray$2$1;function _arrayLikeToArray$3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var arrayLikeToArray$1=_arrayLikeToArray$3;function _arrayWithoutHoles$1(e){if(isArray$3$1(e))return arrayLikeToArray$1(e)}var arrayWithoutHoles$1=_arrayWithoutHoles$1,from_1$3$1=from_1$5,from_1$4$1=from_1$3$1,ITERATOR$5$1=wellKnownSymbol$1("iterator"),isIterable$2=function(e){var t=Object(e);return void 0!==t[ITERATOR$5$1]||"@@iterator"in t||iterators$1.hasOwnProperty(classof$1(t))},isIterable_1$1=isIterable$2,isIterable$1$1=isIterable_1$1;defineWellKnownSymbol$1("asyncDispose"),defineWellKnownSymbol$1("dispose"),defineWellKnownSymbol$1("observable"),defineWellKnownSymbol$1("patternMatch"),defineWellKnownSymbol$1("replaceAll");var symbol$3$1=symbol$5,symbol$4$1=symbol$3$1;function _iterableToArray$1(e){if(void 0!==symbol$4$1&&isIterable$1$1(Object(e)))return from_1$4$1(e)}var iterableToArray$1=_iterableToArray$1,HAS_SPECIES_SUPPORT$2$1=arrayMethodHasSpeciesSupport$1("slice"),USES_TO_LENGTH$3$1=arrayMethodUsesToLength$1("slice",{ACCESSORS:!0,0:0,1:2}),SPECIES$2$1=wellKnownSymbol$1("species"),nativeSlice$1=[].slice,max$1$2=Math.max;_export$1({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2$1||!USES_TO_LENGTH$3$1},{slice:function(e,t){var r,n,i,o=toIndexedObject$1(this),a=toLength$1(o.length),s=toAbsoluteIndex$1(e,a),l=toAbsoluteIndex$1(void 0===t?a:t,a);if(isArray$6(o)&&("function"!=typeof(r=o.constructor)||r!==Array&&!isArray$6(r.prototype)?isObject$3(r)&&null===(r=r[SPECIES$2$1])&&(r=void 0):r=void 0,r===Array||void 0===r))return nativeSlice$1.call(o,s,l);for(n=new(void 0===r?Array:r)(max$1$2(l-s,0)),i=0;s<l;s++,i++)s in o&&createProperty$1(n,i,o[s]);return n.length=i,n}});var slice$1$1=entryVirtual$1("Array").slice,ArrayPrototype$5$1=Array.prototype,slice_1$1=function(e){var t=e.slice;return e===ArrayPrototype$5$1||e instanceof Array&&t===ArrayPrototype$5$1.slice?slice$1$1:t},slice$2$1=slice_1$1,slice$3$1=slice$2$1;function _unsupportedIterableToArray$3(e,t){var r;if(e){if("string"==typeof e)return arrayLikeToArray$1(e,t);var n=slice$3$1(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?from_1$4$1(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?arrayLikeToArray$1(e,t):void 0}}var unsupportedIterableToArray$1=_unsupportedIterableToArray$3;function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var nonIterableSpread$1=_nonIterableSpread$1;function _toConsumableArray$1(e){return arrayWithoutHoles$1(e)||iterableToArray$1(e)||unsupportedIterableToArray$1(e)||nonIterableSpread$1()}var toConsumableArray$1=_toConsumableArray$1,slice$4$1=slice_1$1,slice$5$1=slice$4$1,FAILS_ON_PRIMITIVES$2$1=fails$1((function(){objectGetPrototypeOf$1(1)}));_export$1({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$2$1,sham:!correctPrototypeGetter$1},{getPrototypeOf:function(e){return objectGetPrototypeOf$1(toObject$1(e))}});var getPrototypeOf$6=path$1.Object.getPrototypeOf,getPrototypeOf$1$1=getPrototypeOf$6,getPrototypeOf$2$1=getPrototypeOf$1$1,$indexOf$1=arrayIncludes$2.indexOf,nativeIndexOf$1=[].indexOf,NEGATIVE_ZERO$1=!!nativeIndexOf$1&&1/[1].indexOf(1,-0)<0,STRICT_METHOD$1$1=arrayMethodIsStrict$1("indexOf"),USES_TO_LENGTH$4$1=arrayMethodUsesToLength$1("indexOf",{ACCESSORS:!0,1:0});_export$1({target:"Array",proto:!0,forced:NEGATIVE_ZERO$1||!STRICT_METHOD$1$1||!USES_TO_LENGTH$4$1},{indexOf:function(e){return NEGATIVE_ZERO$1?nativeIndexOf$1.apply(this,arguments)||0:$indexOf$1(this,e,arguments.length>1?arguments[1]:void 0)}});var indexOf$1$1=entryVirtual$1("Array").indexOf,ArrayPrototype$6$1=Array.prototype,indexOf_1=function(e){var t=e.indexOf;return e===ArrayPrototype$6$1||e instanceof Array&&t===ArrayPrototype$6$1.indexOf?indexOf$1$1:t},indexOf$2$1=indexOf_1,indexOf$3=indexOf$2$1,isArray$4$1=isArray$1$2,isArray$5$1=isArray$4$1,nativeAssign$1=Object.assign,defineProperty$8$1=Object.defineProperty,objectAssign$1=!nativeAssign$1||fails$1((function(){if(descriptors$1&&1!==nativeAssign$1({b:1},nativeAssign$1(defineProperty$8$1({},"a",{enumerable:!0,get:function(){defineProperty$8$1(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=nativeAssign$1({},e)[r]||"abcdefghijklmnopqrst"!=objectKeys$1(nativeAssign$1({},t)).join("")}))?function(e,t){for(var r=toObject$1(e),n=arguments.length,i=1,o=objectGetOwnPropertySymbols$1.f,a=objectPropertyIsEnumerable$1.f;n>i;)for(var s,l=indexedObject$1(arguments[i++]),u=o?objectKeys$1(l).concat(o(l)):objectKeys$1(l),c=u.length,h=0;c>h;)s=u[h++],descriptors$1&&!a.call(l,s)||(r[s]=l[s]);return r}:nativeAssign$1;_export$1({target:"Object",stat:!0,forced:Object.assign!==objectAssign$1},{assign:objectAssign$1});var assign$4=path$1.Object.assign,assign$1$2=assign$4,assign$2$2=assign$1$2,iterator$5=wellKnownSymbolWrapped$1.f("iterator"),iterator$1$1=iterator$5,iterator$2$1=iterator$1$1,_typeof_1$1=createCommonjsModule$2((function(e){function t(r){return e.exports=t="function"==typeof symbol$4$1&&"symbol"==typeof iterator$2$1?function(e){return typeof e}:function(e){return e&&"function"==typeof symbol$4$1&&e.constructor===symbol$4$1&&e!==symbol$4$1.prototype?"symbol":typeof e},t(r)}e.exports=t}));function _arrayWithHoles$2(e){if(isArray$3$1(e))return e}var arrayWithHoles$1=_arrayWithHoles$2;function _iterableToArrayLimit$2(e,t){if(void 0!==symbol$4$1&&isIterable$1$1(Object(e))){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=getIterator$1$1(e);!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}var iterableToArrayLimit$1=_iterableToArrayLimit$2;function _nonIterableRest$2(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var nonIterableRest$1=_nonIterableRest$2;function _slicedToArray$2(e,t){return arrayWithHoles$1(e)||iterableToArrayLimit$1(e,t)||unsupportedIterableToArray$1(e,t)||nonIterableRest$1()}var slicedToArray$1=_slicedToArray$2;_export$1({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var now$3=path$1.Date.now,now$1$1=now$3,now$2$1=now$1$1;function _createForOfIteratorHelper$2(e){if(void 0===symbol$2$1||null==getIteratorMethod$1$1(e)){if(isArray$5$1(e)||(e=_unsupportedIterableToArray$1$1(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,a=!1;return{s:function(){n=getIterator$1$1(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray$1$1(e,t){var r;if(e){if("string"==typeof e)return _arrayLikeToArray$1$1(e,t);var n=slice$5$1(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?from_1$2$1(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1$1(e,t):void 0}}function _arrayLikeToArray$1$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
/**
 * vis-util
 * https://github.com/visjs/vis-util
 *
 * utilitie collection for visjs
 *
 * @version 4.0.0
 * @date    2020-02-29T15:35:13.178Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function Alea(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return AleaImplementation(t.length?t:[now$2$1()])}function AleaImplementation(e){var t=mashSeed(e),r=slicedToArray$1(t,3),n=r[0],i=r[1],o=r[2],a=1,s=function(){var e=2091639*n+2.3283064365386963e-10*a;return n=i,i=o,o=e-(a=0|e)};return s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.algorithm="Alea",s.seed=e,s.version="0.9",s}function mashSeed(){for(var e=Mash(),t=e(" "),r=e(" "),n=e(" "),i=0;i<arguments.length;i++)(t-=e(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(t+=1),(r-=e(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(r+=1),(n-=e(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(n+=1);return[t,r,n]}function Mash(){var e=4022871197;return function(t){for(var r=t.toString(),n=0;n<r.length;n++){var i=.02519603282416938*(e+=r.charCodeAt(n));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)}}var fullHexRE=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,shortHexRE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,rgbRE=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,rgbaRE=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function recursiveDOMDelete(e){if(e)for(;!0===e.hasChildNodes();){var t=e.firstChild;t&&(recursiveDOMDelete(t),e.removeChild(t))}}function isString$2(e){return e instanceof String||"string"==typeof e}function isObject$1$1(e){return"object"===_typeof_1$1(e)&&null!==e}function copyOrDelete$1(e,t,r,n){var i=!1;!0===n&&(i=null===t[r]&&void 0!==e[r]),i?delete e[r]:e[r]=t[r]}function fillIfDefined(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n in e)if(void 0!==t[n])if(null===t[n]||"object"!==_typeof_1$1(t[n]))copyOrDelete$1(e,t,n,r);else{var i=e[n],o=t[n];isObject$1$1(i)&&isObject$1$1(o)&&fillIfDefined(i,o,r)}}var extend$1=assign$2$2;function selectiveDeepExtend(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(isArray$5$1(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<e.length;i++){var o=e[i];if(Object.prototype.hasOwnProperty.call(r,o))if(r[o]&&r[o].constructor===Object)void 0===t[o]&&(t[o]={}),t[o].constructor===Object?deepExtend$1(t[o],r[o],!1,n):copyOrDelete$1(t,r,o,n);else{if(isArray$5$1(r[o]))throw new TypeError("Arrays are not supported by deepExtend");copyOrDelete$1(t,r,o,n)}}return t}function selectiveNotDeepExtend(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(isArray$5$1(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&-1===indexOf$3(e).call(e,i))if(r[i]&&r[i].constructor===Object)void 0===t[i]&&(t[i]={}),t[i].constructor===Object?deepExtend$1(t[i],r[i]):copyOrDelete$1(t,r,i,n);else if(isArray$5$1(r[i])){t[i]=[];for(var o=0;o<r[i].length;o++)t[i].push(r[i][o])}else copyOrDelete$1(t,r,i,n);return t}function deepExtend$1(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)||!0===r)if("object"===_typeof_1$1(t[i])&&null!==t[i]&&getPrototypeOf$2$1(t[i])===Object.prototype)void 0===e[i]?e[i]=deepExtend$1({},t[i],r):"object"===_typeof_1$1(e[i])&&null!==e[i]&&getPrototypeOf$2$1(e[i])===Object.prototype?deepExtend$1(e[i],t[i],r):copyOrDelete$1(e,t,i,n);else if(isArray$5$1(t[i])){var o;e[i]=slice$5$1(o=t[i]).call(o)}else copyOrDelete$1(e,t,i,n);return e}function copyAndExtendArray(e,t){var r;return concat$2$1(r=[]).call(r,toConsumableArray$1(e),[t])}function copyArray$2(e){return slice$5$1(e).call(e)}function getAbsoluteLeft(e){return e.getBoundingClientRect().left}function getAbsoluteTop(e){return e.getBoundingClientRect().top}function forEach$3$1(e,t){if(isArray$5$1(e))for(var r=e.length,n=0;n<r;n++)t(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(e[i],i,e)}function addEventListener(e,t,r,n){var i;e.addEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&indexOf$3(i=navigator.userAgent).call(i,"Firefox")>=0&&(t="DOMMouseScroll"),e.addEventListener(t,r,n)):e.attachEvent("on"+t,r)}function removeEventListener(e,t,r,n){var i;e.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&indexOf$3(i=navigator.userAgent).call(i,"Firefox")>=0&&(t="DOMMouseScroll"),e.removeEventListener(t,r,n)):e.detachEvent("on"+t,r)}function hexToRGB(e){var t;switch(e.length){case 3:case 4:return(t=shortHexRE.exec(e))?{r:_parseInt$2(t[1]+t[1],16),g:_parseInt$2(t[2]+t[2],16),b:_parseInt$2(t[3]+t[3],16)}:null;case 6:case 7:return(t=fullHexRE.exec(e))?{r:_parseInt$2(t[1],16),g:_parseInt$2(t[2],16),b:_parseInt$2(t[3],16)}:null;default:return null}}function overrideOpacity(e,t){if(-1!==indexOf$3(e).call(e,"rgba"))return e;if(-1!==indexOf$3(e).call(e,"rgb")){var r=e.substr(indexOf$3(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+t+")"}var n=hexToRGB(e);return null==n?e:"rgba("+n.r+","+n.g+","+n.b+","+t+")"}function RGBToHex(e,t,r){var n;return"#"+slice$5$1(n=((1<<24)+(e<<16)+(t<<8)+r).toString(16)).call(n,1)}function parseColor(e,t){if(isString$2(e)){var r=e;if(isValidRGB(r)){var n,i=map$2$1(n=r.substr(4).substr(0,r.length-5).split(",")).call(n,(function(e){return _parseInt$2(e)}));r=RGBToHex(i[0],i[1],i[2])}if(!0===isValidHex(r)){var o=hexToHSV(r),a={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},s={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},l=HSVToHex(s.h,s.s,s.v),u=HSVToHex(a.h,a.s,a.v);return{background:r,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}return{background:r,border:r,highlight:{background:r,border:r},hover:{background:r,border:r}}}return t?{background:e.background||t.background,border:e.border||t.border,highlight:isString$2(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||t.highlight.background,border:e.highlight&&e.highlight.border||t.highlight.border},hover:isString$2(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||t.hover.border,background:e.hover&&e.hover.background||t.hover.background}}:{background:e.background||void 0,border:e.border||void 0,highlight:isString$2(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:isString$2(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}}}function RGBToHSV(e,t,r){e/=255,t/=255,r/=255;var n=Math.min(e,Math.min(t,r)),i=Math.max(e,Math.max(t,r));return n===i?{h:0,s:0,v:n}:{h:60*((e===n?3:r===n?1:5)-(e===n?t-r:r===n?e-t:r-e)/(i-n))/360,s:(i-n)/i,v:i}}function HSVToRGB(e,t,r){var n,i,o,a=Math.floor(6*e),s=6*e-a,l=r*(1-t),u=r*(1-s*t),c=r*(1-(1-s)*t);switch(a%6){case 0:n=r,i=c,o=l;break;case 1:n=u,i=r,o=l;break;case 2:n=l,i=r,o=c;break;case 3:n=l,i=u,o=r;break;case 4:n=c,i=l,o=r;break;case 5:n=r,i=l,o=u}return{r:Math.floor(255*n),g:Math.floor(255*i),b:Math.floor(255*o)}}function HSVToHex(e,t,r){var n=HSVToRGB(e,t,r);return RGBToHex(n.r,n.g,n.b)}function hexToHSV(e){var t=hexToRGB(e);if(!t)throw new TypeError("'".concat(e,"' is not a valid color."));return RGBToHSV(t.r,t.g,t.b)}function isValidHex(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}function isValidRGB(e){return rgbRE.test(e)}function isValidRGBA(e){return rgbaRE.test(e)}function bridgeObject(e){if(null===e||"object"!==_typeof_1$1(e))return null;if(e instanceof Element)return e;var t=create$2$1(e);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"object"==_typeof_1$1(e[r])&&(t[r]=bridgeObject(e[r]));return t}function mergeOptions(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=function(e){return null!=e},o=function(e){return null!==e&&"object"===_typeof_1$1(e)},a=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0};if(!o(e))throw new Error("Parameter mergeTarget must be an object");if(!o(t))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!o(n))throw new Error("Parameter globalOptions must be an object");var s=function(e,t,r){o(e[r])||(e[r]={});var n=t[r],i=e[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},l=t[r],u=o(n)&&!a(n),c=u?n[r]:void 0,h=c?c.enabled:void 0;if(void 0!==l){if("boolean"==typeof l)return o(e[r])||(e[r]={}),void(e[r].enabled=l);if(null===l&&!o(e[r])){if(!i(c))return;e[r]=create$2$1(c)}if(o(l)){var d=!0;void 0!==l.enabled?d=l.enabled:void 0!==h&&(d=c.enabled),s(e,t,r),e[r].enabled=d}}}var easingFunctions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};function topMost(e,t){var r;isArray$5$1(t)||(t=[t]);var n,i=_createForOfIteratorHelper$2(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o){r=o[t[0]];for(var a=1;a<t.length;a++)r&&(r=r[t[a]]);if(void 0!==r)break}}}catch(e){i.e(e)}finally{i.f()}return r}var HAS_SPECIES_SUPPORT$3$1=arrayMethodHasSpeciesSupport$1("splice"),USES_TO_LENGTH$5$1=arrayMethodUsesToLength$1("splice",{ACCESSORS:!0,0:0,1:2}),max$2$2=Math.max,min$2$2=Math.min,MAX_SAFE_INTEGER$1$2=9007199254740991,MAXIMUM_ALLOWED_LENGTH_EXCEEDED$1="Maximum allowed length exceeded";_export$1({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$3$1||!USES_TO_LENGTH$5$1},{splice:function(e,t){var r,n,i,o,a,s,l=toObject$1(this),u=toLength$1(l.length),c=toAbsoluteIndex$1(e,u),h=arguments.length;if(0===h?r=n=0:1===h?(r=0,n=u-c):(r=h-2,n=min$2$2(max$2$2(toInteger$2(t),0),u-c)),u+r-n>MAX_SAFE_INTEGER$1$2)throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED$1);for(i=arraySpeciesCreate$1(l,n),o=0;o<n;o++)(a=c+o)in l&&createProperty$1(i,o,l[a]);if(i.length=n,r<n){for(o=c;o<u-n;o++)s=o+r,(a=o+n)in l?l[s]=l[a]:delete l[s];for(o=u;o>u-n+r;o--)delete l[o-1]}else if(r>n)for(o=u-n;o>c;o--)s=o+r-1,(a=o+n-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<r;o++)l[o+c]=arguments[o+2];return l.length=u-n+r,i}});var splice$3=entryVirtual$1("Array").splice,ArrayPrototype$7$1=Array.prototype,splice_1$1=function(e){var t=e.splice;return e===ArrayPrototype$7$1||e instanceof Array&&t===ArrayPrototype$7$1.splice?splice$3:t},splice$1$2=splice_1$1,splice$2$1=splice$1$2,$includes=arrayIncludes$2.includes,USES_TO_LENGTH$6$1=arrayMethodUsesToLength$1("indexOf",{ACCESSORS:!0,1:0});_export$1({target:"Array",proto:!0,forced:!USES_TO_LENGTH$6$1},{includes:function(e){return $includes(this,e,arguments.length>1?arguments[1]:void 0)}});var includes=entryVirtual$1("Array").includes,MATCH=wellKnownSymbol$1("match"),isRegexp=function(e){var t;return isObject$3(e)&&(void 0!==(t=e[MATCH])?!!t:"RegExp"==classofRaw$1(e))},notARegexp=function(e){if(isRegexp(e))throw TypeError("The method doesn't accept regular expressions");return e},MATCH$1=wellKnownSymbol$1("match"),correctIsRegexpLogic=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[MATCH$1]=!1,"/./"[e](t)}catch(e){}}return!1};_export$1({target:"String",proto:!0,forced:!correctIsRegexpLogic("includes")},{includes:function(e){return!!~String(requireObjectCoercible$1(this)).indexOf(notARegexp(e),arguments.length>1?arguments[1]:void 0)}});var includes$1=entryVirtual$1("String").includes,ArrayPrototype$8$1=Array.prototype,StringPrototype=String.prototype,includes$2=function(e){var t=e.includes;return e===ArrayPrototype$8$1||e instanceof Array&&t===ArrayPrototype$8$1.includes?includes:"string"==typeof e||e===StringPrototype||e instanceof String&&t===StringPrototype.includes?includes$1:t},includes$3=includes$2,includes$4=includes$3;function parseDOT(e){return dot=e,parseGraph()}var NODE_ATTR_MAPPING={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},EDGE_ATTR_MAPPING=create$2$1(NODE_ATTR_MAPPING);EDGE_ATTR_MAPPING.color="color.color",EDGE_ATTR_MAPPING.style="dashes";var TOKENTYPE={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},DELIMITERS={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},dot="",index=0,c="",token="",tokenType=TOKENTYPE.NULL;function first(){index=0,c=dot.charAt(0)}function next$1(){index++,c=dot.charAt(index)}function nextPreview(){return dot.charAt(index+1)}var regexAlphaNumeric=/[a-zA-Z_0-9.:#]/;function isAlphaNumeric(e){return regexAlphaNumeric.test(e)}function merge$1(e,t){if(e||(e={}),t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function setValue(e,t,r){for(var n=t.split("."),i=e;n.length;){var o=n.shift();n.length?(i[o]||(i[o]={}),i=i[o]):i[o]=r}}function addNode(e,t){for(var r,n,i=null,o=[e],a=e;a.parent;)o.push(a.parent),a=a.parent;if(a.nodes)for(r=0,n=a.nodes.length;r<n;r++)if(t.id===a.nodes[r].id){i=a.nodes[r];break}for(i||(i={id:t.id},e.node&&(i.attr=merge$1(i.attr,e.node))),r=o.length-1;r>=0;r--){var s,l=o[r];l.nodes||(l.nodes=[]),-1===indexOf$3(s=l.nodes).call(s,i)&&l.nodes.push(i)}t.attr&&(i.attr=merge$1(i.attr,t.attr))}function addEdge(e,t){if(e.edges||(e.edges=[]),e.edges.push(t),e.edge){var r=merge$1({},e.edge);t.attr=merge$1(r,t.attr)}}function createEdge(e,t,r,n,i){var o={from:t,to:r,type:n};return e.edge&&(o.attr=merge$1({},e.edge)),o.attr=merge$1(o.attr||{},i),null!=i&&i.hasOwnProperty("arrows")&&null!=i.arrows&&(o.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),o}function getToken(){for(tokenType=TOKENTYPE.NULL,token="";" "===c||"\t"===c||"\n"===c||"\r"===c;)next$1();do{var e=!1;if("#"===c){for(var t=index-1;" "===dot.charAt(t)||"\t"===dot.charAt(t);)t--;if("\n"===dot.charAt(t)||""===dot.charAt(t)){for(;""!=c&&"\n"!=c;)next$1();e=!0}}if("/"===c&&"/"===nextPreview()){for(;""!=c&&"\n"!=c;)next$1();e=!0}if("/"===c&&"*"===nextPreview()){for(;""!=c;){if("*"===c&&"/"===nextPreview()){next$1(),next$1();break}next$1()}e=!0}for(;" "===c||"\t"===c||"\n"===c||"\r"===c;)next$1()}while(e);if(""!==c){var r=c+nextPreview();if(DELIMITERS[r])return tokenType=TOKENTYPE.DELIMITER,token=r,next$1(),void next$1();if(DELIMITERS[c])return tokenType=TOKENTYPE.DELIMITER,token=c,void next$1();if(isAlphaNumeric(c)||"-"===c){for(token+=c,next$1();isAlphaNumeric(c);)token+=c,next$1();return"false"===token?token=!1:"true"===token?token=!0:isNaN(Number(token))||(token=Number(token)),void(tokenType=TOKENTYPE.IDENTIFIER)}if('"'===c){for(next$1();""!=c&&('"'!=c||'"'===c&&'"'===nextPreview());)'"'===c?(token+=c,next$1()):"\\"===c&&"n"===nextPreview()?(token+="\n",next$1()):token+=c,next$1();if('"'!=c)throw newSyntaxError('End of string " expected');return next$1(),void(tokenType=TOKENTYPE.IDENTIFIER)}for(tokenType=TOKENTYPE.UNKNOWN;""!=c;)token+=c,next$1();throw new SyntaxError('Syntax error in part "'+chop(token,30)+'"')}tokenType=TOKENTYPE.DELIMITER}function parseGraph(){var e={};if(first(),getToken(),"strict"===token&&(e.strict=!0,getToken()),"graph"!==token&&"digraph"!==token||(e.type=token,getToken()),tokenType===TOKENTYPE.IDENTIFIER&&(e.id=token,getToken()),"{"!=token)throw newSyntaxError("Angle bracket { expected");if(getToken(),parseStatements(e),"}"!=token)throw newSyntaxError("Angle bracket } expected");if(getToken(),""!==token)throw newSyntaxError("End of file expected");return getToken(),delete e.node,delete e.edge,delete e.graph,e}function parseStatements(e){for(;""!==token&&"}"!=token;)parseStatement(e),";"===token&&getToken()}function parseStatement(e){var t=parseSubgraph(e);if(t)parseEdge(e,t);else if(!parseAttributeStatement(e)){if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier expected");var r=token;if(getToken(),"="===token){if(getToken(),tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier expected");e[r]=token,getToken()}else parseNodeStatement(e,r)}}function parseSubgraph(e){var t=null;if("subgraph"===token&&((t={}).type="subgraph",getToken(),tokenType===TOKENTYPE.IDENTIFIER&&(t.id=token,getToken())),"{"===token){if(getToken(),t||(t={}),t.parent=e,t.node=e.node,t.edge=e.edge,t.graph=e.graph,parseStatements(t),"}"!=token)throw newSyntaxError("Angle bracket } expected");getToken(),delete t.node,delete t.edge,delete t.graph,delete t.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(t)}return t}function parseAttributeStatement(e){return"node"===token?(getToken(),e.node=parseAttributeList(),"node"):"edge"===token?(getToken(),e.edge=parseAttributeList(),"edge"):"graph"===token?(getToken(),e.graph=parseAttributeList(),"graph"):null}function parseNodeStatement(e,t){var r={id:t},n=parseAttributeList();n&&(r.attr=n),addNode(e,r),parseEdge(e,t)}function parseEdge(e,t){for(;"->"===token||"--"===token;){var r,n=token;getToken();var i=parseSubgraph(e);if(i)r=i;else{if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier or subgraph expected");addNode(e,{id:r=token}),getToken()}addEdge(e,createEdge(e,t,r,n,parseAttributeList())),t=r}}function parseAttributeList(){for(var e,t,r=null,n={dashed:!0,solid:!1,dotted:[1,5]},i={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},o=new Array,a=new Array;"["===token;){for(getToken(),r={};""!==token&&"]"!=token;){if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Attribute name expected");var s=token;if(getToken(),"="!=token)throw newSyntaxError("Equal sign = expected");if(getToken(),tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Attribute value expected");var l=token;"style"===s&&(l=n[l]),"arrowhead"===s&&(s="arrows",l={to:{enabled:!0,type:i[l]}}),"arrowtail"===s&&(s="arrows",l={from:{enabled:!0,type:i[l]}}),o.push({attr:r,name:s,value:l}),a.push(s),getToken(),","==token&&getToken()}if("]"!=token)throw newSyntaxError("Bracket ] expected");getToken()}if(includes$4(a).call(a,"dir")){var u={arrows:{}};for(e=0;e<o.length;e++)if("arrows"===o[e].name)if(null!=o[e].value.to)u.arrows.to=e;else{if(null==o[e].value.from)throw newSyntaxError("Invalid value of arrows");u.arrows.from=e}else"dir"===o[e].name&&(u.dir=e);var c,h,d=o[u.dir].value;if(!includes$4(a).call(a,"arrows"))if("both"===d)o.push({attr:o[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=o.length-1,o.push({attr:o[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=o.length-1;else if("forward"===d)o.push({attr:o[u.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),u.arrows.to=o.length-1;else if("back"===d)o.push({attr:o[u.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),u.arrows.from=o.length-1;else{if("none"!==d)throw newSyntaxError('Invalid dir type "'+d+'"');o.push({attr:o[u.dir].attr,name:"arrows",value:""}),u.arrows.to=o.length-1}if("both"===d)u.arrows.to&&u.arrows.from?(h=o[u.arrows.to].value.to.type,c=o[u.arrows.from].value.from.type,o[u.arrows.to]={attr:o[u.arrows.to].attr,name:o[u.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:c}}},splice$2$1(o).call(o,u.arrows.from,1)):u.arrows.to?(h=o[u.arrows.to].value.to.type,c="arrow",o[u.arrows.to]={attr:o[u.arrows.to].attr,name:o[u.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:c}}}):u.arrows.from&&(h="arrow",c=o[u.arrows.from].value.from.type,o[u.arrows.from]={attr:o[u.arrows.from].attr,name:o[u.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:c}}});else if("back"===d)u.arrows.to&&u.arrows.from?(h="",c=o[u.arrows.from].value.from.type,o[u.arrows.from]={attr:o[u.arrows.from].attr,name:o[u.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:c}}}):u.arrows.to?(h="",c="arrow",u.arrows.from=u.arrows.to,o[u.arrows.from]={attr:o[u.arrows.from].attr,name:o[u.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:c}}}):u.arrows.from&&(h="",c=o[u.arrows.from].value.from.type,o[u.arrows.to]={attr:o[u.arrows.from].attr,name:o[u.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:c}}}),o[u.arrows.from]={attr:o[u.arrows.from].attr,name:o[u.arrows.from].name,value:{from:{enabled:!0,type:o[u.arrows.from].value.from.type}}};else if("none"===d){var f;o[f=u.arrows.to?u.arrows.to:u.arrows.from]={attr:o[f].attr,name:o[f].name,value:""}}else{if("forward"!==d)throw newSyntaxError('Invalid dir type "'+d+'"');u.arrows.to&&u.arrows.from||u.arrows.to?(h=o[u.arrows.to].value.to.type,c="",o[u.arrows.to]={attr:o[u.arrows.to].attr,name:o[u.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:c}}}):u.arrows.from&&(h="arrow",c="",u.arrows.to=u.arrows.from,o[u.arrows.to]={attr:o[u.arrows.to].attr,name:o[u.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:c}}}),o[u.arrows.to]={attr:o[u.arrows.to].attr,name:o[u.arrows.to].name,value:{to:{enabled:!0,type:o[u.arrows.to].value.to.type}}}}splice$2$1(o).call(o,u.dir,1)}if(includes$4(a).call(a,"penwidth")){var p=[];for(t=o.length,e=0;e<t;e++)"width"!==o[e].name&&("penwidth"===o[e].name&&(o[e].name="width"),p.push(o[e]));o=p}for(t=o.length,e=0;e<t;e++)setValue(o[e].attr,o[e].name,o[e].value);return r}function newSyntaxError(e){return new SyntaxError(e+', got "'+chop(token,30)+'" (char '+index+")")}function chop(e,t){return e.length<=t?e:e.substr(0,27)+"..."}function forEach2(e,t,r){isArray$5$1(e)?forEach$2$1(e).call(e,(function(e){isArray$5$1(t)?forEach$2$1(t).call(t,(function(t){r(e,t)})):r(e,t)})):isArray$5$1(t)?forEach$2$1(t).call(t,(function(t){r(e,t)})):r(e,t)}function setProp(e,t,r){for(var n=t.split("."),i=n.pop(),o=e,a=0;a<n.length;a++){var s=n[a];s in o||(o[s]={}),o=o[s]}return o[i]=r,e}function convertAttr(e,t){var r={};for(var n in e)if(e.hasOwnProperty(n)){var i=t[n];isArray$5$1(i)?forEach$2$1(i).call(i,(function(t){setProp(r,t,e[n])})):setProp(r,"string"==typeof i?i:n,e[n])}return r}function DOTToGraph(e){var t,r=parseDOT(e),n={nodes:[],edges:[],options:{}};r.nodes&&forEach$2$1(t=r.nodes).call(t,(function(e){var t={id:e.id,label:String(e.label||e.id)};merge$1(t,convertAttr(e.attr,NODE_ATTR_MAPPING)),t.image&&(t.shape="image"),n.nodes.push(t)}));if(r.edges){var i,o=function(e){var t={from:e.from,to:e.to};return merge$1(t,convertAttr(e.attr,EDGE_ATTR_MAPPING)),null==t.arrows&&"->"===e.type&&(t.arrows="to"),t};forEach$2$1(i=r.edges).call(i,(function(e){var t,r,i,a;(t=e.from instanceof Object?e.from.nodes:{id:e.from},r=e.to instanceof Object?e.to.nodes:{id:e.to},e.from instanceof Object&&e.from.edges)&&forEach$2$1(i=e.from.edges).call(i,(function(e){var t=o(e);n.edges.push(t)}));(forEach2(t,r,(function(t,r){var i=createEdge(n,t.id,r.id,e.type,e.attr),a=o(i);n.edges.push(a)})),e.to instanceof Object&&e.to.edges)&&forEach$2$1(a=e.to.edges).call(a,(function(e){var t=o(e);n.edges.push(t)}))}))}return r.attr&&(n.options=r.attr),n}var parseDOT_1=parseDOT,DOTToGraph_1=DOTToGraph,dotparser={parseDOT:parseDOT_1,DOTToGraph:DOTToGraph_1};function parseGephi(e,t){var r,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=t&&(null!=t.fixed&&(n.nodes.fixed=t.fixed),null!=t.parseColor&&(n.nodes.parseColor=t.parseColor),null!=t.inheritColor&&(n.edges.inheritColor=t.inheritColor));var i=e.edges,o=map$2$1(i).call(i,(function(e){var t={from:e.source,id:e.id,to:e.target};return null!=e.attributes&&(t.attributes=e.attributes),null!=e.label&&(t.label=e.label),null!=e.attributes&&null!=e.attributes.title&&(t.title=e.attributes.title),"Directed"===e.type&&(t.arrows="to"),e.color&&!1===n.edges.inheritColor&&(t.color=e.color),t}));return{nodes:map$2$1(r=e.nodes).call(r,(function(e){var t={id:e.id,fixed:n.nodes.fixed&&null!=e.x&&null!=e.y};return null!=e.attributes&&(t.attributes=e.attributes),null!=e.label&&(t.label=e.label),null!=e.size&&(t.size=e.size),null!=e.attributes&&null!=e.attributes.title&&(t.title=e.attributes.title),null!=e.title&&(t.title=e.title),null!=e.x&&(t.x=e.x),null!=e.y&&(t.y=e.y),null!=e.color&&(!0===n.nodes.parseColor?t.color=e.color:t.color={background:e.color,border:e.color,highlight:{background:e.color,border:e.color},hover:{background:e.color,border:e.color}}),t})),edges:o}}var Activator=Object.freeze({__proto__:null,default:void 0}),keycharm=createCommonjsModule$2((function(e,t){e.exports=function(e){var t,r=e&&e.preventDefault||!1,n=e&&e.container||window,i={},o={keydown:{},keyup:{}},a={};for(t=97;t<=122;t++)a[String.fromCharCode(t)]={code:t-97+65,shift:!1};for(t=65;t<=90;t++)a[String.fromCharCode(t)]={code:t,shift:!0};for(t=0;t<=9;t++)a[""+t]={code:48+t,shift:!1};for(t=1;t<=12;t++)a["F"+t]={code:111+t,shift:!1};for(t=0;t<=9;t++)a["num"+t]={code:96+t,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(e){u(e,"keydown")},l=function(e){u(e,"keyup")},u=function(e,t){if(void 0!==o[t][e.keyCode]){for(var n=o[t][e.keyCode],i=0;i<n.length;i++)(void 0===n[i].shift||1==n[i].shift&&1==e.shiftKey||0==n[i].shift&&0==e.shiftKey)&&n[i].fn(e);1==r&&e.preventDefault()}};return i.bind=function(e,t,r){if(void 0===r&&(r="keydown"),void 0===a[e])throw new Error("unsupported key: "+e);void 0===o[r][a[e].code]&&(o[r][a[e].code]=[]),o[r][a[e].code].push({fn:t,shift:a[e].shift})},i.bindAll=function(e,t){for(var r in void 0===t&&(t="keydown"),a)a.hasOwnProperty(r)&&i.bind(r,e,t)},i.getKey=function(e){for(var t in a)if(a.hasOwnProperty(t)){if(1==e.shiftKey&&1==a[t].shift&&e.keyCode==a[t].code)return t;if(0==e.shiftKey&&0==a[t].shift&&e.keyCode==a[t].code)return t;if(e.keyCode==a[t].code&&"shift"==t)return t}return"unknown key, currently not supported"},i.unbind=function(e,t,r){if(void 0===r&&(r="keydown"),void 0===a[e])throw new Error("unsupported key: "+e);if(void 0!==t){var n=[],i=o[r][a[e].code];if(void 0!==i)for(var s=0;s<i.length;s++)i[s].fn==t&&i[s].shift==a[e].shift||n.push(o[r][a[e].code][s]);o[r][a[e].code]=n}else o[r][a[e].code]=[]},i.reset=function(){o={keydown:{},keyup:{}}},i.destroy=function(){o={keydown:{},keyup:{}},n.removeEventListener("keydown",s,!0),n.removeEventListener("keyup",l,!0)},n.addEventListener("keydown",s,!0),n.addEventListener("keyup",l,!0),i}})),assign$3$1;
/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */
function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}assign$3$1="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}:Object.assign;var assign$1$1$1=assign$3$1,VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"],TEST_ELEMENT="undefined"==typeof document?{style:{}}:document.createElement("div"),TYPE_FUNCTION="function",round=Math.round,abs=Math.abs,now$3$1=Date.now,win;function prefixed(e,t){for(var r,n,i=t[0].toUpperCase()+t.slice(1),o=0;o<VENDOR_PREFIXES.length;){if((n=(r=VENDOR_PREFIXES[o])?r+i:t)in e)return n;o++}}win="undefined"==typeof window?{}:window;var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=void 0!==PREFIXED_TOUCH_ACTION;function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION)return!1;var e={},t=win.CSS&&win.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){return e[r]=!t||win.CSS.supports("touch-action",r)})),e}var TOUCH_ACTION_COMPUTE="compute",TOUCH_ACTION_AUTO="auto",TOUCH_ACTION_MANIPULATION="manipulation",TOUCH_ACTION_NONE="none",TOUCH_ACTION_PAN_X="pan-x",TOUCH_ACTION_PAN_Y="pan-y",TOUCH_ACTION_MAP=getTouchActionProps(),MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,SUPPORT_TOUCH="ontouchstart"in win,SUPPORT_POINTER_EVENTS=void 0!==prefixed(win,"PointerEvent"),SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent),INPUT_TYPE_TOUCH="touch",INPUT_TYPE_PEN="pen",INPUT_TYPE_MOUSE="mouse",INPUT_TYPE_KINECT="kinect",COMPUTE_INTERVAL=25,INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,INPUT_CANCEL=8,DIRECTION_NONE=1,DIRECTION_LEFT=2,DIRECTION_RIGHT=4,DIRECTION_UP=8,DIRECTION_DOWN=16,DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT,DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN,DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];function each$1(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(void 0!==e.length)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function boolOrFn(e,t){return typeof e===TYPE_FUNCTION?e.apply(t&&t[0]||void 0,t):e}function inStr(e,t){return e.indexOf(t)>-1}function cleanTouchActions(e){if(inStr(e,TOUCH_ACTION_NONE))return TOUCH_ACTION_NONE;var t=inStr(e,TOUCH_ACTION_PAN_X),r=inStr(e,TOUCH_ACTION_PAN_Y);return t&&r?TOUCH_ACTION_NONE:t||r?t?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y:inStr(e,TOUCH_ACTION_MANIPULATION)?TOUCH_ACTION_MANIPULATION:TOUCH_ACTION_AUTO}var TouchAction=function(){function e(e,t){this.manager=e,this.set(t)}var t=e.prototype;return t.set=function(e){e===TOUCH_ACTION_COMPUTE&&(e=this.compute()),NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[e]&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=e),this.actions=e.toLowerCase().trim()},t.update=function(){this.set(this.manager.options.touchAction)},t.compute=function(){var e=[];return each$1(this.manager.recognizers,(function(t){boolOrFn(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),cleanTouchActions(e.join(" "))},t.preventDefaults=function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,i=inStr(n,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE],o=inStr(n,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y],a=inStr(n,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(i){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}if(!a||!o)return i||o&&r&DIRECTION_HORIZONTAL||a&&r&DIRECTION_VERTICAL?this.preventSrc(t):void 0}},t.preventSrc=function(e){this.manager.session.prevented=!0,e.preventDefault()},e}();function hasParent(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function getCenter(e){var t=e.length;if(1===t)return{x:round(e[0].clientX),y:round(e[0].clientY)};for(var r=0,n=0,i=0;i<t;)r+=e[i].clientX,n+=e[i].clientY,i++;return{x:round(r/t),y:round(n/t)}}function simpleCloneInputData(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:round(e.pointers[r].clientX),clientY:round(e.pointers[r].clientY)},r++;return{timeStamp:now$3$1(),pointers:t,center:getCenter(t),deltaX:e.deltaX,deltaY:e.deltaY}}function getDistance$1(e,t,r){r||(r=PROPS_XY);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return Math.sqrt(n*n+i*i)}function getAngle(e,t,r){r||(r=PROPS_XY);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return 180*Math.atan2(i,n)/Math.PI}function getDirection(e,t){return e===t?DIRECTION_NONE:abs(e)>=abs(t)?e<0?DIRECTION_LEFT:DIRECTION_RIGHT:t<0?DIRECTION_UP:DIRECTION_DOWN}function computeDeltaXY(e,t){var r=t.center,n=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};t.eventType!==INPUT_START&&o.eventType!==INPUT_END||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y}),t.deltaX=i.x+(r.x-n.x),t.deltaY=i.y+(r.y-n.y)}function getVelocity(e,t,r){return{x:t/e||0,y:r/e||0}}function getScale(e,t){return getDistance$1(t[0],t[1],PROPS_CLIENT_XY)/getDistance$1(e[0],e[1],PROPS_CLIENT_XY)}function getRotation(e,t){return getAngle(t[1],t[0],PROPS_CLIENT_XY)+getAngle(e[1],e[0],PROPS_CLIENT_XY)}function computeIntervalInputData(e,t){var r,n,i,o,a=e.lastInterval||t,s=t.timeStamp-a.timeStamp;if(t.eventType!==INPUT_CANCEL&&(s>COMPUTE_INTERVAL||void 0===a.velocity)){var l=t.deltaX-a.deltaX,u=t.deltaY-a.deltaY,c=getVelocity(s,l,u);n=c.x,i=c.y,r=abs(c.x)>abs(c.y)?c.x:c.y,o=getDirection(l,u),e.lastInterval=t}else r=a.velocity,n=a.velocityX,i=a.velocityY,o=a.direction;t.velocity=r,t.velocityX=n,t.velocityY=i,t.direction=o}function computeInputData(e,t){var r=e.session,n=t.pointers,i=n.length;r.firstInput||(r.firstInput=simpleCloneInputData(t)),i>1&&!r.firstMultiple?r.firstMultiple=simpleCloneInputData(t):1===i&&(r.firstMultiple=!1);var o=r.firstInput,a=r.firstMultiple,s=a?a.center:o.center,l=t.center=getCenter(n);t.timeStamp=now$3$1(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=getAngle(s,l),t.distance=getDistance$1(s,l),computeDeltaXY(r,t),t.offsetDirection=getDirection(t.deltaX,t.deltaY);var u=getVelocity(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=abs(u.x)>abs(u.y)?u.x:u.y,t.scale=a?getScale(a.pointers,n):1,t.rotation=a?getRotation(a.pointers,n):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,computeIntervalInputData(r,t);var c,h=e.element,d=t.srcEvent;hasParent(c=d.composedPath?d.composedPath()[0]:d.path?d.path[0]:d.target,h)&&(h=c),t.target=h}function inputHandler(e,t,r){var n=r.pointers.length,i=r.changedPointers.length,o=t&INPUT_START&&n-i==0,a=t&(INPUT_END|INPUT_CANCEL)&&n-i==0;r.isFirst=!!o,r.isFinal=!!a,o&&(e.session={}),r.eventType=t,computeInputData(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function splitStr(e){return e.trim().split(/\s+/g)}function addEventListeners(e,t,r){each$1(splitStr(t),(function(t){e.addEventListener(t,r,!1)}))}function removeEventListeners(e,t,r){each$1(splitStr(t),(function(t){e.removeEventListener(t,r,!1)}))}function getWindowForElement(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||window}var Input=function(){function e(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){boolOrFn(e.options.enable,[e])&&r.handler(t)},this.init()}var t=e.prototype;return t.handler=function(){},t.init=function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},t.destroy=function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},e}();function inArray(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL},IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";win.MSPointerEvent&&!win.PointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel");var PointerEventInput=function(e){function t(){var r,n=t.prototype;return n.evEl=POINTER_ELEMENT_EVENTS,n.evWin=POINTER_WINDOW_EVENTS,(r=e.apply(this,arguments)||this).store=r.manager.session.pointerEvents=[],r}return _inheritsLoose(t,e),t.prototype.handler=function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),i=POINTER_INPUT_MAP[n],o=IE10_POINTER_TYPE_ENUM[e.pointerType]||e.pointerType,a=o===INPUT_TYPE_TOUCH,s=inArray(t,e.pointerId,"pointerId");i&INPUT_START&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):i&(INPUT_END|INPUT_CANCEL)&&(r=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),r&&t.splice(s,1))},t}(Input);function toArray(e){return Array.prototype.slice.call(e,0)}function uniqueArray(e,t,r){for(var n=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];inArray(i,a)<0&&n.push(e[o]),i[o]=a,o++}return r&&(n=t?n.sort((function(e,r){return e[t]>r[t]})):n.sort()),n}var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel",TouchInput=function(e){function t(){var r;return t.prototype.evTarget=TOUCH_TARGET_EVENTS,(r=e.apply(this,arguments)||this).targetIds={},r}return _inheritsLoose(t,e),t.prototype.handler=function(e){var t=TOUCH_INPUT_MAP[e.type],r=getTouches.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:e})},t}(Input);function getTouches(e,t){var r,n,i=toArray(e.touches),o=this.targetIds;if(t&(INPUT_START|INPUT_MOVE)&&1===i.length)return o[i[0].identifier]=!0,[i,i];var a=toArray(e.changedTouches),s=[],l=this.target;if(n=i.filter((function(e){return hasParent(e.target,l)})),t===INPUT_START)for(r=0;r<n.length;)o[n[r].identifier]=!0,r++;for(r=0;r<a.length;)o[a[r].identifier]&&s.push(a[r]),t&(INPUT_END|INPUT_CANCEL)&&delete o[a[r].identifier],r++;return s.length?[uniqueArray(n.concat(s),"identifier",!0),s]:void 0}var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END},MOUSE_ELEMENT_EVENTS="mousedown",MOUSE_WINDOW_EVENTS="mousemove mouseup",MouseInput=function(e){function t(){var r,n=t.prototype;return n.evEl=MOUSE_ELEMENT_EVENTS,n.evWin=MOUSE_WINDOW_EVENTS,(r=e.apply(this,arguments)||this).pressed=!1,r}return _inheritsLoose(t,e),t.prototype.handler=function(e){var t=MOUSE_INPUT_MAP[e.type];t&INPUT_START&&0===e.button&&(this.pressed=!0),t&INPUT_MOVE&&1!==e.which&&(t=INPUT_END),this.pressed&&(t&INPUT_END&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:INPUT_TYPE_MOUSE,srcEvent:e}))},t}(Input),DEDUP_TIMEOUT=2500,DEDUP_DISTANCE=25;function setLastTouch(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(r);setTimeout((function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)}),DEDUP_TIMEOUT)}}function recordTouches(e,t){e&INPUT_START?(this.primaryTouch=t.changedPointers[0].identifier,setLastTouch.call(this,t)):e&(INPUT_END|INPUT_CANCEL)&&setLastTouch.call(this,t)}function isSyntheticEvent(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],o=Math.abs(t-i.x),a=Math.abs(r-i.y);if(o<=DEDUP_DISTANCE&&a<=DEDUP_DISTANCE)return!0}return!1}var TouchMouseInput=function(){return function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).handler=function(e,t,r){var i=r.pointerType===INPUT_TYPE_TOUCH,o=r.pointerType===INPUT_TYPE_MOUSE;if(!(o&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(i)recordTouches.call(_assertThisInitialized$1(_assertThisInitialized$1(n)),t,r);else if(o&&isSyntheticEvent.call(_assertThisInitialized$1(_assertThisInitialized$1(n)),r))return;n.callback(e,t,r)}},n.touch=new TouchInput(n.manager,n.handler),n.mouse=new MouseInput(n.manager,n.handler),n.primaryTouch=null,n.lastTouches=[],n}return _inheritsLoose(t,e),t.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Input)}();function createInputInstance(e){var t=e.options.inputClass;return new(t||(SUPPORT_POINTER_EVENTS?PointerEventInput:SUPPORT_ONLY_TOUCH?TouchInput:SUPPORT_TOUCH?TouchMouseInput:MouseInput))(e,inputHandler)}function invokeArrayArg(e,t,r){return!!Array.isArray(e)&&(each$1(e,r[t],r),!0)}var STATE_POSSIBLE=1,STATE_BEGAN=2,STATE_CHANGED=4,STATE_ENDED=8,STATE_RECOGNIZED=STATE_ENDED,STATE_CANCELLED=16,STATE_FAILED=32,_uniqueId=1;function uniqueId$1(){return _uniqueId++}function getRecognizerByNameIfManager(e,t){var r=t.manager;return r?r.get(e):e}function stateStr(e){return e&STATE_CANCELLED?"cancel":e&STATE_ENDED?"end":e&STATE_CHANGED?"move":e&STATE_BEGAN?"start":""}var Recognizer=function(){function e(e){void 0===e&&(e={}),this.options=_extends({enable:!0},e),this.id=uniqueId$1(),this.manager=null,this.state=STATE_POSSIBLE,this.simultaneous={},this.requireFail=[]}var t=e.prototype;return t.set=function(e){return assign$1$1$1(this.options,e),this.manager&&this.manager.touchAction.update(),this},t.recognizeWith=function(e){if(invokeArrayArg(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=getRecognizerByNameIfManager(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},t.dropRecognizeWith=function(e){return invokeArrayArg(e,"dropRecognizeWith",this)||(e=getRecognizerByNameIfManager(e,this),delete this.simultaneous[e.id]),this},t.requireFailure=function(e){if(invokeArrayArg(e,"requireFailure",this))return this;var t=this.requireFail;return-1===inArray(t,e=getRecognizerByNameIfManager(e,this))&&(t.push(e),e.requireFailure(this)),this},t.dropRequireFailure=function(e){if(invokeArrayArg(e,"dropRequireFailure",this))return this;e=getRecognizerByNameIfManager(e,this);var t=inArray(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},t.hasRequireFailures=function(){return this.requireFail.length>0},t.canRecognizeWith=function(e){return!!this.simultaneous[e.id]},t.emit=function(e){var t=this,r=this.state;function n(r){t.manager.emit(r,e)}r<STATE_ENDED&&n(t.options.event+stateStr(r)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),r>=STATE_ENDED&&n(t.options.event+stateStr(r))},t.tryEmit=function(e){if(this.canEmit())return this.emit(e);this.state=STATE_FAILED},t.canEmit=function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(STATE_FAILED|STATE_POSSIBLE)))return!1;e++}return!0},t.recognize=function(e){var t=assign$1$1$1({},e);if(!boolOrFn(this.options.enable,[this,t]))return this.reset(),void(this.state=STATE_FAILED);this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)&&(this.state=STATE_POSSIBLE),this.state=this.process(t),this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)&&this.tryEmit(t)},t.process=function(e){},t.getTouchAction=function(){},t.reset=function(){},e}(),TapRecognizer=function(e){function t(t){var r;return void 0===t&&(t={}),(r=e.call(this,_extends({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},t))||this).pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}_inheritsLoose(t,e);var r=t.prototype;return r.getTouchAction=function(){return[TOUCH_ACTION_MANIPULATION]},r.process=function(e){var t=this,r=this.options,n=e.pointers.length===r.pointers,i=e.distance<r.threshold,o=e.deltaTime<r.time;if(this.reset(),e.eventType&INPUT_START&&0===this.count)return this.failTimeout();if(i&&o&&n){if(e.eventType!==INPUT_END)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<r.interval,s=!this.pCenter||getDistance$1(this.pCenter,e.center)<r.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&a?this.count+=1:this.count=1,this._input=e,0===this.count%r.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){t.state=STATE_RECOGNIZED,t.tryEmit()}),r.interval),STATE_BEGAN):STATE_RECOGNIZED}return STATE_FAILED},r.failTimeout=function(){var e=this;return this._timer=setTimeout((function(){e.state=STATE_FAILED}),this.options.interval),STATE_FAILED},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){this.state===STATE_RECOGNIZED&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},t}(Recognizer),AttrRecognizer=function(e){function t(t){return void 0===t&&(t={}),e.call(this,_extends({pointers:1},t))||this}_inheritsLoose(t,e);var r=t.prototype;return r.attrTest=function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},r.process=function(e){var t=this.state,r=e.eventType,n=t&(STATE_BEGAN|STATE_CHANGED),i=this.attrTest(e);return n&&(r&INPUT_CANCEL||!i)?t|STATE_CANCELLED:n||i?r&INPUT_END?t|STATE_ENDED:t&STATE_BEGAN?t|STATE_CHANGED:STATE_BEGAN:STATE_FAILED},t}(Recognizer);function directionStr(e){return e===DIRECTION_DOWN?"down":e===DIRECTION_UP?"up":e===DIRECTION_LEFT?"left":e===DIRECTION_RIGHT?"right":""}var PanRecognizer=function(e){function t(t){var r;return void 0===t&&(t={}),(r=e.call(this,_extends({event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},t))||this).pX=null,r.pY=null,r}_inheritsLoose(t,e);var r=t.prototype;return r.getTouchAction=function(){var e=this.options.direction,t=[];return e&DIRECTION_HORIZONTAL&&t.push(TOUCH_ACTION_PAN_Y),e&DIRECTION_VERTICAL&&t.push(TOUCH_ACTION_PAN_X),t},r.directionTest=function(e){var t=this.options,r=!0,n=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&DIRECTION_HORIZONTAL?(i=0===o?DIRECTION_NONE:o<0?DIRECTION_LEFT:DIRECTION_RIGHT,r=o!==this.pX,n=Math.abs(e.deltaX)):(i=0===a?DIRECTION_NONE:a<0?DIRECTION_UP:DIRECTION_DOWN,r=a!==this.pY,n=Math.abs(e.deltaY))),e.direction=i,r&&n>t.threshold&&i&t.direction},r.attrTest=function(e){return AttrRecognizer.prototype.attrTest.call(this,e)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(e))},r.emit=function(t){this.pX=t.deltaX,this.pY=t.deltaY;var r=directionStr(t.direction);r&&(t.additionalEvent=this.options.event+r),e.prototype.emit.call(this,t)},t}(AttrRecognizer),SwipeRecognizer=function(e){function t(t){return void 0===t&&(t={}),e.call(this,_extends({event:"swipe",threshold:10,velocity:.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},t))||this}_inheritsLoose(t,e);var r=t.prototype;return r.getTouchAction=function(){return PanRecognizer.prototype.getTouchAction.call(this)},r.attrTest=function(t){var r,n=this.options.direction;return n&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)?r=t.overallVelocity:n&DIRECTION_HORIZONTAL?r=t.overallVelocityX:n&DIRECTION_VERTICAL&&(r=t.overallVelocityY),e.prototype.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers===this.options.pointers&&abs(r)>this.options.velocity&&t.eventType&INPUT_END},r.emit=function(e){var t=directionStr(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)},t}(AttrRecognizer),PinchRecognizer=function(e){function t(t){return void 0===t&&(t={}),e.call(this,_extends({event:"pinch",threshold:0,pointers:2},t))||this}_inheritsLoose(t,e);var r=t.prototype;return r.getTouchAction=function(){return[TOUCH_ACTION_NONE]},r.attrTest=function(t){return e.prototype.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},r.emit=function(t){if(1!==t.scale){var r=t.scale<1?"in":"out";t.additionalEvent=this.options.event+r}e.prototype.emit.call(this,t)},t}(AttrRecognizer),RotateRecognizer=function(e){function t(t){return void 0===t&&(t={}),e.call(this,_extends({event:"rotate",threshold:0,pointers:2},t))||this}_inheritsLoose(t,e);var r=t.prototype;return r.getTouchAction=function(){return[TOUCH_ACTION_NONE]},r.attrTest=function(t){return e.prototype.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&STATE_BEGAN)},t}(AttrRecognizer),PressRecognizer=function(e){function t(t){var r;return void 0===t&&(t={}),(r=e.call(this,_extends({event:"press",pointers:1,time:251,threshold:9},t))||this)._timer=null,r._input=null,r}_inheritsLoose(t,e);var r=t.prototype;return r.getTouchAction=function(){return[TOUCH_ACTION_AUTO]},r.process=function(e){var t=this,r=this.options,n=e.pointers.length===r.pointers,i=e.distance<r.threshold,o=e.deltaTime>r.time;if(this._input=e,!i||!n||e.eventType&(INPUT_END|INPUT_CANCEL)&&!o)this.reset();else if(e.eventType&INPUT_START)this.reset(),this._timer=setTimeout((function(){t.state=STATE_RECOGNIZED,t.tryEmit()}),r.time);else if(e.eventType&INPUT_END)return STATE_RECOGNIZED;return STATE_FAILED},r.reset=function(){clearTimeout(this._timer)},r.emit=function(e){this.state===STATE_RECOGNIZED&&(e&&e.eventType&INPUT_END?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=now$3$1(),this.manager.emit(this.options.event,this._input)))},t}(Recognizer),defaults$i={domEvents:!1,touchAction:TOUCH_ACTION_COMPUTE,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},preset=[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],STOP=1,FORCED_STOP=2;function toggleCssProps(e,t){var r,n=e.element;n.style&&(each$1(e.options.cssProps,(function(i,o){r=prefixed(n.style,o),t?(e.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=e.oldCssProps[r]||""})),t||(e.oldCssProps={}))}function triggerDomEvent(e,t){var r=document.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}var Manager=function(){function e(e,t){var r=this;this.options=assign$1$1$1({},defaults$i,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=createInputInstance(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each$1(this.options.recognizers,(function(e){var t=r.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}var t=e.prototype;return t.set=function(e){return assign$1$1$1(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},t.stop=function(e){this.session.stopped=e?FORCED_STOP:STOP},t.recognize=function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&STATE_RECOGNIZED)&&(t.curRecognizer=null,i=null);for(var o=0;o<n.length;)r=n[o],t.stopped===FORCED_STOP||i&&r!==i&&!r.canRecognizeWith(i)?r.reset():r.recognize(e),!i&&r.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)&&(t.curRecognizer=r,i=r),o++}},t.get=function(e){if(e instanceof Recognizer)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event===e)return t[r];return null},t.add=function(e){if(invokeArrayArg(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},t.remove=function(e){if(invokeArrayArg(e,"remove",this))return this;var t=this.get(e);if(e){var r=this.recognizers,n=inArray(r,t);-1!==n&&(r.splice(n,1),this.touchAction.update())}return this},t.on=function(e,t){if(void 0===e||void 0===t)return this;var r=this.handlers;return each$1(splitStr(e),(function(e){r[e]=r[e]||[],r[e].push(t)})),this},t.off=function(e,t){if(void 0===e)return this;var r=this.handlers;return each$1(splitStr(e),(function(e){t?r[e]&&r[e].splice(inArray(r[e],t),1):delete r[e]})),this},t.emit=function(e,t){this.options.domEvents&&triggerDomEvent(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](t),n++}},t.destroy=function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},SINGLE_TOUCH_TARGET_EVENTS="touchstart",SINGLE_TOUCH_WINDOW_EVENTS="touchstart touchmove touchend touchcancel",SingleTouchInput=function(e){function t(){var r,n=t.prototype;return n.evTarget=SINGLE_TOUCH_TARGET_EVENTS,n.evWin=SINGLE_TOUCH_WINDOW_EVENTS,(r=e.apply(this,arguments)||this).started=!1,r}return _inheritsLoose(t,e),t.prototype.handler=function(e){var t=SINGLE_TOUCH_INPUT_MAP[e.type];if(t===INPUT_START&&(this.started=!0),this.started){var r=normalizeSingleTouches.call(this,e,t);t&(INPUT_END|INPUT_CANCEL)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:e})}},t}(Input);function normalizeSingleTouches(e,t){var r=toArray(e.touches),n=toArray(e.changedTouches);return t&(INPUT_END|INPUT_CANCEL)&&(r=uniqueArray(r.concat(n),"identifier",!0)),[r,n]}function deprecate(e,t,r){var n="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace"),r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=window.console&&(window.console.warn||window.console.log);return i&&i.call(window.console,n,r),e.apply(this,arguments)}}var extend$1$1=deprecate((function(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;)(!r||r&&void 0===e[n[i]])&&(e[n[i]]=t[n[i]]),i++;return e}),"extend","Use `assign`."),merge$1$1=deprecate((function(e,t){return extend$1$1(e,t,!0)}),"merge","Use `assign`.");function inherit(e,t,r){var n,i=t.prototype;(n=e.prototype=Object.create(i)).constructor=e,n._super=i,r&&assign$1$1$1(n,r)}function bindFn(e,t){return function(){return e.apply(t,arguments)}}var Hammer=function(){var e=function(e,t){return void 0===t&&(t={}),new Manager(e,_extends({recognizers:preset.concat()},t))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=DIRECTION_ALL,e.DIRECTION_DOWN=DIRECTION_DOWN,e.DIRECTION_LEFT=DIRECTION_LEFT,e.DIRECTION_RIGHT=DIRECTION_RIGHT,e.DIRECTION_UP=DIRECTION_UP,e.DIRECTION_HORIZONTAL=DIRECTION_HORIZONTAL,e.DIRECTION_VERTICAL=DIRECTION_VERTICAL,e.DIRECTION_NONE=DIRECTION_NONE,e.DIRECTION_DOWN=DIRECTION_DOWN,e.INPUT_START=INPUT_START,e.INPUT_MOVE=INPUT_MOVE,e.INPUT_END=INPUT_END,e.INPUT_CANCEL=INPUT_CANCEL,e.STATE_POSSIBLE=STATE_POSSIBLE,e.STATE_BEGAN=STATE_BEGAN,e.STATE_CHANGED=STATE_CHANGED,e.STATE_ENDED=STATE_ENDED,e.STATE_RECOGNIZED=STATE_RECOGNIZED,e.STATE_CANCELLED=STATE_CANCELLED,e.STATE_FAILED=STATE_FAILED,e.Manager=Manager,e.Input=Input,e.TouchAction=TouchAction,e.TouchInput=TouchInput,e.MouseInput=MouseInput,e.PointerEventInput=PointerEventInput,e.TouchMouseInput=TouchMouseInput,e.SingleTouchInput=SingleTouchInput,e.Recognizer=Recognizer,e.AttrRecognizer=AttrRecognizer,e.Tap=TapRecognizer,e.Pan=PanRecognizer,e.Swipe=SwipeRecognizer,e.Pinch=PinchRecognizer,e.Rotate=RotateRecognizer,e.Press=PressRecognizer,e.on=addEventListeners,e.off=removeEventListeners,e.each=each$1,e.merge=merge$1$1,e.extend=extend$1$1,e.bindFn=bindFn,e.assign=assign$1$1$1,e.inherit=inherit,e.bindFn=bindFn,e.prefixed=prefixed,e.toArray=toArray,e.inArray=inArray,e.uniqueArray=uniqueArray,e.splitStr=splitStr,e.boolOrFn=boolOrFn,e.hasParent=hasParent,e.addEventListeners=addEventListeners,e.removeEventListeners=removeEventListeners,e.defaults=assign$1$1$1({},defaults$i,{preset:preset}),e}(),defaults$1$1=Hammer.defaults,hammer_esm=Object.freeze({__proto__:null,default:Hammer,INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each$1,merge:merge$1$1,extend:extend$1$1,assign:assign$1$1$1,inherit:inherit,bindFn:bindFn,prefixed:prefixed,toArray:toArray,inArray:inArray,uniqueArray:uniqueArray,splitStr:splitStr,boolOrFn:boolOrFn,hasParent:hasParent,addEventListeners:addEventListeners,removeEventListeners:removeEventListeners,defaults:defaults$1$1}),require$$0=getCjsExportFromNamespace$1(hammer_esm),hammer=createCommonjsModule$2((function(e){if("undefined"!=typeof window){var t=window.Hammer||require$$0;e.exports=t}else e.exports=function(){return function(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(t){return{set:e}}}}()}})),visUtil_min=createCommonjsModule$2((function(e,t){
/**
   * vis-util
   * https://github.com/visjs/vis-util
   *
   * utilitie collection for visjs
   *
   * @version 4.0.0
   * @date    2020-02-29T15:35:13.178Z
   *
   * @copyright (c) 2011-2017 Almende B.V, http://almende.com
   * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
   *
   * @license
   * vis.js is dual licensed under both
   *
   *   1. The Apache 2.0 License
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   *   and
   *
   *   2. The MIT License
   *      http://opensource.org/licenses/MIT
   *
   * vis.js may be distributed under either license.
   */
!function(e){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==commonjsGlobal$2?commonjsGlobal$2:"undefined"!=typeof self?self:{};function r(e,t){return e(t={exports:{}},t.exports),t.exports}function n(e){return e&&e.default||e}var i=function(e){return e&&e.Math==Math&&e},o=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||Function("return this")(),a=function(e){try{return!!e()}catch(e){return!0}},s=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,c={f:u&&!l.call({1:2},1)?function(e){var t=u(this,e);return!!t&&t.enumerable}:l},h=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},d={}.toString,f=function(e){return d.call(e).slice(8,-1)},p="".split,g=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==f(e)?p.call(e,""):Object(e)}:Object,y=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},v=function(e){return g(y(e))},m=function(e){return"object"==typeof e?null!==e:"function"==typeof e},b=function(e,t){if(!m(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!m(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!m(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!m(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},$={}.hasOwnProperty,_=function(e,t){return $.call(e,t)},w=o.document,E=m(w)&&m(w.createElement),x=function(e){return E?w.createElement(e):{}},T=!s&&!a((function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a})),S=Object.getOwnPropertyDescriptor,O={f:s?S:function(e,t){if(e=v(e),t=b(t,!0),T)try{return S(e,t)}catch(e){}if(_(e,t))return h(!c.f.call(e,t),e[t])}},C=/#|\.prototype\./,k=function(e,t){var r=A[P(e)];return r==D||r!=I&&("function"==typeof t?a(t):!!t)},P=k.normalize=function(e){return String(e).replace(C,".").toLowerCase()},A=k.data={},I=k.NATIVE="N",D=k.POLYFILL="P",N=k,M={},R=function(e,t,r){if(function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function")}(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},L=function(e){if(!m(e))throw TypeError(String(e)+" is not an object");return e},j=Object.defineProperty,F={f:s?j:function(e,t,r){if(L(e),t=b(t,!0),L(r),T)try{return j(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},B=s?function(e,t,r){return F.f(e,t,h(1,r))}:function(e,t,r){return e[t]=r,e},z=O.f,G=function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t},U=function(e,t){var r,n,i,a,s,l,u,c,h=e.target,d=e.global,f=e.stat,p=e.proto,g=d?o:f?o[h]:(o[h]||{}).prototype,y=d?M:M[h]||(M[h]={}),v=y.prototype;for(i in t)r=!N(d?i:h+(f?".":"#")+i,e.forced)&&g&&_(g,i),s=y[i],r&&(l=e.noTargetGet?(c=z(g,i))&&c.value:g[i]),a=r&&l?l:t[i],r&&typeof s==typeof a||(u=e.bind&&r?R(a,o):e.wrap&&r?G(a):p&&"function"==typeof a?R(Function.call,a):a,(e.sham||a&&a.sham||s&&s.sham)&&B(u,"sham",!0),y[i]=u,p&&(_(M,n=h+"Prototype")||B(M,n,{}),M[n][i]=a,e.real&&v&&!v[i]&&B(v,i,a)))},H=Array.isArray||function(e){return"Array"==f(e)};U({target:"Array",stat:!0},{isArray:H});var V=M.Array.isArray,Y=V,W={},q=o["__core-js_shared__"]||function(e,t){try{B(o,e,t)}catch(r){o[e]=t}return t}("__core-js_shared__",{}),X=Function.toString;"function"!=typeof q.inspectSource&&(q.inspectSource=function(e){return X.call(e)});var K,Z,Q,J=q.inspectSource,ee=o.WeakMap,te="function"==typeof ee&&/native code/.test(J(ee)),re=r((function(e){(e.exports=function(e,t){return q[e]||(q[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"pure",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})})),ne=0,ie=Math.random(),oe=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++ne+ie).toString(36)},ae=re("keys"),se=function(e){return ae[e]||(ae[e]=oe(e))},le={},ue=o.WeakMap;if(te){var ce=new ue,he=ce.get,de=ce.has,fe=ce.set;K=function(e,t){return fe.call(ce,e,t),t},Z=function(e){return he.call(ce,e)||{}},Q=function(e){return de.call(ce,e)}}else{var pe=se("state");le[pe]=!0,K=function(e,t){return B(e,pe,t),t},Z=function(e){return _(e,pe)?e[pe]:{}},Q=function(e){return _(e,pe)}}var ge,ye,ve,me={set:K,get:Z,has:Q,enforce:function(e){return Q(e)?Z(e):K(e,{})},getterFor:function(e){return function(t){var r;if(!m(t)||(r=Z(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}},be=function(e){return Object(y(e))},$e=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),_e=se("IE_PROTO"),we=Object.prototype,Ee=$e?Object.getPrototypeOf:function(e){return e=be(e),_(e,_e)?e[_e]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?we:null},xe=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),Te=xe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Se=re("wks"),Oe=o.Symbol,Ce=Te?Oe:Oe&&Oe.withoutSetter||oe,ke=function(e){return _(Se,e)||(xe&&_(Oe,e)?Se[e]=Oe[e]:Se[e]=Ce("Symbol."+e)),Se[e]},Pe=(ke("iterator"),!1);[].keys&&("next"in(ve=[].keys())?(ye=Ee(Ee(ve)))!==Object.prototype&&(ge=ye):Pe=!0),null==ge&&(ge={});var Ae,Ie={IteratorPrototype:ge,BUGGY_SAFARI_ITERATORS:Pe},De=Math.ceil,Ne=Math.floor,Me=function(e){return isNaN(e=+e)?0:(e>0?Ne:De)(e)},Re=Math.min,Le=function(e){return e>0?Re(Me(e),9007199254740991):0},je=Math.max,Fe=Math.min,Be=function(e,t){var r=Me(e);return r<0?je(r+t,0):Fe(r,t)},ze=function(e){return function(t,r,n){var i,o=v(t),a=Le(o.length),s=Be(n,a);if(e&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},Ge={includes:ze(!0),indexOf:ze(!1)},Ue=Ge.indexOf,He=function(e,t){var r,n=v(e),i=0,o=[];for(r in n)!_(le,r)&&_(n,r)&&o.push(r);for(;t.length>i;)_(n,r=t[i++])&&(~Ue(o,r)||o.push(r));return o},Ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ye=Object.keys||function(e){return He(e,Ve)},We=s?Object.defineProperties:function(e,t){L(e);for(var r,n=Ye(t),i=n.length,o=0;i>o;)F.f(e,r=n[o++],t[r]);return e},qe=function(e){return"function"==typeof e?e:void 0},Xe=function(e,t){return arguments.length<2?qe(M[e])||qe(o[e]):M[e]&&M[e][t]||o[e]&&o[e][t]},Ke=Xe("document","documentElement"),Ze=se("IE_PROTO"),Qe=function(){},Je=function(e){return"<script>"+e+"<\/script>"},et=function(){try{Ae=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;et=Ae?function(e){e.write(Je("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Ae):((t=x("iframe")).style.display="none",Ke.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Je("document.F=Object")),e.close(),e.F);for(var r=Ve.length;r--;)delete et.prototype[Ve[r]];return et()};le[Ze]=!0;var tt=Object.create||function(e,t){var r;return null!==e?(Qe.prototype=L(e),r=new Qe,Qe.prototype=null,r[Ze]=e):r=et(),void 0===t?r:We(r,t)},rt={};rt[ke("toStringTag")]="z";var nt="[object z]"===String(rt),it=ke("toStringTag"),ot="Arguments"==f(function(){return arguments}()),at=nt?f:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),it))?r:ot?f(t):"Object"==(n=f(t))&&"function"==typeof t.callee?"Arguments":n},st=nt?{}.toString:function(){return"[object "+at(this)+"]"},lt=F.f,ut=ke("toStringTag"),ct=function(e,t,r,n){if(e){var i=r?e:e.prototype;_(i,ut)||lt(i,ut,{configurable:!0,value:t}),n&&!nt&&B(i,"toString",st)}},ht=Ie.IteratorPrototype,dt=function(){return this},ft=(Object.setPrototypeOf||"__proto__"in{}&&function(){var e={};try{Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set.call(e,[])}catch(e){}}(),function(e,t,r,n){n&&n.enumerable?e[t]=r:B(e,t,r)}),pt=Ie.IteratorPrototype,gt=Ie.BUGGY_SAFARI_ITERATORS,yt=ke("iterator"),vt=function(){return this},mt=function(e,t,r,n,i,o,a){!function(e,t,r){var n=t+" Iterator";e.prototype=tt(ht,{next:h(1,r)}),ct(e,n,!1,!0),W[n]=dt}(r,t,n);var s,l,u,c=function(e){if(e===i&&y)return y;if(!gt&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},d=t+" Iterator",f=!1,p=e.prototype,g=p[yt]||p["@@iterator"]||i&&p[i],y=!gt&&g||c(i),v="Array"==t&&p.entries||g;if(v&&(s=Ee(v.call(new e)),pt!==Object.prototype&&s.next&&(ct(s,d,!0,!0),W[d]=vt)),"values"==i&&g&&"values"!==g.name&&(f=!0,y=function(){return g.call(this)}),a&&p[yt]!==y&&B(p,yt,y),W[t]=y,i)if(l={values:c("values"),keys:o?y:c("keys"),entries:c("entries")},a)for(u in l)!gt&&!f&&u in p||ft(p,u,l[u]);else U({target:t,proto:!0,forced:gt||f},l);return l},bt=me.set,$t=me.getterFor("Array Iterator");mt(Array,"Array",(function(e,t){bt(this,{type:"Array Iterator",target:v(e),index:0,kind:t})}),(function(){var e=$t(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),W.Arguments=W.Array;var _t=ke("toStringTag");for(var wt in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Et=o[wt],xt=Et&&Et.prototype;xt&&at(xt)!==_t&&B(xt,_t,wt),W[wt]=W.Array}var Tt=function(e){return function(t,r){var n,i,o=String(y(t)),a=Me(r),s=o.length;return a<0||a>=s?e?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):n:e?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}},St=(Tt(!1),Tt(!0)),Ot=me.set,Ct=me.getterFor("String Iterator");mt(String,"String",(function(e){Ot(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=Ct(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=St(r,n),t.index+=e.length,{value:e,done:!1})}));var kt=ke("iterator"),Pt=function(e){if(null!=e)return e[kt]||e["@@iterator"]||W[at(e)]},At=function(e){var t=Pt(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return L(t.call(e))},It=ke("iterator"),Dt=function(e){var t=Object(e);return void 0!==t[It]||"@@iterator"in t||W.hasOwnProperty(at(t))},Nt=function(e,t){return function(e){if(Y(e))return e}(e)||function(e,t){if(Dt(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=At(e);!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()};U({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Mt=M.Date.now;function Rt(e){var t=function(){for(var e=Lt(),t=e(" "),r=e(" "),n=e(" "),i=0;i<arguments.length;i++)(t-=e(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(t+=1),(r-=e(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(r+=1),(n-=e(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(n+=1);return[t,r,n]}(e),r=Nt(t,3),n=r[0],i=r[1],o=r[2],a=1,s=function(){var e=2091639*n+2.3283064365386963e-10*a;return n=i,i=o,o=e-(a=0|e)};return s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.algorithm="Alea",s.seed=e,s.version="0.9",s}function Lt(){var e=4022871197;return function(t){for(var r=t.toString(),n=0;n<r.length;n++){var i=.02519603282416938*(e+=r.charCodeAt(n));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)}}U({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperty:F.f});var jt=r((function(e){var t=M.Object,r=e.exports=function(e,r,n){return t.defineProperty(e,r,n)};t.defineProperty.sham&&(r.sham=!0)})),Ft=jt;U({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperties:We});var Bt=r((function(e){var t=M.Object,r=e.exports=function(e,r){return t.defineProperties(e,r)};t.defineProperties.sham&&(r.sham=!0)})),zt=Ve.concat("length","prototype"),Gt={f:Object.getOwnPropertyNames||function(e){return He(e,zt)}},Ut={f:Object.getOwnPropertySymbols},Ht=Xe("Reflect","ownKeys")||function(e){var t=Gt.f(L(e)),r=Ut.f;return r?t.concat(r(e)):t},Vt=function(e,t,r){var n=b(t);n in e?F.f(e,n,h(0,r)):e[n]=r};U({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(e){for(var t,r,n=v(e),i=O.f,o=Ht(n),a={},s=0;o.length>s;)void 0!==(r=i(n,t=o[s++]))&&Vt(a,t,r);return a}});var Yt=M.Object.getOwnPropertyDescriptors,Wt=O.f,qt=a((function(){Wt(1)}));U({target:"Object",stat:!0,forced:!s||qt,sham:!s},{getOwnPropertyDescriptor:function(e,t){return Wt(v(e),t)}});var Xt=r((function(e){var t=M.Object,r=e.exports=function(e,r){return t.getOwnPropertyDescriptor(e,r)};t.getOwnPropertyDescriptor.sham&&(r.sham=!0)})),Kt=Gt.f,Zt={}.toString,Qt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Jt={f:function(e){return Qt&&"[object Window]"==Zt.call(e)?function(e){try{return Kt(e)}catch(e){return Qt.slice()}}(e):Kt(v(e))}},er={f:ke},tr=F.f,rr=function(e){var t=M.Symbol||(M.Symbol={});_(t,e)||tr(t,e,{value:er.f(e)})},nr=ke("species"),ir=function(e,t){var r;return H(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!H(r.prototype)?m(r)&&null===(r=r[nr])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},or=[].push,ar=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,a=5==e||o;return function(s,l,u,c){for(var h,d,f=be(s),p=g(f),y=R(l,u,3),v=Le(p.length),m=0,b=c||ir,$=t?b(s,v):r?b(s,0):void 0;v>m;m++)if((a||m in p)&&(d=y(h=p[m],m,f),e))if(t)$[m]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return m;case 2:or.call($,h)}else if(i)return!1;return o?-1:n||i?i:$}},sr={forEach:ar(0),map:ar(1),filter:ar(2),some:ar(3),every:ar(4),find:ar(5),findIndex:ar(6)},lr=sr.forEach,ur=se("hidden"),cr=ke("toPrimitive"),hr=me.set,dr=me.getterFor("Symbol"),fr=Object.prototype,pr=o.Symbol,gr=Xe("JSON","stringify"),yr=O.f,vr=F.f,mr=Jt.f,br=c.f,$r=re("symbols"),_r=re("op-symbols"),wr=re("string-to-symbol-registry"),Er=re("symbol-to-string-registry"),xr=re("wks"),Tr=o.QObject,Sr=!Tr||!Tr.prototype||!Tr.prototype.findChild,Or=s&&a((function(){return 7!=tt(vr({},"a",{get:function(){return vr(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=yr(fr,t);n&&delete fr[t],vr(e,t,r),n&&e!==fr&&vr(fr,t,n)}:vr,Cr=function(e,t){var r=$r[e]=tt(pr.prototype);return hr(r,{type:"Symbol",tag:e,description:t}),s||(r.description=t),r},kr=Te?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof pr},Pr=function(e,t,r){e===fr&&Pr(_r,t,r),L(e);var n=b(t,!0);return L(r),_($r,n)?(r.enumerable?(_(e,ur)&&e[ur][n]&&(e[ur][n]=!1),r=tt(r,{enumerable:h(0,!1)})):(_(e,ur)||vr(e,ur,h(1,{})),e[ur][n]=!0),Or(e,n,r)):vr(e,n,r)},Ar=function(e,t){L(e);var r=v(t),n=Ye(r).concat(Mr(r));return lr(n,(function(t){s&&!Ir.call(r,t)||Pr(e,t,r[t])})),e},Ir=function(e){var t=b(e,!0),r=br.call(this,t);return!(this===fr&&_($r,t)&&!_(_r,t))&&(!(r||!_(this,t)||!_($r,t)||_(this,ur)&&this[ur][t])||r)},Dr=function(e,t){var r=v(e),n=b(t,!0);if(r!==fr||!_($r,n)||_(_r,n)){var i=yr(r,n);return!i||!_($r,n)||_(r,ur)&&r[ur][n]||(i.enumerable=!0),i}},Nr=function(e){var t=mr(v(e)),r=[];return lr(t,(function(e){_($r,e)||_(le,e)||r.push(e)})),r},Mr=function(e){var t=e===fr,r=mr(t?_r:v(e)),n=[];return lr(r,(function(e){!_($r,e)||t&&!_(fr,e)||n.push($r[e])})),n};if(xe||(ft((pr=function(){if(this instanceof pr)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=oe(e),r=function(e){this===fr&&r.call(_r,e),_(this,ur)&&_(this[ur],t)&&(this[ur][t]=!1),Or(this,t,h(1,e))};return s&&Sr&&Or(fr,t,{configurable:!0,set:r}),Cr(t,e)}).prototype,"toString",(function(){return dr(this).tag})),ft(pr,"withoutSetter",(function(e){return Cr(oe(e),e)})),c.f=Ir,F.f=Pr,O.f=Dr,Gt.f=Jt.f=Nr,Ut.f=Mr,er.f=function(e){return Cr(ke(e),e)},s&&vr(pr.prototype,"description",{configurable:!0,get:function(){return dr(this).description}})),U({global:!0,wrap:!0,forced:!xe,sham:!xe},{Symbol:pr}),lr(Ye(xr),(function(e){rr(e)})),U({target:"Symbol",stat:!0,forced:!xe},{for:function(e){var t=String(e);if(_(wr,t))return wr[t];var r=pr(t);return wr[t]=r,Er[r]=t,r},keyFor:function(e){if(!kr(e))throw TypeError(e+" is not a symbol");if(_(Er,e))return Er[e]},useSetter:function(){Sr=!0},useSimple:function(){Sr=!1}}),U({target:"Object",stat:!0,forced:!xe,sham:!s},{create:function(e,t){return void 0===t?tt(e):Ar(tt(e),t)},defineProperty:Pr,defineProperties:Ar,getOwnPropertyDescriptor:Dr}),U({target:"Object",stat:!0,forced:!xe},{getOwnPropertyNames:Nr,getOwnPropertySymbols:Mr}),U({target:"Object",stat:!0,forced:a((function(){Ut.f(1)}))},{getOwnPropertySymbols:function(e){return Ut.f(be(e))}}),gr){var Rr=!xe||a((function(){var e=pr();return"[null]"!=gr([e])||"{}"!=gr({a:e})||"{}"!=gr(Object(e))}));U({target:"JSON",stat:!0,forced:Rr},{stringify:function(e,t,r){for(var n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t,(m(t)||void 0!==e)&&!kr(e))return H(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!kr(t))return t}),i[1]=t,gr.apply(null,i)}})}pr.prototype[cr]||B(pr.prototype,cr,pr.prototype.valueOf),ct(pr,"Symbol"),le[ur]=!0;var Lr=M.Object.getOwnPropertySymbols;U({target:"Object",stat:!0,sham:!s},{create:tt});var jr=M.Object,Fr=function(e,t){return jr.create(e,t)},Br=jt,zr=function(e,t,r){return t in e?Br(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},Gr=a((function(){Ye(1)}));U({target:"Object",stat:!0,forced:Gr},{keys:function(e){return Ye(be(e))}});var Ur,Hr=M.Object.keys,Vr="\t\n\v\f\r \u2028\u2029\ufeff",Yr="["+Vr+"]",Wr=RegExp("^"+Yr+Yr+"*"),qr=RegExp(Yr+Yr+"*$"),Xr=function(e){return function(t){var r=String(y(t));return 1&e&&(r=r.replace(Wr,"")),2&e&&(r=r.replace(qr,"")),r}},Kr={start:Xr(1),end:Xr(2),trim:Xr(3)},Zr=Kr.trim;U({target:"String",proto:!0,forced:(Ur="trim",a((function(){return!!Vr[Ur]()||""!=""[Ur]()||Vr[Ur].name!==Ur})))},{trim:function(){return Zr(this)}});var Qr=function(e){return M[e+"Prototype"]},Jr=Qr("String").trim,en=String.prototype,tn=function(e){var t=e.trim;return"string"==typeof e||e===en||e instanceof String&&t===en.trim?Jr:t},rn=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))},nn=Object.defineProperty,on={},an=function(e){throw e},sn=function(e,t){if(_(on,e))return on[e];t||(t={});var r=[][e],n=!!_(t,"ACCESSORS")&&t.ACCESSORS,i=_(t,0)?t[0]:an,o=_(t,1)?t[1]:void 0;return on[e]=!!r&&!a((function(){if(n&&!s)return!0;var e={length:-1};n?nn(e,1,{enumerable:!0,get:an}):e[1]=1,r.call(e,i,o)}))},ln=sr.forEach,un=rn("forEach"),cn=sn("forEach"),hn=un&&cn?[].forEach:function(e){return ln(this,e,arguments.length>1?arguments[1]:void 0)};U({target:"Array",proto:!0,forced:[].forEach!=hn},{forEach:hn});var dn,fn,pn=Qr("Array").forEach,gn=Array.prototype,yn={DOMTokenList:!0,NodeList:!0},vn=function(e){var t=e.forEach;return e===gn||e instanceof Array&&t===gn.forEach||yn.hasOwnProperty(at(e))?pn:t},mn=Xe("navigator","userAgent")||"",bn=o.process,$n=bn&&bn.versions,_n=$n&&$n.v8;_n?fn=(dn=_n.split("."))[0]+dn[1]:mn&&(!(dn=mn.match(/Edge\/(\d+)/))||dn[1]>=74)&&(dn=mn.match(/Chrome\/(\d+)/))&&(fn=dn[1]);var wn=fn&&+fn,En=ke("species"),xn=function(e){return wn>=51||!a((function(){var t=[];return(t.constructor={})[En]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Tn=sr.map,Sn=xn("map"),On=sn("map");U({target:"Array",proto:!0,forced:!Sn||!On},{map:function(e){return Tn(this,e,arguments.length>1?arguments[1]:void 0)}});var Cn=Qr("Array").map,kn=Array.prototype,Pn=function(e){var t=e.map;return e===kn||e instanceof Array&&t===kn.map?Cn:t},An=Kr.trim,In=o.parseInt,Dn=/^[+-]?0[Xx]/,Nn=8!==In(Vr+"08")||22!==In(Vr+"0x16")?function(e,t){var r=An(String(e));return In(r,t>>>0||(Dn.test(r)?16:10))}:In;U({global:!0,forced:parseInt!=Nn},{parseInt:Nn});var Mn=M.parseInt,Rn=c.f,Ln=function(e){return function(t){for(var r,n=v(t),i=Ye(n),o=i.length,a=0,l=[];o>a;)r=i[a++],s&&!Rn.call(n,r)||l.push(e?[r,n[r]]:n[r]);return l}},jn=(Ln(!0),Ln(!1));U({target:"Object",stat:!0},{values:function(e){return jn(e)}});var Fn=M.Object.values,Bn=sr.filter,zn=xn("filter"),Gn=sn("filter");U({target:"Array",proto:!0,forced:!zn||!Gn},{filter:function(e){return Bn(this,e,arguments.length>1?arguments[1]:void 0)}});var Un=Qr("Array").filter,Hn=Array.prototype,Vn=function(e){var t=e.filter;return e===Hn||e instanceof Array&&t===Hn.filter?Un:t},Yn=ke("isConcatSpreadable"),Wn=wn>=51||!a((function(){var e=[];return e[Yn]=!1,e.concat()[0]!==e})),qn=xn("concat"),Xn=function(e){if(!m(e))return!1;var t=e[Yn];return void 0!==t?!!t:H(e)};U({target:"Array",proto:!0,forced:!Wn||!qn},{concat:function(e){var t,r,n,i,o,a=be(this),s=ir(a,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?a:arguments[t],Xn(o)){if(l+(i=Le(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(r=0;r<i;r++,l++)r in o&&Vt(s,l,o[r])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Vt(s,l++,o)}return s.length=l,s}});var Kn=Qr("Array").concat,Zn=Array.prototype,Qn=function(e){var t=e.concat;return e===Zn||e instanceof Array&&t===Zn.concat?Kn:t},Jn=function(e,t,r,n){try{return n?t(L(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&L(i.call(e)),t}},ei=ke("iterator"),ti=Array.prototype,ri=function(e){return void 0!==e&&(W.Array===e||ti[ei]===e)},ni=ke("iterator"),ii=!1;try{var oi=0,ai={next:function(){return{done:!!oi++}},return:function(){ii=!0}};ai[ni]=function(){return this},Array.from(ai,(function(){throw 2}))}catch(e){}var si=!function(e,t){if(!ii)return!1;var r=!1;try{var n={};n[ni]=function(){return{next:function(){return{done:r=!0}}}},function(e){Array.from(e)}(n)}catch(e){}return r}();U({target:"Array",stat:!0,forced:si},{from:function(e){var t,r,n,i,o,a,s=be(e),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,d=Pt(s),f=0;if(h&&(c=R(c,u>2?arguments[2]:void 0,2)),null==d||l==Array&&ri(d))for(r=new l(t=Le(s.length));t>f;f++)a=h?c(s[f],f):s[f],Vt(r,f,a);else for(o=(i=d.call(s)).next,r=new l;!(n=o.call(i)).done;f++)a=h?Jn(i,c,[n.value,f],!0):n.value,Vt(r,f,a);return r.length=f,r}});var li=M.Array.from,ui=function(e){return function(e){if(Y(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Dt(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return li(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()},ci=xn("slice"),hi=sn("slice",{ACCESSORS:!0,0:0,1:2}),di=ke("species"),fi=[].slice,pi=Math.max;U({target:"Array",proto:!0,forced:!ci||!hi},{slice:function(e,t){var r,n,i,o=v(this),a=Le(o.length),s=Be(e,a),l=Be(void 0===t?a:t,a);if(H(o)&&("function"!=typeof(r=o.constructor)||r!==Array&&!H(r.prototype)?m(r)&&null===(r=r[di])&&(r=void 0):r=void 0,r===Array||void 0===r))return fi.call(o,s,l);for(n=new(void 0===r?Array:r)(pi(l-s,0)),i=0;s<l;s++,i++)s in o&&Vt(n,i,o[s]);return n.length=i,n}});var gi=Qr("Array").slice,yi=Array.prototype,vi=function(e){var t=e.slice;return e===yi||e instanceof Array&&t===yi.slice?gi:t},mi=a((function(){Ee(1)}));U({target:"Object",stat:!0,forced:mi,sham:!$e},{getPrototypeOf:function(e){return Ee(be(e))}});var bi=M.Object.getPrototypeOf,$i=Ge.indexOf,_i=[].indexOf,wi=!!_i&&1/[1].indexOf(1,-0)<0,Ei=rn("indexOf"),xi=sn("indexOf",{ACCESSORS:!0,1:0});U({target:"Array",proto:!0,forced:wi||!Ei||!xi},{indexOf:function(e){return wi?_i.apply(this,arguments)||0:$i(this,e,arguments.length>1?arguments[1]:void 0)}});var Ti=Qr("Array").indexOf,Si=Array.prototype,Oi=function(e){var t=e.indexOf;return e===Si||e instanceof Array&&t===Si.indexOf?Ti:t},Ci=V,ki=Object.assign,Pi=Object.defineProperty,Ai=!ki||a((function(){if(s&&1!==ki({b:1},ki(Pi({},"a",{enumerable:!0,get:function(){Pi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=ki({},e)[r]||"abcdefghijklmnopqrst"!=Ye(ki({},t)).join("")}))?function(e,t){for(var r=be(e),n=arguments.length,i=1,o=Ut.f,a=c.f;n>i;)for(var l,u=g(arguments[i++]),h=o?Ye(u).concat(o(u)):Ye(u),d=h.length,f=0;d>f;)l=h[f++],s&&!a.call(u,l)||(r[l]=u[l]);return r}:ki;U({target:"Object",stat:!0,forced:Object.assign!==Ai},{assign:Ai});var Ii=M.Object.assign;rr("iterator");var Di=er.f("iterator"),Ni=Object.freeze({__proto__:null});rr("asyncIterator");var Mi=Object.freeze({__proto__:null});rr("hasInstance"),rr("isConcatSpreadable"),rr("match"),rr("matchAll"),rr("replace"),rr("search"),rr("species"),rr("split"),rr("toPrimitive"),rr("toStringTag"),rr("unscopables"),ct(Math,"Math",!0),ct(o.JSON,"JSON",!0),n(Ni),n(Mi);var Ri=M.Symbol;rr("asyncDispose"),rr("dispose"),rr("observable"),rr("patternMatch"),rr("replaceAll");var Li=Ri,ji=r((function(e){function t(r){return e.exports=t="function"==typeof Li&&"symbol"==typeof Di?function(e){return typeof e}:function(e){return e&&"function"==typeof Li&&e.constructor===Li&&e!==Li.prototype?"symbol":typeof e},t(r)}e.exports=t}));function Fi(e,t){var r=Hr(e);if(Lr){var n=Lr(e);t&&(n=Vn(n).call(n,(function(t){return Xt(e,t).enumerable}))),r.push.apply(r,n)}return r}var Bi=/^\/?Date\((-?\d+)/i,zi=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Gi=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ui=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Hi=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Vi(e){return e instanceof Number||"number"==typeof e}function Yi(e){return e instanceof String||"string"==typeof e}function Wi(e){return"object"===ji(e)&&null!==e}function qi(e,t,r,n){var i=!1;!0===n&&(i=null===t[r]&&void 0!==e[r]),i?delete e[r]:e[r]=t[r]}var Xi=Ii;function Ki(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)||!0===r)if("object"===ji(t[i])&&null!==t[i]&&bi(t[i])===Object.prototype)void 0===e[i]?e[i]=Ki({},t[i],r):"object"===ji(e[i])&&null!==e[i]&&bi(e[i])===Object.prototype?Ki(e[i],t[i],r):qi(e,t,i,n);else if(Ci(t[i])){var o;e[i]=vi(o=t[i]).call(o)}else qi(e,t,i,n);return e}var Zi=Fn,Qi={asBoolean:function(e,t){return"function"==typeof e&&(e=e()),null!=e?0!=e:t||null},asNumber:function(e,t){return"function"==typeof e&&(e=e()),null!=e?Number(e)||t||null:t||null},asString:function(e,t){return"function"==typeof e&&(e=e()),null!=e?String(e):t||null},asSize:function(e,t){return"function"==typeof e&&(e=e()),Yi(e)?e:Vi(e)?e+"px":t||null},asElement:function(e,t){return"function"==typeof e&&(e=e()),e||t||null}};function Ji(e){var t;switch(e.length){case 3:case 4:return(t=Gi.exec(e))?{r:Mn(t[1]+t[1],16),g:Mn(t[2]+t[2],16),b:Mn(t[3]+t[3],16)}:null;case 6:case 7:return(t=zi.exec(e))?{r:Mn(t[1],16),g:Mn(t[2],16),b:Mn(t[3],16)}:null;default:return null}}function eo(e,t,r){var n;return"#"+vi(n=((1<<24)+(e<<16)+(t<<8)+r).toString(16)).call(n,1)}function to(e,t,r){e/=255,t/=255,r/=255;var n=Math.min(e,Math.min(t,r)),i=Math.max(e,Math.max(t,r));return n===i?{h:0,s:0,v:n}:{h:60*((e===n?3:r===n?1:5)-(e===n?t-r:r===n?e-t:r-e)/(i-n))/360,s:(i-n)/i,v:i}}var ro=function(e){var t,r={};return vn(t=e.split(";")).call(t,(function(e){if(""!=tn(e).call(e)){var t,n,i=e.split(":"),o=tn(t=i[0]).call(t),a=tn(n=i[1]).call(n);r[o]=a}})),r},no=function(e){var t;return Pn(t=Hr(e)).call(t,(function(t){return t+": "+e[t]})).join("; ")};function io(e,t,r){var n,i,o,a=Math.floor(6*e),s=6*e-a,l=r*(1-t),u=r*(1-s*t),c=r*(1-(1-s)*t);switch(a%6){case 0:n=r,i=c,o=l;break;case 1:n=u,i=r,o=l;break;case 2:n=l,i=r,o=c;break;case 3:n=l,i=u,o=r;break;case 4:n=c,i=l,o=r;break;case 5:n=r,i=l,o=u}return{r:Math.floor(255*n),g:Math.floor(255*i),b:Math.floor(255*o)}}function oo(e,t,r){var n=io(e,t,r);return eo(n.r,n.g,n.b)}function ao(e){var t=Ji(e);if(!t)throw new TypeError("'".concat(e,"' is not a valid color."));return to(t.r,t.g,t.b)}function so(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}function lo(e){return Ui.test(e)}function uo(e){if(null===e||"object"!==ji(e))return null;if(e instanceof Element)return e;var t=Fr(e);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"object"==ji(e[r])&&(t[r]=uo(e[r]));return t}e.Alea=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Rt(t.length?t:[Mt()])},e.HSVToHex=oo,e.HSVToRGB=io,e.RGBToHSV=to,e.RGBToHex=eo,e.addClassName=function(e,t){var r=e.className.split(" "),n=t.split(" ");r=Qn(r).call(r,Vn(n).call(n,(function(e){return Oi(r).call(r,e)<0}))),e.className=r.join(" ")},e.addCssText=function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)vn(r=Fi(Object(n),!0)).call(r,(function(t){zr(e,t,n[t])}));else if(Yt)Bt(e,Yt(n));else{var i;vn(i=Fi(Object(n))).call(i,(function(t){Ft(e,t,Xt(n,t))}))}}return e}({},ro(e.style.cssText),{},ro(t));e.style.cssText=no(r)},e.addEventListener=function(e,t,r,n){var i;e.addEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&Oi(i=navigator.userAgent).call(i,"Firefox")>=0&&(t="DOMMouseScroll"),e.addEventListener(t,r,n)):e.attachEvent("on"+t,r)},e.binarySearchCustom=function(e,t,r,n){for(var i=0,o=0,a=e.length-1;o<=a&&i<1e4;){var s=Math.floor((o+a)/2),l=e[s],u=t(void 0===n?l[r]:l[r][n]);if(0==u)return s;-1==u?o=s+1:a=s-1,i++}return-1},e.binarySearchValue=function(e,t,r,n,i){var o,a,s,l,u=0,c=0,h=e.length-1;for(i=null!=i?i:function(e,t){return e==t?0:e<t?-1:1};c<=h&&u<1e4;){if(l=Math.floor(.5*(h+c)),o=e[Math.max(0,l-1)][r],a=e[l][r],s=e[Math.min(e.length-1,l+1)][r],0==i(a,t))return l;if(i(o,t)<0&&i(a,t)>0)return"before"==n?Math.max(0,l-1):l;if(i(a,t)<0&&i(s,t)>0)return"before"==n?l:Math.min(e.length-1,l+1);i(a,t)<0?c=l+1:h=l-1,u++}return-1},e.bridgeObject=uo,e.copyAndExtendArray=function(e,t){var r;return Qn(r=[]).call(r,ui(e),[t])},e.copyArray=function(e){return vi(e).call(e)},e.deepExtend=Ki,e.easingFunctions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},e.equalArray=function(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!=t[r])return!1;return!0},e.extend=Xi,e.fillIfDefined=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var i in t)if(void 0!==r[i])if(null===r[i]||"object"!==ji(r[i]))qi(t,r,i,n);else{var o=t[i],a=r[i];Wi(o)&&Wi(a)&&e(o,a,n)}},e.forEach=function(e,t){if(Ci(e))for(var r=e.length,n=0;n<r;n++)t(e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(e[i],i,e)},e.getAbsoluteLeft=function(e){return e.getBoundingClientRect().left},e.getAbsoluteRight=function(e){return e.getBoundingClientRect().right},e.getAbsoluteTop=function(e){return e.getBoundingClientRect().top},e.getScrollBarWidth=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return r==n&&(n=t.clientWidth),document.body.removeChild(t),r-n},e.getTarget=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,t=null;return e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),t instanceof Element&&(null==t.nodeType||3!=t.nodeType||(t=t.parentNode)instanceof Element)?t:null},e.getType=function(e){var t=ji(e);return"object"===t?null===e?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":Ci(e)?"Array":e instanceof Date?"Date":"Object":"number"===t?"Number":"boolean"===t?"Boolean":"string"===t?"String":void 0===t?"undefined":t},e.hasParent=function(e,t){for(var r=e;r;){if(r===t)return!0;if(!r.parentNode)return!1;r=r.parentNode}return!1},e.hexToHSV=ao,e.hexToRGB=Ji,e.insertSort=function(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=void 0;for(i=r;i>0&&t(n,e[i-1])<0;i--)e[i]=e[i-1];e[i]=n}return e},e.isDate=function(e){if(e instanceof Date)return!0;if(Yi(e)){if(Bi.exec(e))return!0;if(!isNaN(Date.parse(e)))return!0}return!1},e.isNumber=Vi,e.isObject=Wi,e.isString=Yi,e.isValidHex=so,e.isValidRGB=lo,e.isValidRGBA=function(e){return Hi.test(e)},e.mergeOptions=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=function(e){return null!=e},o=function(e){return null!==e&&"object"===ji(e)},a=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0};if(!o(e))throw new Error("Parameter mergeTarget must be an object");if(!o(t))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!o(n))throw new Error("Parameter globalOptions must be an object");var s=function(e,t,r){o(e[r])||(e[r]={});var n=t[r],i=e[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},l=t[r],u=o(n)&&!a(n),c=u?n[r]:void 0,h=c?c.enabled:void 0;if(void 0!==l){if("boolean"==typeof l)return o(e[r])||(e[r]={}),void(e[r].enabled=l);if(null===l&&!o(e[r])){if(!i(c))return;e[r]=Fr(c)}if(o(l)){var d=!0;void 0!==l.enabled?d=l.enabled:void 0!==h&&(d=c.enabled),s(e,t,r),e[r].enabled=d}}},e.option=Qi,e.overrideOpacity=function(e,t){if(-1!==Oi(e).call(e,"rgba"))return e;if(-1!==Oi(e).call(e,"rgb")){var r=e.substr(Oi(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+t+")"}var n=Ji(e);return null==n?e:"rgba("+n.r+","+n.g+","+n.b+","+t+")"},e.parseColor=function(e,t){if(Yi(e)){var r=e;if(lo(r)){var n,i=Pn(n=r.substr(4).substr(0,r.length-5).split(",")).call(n,(function(e){return Mn(e)}));r=eo(i[0],i[1],i[2])}if(!0===so(r)){var o=ao(r),a={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},s={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},l=oo(s.h,s.s,s.v),u=oo(a.h,a.s,a.v);return{background:r,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}return{background:r,border:r,highlight:{background:r,border:r},hover:{background:r,border:r}}}return t?{background:e.background||t.background,border:e.border||t.border,highlight:Yi(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||t.highlight.background,border:e.highlight&&e.highlight.border||t.highlight.border},hover:Yi(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||t.hover.border,background:e.hover&&e.hover.background||t.hover.background}}:{background:e.background||void 0,border:e.border||void 0,highlight:Yi(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:Yi(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}}},e.preventDefault=function(e){e||(e=window.event),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},e.recursiveDOMDelete=function e(t){if(t)for(;!0===t.hasChildNodes();){var r=t.firstChild;r&&(e(r),t.removeChild(r))}},e.removeClassName=function(e,t){var r=e.className.split(" "),n=t.split(" ");r=Vn(r).call(r,(function(e){return Oi(n).call(n,e)<0})),e.className=r.join(" ")},e.removeCssText=function(e,t){var r=ro(e.style.cssText),n=ro(t);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&delete r[i];e.style.cssText=no(r)},e.removeEventListener=function(e,t,r,n){var i;e.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&Oi(i=navigator.userAgent).call(i,"Firefox")>=0&&(t="DOMMouseScroll"),e.removeEventListener(t,r,n)):e.detachEvent("on"+t,r)},e.selectiveBridgeObject=function(e,t){if(null!==t&&"object"===ji(t)){for(var r=Fr(t),n=0;n<e.length;n++)Object.prototype.hasOwnProperty.call(t,e[n])&&"object"==ji(t[e[n]])&&(r[e[n]]=uo(t[e[n]]));return r}return null},e.selectiveDeepExtend=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Ci(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<e.length;i++){var o=e[i];if(Object.prototype.hasOwnProperty.call(r,o))if(r[o]&&r[o].constructor===Object)void 0===t[o]&&(t[o]={}),t[o].constructor===Object?Ki(t[o],r[o],!1,n):qi(t,r,o,n);else{if(Ci(r[o]))throw new TypeError("Arrays are not supported by deepExtend");qi(t,r,o,n)}}return t},e.selectiveExtend=function(e,t){if(!Ci(e))throw new Error("Array with property names expected as first argument");for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];for(var o=0,a=n;o<a.length;o++)for(var s=a[o],l=0;l<e.length;l++){var u=e[l];s&&Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},e.selectiveNotDeepExtend=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Ci(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&-1===Oi(e).call(e,i))if(r[i]&&r[i].constructor===Object)void 0===t[i]&&(t[i]={}),t[i].constructor===Object?Ki(t[i],r[i]):qi(t,r,i,n);else if(Ci(r[i])){t[i]=[];for(var o=0;o<r[i].length;o++)t[i].push(r[i][o])}else qi(t,r,i,n);return t},e.throttle=function(e){var t=!1;return function(){t||(t=!0,requestAnimationFrame((function(){t=!1,e()})))}},e.toArray=Zi,e.topMost=function(e,t){var r;Ci(t)||(t=[t]);var n=!0,i=!1,o=void 0;try{for(var a,s=At(e);!(n=(a=s.next()).done);n=!0){var l=a.value;if(l){r=l[t[0]];for(var u=1;u<t.length;u++)r&&(r=r[t[u]]);if(void 0!==r)break}}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r},e.updateProperty=function(e,t,r){return e[t]!==r&&(e[t]=r,!0)},Object.defineProperty(e,"__esModule",{value:!0})}(t)}));function Activator$1(e){var t,r,n=this;this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=hammer(this.dom.overlay),this.hammer.on("tap",bind$2$1(t=this._onTapOverlay).call(t,this));var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];forEach$2$1(i).call(i,(function(e){n.hammer.on(e,(function(e){e.srcEvent.stopPropagation()}))})),document&&document.body&&(this.onClick=function(t){_hasParent(t.target,e)||n.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=keycharm(),this.escListener=bind$2$1(r=this.deactivate).call(r,this)}function _hasParent(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}unwrapExports$1(visUtil_min),getCjsExportFromNamespace$1(Activator),componentEmitter(Activator$1.prototype),Activator$1.current=null,Activator$1.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null},Activator$1.prototype.activate=function(){var e;Activator$1.current&&Activator$1.current.deactivate(),Activator$1.current=this,this.active=!0,this.dom.overlay.style.display="none",visUtil_min.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),bind$2$1(e=this.keycharm).call(e,"esc",this.escListener)},Activator$1.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="block",visUtil_min.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},Activator$1.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};var Activator_1=Activator$1,locales=createCommonjsModule$2((function(e,t){t.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},t.en_EN=t.en,t.en_US=t.en,t.de={edit:"Editieren",del:"Lsche Auswahl",back:"Zurck",addNode:"Knoten hinzufgen",addEdge:"Kante hinzufgen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht mglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster knnen nicht gelscht werden.",editClusterError:"Cluster knnen nicht editiert werden."},t.de_DE=t.de,t.es={edit:"Editar",del:"Eliminar seleccin",back:"Atrs",addNode:"Aadir nodo",addEdge:"Aadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vaco para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},t.es_ES=t.es,t.it={edit:"Modifica",del:"Cancella la selezione",back:"Indietro",addNode:"Aggiungi un nodo",addEdge:"Aggiungi un vertice",editNode:"Modifica il nodo",editEdge:"Modifica il vertice",addDescription:"Clicca per aggiungere un nuovo nodo",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",createEdgeError:"Non si possono collegare vertici ad un cluster",deleteClusterError:"I cluster non possono essere cancellati",editClusterError:"I clusters non possono essere modificati."},t.it_IT=t.it,t.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},t.nl_NL=t.nl,t.nl_BE=t.nl,t["pt-br"]={edit:"Editar",del:"Remover selecionado",back:"Voltar",addNode:"Adicionar n",addEdge:"Adicionar aresta",editNode:"Editar n",editEdge:"Editar aresta",addDescription:"Clique em um espao em branco para adicionar um novo n",edgeDescription:"Clique em um n e arraste a aresta at outro n para conect-los",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n para conect-los",createEdgeError:"No foi possvel linkar arestas a um cluster.",deleteClusterError:"Clusters no puderam ser removidos.",editClusterError:"Clusters no puderam ser editados."},t["pt-BR"]=t["pt-br"],t.pt_BR=t["pt-br"],t.pt_br=t["pt-br"],t.ru={edit:"",del:" ",back:"",addNode:" ",addEdge:" ",editNode:" ",editEdge:" ",addDescription:"   ,    .",edgeDescription:"        ,   .",editEdgeDescription:"        ,    .",createEdgeError:"    .",deleteClusterError:"    ",editClusterError:"   ."},t.ru_RU=t.ru,t.cn={edit:"",del:"",back:"",addNode:"",addEdge:"",editNode:"",editEdge:"",addDescription:"",edgeDescription:"",editEdgeDescription:"",createEdgeError:"",deleteClusterError:"",editClusterError:""},t.zh_CN=t.cn,t.uk={edit:"",del:" ",back:"",addNode:" ",addEdge:" ",editNode:" ",editEdge:" ",addDescription:"K   ,    .",edgeDescription:"        ,   '.",editEdgeDescription:"        ,    .",createEdgeError:"  '   .",deleteClusterError:"    .",editClusterError:"   ."},t.uk_UA=t.uk,t.fr={edit:"diter",del:"Effacer la slection",back:"Retour",addNode:"Ajouter un nud",addEdge:"Ajouter un lien",editNode:"diter le nud",editEdge:"diter le lien",addDescription:"Cliquez dans un endroit vide pour placer un nud.",edgeDescription:"Cliquez sur un nud et glissez le lien vers un autre nud pour les connecter.",editEdgeDescription:"Cliquez sur les points de contrle et glissez-les pour connecter un nud.",createEdgeError:"Impossible de crer un lien vers un cluster.",deleteClusterError:"Les clusters ne peuvent pas tre effacs.",editClusterError:"Les clusters ne peuvent pas tre dits."},t.fr_FR=t.fr,t.cs={edit:"Upravit",del:"Smazat vbr",back:"Zpt",addNode:"Pidat vrchol",addEdge:"Pidat hranu",editNode:"Upravit vrchol",editEdge:"Upravit hranu",addDescription:"Kluknutm do przdnho prostoru mete pidat nov vrchol.",edgeDescription:"Petaenm z jednoho vrcholu do druhho mete spojit tyto vrcholy novou hranou.",editEdgeDescription:"Petaenm kontrolnho vrcholu hrany ji mete pipojit k jinmu vrcholu.",createEdgeError:"Nelze pipojit hranu ke shluku.",deleteClusterError:"Nelze mazat shluky.",editClusterError:"Nelze upravovat shluky."},t.cs_CZ=t.cs}));function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var classCallCheck$1=_classCallCheck$2;function _defineProperties$2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),defineProperty$5$1(e,n.key,n)}}function _createClass$2(e,t,r){return t&&_defineProperties$2(e.prototype,t),r&&_defineProperties$2(e,r),e}var createClass$1=_createClass$2,CachedImage=function(){function e(){classCallCheck$1(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return createClass$1(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var e=this.image.width,t=this.image.height;this.width=e,this.height=t;var r=Math.floor(t/2),n=Math.floor(t/4),i=Math.floor(t/8),o=Math.floor(t/16),a=Math.floor(e/2),s=Math.floor(e/4),l=Math.floor(e/8),u=Math.floor(e/16);this.canvas.width=3*s,this.canvas.height=r,this.coordinates=[[0,0,a,r],[a,0,s,n],[a,n,l,i],[5*l,n,u,o]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var e=this.canvas.getContext("2d"),t=this.coordinates[0];e.drawImage(this.image,t[0],t[1],t[2],t[3]);for(var r=1;r<this.NUM_ITERATIONS;r++){var n=this.coordinates[r-1],i=this.coordinates[r];e.drawImage(this.canvas,n[0],n[1],n[2],n[3],i[0],i[1],i[2],i[3])}}},{key:"drawImageAtPosition",value:function(e,t,r,n,i,o){if(this.initialized())if(t>2){t*=.5;for(var a=0;t>2&&a<this.NUM_ITERATIONS;)t*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);var s=this.coordinates[a];e.drawImage(this.canvas,s[0],s[1],s[2],s[3],r,n,i,o)}else e.drawImage(this.image,r,n,i,o)}}]),e}(),Images=function(){function e(t){classCallCheck$1(this,e),this.images={},this.imageBroken={},this.callback=t}return createClass$1(e,[{key:"_tryloadBrokenUrl",value:function(e,t,r){void 0!==e&&void 0!==r&&(void 0!==t?(r.image.onerror=function(){console.error("Could not load brokenImage:",t)},r.image.src=t):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(e){this.callback&&this.callback(e)}},{key:"load",value:function(e,t){var r=this,n=this.images[e];if(n)return n;var i=new CachedImage;return this.images[e]=i,i.image.onload=function(){r._fixImageCoordinates(i.image),i.init(),r._redrawWithImage(i)},i.image.onerror=function(){console.error("Could not load image:",e),r._tryloadBrokenUrl(e,t,i)},i.image.src=e,i}},{key:"_fixImageCoordinates",value:function(e){0===e.width&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}]),e}(),Groups=function(){function e(){classCallCheck$1(this,e),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},extend$1(this.options,this.defaultOptions)}return createClass$1(e,[{key:"setOptions",value:function(e){var t=["useDefaultGroups"];if(void 0!==e)for(var r in e)if(e.hasOwnProperty(r)&&-1===indexOf$3(t).call(t,r)){var n=e[r];this.add(r,n)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.groups[e];if(void 0===r&&t)if(!1===this.options.useDefaultGroups&&this.groupsArray.length>0){var n=this.groupIndex%this.groupsArray.length;this.groupIndex++,(r={}).color=this.groups[this.groupsArray[n]],this.groups[e]=r}else{var i=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,(r={}).color=this.defaultGroups[i],this.groups[e]=r}return r}},{key:"add",value:function(e,t){return this.groups[e]=t,this.groupsArray.push(e),t}}]),e}(),slice$6$1=[].slice,MSIE$1=/MSIE .\./.test(engineUserAgent$1),wrap$1$1=function(e){return function(t,r){var n=arguments.length>2,i=n?slice$6$1.call(arguments,2):void 0;return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};_export$1({global:!0,bind:!0,forced:MSIE$1},{setTimeout:wrap$1$1(global_1$1.setTimeout),setInterval:wrap$1$1(global_1$1.setInterval)});var setTimeout$1$2=path$1.setTimeout,setTimeout$2=setTimeout$1$2,$some$1=arrayIteration$1.some,STRICT_METHOD$2$1=arrayMethodIsStrict$1("some"),USES_TO_LENGTH$7$1=arrayMethodUsesToLength$1("some");_export$1({target:"Array",proto:!0,forced:!STRICT_METHOD$2$1||!USES_TO_LENGTH$7$1},{some:function(e){return $some$1(this,e,arguments.length>1?arguments[1]:void 0)}});var some$3=entryVirtual$1("Array").some,ArrayPrototype$9$1=Array.prototype,some_1$1=function(e){var t=e.some;return e===ArrayPrototype$9$1||e instanceof Array&&t===ArrayPrototype$9$1.some?some$3:t},some$1$1=some_1$1,some$2$1=some$1$1,globalIsFinite=global_1$1.isFinite,numberIsFinite=Number.isFinite||function(e){return"number"==typeof e&&globalIsFinite(e)};_export$1({target:"Number",stat:!0},{isFinite:numberIsFinite});var _isFinite=path$1.Number.isFinite,_isFinite$1=_isFinite,_isFinite$2=_isFinite$1;_export$1({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var isNan=path$1.Number.isNaN,isNan$1=isNan,isNan$2=isNan$1,nativeGetOwnPropertyNames$2$1=objectGetOwnPropertyNamesExternal$1.f,FAILS_ON_PRIMITIVES$3$1=fails$1((function(){return!Object.getOwnPropertyNames(1)}));_export$1({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$3$1},{getOwnPropertyNames:nativeGetOwnPropertyNames$2$1});var Object$2=path$1.Object,getOwnPropertyNames=function(e){return Object$2.getOwnPropertyNames(e)},getOwnPropertyNames$1=getOwnPropertyNames,getOwnPropertyNames$2=getOwnPropertyNames$1,trim$2$1=stringTrim$1.trim,$parseFloat=global_1$1.parseFloat,FORCED$3$1=1/$parseFloat(whitespaces$1+"-0")!=-1/0,numberParseFloat=FORCED$3$1?function(e){var t=trim$2$1(String(e)),r=$parseFloat(t);return 0===r&&"-"==t.charAt(0)?-0:r}:$parseFloat;_export$1({global:!0,forced:parseFloat!=numberParseFloat},{parseFloat:numberParseFloat});var _parseFloat=path$1.parseFloat,_parseFloat$1=_parseFloat,_parseFloat$2=_parseFloat$1,ComponentUtil=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"choosify",value:function(e,t){var r=["node","edge","label"],n=!0,i=topMost(t,"chosen");if("boolean"==typeof i)n=i;else if("object"===_typeof_1$1(i)){if(-1===indexOf$3(r).call(r,e))throw new Error("choosify: subOption '"+e+"' should be one of '"+r.join("', '")+"'");var o=topMost(t,["chosen",e]);"boolean"!=typeof o&&"function"!=typeof o||(n=o)}return n}},{key:"pointInRect",value:function(e,t,r){if(e.width<=0||e.height<=0)return!1;if(void 0!==r){var n={x:t.x-r.x,y:t.y-r.y};if(0!==r.angle){var i=-r.angle;t={x:Math.cos(i)*n.x-Math.sin(i)*n.y,y:Math.sin(i)*n.x+Math.cos(i)*n.y}}else t=n}var o=e.x+e.width,a=e.y+e.width;return e.left<t.x&&o>t.x&&e.top<t.y&&a>t.y}},{key:"isValidLabel",value:function(e){return"string"==typeof e&&""!==e}},{key:"getSelfRefCoordinates",value:function(e,t,r,n){var i=n.x,o=n.y;if("function"==typeof n.distanceToBorder){var a=n.distanceToBorder(e,t),s=Math.sin(t)*a,l=Math.cos(t)*a;l===a?(i+=a,o=n.y):s===a?(i=n.x,o-=a):(i+=l,o-=s)}else n.shape.width>n.shape.height?(i=n.x+.5*n.shape.width,o=n.y-r):(i=n.x+r,o=n.y-.5*n.shape.height);return{x:i,y:o}}}]),e}(),values$1$2=entryVirtual$1("Array").values,values$2$1=values$1$2,ArrayPrototype$a$1=Array.prototype,DOMIterables$1$1={DOMTokenList:!0,NodeList:!0},values_1$2=function(e){var t=e.values;return e===ArrayPrototype$a$1||e instanceof Array&&t===ArrayPrototype$a$1.values||DOMIterables$1$1.hasOwnProperty(classof$1(e))?values$2$1:t},values$3$1=values_1$2,LabelAccumulator=function(){function e(t){classCallCheck$1(this,e),this.measureText=t,this.current=0,this.width=0,this.height=0,this.lines=[]}return createClass$1(e,[{key:"_add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[e]&&(this.lines[e]={width:0,height:0,blocks:[]});var n=t;void 0!==t&&""!==t||(n=" ");var i=this.measureText(n,r),o=assign$2$2({},values$3$1(i));o.text=t,o.width=i.width,o.mod=r,void 0!==t&&""!==t||(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}},{key:"curWidth",value:function(){var e=this.lines[this.current];return void 0===e?0:e.width}},{key:"append",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,e,t)}},{key:"newLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,e,t),this.current++}},{key:"determineLineHeights",value:function(){for(var e=0;e<this.lines.length;e++){var t=this.lines[e],r=0;if(void 0!==t.blocks)for(var n=0;n<t.blocks.length;n++){var i=t.blocks[n];r<i.height&&(r=i.height)}t.height=r}}},{key:"determineLabelSize",value:function(){for(var e=0,t=0,r=0;r<this.lines.length;r++){var n=this.lines[r];n.width>e&&(e=n.width),t+=n.height}this.width=e,this.height=t}},{key:"removeEmptyBlocks",value:function(){for(var e=[],t=0;t<this.lines.length;t++){var r=this.lines[t];if(0!==r.blocks.length&&(t!==this.lines.length-1||0!==r.width)){var n={};assign$2$2(n,r),n.blocks=[];for(var i=void 0,o=[],a=0;a<r.blocks.length;a++){var s=r.blocks[a];0!==s.width?o.push(s):void 0===i&&(i=s)}0===o.length&&void 0!==i&&o.push(i),n.blocks=o,e.push(n)}}return e}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}]),e}(),tagPattern={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/\_/,"`":/`/,afterBold:/[^\*]/,afterItal:/[^_]/,afterMono:/[^`]/},MarkupAccumulator=function(){function e(t){classCallCheck$1(this,e),this.text=t,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return createClass$1(e,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(e){" "===e&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=e&&(this.buffer+=e)}},{key:"parseWS",value:function(e){return!!/[ \t]/.test(e)&&(this.mono?this.add(e):this.spacing=!0,!0)}},{key:"setTag",value:function(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}},{key:"unsetTag",value:function(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(e,t){return!(this.mono||this[e]||!this.match(t))&&(this.setTag(e),!0)}},{key:"match",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.prepareRegExp(e),n=slicedToArray$1(r,2),i=n[0],o=n[1],a=i.test(this.text.substr(this.position,o));return a&&t&&(this.position+=o-1),a}},{key:"parseEndTag",value:function(e,t,r){var n=this.mod()===e;return!(!(n="mono"===e?n&&this.mono:n&&!this.mono)||!this.match(t))&&(void 0!==r?(this.position===this.text.length-1||this.match(r,!1))&&this.unsetTag(e):this.unsetTag(e),!0)}},{key:"replace",value:function(e,t){return!!this.match(e)&&(this.add(t),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(e){var t,r;if(e instanceof RegExp)r=e,t=1;else{var n=tagPattern[e];r=void 0!==n?n:new RegExp(e),t=e.length}return[r,t]}}]),e}(),LabelSplitter=function(){function e(t,r,n,i){var o=this;classCallCheck$1(this,e),this.ctx=t,this.parent=r,this.selected=n,this.hover=i;this.lines=new LabelAccumulator((function(e,r){if(void 0===e)return 0;var a=o.parent.getFormattingValues(t,n,i,r),s=0;""!==e&&(s=o.ctx.measureText(e).width);return{width:s,values:a}}))}return createClass$1(e,[{key:"process",value:function(e){if(!ComponentUtil.isValidLabel(e))return this.lines.finalize();var t=this.parent.fontOptions;e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var r=String(e).split("\n"),n=r.length;if(t.multi)for(var i=0;i<n;i++){var o=this.splitBlocks(r[i],t.multi);if(void 0!==o)if(0!==o.length){if(t.maxWdt>0)for(var a=0;a<o.length;a++){var s=o[a].mod,l=o[a].text;this.splitStringIntoLines(l,s,!0)}else for(var u=0;u<o.length;u++){var c=o[u].mod,h=o[u].text;this.lines.append(h,c)}this.lines.newLine()}else this.lines.newLine("")}else if(t.maxWdt>0)for(var d=0;d<n;d++)this.splitStringIntoLines(r[d]);else for(var f=0;f<n;f++)this.lines.newLine(r[f]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(e){var t="none";return"markdown"===e||"md"===e?t="markdown":!0!==e&&"html"!==e||(t="html"),t}},{key:"splitHtmlBlocks",value:function(e){for(var t=new MarkupAccumulator(e),r=function(e){return!!/&/.test(e)&&(t.replace(t.text,"&lt;","<")||t.replace(t.text,"&amp;","&")||t.add("&"),!0)};t.position<t.text.length;){var n=t.text.charAt(t.position);t.parseWS(n)||/</.test(n)&&(t.parseStartTag("bold","<b>")||t.parseStartTag("ital","<i>")||t.parseStartTag("mono","<code>")||t.parseEndTag("bold","</b>")||t.parseEndTag("ital","</i>")||t.parseEndTag("mono","</code>"))||r(n)||t.add(n),t.position++}return t.emitBlock(),t.blocks}},{key:"splitMarkdownBlocks",value:function(e){for(var t=this,r=new MarkupAccumulator(e),n=!0,i=function(e){return!!/\\/.test(e)&&(r.position<t.text.length+1&&(r.position++,e=t.text.charAt(r.position),/ \t/.test(e)?r.spacing=!0:(r.add(e),n=!1)),!0)};r.position<r.text.length;){var o=r.text.charAt(r.position);r.parseWS(o)||i(o)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(o),n=!1),r.position++}return r.emitBlock(),r.blocks}},{key:"splitBlocks",value:function(e,t){var r=this.decodeMarkupSystem(t);return"none"===r?[{text:e,mod:"normal"}]:"markdown"===r?this.splitMarkdownBlocks(e):"html"===r?this.splitHtmlBlocks(e):void 0}},{key:"overMaxWidth",value:function(e){var t=this.ctx.measureText(e).width;return this.lines.curWidth()+t>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(e){for(var t="",r=0;r<e.length;){var n=t+(""===t?"":" ")+e[r];if(this.overMaxWidth(n))break;t=n,r++}return r}},{key:"getLongestFitWord",value:function(e){for(var t=0;t<e.length&&!this.overMaxWidth(slice$5$1(e).call(e,0,t));)t++;return t}},{key:"splitStringIntoLines",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,t);for(var n=(e=(e=e.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");n.length>0;){var i=this.getLongestFit(n);if(0===i){var o=n[0],a=this.getLongestFitWord(o);this.lines.newLine(slice$5$1(o).call(o,0,a),t),n[0]=slice$5$1(o).call(o,a)}else{var s=i;" "===n[i-1]?i--:" "===n[s]&&s++;var l=slice$5$1(n).call(n,0,i).join("");i==n.length&&r?this.lines.append(l,t):this.lines.newLine(l,t),n=slice$5$1(n).call(n,s)}}}}]),e}(),multiFontStyle=["bold","ital","boldital","mono"],Label=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];classCallCheck$1(this,e),this.body=t,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return createClass$1(e,[{key:"setOptions",value:function(e){if(this.elementOptions=e,this.initFontOptions(e.font),ComponentUtil.isValidLabel(e.label)?this.labelDirty=!0:e.label=void 0,void 0!==e.font&&null!==e.font)if("string"==typeof e.font)this.baseSize=this.fontOptions.size;else if("object"===_typeof_1$1(e.font)){var t=e.font.size;void 0!==t&&(this.baseSize=t)}}},{key:"initFontOptions",value:function(t){var r=this;forEach$3$1(multiFontStyle,(function(e){r.fontOptions[e]={}})),e.parseFontString(this.fontOptions,t)?this.fontOptions.vadjust=0:forEach$3$1(t,(function(e,t){null!=e&&"object"!==_typeof_1$1(e)&&(r.fontOptions[t]=e)}))}},{key:"constrain",value:function(e){var t={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},r=topMost(e,"widthConstraint");if("number"==typeof r)t.maxWdt=Number(r),t.minWdt=Number(r);else if("object"===_typeof_1$1(r)){var n=topMost(e,["widthConstraint","maximum"]);"number"==typeof n&&(t.maxWdt=Number(n));var i=topMost(e,["widthConstraint","minimum"]);"number"==typeof i&&(t.minWdt=Number(i))}var o=topMost(e,"heightConstraint");if("number"==typeof o)t.minHgt=Number(o);else if("object"===_typeof_1$1(o)){var a=topMost(e,["heightConstraint","minimum"]);"number"==typeof a&&(t.minHgt=Number(a));var s=topMost(e,["heightConstraint","valign"]);"string"==typeof s&&("top"!==s&&"bottom"!==s||(t.valign=s))}return t}},{key:"update",value:function(e,t){this.setOptions(e,!0),this.propagateFonts(t),deepExtend$1(this.fontOptions,this.constrain(t)),this.fontOptions.chooser=ComponentUtil.choosify("label",t)}},{key:"adjustSizes",value:function(e){var t=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=t,this.fontOptions.minWdt-=t);var r=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=r)}},{key:"addFontOptionsToPile",value:function(e,t){for(var r=0;r<t.length;++r)this.addFontToPile(e,t[r])}},{key:"addFontToPile",value:function(e,t){if(void 0!==t&&void 0!==t.font&&null!==t.font){var r=t.font;e.push(r)}}},{key:"getBasicOptions",value:function(t){for(var r={},n=0;n<t.length;++n){var i=t[n],o={};e.parseFontString(o,i)&&(i=o),forEach$3$1(i,(function(e,t){void 0!==e&&(r.hasOwnProperty(t)||(-1!==indexOf$3(multiFontStyle).call(multiFontStyle,t)?r[t]={}:r[t]=e))}))}return r}},{key:"getFontOption",value:function(t,r,n){for(var i,o=0;o<t.length;++o){var a=t[o];if(a.hasOwnProperty(r)){if(null==(i=a[r]))continue;var s={};if(e.parseFontString(s,i)&&(i=s),i.hasOwnProperty(n))return i[n]}}if(this.fontOptions.hasOwnProperty(n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}},{key:"getFontOptions",value:function(e,t){for(var r={},n=["color","size","face","mod","vadjust"],i=0;i<n.length;++i){var o=n[i];r[o]=this.getFontOption(e,t,o)}return r}},{key:"propagateFonts",value:function(e){var t=this,r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(var n=function(e){var n=multiFontStyle[e],i=t.fontOptions[n];forEach$3$1(t.getFontOptions(r,n),(function(e,t){i[t]=e})),i.size=Number(i.size),i.vadjust=Number(i.vadjust)},i=0;i<multiFontStyle.length;++i)n(i)}},{key:"draw",value:function(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,n,i,t,r,o),this._drawBackground(e),this._drawText(e,t,this.size.yLine,o,a))}}},{key:"_drawBackground",value:function(e){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){e.fillStyle=this.fontOptions.background;var t=this.getSize();e.fillRect(t.left,t.top,t.width,t.height)}}},{key:"_drawText",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",i=arguments.length>4?arguments[4]:void 0,o=this._setAlignment(e,t,r,n),a=slicedToArray$1(o,2);t=a[0],r=a[1],e.textAlign="left",t-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(r-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(r+=(this.size.height-this.size.labelHeight)/2));for(var s=0;s<this.lineCount;s++){var l=this.lines[s];if(l&&l.blocks){var u=0;this.isEdgeLabel||"center"===this.fontOptions.align?u+=(this.size.width-l.width)/2:"right"===this.fontOptions.align&&(u+=this.size.width-l.width);for(var c=0;c<l.blocks.length;c++){var h=l.blocks[c];e.font=h.font;var d=this._getColor(h.color,i,h.strokeColor),f=slicedToArray$1(d,2),p=f[0],g=f[1];h.strokeWidth>0&&(e.lineWidth=h.strokeWidth,e.strokeStyle=g,e.lineJoin="round"),e.fillStyle=p,h.strokeWidth>0&&e.strokeText(h.text,t+u,r+h.vadjust),e.fillText(h.text,t+u,r+h.vadjust),u+=h.width}r+=l.height}}}},{key:"_setAlignment",value:function(e,t,r,n){if(this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf){t=0,r=0;"top"===this.fontOptions.align?(e.textBaseline="alphabetic",r-=4):"bottom"===this.fontOptions.align?(e.textBaseline="hanging",r+=4):e.textBaseline="middle"}else e.textBaseline=n;return[t,r]}},{key:"_getColor",value:function(e,t,r){var n=e||"#000000",i=r||"#ffffff";if(t<=this.elementOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-t)));n=overrideOpacity(n,o),i=overrideOpacity(i,o)}return[n,i]}},{key:"getTextSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(e,t,r),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var e=this.size.left,t=this.size.top-1;if(this.isEdgeLabel){var r=.5*-this.size.width;switch(this.fontOptions.align){case"middle":e=r,t=.5*-this.size.height;break;case"top":e=r,t=-(this.size.height+2);break;case"bottom":e=r,t=2}}return{left:e,top:t,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(e,t,r),this.size.left=n-.5*this.size.width,this.size.top=i-.5*this.size.height,this.size.yLine=i+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===o&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(e,t,r,n){var i=function(e,t,r){return"normal"===t?"mod"===r?"":e[r]:void 0!==e[t][r]?e[t][r]:e[r]},o={color:i(this.fontOptions,n,"color"),size:i(this.fontOptions,n,"size"),face:i(this.fontOptions,n,"face"),mod:i(this.fontOptions,n,"mod"),vadjust:i(this.fontOptions,n,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(t||r)&&("normal"===n&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?o.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(o,this.elementOptions.id,t,r));var a="";return void 0!==o.mod&&""!==o.mod&&(a+=o.mod+" "),a+=o.size+"px "+o.face,e.font=a.replace(/"/g,""),o.font=e.font,o.height=o.size,o}},{key:"differentState",value:function(e,t){return e!==this.selectedState||t!==this.hoverState}},{key:"_processLabelText",value:function(e,t,r,n){return new LabelSplitter(e,this,t,r).process(n)}},{key:"_processLabel",value:function(e,t,r){if(!1!==this.labelDirty||this.differentState(t,r)){var n=this._processLabelText(e,t,r,this.elementOptions.label);this.fontOptions.minWdt>0&&n.width<this.fontOptions.minWdt&&(n.width=this.fontOptions.minWdt),this.size.labelHeight=n.height,this.fontOptions.minHgt>0&&n.height<this.fontOptions.minHgt&&(n.height=this.fontOptions.minHgt),this.lines=n.lines,this.lineCount=n.lines.length,this.size.width=n.width,this.size.height=n.height,this.selectedState=t,this.hoverState=r,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(e,t){if(!t||"string"!=typeof t)return!1;var r=t.split(" ");return e.size=+r[0].replace("px",""),e.face=r[1],e.color=r[2],!0}}]),e}(),nativeConstruct$1=getBuiltIn$1("Reflect","construct"),NEW_TARGET_BUG$1=fails$1((function(){function e(){}return!(nativeConstruct$1((function(){}),[],e)instanceof e)})),ARGS_BUG$1=!fails$1((function(){nativeConstruct$1((function(){}))})),FORCED$4$1=NEW_TARGET_BUG$1||ARGS_BUG$1;_export$1({target:"Reflect",stat:!0,forced:FORCED$4$1,sham:FORCED$4$1},{construct:function(e,t){aFunction$2(e),anObject$1(t);var r=arguments.length<3?e:aFunction$2(arguments[2]);if(ARGS_BUG$1&&!NEW_TARGET_BUG$1)return nativeConstruct$1(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(functionBind$1.apply(e,n))}var i=r.prototype,o=objectCreate$2(isObject$3(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return isObject$3(a)?a:o}});var construct$1$1=path$1.Reflect.construct,construct$2$1=construct$1$1,construct$3$1=construct$2$1,create$3$1=create$5,create$4$1=create$3$1;_export$1({target:"Object",stat:!0},{setPrototypeOf:objectSetPrototypeOf$1});var setPrototypeOf$4=path$1.Object.setPrototypeOf,setPrototypeOf$1$1=setPrototypeOf$4,setPrototypeOf$2$1=setPrototypeOf$1$1,setPrototypeOf$3$1=createCommonjsModule$2((function(e){function t(r,n){return e.exports=t=setPrototypeOf$2$1||function(e,t){return e.__proto__=t,e},t(r,n)}e.exports=t}));function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=create$4$1(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&setPrototypeOf$3$1(e,t)}var inherits$1=_inherits$1;function _assertThisInitialized$1$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var assertThisInitialized$1=_assertThisInitialized$1$1;function _possibleConstructorReturn$1(e,t){return!t||"object"!==_typeof_1$1(t)&&"function"!=typeof t?assertThisInitialized$1(e):t}var possibleConstructorReturn$1=_possibleConstructorReturn$1,getPrototypeOf$3$1=getPrototypeOf$6,getPrototypeOf$4$1=getPrototypeOf$3$1,getPrototypeOf$5$1=createCommonjsModule$2((function(e){function t(r){return e.exports=t=setPrototypeOf$2$1?getPrototypeOf$4$1:function(e){return e.__proto__||getPrototypeOf$4$1(e)},t(r)}e.exports=t})),arrayFill=function(e){for(var t=toObject$1(this),r=toLength$1(t.length),n=arguments.length,i=toAbsoluteIndex$1(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,a=void 0===o?r:toAbsoluteIndex$1(o,r);a>i;)t[i++]=e;return t};_export$1({target:"Array",proto:!0},{fill:arrayFill});var fill=entryVirtual$1("Array").fill,ArrayPrototype$b$1=Array.prototype,fill_1=function(e){var t=e.fill;return e===ArrayPrototype$b$1||e instanceof Array&&t===ArrayPrototype$b$1.fill?fill:t},fill$1=fill_1,fill$2=fill$1,NodeBase=function(){function e(t,r,n){classCallCheck$1(this,e),this.body=r,this.labelModule=n,this.setOptions(t),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return createClass$1(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"_setMargins",value:function(e){this.margin={},this.options.margin&&("object"==_typeof_1$1(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(e,t){var r=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+r}},{key:"enableShadow",value:function(e,t){t.shadow&&(e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowSize,e.shadowOffsetX=t.shadowX,e.shadowOffsetY=t.shadowY)}},{key:"disableShadow",value:function(e,t){t.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(e,t){if(!1!==t.borderDashes)if(void 0!==e.setLineDash){var r=t.borderDashes;!0===r&&(r=[5,15]),e.setLineDash(r)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,t.borderDashes=!1}},{key:"disableBorderDashes",value:function(e,t){!1!==t.borderDashes&&(void 0!==e.setLineDash?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,t.borderDashes=!1))}},{key:"needsRefresh",value:function(e,t){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(e,t)}},{key:"initContextForDraw",value:function(e,t){var r=t.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,r),e.strokeStyle=t.borderColor,e.fillStyle=t.color}},{key:"performStroke",value:function(e,t){var r=t.borderWidth/this.body.view.scale;e.save(),r>0&&(this.enableBorderDashes(e,t),e.stroke(),this.disableBorderDashes(e,t)),e.restore()}},{key:"performFill",value:function(e,t){e.save(),e.fillStyle=t.color,this.enableShadow(e,t),fill$2(e).call(e),this.disableShadow(e,t),e.restore(),this.performStroke(e,t)}},{key:"_addBoundingBoxMargin",value:function(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}},{key:"_updateBoundingBox",value:function(e,t,r,n,i){void 0!==r&&this.resize(r,n,i),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(e,t,r,n,i){this._updateBoundingBox(e,t,r,n,i)}},{key:"getDimensionsFromLabel",value:function(e,t,r){this.textSize=this.labelModule.getTextSize(e,t,r);var n=this.textSize.width,i=this.textSize.height;return 0===n&&(n=14,i=14),{width:n,height:i}}}]),e}();function _createSuper$2(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$2()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Box=function(e){inherits$1(r,NodeBase);var t=_createSuper$2(r);function r(e,n,i){var o;return classCallCheck$1(this,r),(o=t.call(this,e,n,i))._setMargins(i),o}return createClass$1(r,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(t,r)){var n=this.getDimensionsFromLabel(e,t,r);this.width=n.width+this.margin.right+this.margin.left,this.height=n.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(e,t,r,n,i,o){this.resize(e,n,i),this.left=t-this.width/2,this.top=r-this.height/2,this.initContextForDraw(e,o),drawRoundRect(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(t,r,e,n,i),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,i)}},{key:"updateBoundingBox",value:function(e,t,r,n,i){this._updateBoundingBox(e,t,r,n,i);var o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}},{key:"distanceToBorder",value:function(e,t){e&&this.resize(e);var r=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+r}}]),r}();function _createSuper$1$1(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$1$1()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$1$1(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var CircleImageBase=function(e){inherits$1(r,NodeBase);var t=_createSuper$1$1(r);function r(e,n,i){var o;return classCallCheck$1(this,r),(o=t.call(this,e,n,i)).labelOffset=0,o.selected=!1,o}return createClass$1(r,[{key:"setOptions",value:function(e,t,r){this.options=e,void 0===t&&void 0===r||this.setImages(t,r)}},{key:"setImages",value:function(e,t){t&&this.selected?(this.imageObj=t,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=t)}},{key:"switchImages",value:function(e){var t=e&&!this.selected||!e&&this.selected;if(this.selected=e,void 0!==this.imageObjAlt&&t){var r=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=r}}},{key:"_getImagePadding",value:function(){var e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var t=this.options.imagePadding;"object"==_typeof_1$1(t)?(e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left):(e.top=t,e.right=t,e.bottom=t,e.left=t)}return e}},{key:"_resizeImage",value:function(){var e,t;if(!1===this.options.shapeProperties.useImageSize){var r=1,n=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?r=this.imageObj.width/this.imageObj.height:n=this.imageObj.height/this.imageObj.width),e=2*this.options.size*r,t=2*this.options.size*n}else{var i=this._getImagePadding();e=this.imageObj.width+i.left+i.right,t=this.imageObj.height+i.top+i.bottom}this.width=e,this.height=t,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(e,t,r,n){this.initContextForDraw(e,n),drawCircle(e,t,r,n.size),this.performFill(e,n)}},{key:"_drawImageAtPosition",value:function(e,t){if(0!=this.imageObj.width){e.globalAlpha=void 0!==t.opacity?t.opacity:1,this.enableShadow(e,t);var r=1;!0===this.options.shapeProperties.interpolation&&(r=this.imageObj.width/this.width/this.body.view.scale);var n=this._getImagePadding(),i=this.left+n.left,o=this.top+n.top,a=this.width-n.left-n.right,s=this.height-n.top-n.bottom;this.imageObj.drawImageAtPosition(e,r,i,o,a,s),this.disableShadow(e,t)}}},{key:"_drawImageLabel",value:function(e,t,r,n,i){var o,a=0;if(void 0!==this.height){a=.5*this.height;var s=this.labelModule.getTextSize(e,n,i);s.lineCount>=1&&(a+=s.height/2)}o=r+a,this.options.label&&(this.labelOffset=a),this.labelModule.draw(e,t,o,n,i,"hanging")}}]),r}();function _createSuper$2$1(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$2$1()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$2$1(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Circle=function(e){inherits$1(r,CircleImageBase);var t=_createSuper$2$1(r);function r(e,n,i){var o;return classCallCheck$1(this,r),(o=t.call(this,e,n,i))._setMargins(i),o}return createClass$1(r,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(t,r)){var n=this.getDimensionsFromLabel(e,t,r),i=Math.max(n.width+this.margin.right+this.margin.left,n.height+this.margin.top+this.margin.bottom);this.options.size=i/2,this.width=i,this.height=i,this.radius=this.width/2}}},{key:"draw",value:function(e,t,r,n,i,o){this.resize(e,n,i),this.left=t-this.width/2,this.top=r-this.height/2,this._drawRawCircle(e,t,r,o),this.updateBoundingBox(t,r),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,r,n,i)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size}},{key:"distanceToBorder",value:function(e,t){return e&&this.resize(e),.5*this.width}}]),r}();function _createSuper$3(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$3()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var CircularImage=function(e){inherits$1(r,CircleImageBase);var t=_createSuper$3(r);function r(e,n,i,o,a){var s;return classCallCheck$1(this,r),(s=t.call(this,e,n,i)).setImages(o,a),s}return createClass$1(r,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height;if(n){var i=2*this.options.size;return this.width=i,this.height=i,void(this.radius=.5*this.width)}this.needsRefresh(t,r)&&this._resizeImage()}},{key:"draw",value:function(e,t,r,n,i,o){this.switchImages(n),this.resize(),this.left=t-this.width/2,this.top=r-this.height/2,this._drawRawCircle(e,t,r,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,t,r,n,i),this.updateBoundingBox(t,r)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(e,t){return e&&this.resize(e),.5*this.width}}]),r}();function _createSuper$4(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$4()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$4(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Database=function(e){inherits$1(r,NodeBase);var t=_createSuper$4(r);function r(e,n,i){var o;return classCallCheck$1(this,r),(o=t.call(this,e,n,i))._setMargins(i),o}return createClass$1(r,[{key:"resize",value:function(e,t,r){if(this.needsRefresh(t,r)){var n=this.getDimensionsFromLabel(e,t,r).width+this.margin.right+this.margin.left;this.width=n,this.height=n,this.radius=this.width/2}}},{key:"draw",value:function(e,t,r,n,i,o){this.resize(e,n,i),this.left=t-this.width/2,this.top=r-this.height/2,this.initContextForDraw(e,o),drawDatabase(e,t-this.width/2,r-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(t,r,e,n,i),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,i)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$5(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$5()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$5(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var ShapeBase=function(e){inherits$1(r,NodeBase);var t=_createSuper$5(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(t,r)){this.labelModule.getTextSize(e,t,r);var i=2*n.size;this.width=i,this.height=i,this.radius=.5*this.width}}},{key:"_drawShape",value:function(e,t,r,n,i,o,a,s){if(this.resize(e,o,a,s),this.left=n-this.width/2,this.top=i-this.height/2,this.initContextForDraw(e,s),getShape(t)(e,n,i,s.size),this.performFill(e,s),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,n,i)),void 0!==this.options.label){this.labelModule.calculateLabelSize(e,o,a,n,i,"hanging");var l=i+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,n,l,o,a,"hanging")}this.updateBoundingBox(n,i)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),r}();function _createSuper$6(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$6()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$6(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Diamond=function(e){inherits$1(r,ShapeBase);var t=_createSuper$6(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"draw",value:function(e,t,r,n,i,o){this._drawShape(e,"diamond",4,t,r,n,i,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$7(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$7()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$7(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Dot=function(e){inherits$1(r,ShapeBase);var t=_createSuper$7(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"draw",value:function(e,t,r,n,i,o){this._drawShape(e,"circle",2,t,r,n,i,o)}},{key:"distanceToBorder",value:function(e,t){return e&&this.resize(e),this.options.size}}]),r}();function _createSuper$8(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$8()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$8(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Ellipse=function(e){inherits$1(r,NodeBase);var t=_createSuper$8(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(t,r)){var n=this.getDimensionsFromLabel(e,t,r);this.height=2*n.height,this.width=n.width+n.height,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,r,n,i,o){this.resize(e,n,i),this.left=t-.5*this.width,this.top=r-.5*this.height,this.initContextForDraw(e,o),drawEllipse(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(t,r,e,n,i),this.labelModule.draw(e,t,r,n,i)}},{key:"distanceToBorder",value:function(e,t){e&&this.resize(e);var r=.5*this.width,n=.5*this.height,i=Math.sin(t)*r,o=Math.cos(t)*n;return r*n/Math.sqrt(i*i+o*o)}}]),r}();function _createSuper$9(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$9()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$9(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Icon=function(e){inherits$1(r,NodeBase);var t=_createSuper$9(r);function r(e,n,i){var o;return classCallCheck$1(this,r),(o=t.call(this,e,n,i))._setMargins(i),o}return createClass$1(r,[{key:"resize",value:function(e,t,r){this.needsRefresh(t,r)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(e,t,r,n,i,o){if(this.resize(e,n,i),this.options.icon.size=this.options.icon.size||50,this.left=t-this.width/2,this.top=r-this.height/2,this._icon(e,t,r,n,i,o),void 0!==this.options.label){this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,r+this.height/2+5,n)}this.updateBoundingBox(t,r)}},{key:"updateBoundingBox",value:function(e,t){if(this.boundingBox.top=t-.5*this.options.icon.size,this.boundingBox.left=e-.5*this.options.icon.size,this.boundingBox.right=e+.5*this.options.icon.size,this.boundingBox.bottom=t+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5)}}},{key:"_icon",value:function(e,t,r,n,i,o){var a=Number(this.options.icon.size);void 0!==this.options.icon.code?(e.font=[null!=this.options.icon.weight?this.options.icon.weight:n?"bold":"",(null!=this.options.icon.weight&&n?5:0)+a+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,t,r),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$a(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$a()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$a(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Image$1=function(e){inherits$1(r,CircleImageBase);var t=_createSuper$a(r);function r(e,n,i,o,a){var s;return classCallCheck$1(this,r),(s=t.call(this,e,n,i)).setImages(o,a),s}return createClass$1(r,[{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height;if(n){var i=2*this.options.size;return this.width=i,void(this.height=i)}this.needsRefresh(t,r)&&this._resizeImage()}},{key:"draw",value:function(e,t,r,n,i,o){if(e.save(),this.switchImages(n),this.resize(),this.left=t-this.width/2,this.top=r-this.height/2,!0===this.options.shapeProperties.useBorderWithImage){var a=this.options.borderWidth,s=this.options.borderWidthSelected||2*this.options.borderWidth,l=(n?s:a)/this.body.view.scale;e.lineWidth=Math.min(this.width,l),e.beginPath();var u=n?this.options.color.highlight.border:i?this.options.color.hover.border:this.options.color.border,c=n?this.options.color.highlight.background:i?this.options.color.hover.background:this.options.color.background;void 0!==o.opacity&&(u=overrideOpacity(u,o.opacity),c=overrideOpacity(c,o.opacity)),e.strokeStyle=u,e.fillStyle=c,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),fill$2(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,t,r,n,i),this.updateBoundingBox(t,r),e.restore()}},{key:"updateBoundingBox",value:function(e,t){this.resize(),this._updateBoundingBox(e,t),void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$b(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$b()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$b(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Square=function(e){inherits$1(r,ShapeBase);var t=_createSuper$b(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"draw",value:function(e,t,r,n,i,o){this._drawShape(e,"square",2,t,r,n,i,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$c(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$c()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$c(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Hexagon=function(e){inherits$1(r,ShapeBase);var t=_createSuper$c(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"draw",value:function(e,t,r,n,i,o){this._drawShape(e,"hexagon",4,t,r,n,i,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$d(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$d()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$d(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Star=function(e){inherits$1(r,ShapeBase);var t=_createSuper$d(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"draw",value:function(e,t,r,n,i,o){this._drawShape(e,"star",4,t,r,n,i,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$e(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$e()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$e(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Text=function(e){inherits$1(r,NodeBase);var t=_createSuper$e(r);function r(e,n,i){var o;return classCallCheck$1(this,r),(o=t.call(this,e,n,i))._setMargins(i),o}return createClass$1(r,[{key:"resize",value:function(e,t,r){this.needsRefresh(t,r)&&(this.textSize=this.labelModule.getTextSize(e,t,r),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(e,t,r,n,i,o){this.resize(e,n,i),this.left=t-this.width/2,this.top=r-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,i),this.disableShadow(e,o),this.updateBoundingBox(t,r,e,n,i)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$f(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$f()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$f(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Triangle=function(e){inherits$1(r,ShapeBase);var t=_createSuper$f(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"draw",value:function(e,t,r,n,i,o){this._drawShape(e,"triangle",3,t,r,n,i,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}();function _createSuper$g(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$g()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$g(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var TriangleDown=function(e){inherits$1(r,ShapeBase);var t=_createSuper$g(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"draw",value:function(e,t,r,n,i,o){this._drawShape(e,"triangleDown",3,t,r,n,i,o)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),r}(),$stringify$1$1=getBuiltIn$1("JSON","stringify"),re$1=/[\uD800-\uDFFF]/g,low$1=/^[\uD800-\uDBFF]$/,hi$1=/^[\uDC00-\uDFFF]$/,fix$1=function(e,t,r){var n=r.charAt(t-1),i=r.charAt(t+1);return low$1.test(e)&&!hi$1.test(i)||hi$1.test(e)&&!low$1.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},FORCED$5$1=fails$1((function(){return'"\\udf06\\ud834"'!==$stringify$1$1("\udf06\ud834")||'"\\udead"'!==$stringify$1$1("\udead")}));$stringify$1$1&&_export$1({target:"JSON",stat:!0,forced:FORCED$5$1},{stringify:function(e,t,r){var n=$stringify$1$1.apply(null,arguments);return"string"==typeof n?n.replace(re$1,fix$1):n}}),path$1.JSON||(path$1.JSON={stringify:JSON.stringify});var stringify$3=function(e,t,r){return path$1.JSON.stringify.apply(null,arguments)},stringify$1$1=stringify$3,stringify$2$1=stringify$1$1,errorFound=!1,allOptions,printStyle="background: #FFeeee; color: #dd0000",Validator=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"validate",value:function(t,r,n){errorFound=!1,allOptions=r;var i=r;return void 0!==n&&(i=r[n]),e.parse(t,i,[]),errorFound}},{key:"parse",value:function(t,r,n){for(var i in t)t.hasOwnProperty(i)&&e.check(i,t,r,n)}},{key:"check",value:function(t,r,n,i){if(void 0!==n[t]||void 0!==n.__any__){var o=t,a=!0;void 0===n[t]&&void 0!==n.__any__&&(o="__any__",a="object"===e.getType(r[t]));var s=n[o];a&&void 0!==s.__type__&&(s=s.__type__),e.checkFields(t,r,n,o,s,i)}else e.getSuggestion(t,n,i)}},{key:"checkFields",value:function(t,r,n,i,o,a){var s=function(r){console.log("%c"+r+e.printLocation(a,t),printStyle)},l=e.getType(r[t]),u=o[l];void 0!==u?"array"===e.getType(u)&&-1===indexOf$3(u).call(u,r[t])?(s('Invalid option detected in "'+t+'". Allowed values are:'+e.print(u)+' not "'+r[t]+'". '),errorFound=!0):"object"===l&&"__any__"!==i&&(a=copyAndExtendArray(a,t),e.parse(r[t],n[i],a)):void 0===o.any&&(s('Invalid type received for "'+t+'". Expected: '+e.print(keys$3$1(o))+". Received ["+l+'] "'+r[t]+'"'),errorFound=!0)}},{key:"getType",value:function(e){var t=_typeof_1$1(e);return"object"===t?null===e?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":isArray$5$1(e)?"array":e instanceof Date?"date":void 0!==e.nodeType?"dom":!0===e._isAMomentObject?"moment":"object":"number"===t?"number":"boolean"===t?"boolean":"string"===t?"string":void 0===t?"undefined":t}},{key:"getSuggestion",value:function(t,r,n){var i,o=e.findInOptions(t,r,n,!1),a=e.findInOptions(t,allOptions,[],!0);i=void 0!==o.indexMatch?" in "+e.printLocation(o.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n':a.distance<=4&&o.distance>a.distance?" in "+e.printLocation(o.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(a.path,a.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+e.printLocation(o.path,t):". Did you mean one of these: "+e.print(keys$3$1(r))+e.printLocation(n,t),console.log('%cUnknown option detected: "'+t+'"'+i,printStyle),errorFound=!0}},{key:"findInOptions",value:function(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=1e9,a="",s=[],l=t.toLowerCase(),u=void 0;for(var c in r){var h=void 0;if(void 0!==r[c].__type__&&!0===i){var d=e.findInOptions(t,r[c],copyAndExtendArray(n,c));o>d.distance&&(a=d.closestMatch,s=d.path,o=d.distance,u=d.indexMatch)}else{var f;-1!==indexOf$3(f=c.toLowerCase()).call(f,l)&&(u=c),o>(h=e.levenshteinDistance(t,c))&&(a=c,s=copyArray$2(n),o=h)}}return{closestMatch:a,path:s,distance:o,indexMatch:u}}},{key:"printLocation",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n",n="\n\n"+r+"options = {\n",i=0;i<e.length;i++){for(var o=0;o<i+1;o++)n+="  ";n+=e[i]+": {\n"}for(var a=0;a<e.length+1;a++)n+="  ";n+=t+"\n";for(var s=0;s<e.length+1;s++){for(var l=0;l<e.length-s;l++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(e){return stringify$2$1(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var r,n,i=[];for(r=0;r<=t.length;r++)i[r]=[r];for(n=0;n<=e.length;n++)i[0][n]=n;for(r=1;r<=t.length;r++)for(n=1;n<=e.length;n++)t.charAt(r-1)==e.charAt(n-1)?i[r][n]=i[r-1][n-1]:i[r][n]=Math.min(i[r-1][n-1]+1,Math.min(i[r][n-1]+1,i[r-1][n]+1));return i[t.length][e.length]}}]),e}();function ownKeys$1$1(e,t){var r=keys$3$1(e);if(getOwnPropertySymbols$2$1){var n=getOwnPropertySymbols$2$1(e);t&&(n=filter$2$2(n).call(n,(function(t){return getOwnPropertyDescriptor$3$1(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)forEach$2$1(r=ownKeys$1$1(Object(n),!0)).call(r,(function(t){defineProperty$6$1(e,t,n[t])}));else if(getOwnPropertyDescriptors$2$1)defineProperties$1$1(e,getOwnPropertyDescriptors$2$1(n));else{var i;forEach$2$1(i=ownKeys$1$1(Object(n))).call(i,(function(t){defineProperty$3$1(e,t,getOwnPropertyDescriptor$3$1(n,t))}))}}return e}var Node=function(){function e(t,r,n,i,o,a){classCallCheck$1(this,e),this.options=bridgeObject(o),this.globalOptions=o,this.defaultOptions=a,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new Label(this.body,this.options,!1),this.setOptions(t)}return createClass$1(e,[{key:"attachEdge",value:function(e){var t;-1===indexOf$3(t=this.edges).call(t,e)&&this.edges.push(e)}},{key:"detachEdge",value:function(e){var t,r,n=indexOf$3(t=this.edges).call(t,e);-1!=n&&splice$2$1(r=this.edges).call(r,n,1)}},{key:"setOptions",value:function(t){var r=this.options.shape;if(t){if(void 0!==t.color&&(this._localColor=t.color),void 0!==t.id&&(this.id=t.id),void 0===this.id)throw new Error("Node must have an id");e.checkMass(t,this.id),void 0!==t.x&&(null===t.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=_parseInt$2(t.x),this.predefinedPosition=!0)),void 0!==t.y&&(null===t.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=_parseInt$2(t.y),this.predefinedPosition=!0)),void 0!==t.size&&(this.baseSize=t.size),void 0!==t.value&&(t.value=_parseFloat$2(t.value)),e.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var n=[t,this.options,this.defaultOptions];return this.chooser=ComponentUtil.choosify("node",n),this._load_images(),this.updateLabelModule(t),void 0!==t.opacity&&e.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(r),void 0!==t.hidden||void 0!==t.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?!0===this.chooser?this.selected?(e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(e,this.options.id,this.selected,this.hover),!1===e.shadow&&(e.shadowColor===this.options.shadow.color&&e.shadowSize===this.options.shadow.size&&e.shadowX===this.options.shadow.x&&e.shadowY===this.options.shadow.y||(e.shadow=!0))):e.shadow=this.options.shadow.enabled,void 0!==this.options.opacity){var t=this.options.opacity;e.borderColor=overrideOpacity(e.borderColor,t),e.color=overrideOpacity(e.color,t),e.shadowColor=overrideOpacity(e.shadowColor,t)}return e}},{key:"updateLabelModule",value:function(t){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),e.updateGroupOptions(this.options,_objectSpread$1({},t,{color:t&&t.color||this._localColor||void 0}),this.grouplist);var r=this.grouplist.get(this.options.group,!1),n=[t,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new Box(this.options,this.body,this.labelModule);break;case"circle":this.shape=new Circle(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new CircularImage(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"database":this.shape=new Database(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new Diamond(this.options,this.body,this.labelModule);break;case"dot":this.shape=new Dot(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new Ellipse(this.options,this.body,this.labelModule);break;case"icon":this.shape=new Icon(this.options,this.body,this.labelModule);break;case"image":this.shape=new Image$1(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Square(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new Hexagon(this.options,this.body,this.labelModule);break;case"star":this.shape=new Star(this.options,this.body,this.labelModule);break;case"text":this.shape=new Text(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new Triangle(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new TriangleDown(this.options,this.body,this.labelModule);break;default:this.shape=new Ellipse(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(e,t){return this.shape.distanceToBorder(e,t)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(e,t,r){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(e,t,r,this.options.value),i=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.size=this.options.scaling.min+n*i}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(e){var t=this.getFormattingValues();this.shape.draw(e,this.x,this.y,this.selected,this.hover,t)}},{key:"updateBoundingBox",value:function(e){this.shape.updateBoundingBox(this.x,this.y,e)}},{key:"resize",value:function(e){var t=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,t)}},{key:"getItemsOnPoint",value:function(e){var t=[];return this.labelModule.visible()&&ComponentUtil.pointInRect(this.labelModule.getSize(),e)&&t.push({nodeId:this.id,labelId:0}),ComponentUtil.pointInRect(this.shape.boundingBox,e)&&t.push({nodeId:this.id}),t}},{key:"isOverlappingWith",value:function(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}},{key:"isBoundingBoxOverlappingWith",value:function(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}}],[{key:"checkOpacity",value:function(e){return 0<=e&&e<=1}},{key:"updateGroupOptions",value:function(t,r,n){var i;if(void 0!==n){var o=t.group;if(void 0!==r&&void 0!==r.group&&o!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof o||"string"==typeof o&&""!=o){var a=n.get(o);void 0!==a.opacity&&void 0===r.opacity&&(e.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));var s=filter$2$2(i=getOwnPropertyNames$2(r)).call(i,(function(e){return null!=r[e]}));s.push("font"),selectiveNotDeepExtend(s,t,a),t.color=parseColor(t.color)}}}},{key:"parseOptions",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=["color","fixed","shadow"];if(selectiveNotDeepExtend(a,t,r,n),e.checkMass(r),void 0!==t.opacity&&(e.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),void 0!==r.opacity&&(e.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),mergeOptions(t,r,"shadow",i),void 0!==r.color&&null!==r.color){var s=parseColor(r.color);fillIfDefined(t.color,s)}else!0===n&&null===r.color&&(t.color=bridgeObject(i.color));void 0!==r.fixed&&null!==r.fixed&&("boolean"==typeof r.fixed?(t.fixed.x=r.fixed,t.fixed.y=r.fixed):(void 0!==r.fixed.x&&"boolean"==typeof r.fixed.x&&(t.fixed.x=r.fixed.x),void 0!==r.fixed.y&&"boolean"==typeof r.fixed.y&&(t.fixed.y=r.fixed.y))),!0===n&&null===r.font&&(t.font=bridgeObject(i.font)),e.updateGroupOptions(t,r,o),void 0!==r.scaling&&mergeOptions(t.scaling,r.scaling,"label",i.scaling)}},{key:"checkMass",value:function(e,t){if(void 0!==e.mass&&e.mass<=0){var r="";void 0!==t&&(r=" in node id: "+t),console.log("%cNegative or zero mass disallowed"+r+", setting mass to 1.",printStyle),e.mass=1}}}]),e}();function _createForOfIteratorHelper$1$1(e){if(void 0===symbol$2$1||null==getIteratorMethod$1$1(e)){if(isArray$5$1(e)||(e=_unsupportedIterableToArray$2$1(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,a=!1;return{s:function(){n=getIterator$1$1(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray$2$1(e,t){var r;if(e){if("string"==typeof e)return _arrayLikeToArray$2$1(e,t);var n=slice$5$1(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?from_1$2$1(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$2$1(e,t):void 0}}function _arrayLikeToArray$2$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var NodesHandler=function(){function e(t,r,n,i){var o,a=this;if(classCallCheck$1(this,e),this.body=t,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=bind$2$1(o=this.create).call(o,this),this.nodesListeners={add:function(e,t){a.add(t.items)},update:function(e,t){a.update(t.items,t.data,t.oldData)},remove:function(e,t){a.remove(t.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,r,n){if(t===e)return.5;var i=1/(t-e);return Math.max(0,(n-e)*i)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=bridgeObject(this.defaultOptions),this.bindEventListeners()}return createClass$1(e,[{key:"bindEventListeners",value:function(){var e,t,r=this;this.body.emitter.on("refreshNodes",bind$2$1(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",bind$2$1(t=this.refresh).call(t,this)),this.body.emitter.on("destroy",(function(){forEach$3$1(r.nodesListeners,(function(e,t){r.body.data.nodes&&r.body.data.nodes.off(t,e)})),delete r.body.functions.createNode,delete r.nodesListeners.add,delete r.nodesListeners.update,delete r.nodesListeners.remove,delete r.nodesListeners}))}},{key:"setOptions",value:function(e){if(void 0!==e){if(Node.parseOptions(this.options,e),void 0!==e.opacity&&(isNan$2(e.opacity)||!_isFinite$2(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),void 0!==e.shape)for(var t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&this.body.nodes[t].updateShape();if(void 0!==e.font||void 0!==e.widthConstraint||void 0!==e.heightConstraint)for(var r=0,n=keys$3$1(this.body.nodes);r<n.length;r++){var i=n[r];this.body.nodes[i].updateLabelModule(),this.body.nodes[i].needsRefresh()}if(void 0!==e.size)for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.body.nodes[o].needsRefresh();void 0===e.hidden&&void 0===e.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.body.data.nodes;if(e instanceof DataSet||e instanceof DataView$1)this.body.data.nodes=e;else if(isArray$5$1(e))this.body.data.nodes=new DataSet,this.body.data.nodes.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new DataSet}if(r&&forEach$3$1(this.nodesListeners,(function(e,t){r.off(t,e)})),this.body.nodes={},this.body.data.nodes){var n=this;forEach$3$1(this.nodesListeners,(function(e,t){n.body.data.nodes.on(t,e)}));var i=this.body.data.nodes.getIds();this.add(i,!0)}!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=0;i<e.length;i++){t=e[i];var o=this.body.data.nodes.get(t),a=this.create(o);n.push(a),this.body.nodes[t]=a}this.layoutEngine.positionInitially(n),!1===r&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e,t,r){for(var n=this.body.nodes,i=!1,o=0;o<e.length;o++){var a=e[o],s=n[a],l=t[o];void 0!==s?s.setOptions(l)&&(i=!0):(i=!0,s=this.create(l),n[a]=s)}i||void 0===r||(i=some$2$1(t).call(t,(function(e,t){var n=r[t];return n&&n.level!==e.level}))),!0===i?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.nodes,r=0;r<e.length;r++){delete t[e[r]]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Node;return new t(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];forEach$3$1(this.body.nodes,(function(r,n){var i=e.body.data.nodes.get(n);void 0!==i&&(!0===t&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))}))}},{key:"getPositions",value:function(e){var t={};if(void 0!==e){if(!0===isArray$5$1(e)){for(var r=0;r<e.length;r++)if(void 0!==this.body.nodes[e[r]]){var n=this.body.nodes[e[r]];t[e[r]]={x:Math.round(n.x),y:Math.round(n.y)}}}else if(void 0!==this.body.nodes[e]){var i=this.body.nodes[e];t[e]={x:Math.round(i.x),y:Math.round(i.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];t[this.body.nodeIndices[o]]={x:Math.round(a.x),y:Math.round(a.y)}}return t}},{key:"getPosition",value:function(e){if(null==e)throw new TypeError("No id was specified for getPosition method.");if(null==this.body.nodes[e])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}},{key:"storePositions",value:function(){var e,t=[],r=this.body.data.nodes.getDataSet(),n=_createForOfIteratorHelper$1$1(r.get());try{for(n.s();!(e=n.n()).done;){var i=e.value,o=i.id,a=this.body.nodes[o],s=Math.round(a.x),l=Math.round(a.y);i.x===s&&i.y===l||t.push({id:o,x:s,y:l})}}catch(e){n.e(e)}finally{n.f()}r.update(t)}},{key:"getBoundingBox",value:function(e){if(void 0!==this.body.nodes[e])return this.body.nodes[e].shape.boundingBox}},{key:"getConnectedNodes",value:function(e,t){var r=[];if(void 0!==this.body.nodes[e])for(var n=this.body.nodes[e],i={},o=0;o<n.edges.length;o++){var a=n.edges[o];"to"!==t&&a.toId==n.id?void 0===i[a.fromId]&&(r.push(a.fromId),i[a.fromId]=!0):"from"!==t&&a.fromId==n.id&&void 0===i[a.toId]&&(r.push(a.toId),i[a.toId]=!0)}return r}},{key:"getConnectedEdges",value:function(e){var t=[];if(void 0!==this.body.nodes[e])for(var r=this.body.nodes[e],n=0;n<r.edges.length;n++)t.push(r.edges[n].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return t}},{key:"moveNode",value:function(e,t,r){var n=this;void 0!==this.body.nodes[e]?(this.body.nodes[e].x=Number(t),this.body.nodes[e].y=Number(r),setTimeout$2((function(){n.body.emitter.emit("startSimulation")}),0)):console.log("Node id supplied to moveNode does not exist. Provided: ",e)}}]),e}(),getOwnPropertyDescriptor$4$1=getOwnPropertyDescriptor_1$1,getOwnPropertyDescriptor$5=getOwnPropertyDescriptor$4$1;function get$1$1(e,t){var r,n,i=arguments.length<3?e:arguments[2];return anObject$1(e)===i?e[t]:(r=objectGetOwnPropertyDescriptor$1.f(e,t))?has$2(r,"value")?r.value:void 0===r.get?void 0:r.get.call(i):isObject$3(n=objectGetPrototypeOf$1(e))?get$1$1(n,t,i):void 0}_export$1({target:"Reflect",stat:!0},{get:get$1$1});var get$2$1=path$1.Reflect.get,get$3=get$2$1,get$4=get$3;function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=getPrototypeOf$5$1(e)););return e}var superPropBase=_superPropBase,get$5=createCommonjsModule$2((function(e){function t(r,n,i){return"undefined"!=typeof Reflect&&get$4?e.exports=t=get$4:e.exports=t=function(e,t,r){var n=superPropBase(e,t);if(n){var i=getOwnPropertyDescriptor$5(n,t);return i.get?i.get.call(r):i.value}},t(r,n,i||r)}e.exports=t})),$hypot=Math.hypot,abs$1=Math.abs,sqrt$1=Math.sqrt,BUGGY=!!$hypot&&$hypot(1/0,NaN)!==1/0;_export$1({target:"Math",stat:!0,forced:BUGGY},{hypot:function(e,t){for(var r,n,i=0,o=0,a=arguments.length,s=0;o<a;)s<(r=abs$1(arguments[o++]))?(i=i*(n=s/r)*n+1,s=r):i+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*sqrt$1(i)}});var hypot=path$1.Math.hypot,hypot$1=hypot,hypot$2=hypot$1;function _createSuper$h(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$h()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$h(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var EndPoint=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"transform",value:function(e,t){isArray$5$1(e)||(e=[e]);for(var r=t.point.x,n=t.point.y,i=t.angle,o=t.length,a=0;a<e.length;++a){var s=e[a],l=s.x*Math.cos(i)-s.y*Math.sin(i),u=s.x*Math.sin(i)+s.y*Math.cos(i);s.x=r+o*l,s.y=n+o*u}}},{key:"drawPath",value:function(e,t){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;++r)e.lineTo(t[r].x,t[r].y);e.closePath()}}]),e}(),Image$2=function(e){inherits$1(r,EndPoint);var t=_createSuper$h(r);function r(){return classCallCheck$1(this,r),t.apply(this,arguments)}return createClass$1(r,null,[{key:"draw",value:function(e,t){if(t.image){e.save(),e.translate(t.point.x,t.point.y),e.rotate(Math.PI/2+t.angle);var r=null!=t.imageWidth?t.imageWidth:t.image.width,n=null!=t.imageHeight?t.imageHeight:t.image.height;t.image.drawImageAtPosition(e,1,-r/2,0,r,n),e.restore()}return!1}}]),r}(),Arrow=function(e){inherits$1(r,EndPoint);var t=_createSuper$h(r);function r(){return classCallCheck$1(this,r),t.apply(this,arguments)}return createClass$1(r,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return EndPoint.transform(r,t),EndPoint.drawPath(e,r),!0}}]),r}(),Crow=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return EndPoint.transform(r,t),EndPoint.drawPath(e,r),!0}}]),e}(),Curve=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r={x:-.4,y:0};EndPoint.transform(r,t),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";var n=Math.PI,i=t.angle-n/2,o=t.angle+n/2;return e.beginPath(),e.arc(r.x,r.y,.4*t.length,i,o,!1),e.stroke(),!0}}]),e}(),InvertedCurve=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r={x:-.3,y:0};EndPoint.transform(r,t),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";var n=Math.PI,i=t.angle+n/2,o=t.angle+3*n/2;return e.beginPath(),e.arc(r.x,r.y,.4*t.length,i,o,!1),e.stroke(),!0}}]),e}(),Triangle$1=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return EndPoint.transform(r,t),EndPoint.drawPath(e,r),!0}}]),e}(),InvertedTriangle=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return EndPoint.transform(r,t),EndPoint.drawPath(e,r),!0}}]),e}(),Circle$1=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r={x:-.4,y:0};return EndPoint.transform(r,t),drawCircle(e,r.x,r.y,.4*t.length),!0}}]),e}(),Bar=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return EndPoint.transform(r,t),EndPoint.drawPath(e,r),!0}}]),e}(),Box$1=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return EndPoint.transform(r,t),EndPoint.drawPath(e,r),!0}}]),e}(),Diamond$1=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return EndPoint.transform(r,t),EndPoint.drawPath(e,r),!0}}]),e}(),Vee=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return EndPoint.transform(r,t),EndPoint.drawPath(e,r),!0}}]),e}(),EndPoints=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"draw",value:function(e,t){var r;switch(t.type&&(r=t.type.toLowerCase()),r){case"image":return Image$2.draw(e,t);case"circle":return Circle$1.draw(e,t);case"box":return Box$1.draw(e,t);case"crow":return Crow.draw(e,t);case"curve":return Curve.draw(e,t);case"diamond":return Diamond$1.draw(e,t);case"inv_curve":return InvertedCurve.draw(e,t);case"triangle":return Triangle$1.draw(e,t);case"inv_triangle":return InvertedTriangle.draw(e,t);case"bar":return Bar.draw(e,t);case"vee":return Vee.draw(e,t);case"arrow":default:return Arrow.draw(e,t)}}}]),e}();function ownKeys$2$1(e,t){var r=keys$3$1(e);if(getOwnPropertySymbols$2$1){var n=getOwnPropertySymbols$2$1(e);t&&(n=filter$2$2(n).call(n,(function(t){return getOwnPropertyDescriptor$3$1(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$1$1(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)forEach$2$1(r=ownKeys$2$1(Object(n),!0)).call(r,(function(t){defineProperty$6$1(e,t,n[t])}));else if(getOwnPropertyDescriptors$2$1)defineProperties$1$1(e,getOwnPropertyDescriptors$2$1(n));else{var i;forEach$2$1(i=ownKeys$2$1(Object(n))).call(i,(function(t){defineProperty$3$1(e,t,getOwnPropertyDescriptor$3$1(n,t))}))}}return e}var EdgeBase=function(){function e(t,r,n){classCallCheck$1(this,e),this._body=r,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(t),this.fromPoint=this.from,this.toPoint=this.to}return createClass$1(e,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,t),e.lineWidth=t.width,!1!==t.dashes?this._drawDashedLine(e,t,i):this._drawLine(e,t,i)}},{key:"_drawLine",value:function(e,t,r,n,i){if(this.from!=this.to)this._line(e,t,r,n,i);else{var o=this._getCircleData(e),a=slicedToArray$1(o,3),s=a[0],l=a[1],u=a[2];this._circle(e,t,s,l,u)}}},{key:"_drawDashedLine",value:function(e,t,r,n,i){e.lineCap="round";var o=isArray$5$1(t.dashes)?t.dashes:[5,5];if(void 0!==e.setLineDash){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,t,r);else{var a=this._getCircleData(e),s=slicedToArray$1(a,3),l=s[0],u=s[1],c=s[2];this._circle(e,t,l,u,c)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)drawDashedLine(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{var h=this._getCircleData(e),d=slicedToArray$1(h,3),f=d[0],p=d[1],g=d[2];this._circle(e,t,f,p,g)}this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}}},{key:"findBorderPosition",value:function(e,t,r){return this.from!=this.to?this._findBorderPosition(e,t,r):this._findBorderPositionCircle(e,t,r)}},{key:"findBorderPositions",value:function(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};var t,r=slice$5$1(t=this._getCircleData(e)).call(t,0,2),n=slicedToArray$1(r,2),i=n[0],o=n[1];return{from:this._findBorderPositionCircle(this.from,e,{x:i,y:o,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:i,y:o,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(e){var t=this.options.selfReference.size;void 0!==e&&void 0===this.from.shape.width&&this.from.shape.resize(e);var r=ComponentUtil.getSelfRefCoordinates(e,this.options.selfReference.angle,t,this.from);return[r.x,r.y,t]}},{key:"_pointOnCircle",value:function(e,t,r,n){var i=2*n*Math.PI;return{x:e+r*Math.cos(i),y:t-r*Math.sin(i)}}},{key:"_findBorderPositionCircle",value:function(e,t,r){var n,i=r.x,o=r.y,a=r.low,s=r.high,l=r.direction,u=this.options.selfReference.size,c=.5*(a+s),h=0;do{c=.5*(a+s),n=this._pointOnCircle(i,o,u,c);var d=Math.atan2(e.y-n.y,e.x-n.x),f=e.distanceToBorder(t,d)-Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));if(Math.abs(f)<.05)break;f>0?l>0?a=c:s=c:l>0?s=c:a=c,++h}while(a<=s&&h<10);return _objectSpread$1$1({},n,{t:c})}},{key:"getLineWidth",value:function(e,t){return!0===e?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===t?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(e,t){if(!1!==t.inheritsColor){if("both"===t.inheritsColor&&this.from.id!==this.to.id){var r=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),n=this.from.options.color.highlight.border,i=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(n=overrideOpacity(this.from.options.color.border,t.opacity),i=overrideOpacity(this.to.options.color.border,t.opacity)):!0===this.from.selected&&!1===this.to.selected?i=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(n=this.from.options.color.border),r.addColorStop(0,n),r.addColorStop(1,i),r}return"to"===t.inheritsColor?overrideOpacity(this.to.options.color.border,t.opacity):overrideOpacity(this.from.options.color.border,t.opacity)}return overrideOpacity(t.color,t.opacity)}},{key:"_circle",value:function(e,t,r,n,i){this.enableShadow(e,t);var o=0,a=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){var s=this.options.selfReference.angle,l=this.options.selfReference.angle+Math.PI,u=this._findBorderPositionCircle(this.from,e,{x:r,y:n,low:s,high:l,direction:-1}),c=this._findBorderPositionCircle(this.from,e,{x:r,y:n,low:s,high:l,direction:1});o=Math.atan2(u.y-n,u.x-r),a=Math.atan2(c.y-n,c.x-r)}e.beginPath(),e.arc(r,n,i,o,a,!1),e.stroke(),this.disableShadow(e,t)}},{key:"getDistanceToEdge",value:function(e,t,r,n,i,o){if(this.from!=this.to)return this._getDistanceToEdge(e,t,r,n,i,o);var a=this._getCircleData(void 0),s=slicedToArray$1(a,3),l=s[0],u=s[1],c=s[2],h=l-i,d=u-o;return Math.abs(Math.sqrt(h*h+d*d)-c)}},{key:"_getDistanceToLine",value:function(e,t,r,n,i,o){var a=r-e,s=n-t,l=((i-e)*a+(o-t)*s)/(a*a+s*s);l>1?l=1:l<0&&(l=0);var u=e+l*a-i,c=t+l*s-o;return Math.sqrt(u*u+c*c)}},{key:"getArrowData",value:function(e,t,r,n,i,o){var a,s,l,u,c,h,d,f=o.width;"from"===t?(l=this.from,u=this.to,c=o.fromArrowScale<0,h=Math.abs(o.fromArrowScale),d=o.fromArrowType):"to"===t?(l=this.to,u=this.from,c=o.toArrowScale<0,h=Math.abs(o.toArrowScale),d=o.toArrowType):(l=this.to,u=this.from,c=o.middleArrowScale<0,h=Math.abs(o.middleArrowScale),d=o.middleArrowType);var p=15*h+3*f;if(l!=u){var g=p/hypot$2(l.x-u.x,l.y-u.y);if("middle"!==t)if(!0===this.options.smooth.enabled){var y=this._findBorderPosition(l,e,{via:r}),v=this.getPoint(y.t+g*("from"===t?1:-1),r);a=Math.atan2(y.y-v.y,y.x-v.x),s=y}else a=Math.atan2(l.y-u.y,l.x-u.x),s=this._findBorderPosition(l,e);else{var m=(c?-g:g)/2,b=this.getPoint(.5+m,r),$=this.getPoint(.5-m,r);a=Math.atan2(b.y-$.y,b.x-$.x),s=this.getPoint(.5,r)}}else{var _=this._getCircleData(e),w=slicedToArray$1(_,3),E=w[0],x=w[1],T=w[2];if("from"===t){var S=this.options.selfReference.angle,O=this.options.selfReference.angle+Math.PI,C=this._findBorderPositionCircle(this.from,e,{x:E,y:x,low:S,high:O,direction:-1});a=-2*C.t*Math.PI+1.5*Math.PI+.1*Math.PI,s=C}else if("to"===t){var k=this.options.selfReference.angle,P=this.options.selfReference.angle+Math.PI,A=this._findBorderPositionCircle(this.from,e,{x:E,y:x,low:k,high:P,direction:1});a=-2*A.t*Math.PI+1.5*Math.PI-1.1*Math.PI,s=A}else{var I=this.options.selfReference.angle/(2*Math.PI);s=this._pointOnCircle(E,x,T,I),a=-2*I*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:s,core:{x:s.x-.9*p*Math.cos(a),y:s.y-.9*p*Math.sin(a)},angle:a,length:p,type:d}}},{key:"drawArrowHead",value:function(e,t,r,n,i){e.strokeStyle=this.getColor(e,t),e.fillStyle=e.strokeStyle,e.lineWidth=t.width,EndPoints.draw(e,i)&&(this.enableShadow(e,t),fill$2(e).call(e),this.disableShadow(e,t))}},{key:"enableShadow",value:function(e,t){!0===t.shadow&&(e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowSize,e.shadowOffsetX=t.shadowX,e.shadowOffsetY=t.shadowY)}},{key:"disableShadow",value:function(e,t){!0===t.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"drawBackground",value:function(e,t){if(!1!==t.background){var r={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=t.backgroundColor,e.lineWidth=t.backgroundSize,this.setStrokeDashed(e,t.backgroundDashes),e.stroke(),e.strokeStyle=r.strokeStyle,e.lineWidth=r.lineWidth,e.dashes=r.dashes,this.setStrokeDashed(e,t.dashes)}}},{key:"setStrokeDashed",value:function(e,t){if(!1!==t)if(void 0!==e.setLineDash){var r=isArray$5$1(t)?t:[5,5];e.setLineDash(r)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==e.setLineDash?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),e}();function ownKeys$3(e,t){var r=keys$3$1(e);if(getOwnPropertySymbols$2$1){var n=getOwnPropertySymbols$2$1(e);t&&(n=filter$2$2(n).call(n,(function(t){return getOwnPropertyDescriptor$3$1(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r,n=null!=arguments[t]?arguments[t]:{};if(t%2)forEach$2$1(r=ownKeys$3(Object(n),!0)).call(r,(function(t){defineProperty$6$1(e,t,n[t])}));else if(getOwnPropertyDescriptors$2$1)defineProperties$1$1(e,getOwnPropertyDescriptors$2$1(n));else{var i;forEach$2$1(i=ownKeys$3(Object(n))).call(i,(function(t){defineProperty$3$1(e,t,getOwnPropertyDescriptor$3$1(n,t))}))}}return e}function _createSuper$i(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$i()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$i(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var BezierEdgeBase=function(e){inherits$1(r,EdgeBase);var t=_createSuper$i(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"_findBorderPositionBezier",value:function(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),o=10,a=.2,s=!1,l=1,u=0,c=this.to;e.id===this.from.id&&(c=this.from,s=!0);var h=0;do{n=.5*(u+l),r=this.getPoint(n,i);var d=Math.atan2(c.y-r.y,c.x-r.x),f=c.distanceToBorder(t,d),p=Math.sqrt(Math.pow(r.x-c.x,2)+Math.pow(r.y-c.y,2)),g=f-p;if(Math.abs(g)<a)break;g<0?!1===s?u=n:l=n:!1===s?l=n:u=n,++h}while(u<=l&&h<o);return _objectSpread$2({},r,{t:n})}},{key:"_getDistanceToBezierEdge",value:function(e,t,r,n,i,o,a){var s,l,u,c,h,d=1e9,f=e,p=t;for(l=1;l<10;l++)u=.1*l,c=Math.pow(1-u,2)*e+2*u*(1-u)*a.x+Math.pow(u,2)*r,h=Math.pow(1-u,2)*t+2*u*(1-u)*a.y+Math.pow(u,2)*n,l>0&&(d=(s=this._getDistanceToLine(f,p,c,h,i,o))<d?s:d),f=c,p=h;return d}},{key:"_bezierCurve",value:function(e,t,r,n){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),null!=r&&null!=r.x?null!=n&&null!=n.x?e.bezierCurveTo(r.x,r.y,n.x,n.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(r.x,r.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,t),this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),r}();function _createSuper$j(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$j()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$j(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var BezierEdgeDynamic=function(e){inherits$1(r,BezierEdgeBase);var t=_createSuper$j(r);function r(e,n,i){var o;return classCallCheck$1(this,r),(o=t.call(this,e,n,i)).via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return createClass$1(r,[{key:"setOptions",value:function(e){get$5(getPrototypeOf$5$1(r.prototype),"setOptions",this).call(this,e);var t=!1;this.options.physics!==e.physics&&(t=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===t&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var e="edgeId:"+this.id,t=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=t,this.via=t,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(e,t,r){this._bezierCurve(e,t,r)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){var r=this._getCircleData(),n=slicedToArray$1(r,3),i=n[0],o=n[1],a=n[2],s=2*Math.PI*(1-e);return{x:i+a*Math.sin(s),y:o+a-a*(1-Math.cos(s))}}return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*t.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*t.y+Math.pow(e,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t,this.via)}},{key:"_getDistanceToEdge",value:function(e,t,r,n,i,o){return this._getDistanceToBezierEdge(e,t,r,n,i,o,this.via)}}]),r}();function _createSuper$k(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$k()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$k(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var BezierEdgeStatic=function(e){inherits$1(r,BezierEdgeBase);var t=_createSuper$k(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"_line",value:function(e,t,r){this._bezierCurve(e,t,r)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var e,t,r=this.options.smooth.roundness,n=this.options.smooth.type,i=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===n||"diagonalCross"===n){var a,s;a=s=i<=o?r*o:r*i,this.from.x>this.to.x&&(a=-a),this.from.y>=this.to.y&&(s=-s);var l=this.from.x+a,u=this.from.y+s;return"discrete"===n&&(i<=o?l=i<r*o?this.from.x:l:u=o<r*i?this.from.y:u),{x:l,y:u}}if("straightCross"===n){var c=(1-r)*i,h=(1-r)*o;return i<=o?(c=0,this.from.y<this.to.y&&(h=-h)):(this.from.x<this.to.x&&(c=-c),h=0),{x:this.to.x+c,y:this.to.y+h}}if("horizontal"===n){var d=(1-r)*i;return this.from.x<this.to.x&&(d=-d),{x:this.to.x+d,y:this.from.y}}if("vertical"===n){var f=(1-r)*o;return this.from.y<this.to.y&&(f=-f),{x:this.from.x,y:this.to.y+f}}if("curvedCW"===n){i=this.to.x-this.from.x,o=this.from.y-this.to.y;var p=Math.sqrt(i*i+o*o),g=Math.PI,y=(Math.atan2(o,i)+(.5*r+.5)*g)%(2*g);return{x:this.from.x+(.5*r+.5)*p*Math.sin(y),y:this.from.y+(.5*r+.5)*p*Math.cos(y)}}if("curvedCCW"===n){i=this.to.x-this.from.x,o=this.from.y-this.to.y;var v=Math.sqrt(i*i+o*o),m=Math.PI,b=(Math.atan2(o,i)+(.5*-r+.5)*m)%(2*m);return{x:this.from.x+(.5*r+.5)*v*Math.sin(b),y:this.from.y+(.5*r+.5)*v*Math.cos(b)}}e=t=i<=o?r*o:r*i,this.from.x>this.to.x&&(e=-e),this.from.y>=this.to.y&&(t=-t);var $=this.from.x+e,_=this.from.y+t;return i<=o?$=this.from.x<=this.to.x?this.to.x<$?this.to.x:$:this.to.x>$?this.to.x:$:_=this.from.y>=this.to.y?this.to.y>_?this.to.y:_:this.to.y<_?this.to.y:_,{x:$,y:_}}},{key:"_findBorderPosition",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(e,t,r.via)}},{key:"_getDistanceToEdge",value:function(e,t,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,t,r,n,i,o,a)}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),r=e,n=Math.pow(1-r,2)*this.fromPoint.x+2*r*(1-r)*t.x+Math.pow(r,2)*this.toPoint.x,i=Math.pow(1-r,2)*this.fromPoint.y+2*r*(1-r)*t.y+Math.pow(r,2)*this.toPoint.y;return{x:n,y:i}}}]),r}();function _createSuper$l(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$l()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$l(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var CubicBezierEdgeBase=function(e){inherits$1(r,BezierEdgeBase);var t=_createSuper$l(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"_getDistanceToBezierEdge2",value:function(e,t,r,n,i,o,a,s){for(var l=1e9,u=e,c=t,h=[0,0,0,0],d=1;d<10;d++){var f=.1*d;h[0]=Math.pow(1-f,3),h[1]=3*f*Math.pow(1-f,2),h[2]=3*Math.pow(f,2)*(1-f),h[3]=Math.pow(f,3);var p=h[0]*e+h[1]*a.x+h[2]*s.x+h[3]*r,g=h[0]*t+h[1]*a.y+h[2]*s.y+h[3]*n;if(d>0){var y=this._getDistanceToLine(u,c,p,g,i,o);l=y<l?y:l}u=p,c=g}return l}}]),r}();function _createSuper$m(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$m()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$m(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var CubicBezierEdge=function(e){inherits$1(r,CubicBezierEdgeBase);var t=_createSuper$m(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"_line",value:function(e,t,r){var n=r[0],i=r[1];this._bezierCurve(e,t,n,i)}},{key:"_getViaCoordinates",value:function(){var e,t,r,n,i=this.from.x-this.to.x,o=this.from.y-this.to.y,a=this.options.smooth.roundness;return(Math.abs(i)>Math.abs(o)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(t=this.from.y,n=this.to.y,e=this.from.x-a*i,r=this.to.x+a*i):(t=this.from.y-a*o,n=this.to.y+a*o,e=this.from.x,r=this.to.x),[{x:e,y:t},{x:r,y:n}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t)}},{key:"_getDistanceToEdge",value:function(e,t,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),s=slicedToArray$1(a,2),l=s[0],u=s[1];return this._getDistanceToBezierEdge2(e,t,r,n,i,o,l,u)}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),r=slicedToArray$1(t,2),n=r[0],i=r[1],o=e,a=[Math.pow(1-o,3),3*o*Math.pow(1-o,2),3*Math.pow(o,2)*(1-o),Math.pow(o,3)],s=a[0]*this.fromPoint.x+a[1]*n.x+a[2]*i.x+a[3]*this.toPoint.x,l=a[0]*this.fromPoint.y+a[1]*n.y+a[2]*i.y+a[3]*this.toPoint.y;return{x:s,y:l}}}]),r}();function _createSuper$n(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$n()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$n(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var StraightEdge=function(e){inherits$1(r,EdgeBase);var t=_createSuper$n(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"_line",value:function(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){var r=this.to,n=this.from;e.id===this.from.id&&(r=this.from,n=this.to);var i=Math.atan2(r.y-n.y,r.x-n.x),o=r.x-n.x,a=r.y-n.y,s=Math.sqrt(o*o+a*a),l=(s-e.distanceToBorder(t,i))/s;return{x:(1-l)*n.x+l*r.x,y:(1-l)*n.y+l*r.y,t:0}}},{key:"_getDistanceToEdge",value:function(e,t,r,n,i,o){return this._getDistanceToLine(e,t,r,n,i,o)}}]),r}(),Edge=function(){function e(t,r,n,i,o){if(classCallCheck$1(this,e),void 0===r)throw new Error("No body provided");this.options=bridgeObject(i),this.globalOptions=i,this.defaultOptions=o,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new Label(this.body,this.options,!0),this.setOptions(t)}return createClass$1(e,[{key:"setOptions",value:function(t){if(t){var r=void 0!==t.physics&&this.options.physics!==t.physics||void 0!==t.hidden&&(this.options.hidden||!1)!==(t.hidden||!1)||void 0!==t.from&&this.options.from!==t.from||void 0!==t.to&&this.options.to!==t.to;e.parseOptions(this.options,t,!0,this.globalOptions),void 0!==t.id&&(this.id=t.id),void 0!==t.from&&(this.fromId=t.from),void 0!==t.to&&(this.toId=t.to),void 0!==t.title&&(this.title=t.title),void 0!==t.value&&(t.value=_parseFloat$2(t.value));var n=[t,this.options,this.defaultOptions];return this.chooser=ComponentUtil.choosify("edge",n),this.updateLabelModule(t),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}}},{key:"getFormattingValues",value:function(){var e=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,t=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,r=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,n=this.options.color.inherit,i={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:r,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:t,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:n?void 0:this.options.color.color,inheritsColor:n,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var o=this.options.selectionWidth;"function"==typeof o?i.width=o(i.width):"number"==typeof o&&(i.width+=o),i.width=Math.max(i.width,.3/this.body.view.scale),i.color=this.options.color.highlight,i.shadow=this.options.shadow.enabled}else if(this.hover){var a=this.options.hoverWidth;"function"==typeof a?i.width=a(i.width):"number"==typeof a&&(i.width+=a),i.width=Math.max(i.width,.3/this.body.view.scale),i.color=this.options.color.hover,i.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(i,this.options.id,this.selected,this.hover),void 0!==i.color&&(i.inheritsColor=!1),!1===i.shadow&&(i.shadowColor===this.options.shadow.color&&i.shadowSize===this.options.shadow.size&&i.shadowX===this.options.shadow.x&&i.shadowY===this.options.shadow.y||(i.shadow=!0)));else i.shadow=this.options.shadow.enabled,i.width=Math.max(i.width,.3/this.body.view.scale);return i}},{key:"updateLabelModule",value:function(e){var t=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,t),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var e=this.options.smooth,t=!1,r=!0;return void 0!==this.edgeType&&((this.edgeType instanceof BezierEdgeDynamic&&!0===e.enabled&&"dynamic"===e.type||this.edgeType instanceof CubicBezierEdge&&!0===e.enabled&&"cubicBezier"===e.type||this.edgeType instanceof BezierEdgeStatic&&!0===e.enabled&&"dynamic"!==e.type&&"cubicBezier"!==e.type||this.edgeType instanceof StraightEdge&&!1===e.type.enabled)&&(r=!1),!0===r&&(t=this.cleanup())),!0===r?!0===e.enabled?"dynamic"===e.type?(t=!0,this.edgeType=new BezierEdgeDynamic(this.options,this.body,this.labelModule)):"cubicBezier"===e.type?this.edgeType=new CubicBezierEdge(this.options,this.body,this.labelModule):this.edgeType=new BezierEdgeStatic(this.options,this.body,this.labelModule):this.edgeType=new StraightEdge(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),t}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,r){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(e,t,r,this.options.value),i=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.width=this.options.scaling.min+n*i}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(e){var t=this.getFormattingValues();if(!t.hidden){var r=this.edgeType.getViaNode(),n={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,t.fromArrow&&(n.from=this.edgeType.getArrowData(e,"from",r,this.selected,this.hover,t),!1===t.arrowStrikethrough&&(this.edgeType.fromPoint=n.from.core),t.fromArrowSrc&&(n.from.image=this.imagelist.load(t.fromArrowSrc)),t.fromArrowImageWidth&&(n.from.imageWidth=t.fromArrowImageWidth),t.fromArrowImageHeight&&(n.from.imageHeight=t.fromArrowImageHeight)),t.toArrow&&(n.to=this.edgeType.getArrowData(e,"to",r,this.selected,this.hover,t),!1===t.arrowStrikethrough&&(this.edgeType.toPoint=n.to.core),t.toArrowSrc&&(n.to.image=this.imagelist.load(t.toArrowSrc)),t.toArrowImageWidth&&(n.to.imageWidth=t.toArrowImageWidth),t.toArrowImageHeight&&(n.to.imageHeight=t.toArrowImageHeight)),t.middleArrow&&(n.middle=this.edgeType.getArrowData(e,"middle",r,this.selected,this.hover,t),t.middleArrowSrc&&(n.middle.image=this.imagelist.load(t.middleArrowSrc)),t.middleArrowImageWidth&&(n.middle.imageWidth=t.middleArrowImageWidth),t.middleArrowImageHeight&&(n.middle.imageHeight=t.middleArrowImageHeight)),this.edgeType.drawLine(e,t,this.selected,this.hover,r),this.drawArrows(e,n,t),this.drawLabel(e,r)}}},{key:"drawArrows",value:function(e,t,r){r.fromArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,t.from),r.middleArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,t.middle),r.toArrow&&this.edgeType.drawArrowHead(e,r,this.selected,this.hover,t.to)}},{key:"drawLabel",value:function(e,t){if(void 0!==this.options.label){var r=this.from,n=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover),r.id!=n.id){this.labelModule.pointToSelf=!1;var i=this.edgeType.getPoint(.5,t);e.save();var o=this._getRotation(e);0!=o.angle&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,i.x,i.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;var a=ComponentUtil.getSelfRefCoordinates(e,this.options.selfReference.angle,this.options.selfReference.size,r);i=this._pointOnCircle(a.x,a.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,i.x,i.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(e){var t=[];if(this.labelModule.visible()){var r=this._getRotation();ComponentUtil.pointInRect(this.labelModule.getSize(),e,r)&&t.push({edgeId:this.id,labelId:0})}var n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&t.push({edgeId:this.id}),t}},{key:"isOverlappingWith",value:function(e){if(this.connected){var t=this.from.x,r=this.from.y,n=this.to.x,i=this.to.y,o=e.left,a=e.top;return this.edgeType.getDistanceToEdge(t,r,n,i,o,a)<10}return!1}},{key:"_getRotation",value:function(e){var t=this.edgeType.getViaNode(),r=this.edgeType.getPoint(.5,t);void 0!==e&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,r.x,r.y);var n={x:r.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return n;if("horizontal"===this.options.font.align)return n;var i=this.from.y-this.to.y,o=this.from.x-this.to.x,a=Math.atan2(i,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),n.angle=a,n}},{key:"_pointOnCircle",value:function(e,t,r,n){return{x:e+r*Math.cos(n),y:t-r*Math.sin(n)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=["arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(selectiveDeepExtend(o,e,t,r),ComponentUtil.isValidLabel(t.label)?e.label=t.label:ComponentUtil.isValidLabel(e.label)||(e.label=void 0),mergeOptions(e,t,"smooth",n),mergeOptions(e,t,"shadow",n),mergeOptions(e,t,"background",n),void 0!==t.dashes&&null!==t.dashes?e.dashes=t.dashes:!0===r&&null===t.dashes&&(e.dashes=create$2$1(n.dashes)),void 0!==t.scaling&&null!==t.scaling?(void 0!==t.scaling.min&&(e.scaling.min=t.scaling.min),void 0!==t.scaling.max&&(e.scaling.max=t.scaling.max),mergeOptions(e.scaling,t.scaling,"label",n.scaling)):!0===r&&null===t.scaling&&(e.scaling=create$2$1(n.scaling)),void 0!==t.arrows&&null!==t.arrows)if("string"==typeof t.arrows){var a=t.arrows.toLowerCase();e.arrows.to.enabled=-1!=indexOf$3(a).call(a,"to"),e.arrows.middle.enabled=-1!=indexOf$3(a).call(a,"middle"),e.arrows.from.enabled=-1!=indexOf$3(a).call(a,"from")}else{if("object"!==_typeof_1$1(t.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+stringify$2$1(t.arrows));mergeOptions(e.arrows,t.arrows,"to",n.arrows),mergeOptions(e.arrows,t.arrows,"middle",n.arrows),mergeOptions(e.arrows,t.arrows,"from",n.arrows)}else!0===r&&null===t.arrows&&(e.arrows=create$2$1(n.arrows));if(void 0!==t.color&&null!==t.color){var s=isString$2(t.color)?{color:t.color,highlight:t.color,hover:t.color,inherit:!1,opacity:1}:t.color,l=e.color;if(i)deepExtend$1(l,n.color,!1,r);else for(var u in l)l.hasOwnProperty(u)&&delete l[u];if(isString$2(l))l.color=l,l.highlight=l,l.hover=l,l.inherit=!1,void 0===s.opacity&&(l.opacity=1);else{var c=!1;void 0!==s.color&&(l.color=s.color,c=!0),void 0!==s.highlight&&(l.highlight=s.highlight,c=!0),void 0!==s.hover&&(l.hover=s.hover,c=!0),void 0!==s.inherit&&(l.inherit=s.inherit),void 0!==s.opacity&&(l.opacity=Math.min(1,Math.max(0,s.opacity))),!0===c?l.inherit=!1:void 0===l.inherit&&(l.inherit="from")}}else!0===r&&null===t.color&&(e.color=bridgeObject(n.color));!0===r&&null===t.font&&(e.font=bridgeObject(n.font)),t.hasOwnProperty("selfReferenceSize")&&(console.log("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=t.selfReferenceSize)}}]),e}(),EdgesHandler=function(){function e(t,r,n){var i,o=this;classCallCheck$1(this,e),this.body=t,this.images=r,this.groups=n,this.body.functions.createEdge=bind$2$1(i=this.create).call(i,this),this.edgesListeners={add:function(e,t){o.add(t.items)},update:function(e,t){o.update(t.items)},remove:function(e,t){o.remove(t.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,r,n){if(t===e)return.5;var i=1/(t-e);return Math.max(0,(n-e)*i)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},deepExtend$1(this.options,this.defaultOptions),this.bindEventListeners()}return createClass$1(e,[{key:"bindEventListeners",value:function(){var e,t,r=this;this.body.emitter.on("_forceDisableDynamicCurves",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===e&&(e="continuous");var n=!1;for(var i in r.body.edges)if(r.body.edges.hasOwnProperty(i)){var o=r.body.edges[i],a=r.body.data.edges.get(i);if(null!=a){var s=a.smooth;void 0!==s&&!0===s.enabled&&"dynamic"===s.type&&(void 0===e?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:e}}),n=!0)}}!0===t&&!0===n&&r.body.emitter.emit("_dataChanged")})),this.body.emitter.on("_dataUpdated",(function(){r.reconnectEdges()})),this.body.emitter.on("refreshEdges",bind$2$1(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",bind$2$1(t=this.refresh).call(t,this)),this.body.emitter.on("destroy",(function(){forEach$3$1(r.edgesListeners,(function(e,t){r.body.data.edges&&r.body.data.edges.off(t,e)})),delete r.body.functions.createEdge,delete r.edgesListeners.add,delete r.edgesListeners.update,delete r.edgesListeners.remove,delete r.edgesListeners}))}},{key:"setOptions",value:function(e){if(void 0!==e){Edge.parseOptions(this.options,e,!0,this.defaultOptions,!0);var t=!1;if(void 0!==e.smooth)for(var r in this.body.edges)this.body.edges.hasOwnProperty(r)&&(t=this.body.edges[r].updateEdgeType()||t);if(void 0!==e.font)for(var n in this.body.edges)this.body.edges.hasOwnProperty(n)&&this.body.edges[n].updateLabelModule();void 0===e.hidden&&void 0===e.physics&&!0!==t||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.data.edges;if(e instanceof DataSet||e instanceof DataView$1)this.body.data.edges=e;else if(isArray$5$1(e))this.body.data.edges=new DataSet,this.body.data.edges.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.edges=new DataSet}if(n&&forEach$3$1(this.edgesListeners,(function(e,t){n.off(t,e)})),this.body.edges={},this.body.data.edges){forEach$3$1(this.edgesListeners,(function(e,r){t.body.data.edges.on(r,e)}));var i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===r&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.body.edges,n=this.body.data.edges,i=0;i<e.length;i++){var o=e[i],a=r[o];a&&a.disconnect();var s=n.get(o,{showInternalIds:!0});r[o]=this.create(s)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e){for(var t=this.body.edges,r=this.body.data.edges,n=!1,i=0;i<e.length;i++){var o=e[i],a=r.get(o),s=t[o];void 0!==s?(s.disconnect(),n=s.setOptions(a)||n,s.connect()):(this.body.edges[o]=this.create(a),n=!0)}!0===n?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==e.length){var r=this.body.edges;forEach$3$1(e,(function(e){var t=r[e];void 0!==t&&t.remove()})),t&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var e=this;forEach$3$1(this.body.edges,(function(t,r){var n=e.body.data.edges.get(r);void 0!==n&&t.setOptions(n)}))}},{key:"create",value:function(e){return new Edge(e,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var e,t=this.body.nodes,r=this.body.edges;for(e in t)t.hasOwnProperty(e)&&(t[e].edges=[]);for(e in r)if(r.hasOwnProperty(e)){var n=r[e];n.from=null,n.to=null,n.connect()}}},{key:"getConnectedNodes",value:function(e){var t=[];if(void 0!==this.body.edges[e]){var r=this.body.edges[e];void 0!==r.fromId&&t.push(r.fromId),void 0!==r.toId&&t.push(r.toId)}return t}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var e=this,t=[];forEach$3$1(this.body.edges,(function(r,n){var i=e.body.nodes[r.toId],o=e.body.nodes[r.fromId];void 0!==i&&!0===i.isCluster||void 0!==o&&!0===o.isCluster||void 0!==i&&void 0!==o||t.push(n)})),this.remove(t,!1)}},{key:"_addMissingEdges",value:function(){var e=this.body.data.edges;if(null!=e){var t=this.body.edges,r=[];forEach$2$1(e).call(e,(function(e,n){void 0===t[n]&&r.push(n)})),this.add(r,!0)}}}]),e}(),BarnesHutSolver=function(){function e(t,r,n){classCallCheck$1(this,e),this.body=t,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=Alea("BARNES HUT SOLVER")}return createClass$1(e,[{key:"setOptions",value:function(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var e,t=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=r.length,i=this._formBarnesHutTree(t,r);this.barnesHutTree=i;for(var o=0;o<n;o++)(e=t[r[o]]).options.mass>0&&this._getForceContributions(i.root,e)}}},{key:"_getForceContributions",value:function(e,t){this._getForceContribution(e.children.NW,t),this._getForceContribution(e.children.NE,t),this._getForceContribution(e.children.SW,t),this._getForceContribution(e.children.SE,t)}},{key:"_getForceContribution",value:function(e,t){var r,n,i;e.childrenCount>0&&(r=e.centerOfMass.x-t.x,n=e.centerOfMass.y-t.y,(i=Math.sqrt(r*r+n*n))*e.calcSize>this.thetaInversed?this._calculateForces(i,r,n,t,e):4===e.childrenCount?this._getForceContributions(e,t):e.children.data.id!=t.id&&this._calculateForces(i,r,n,t,e))}},{key:"_calculateForces",value:function(e,t,r,n,i){0===e&&(t=e=.1),this.overlapAvoidanceFactor<1&&n.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,e-n.shape.radius));var o=this.options.gravitationalConstant*i.mass*n.options.mass/Math.pow(e,3),a=t*o,s=r*o;this.physicsBody.forces[n.id].x+=a,this.physicsBody.forces[n.id].y+=s}},{key:"_formBarnesHutTree",value:function(e,t){for(var r,n=t.length,i=e[t[0]].x,o=e[t[0]].y,a=e[t[0]].x,s=e[t[0]].y,l=1;l<n;l++){var u=e[t[l]],c=u.x,h=u.y;u.options.mass>0&&(c<i&&(i=c),c>a&&(a=c),h<o&&(o=h),h>s&&(s=h))}var d=Math.abs(a-i)-Math.abs(s-o);d>0?(o-=.5*d,s+=.5*d):(i+=.5*d,a-=.5*d);var f=Math.max(1e-5,Math.abs(a-i)),p=.5*f,g=.5*(i+a),y=.5*(o+s),v={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:g-p,maxX:g+p,minY:y-p,maxY:y+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(v.root);for(var m=0;m<n;m++)(r=e[t[m]]).options.mass>0&&this._placeInTree(v.root,r);return v}},{key:"_updateBranchMass",value:function(e,t){var r=e.centerOfMass,n=e.mass+t.options.mass,i=1/n;r.x=r.x*e.mass+t.x*t.options.mass,r.x*=i,r.y=r.y*e.mass+t.y*t.options.mass,r.y*=i,e.mass=n;var o=Math.max(Math.max(t.height,t.radius),t.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}},{key:"_placeInTree",value:function(e,t,r){1==r&&void 0!==r||this._updateBranchMass(e,t);var n,i=e.children.NW.range;n=i.maxX>t.x?i.maxY>t.y?"NW":"SW":i.maxY>t.y?"NE":"SE",this._placeInRegion(e,t,n)}},{key:"_placeInRegion",value:function(e,t,r){var n=e.children[r];switch(n.childrenCount){case 0:n.children.data=t,n.childrenCount=1,this._updateBranchMass(n,t);break;case 1:n.children.data.x===t.x&&n.children.data.y===t.y?(t.x+=this._rng(),t.y+=this._rng()):(this._splitBranch(n),this._placeInTree(n,t));break;case 4:this._placeInTree(n,t)}}},{key:"_splitBranch",value:function(e){var t=null;1===e.childrenCount&&(t=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),null!=t&&this._placeInTree(e,t)}},{key:"_insertRegion",value:function(e,t){var r,n,i,o,a=.5*e.size;switch(t){case"NW":r=e.range.minX,n=e.range.minX+a,i=e.range.minY,o=e.range.minY+a;break;case"NE":r=e.range.minX+a,n=e.range.maxX,i=e.range.minY,o=e.range.minY+a;break;case"SW":r=e.range.minX,n=e.range.minX+a,i=e.range.minY+a,o=e.range.maxY;break;case"SE":r=e.range.minX+a,n=e.range.maxX,i=e.range.minY+a,o=e.range.maxY}e.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:r,maxX:n,minY:i,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}},{key:"_debug",value:function(e,t){void 0!==this.barnesHutTree&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,t))}},{key:"_drawBranch",value:function(e,t,r){void 0===r&&(r="#FF0000"),4===e.childrenCount&&(this._drawBranch(e.children.NW,t),this._drawBranch(e.children.NE,t),this._drawBranch(e.children.SE,t),this._drawBranch(e.children.SW,t)),t.strokeStyle=r,t.beginPath(),t.moveTo(e.range.minX,e.range.minY),t.lineTo(e.range.maxX,e.range.minY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.minY),t.lineTo(e.range.maxX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.maxY),t.lineTo(e.range.minX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.minX,e.range.maxY),t.lineTo(e.range.minX,e.range.minY),t.stroke()}}]),e}(),RepulsionSolver=function(){function e(t,r,n){classCallCheck$1(this,e),this._rng=Alea("REPULSION SOLVER"),this.body=t,this.physicsBody=r,this.setOptions(n)}return createClass$1(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,r,n,i,o,a,s,l=this.body.nodes,u=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,h=this.options.nodeDistance,d=-2/3/h,f=0;f<u.length-1;f++){a=l[u[f]];for(var p=f+1;p<u.length;p++)e=(s=l[u[p]]).x-a.x,t=s.y-a.y,0===(r=Math.sqrt(e*e+t*t))&&(e=r=.1*this._rng()),r<2*h&&(o=r<.5*h?1:d*r+4/3,n=e*(o/=r),i=t*o,c[a.id].x-=n,c[a.id].y-=i,c[s.id].x+=n,c[s.id].y+=i)}}}]),e}(),HierarchicalRepulsionSolver=function(){function e(t,r,n){classCallCheck$1(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return createClass$1(e,[{key:"setOptions",value:function(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var e=this.body.nodes,t=this.physicsBody.physicsNodeIndices,r=this.physicsBody.forces,n=this.options.nodeDistance,i=0;i<t.length-1;i++)for(var o=e[t[i]],a=i+1;a<t.length;a++){var s=e[t[a]];if(o.level===s.level){var l=n+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(s.shape.radius||0)/2),u=s.x-o.x,c=s.y-o.y,h=Math.sqrt(u*u+c*c),d=void 0;d=h<l?-Math.pow(.05*h,2)+Math.pow(.05*l,2):0,0!==h&&(d/=h);var f=u*d,p=c*d;r[o.id].x-=f,r[o.id].y-=p,r[s.id].x+=f,r[s.id].y+=p}}}}]),e}(),SpringSolver=function(){function e(t,r,n){classCallCheck$1(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return createClass$1(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,r,n,i,o=this.physicsBody.physicsEdgeIndices,a=this.body.edges,s=0;s<o.length;s++)!0===(t=a[o[s]]).connected&&t.toId!==t.fromId&&void 0!==this.body.nodes[t.toId]&&void 0!==this.body.nodes[t.fromId]&&(void 0!==t.edgeType.via?(e=void 0===t.options.length?this.options.springLength:t.options.length,r=t.to,n=t.edgeType.via,i=t.from,this._calculateSpringForce(r,n,.5*e),this._calculateSpringForce(n,i,.5*e)):(e=void 0===t.options.length?1.5*this.options.springLength:t.options.length,this._calculateSpringForce(t.from,t.to,e)))}},{key:"_calculateSpringForce",value:function(e,t,r){var n=e.x-t.x,i=e.y-t.y,o=Math.max(Math.sqrt(n*n+i*i),.01),a=this.options.springConstant*(r-o)/o,s=n*a,l=i*a;void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x+=s,this.physicsBody.forces[e.id].y+=l),void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x-=s,this.physicsBody.forces[t.id].y-=l)}}]),e}(),HierarchicalSpringSolver=function(){function e(t,r,n){classCallCheck$1(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return createClass$1(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,r,n,i,o,a,s,l,u,c=this.body.edges,h=this.physicsBody.physicsEdgeIndices,d=this.physicsBody.physicsNodeIndices,f=this.physicsBody.forces,p=0;p<d.length;p++){var g=d[p];f[g].springFx=0,f[g].springFy=0}for(var y=0;y<h.length;y++)!0===(t=c[h[y]]).connected&&(e=void 0===t.options.length?this.options.springLength:t.options.length,r=t.from.x-t.to.x,n=t.from.y-t.to.y,s=0===(s=Math.sqrt(r*r+n*n))?.01:s,i=r*(a=this.options.springConstant*(e-s)/s),o=n*a,t.to.level!=t.from.level?(void 0!==f[t.toId]&&(f[t.toId].springFx-=i,f[t.toId].springFy-=o),void 0!==f[t.fromId]&&(f[t.fromId].springFx+=i,f[t.fromId].springFy+=o)):(void 0!==f[t.toId]&&(f[t.toId].x-=.5*i,f[t.toId].y-=.5*o),void 0!==f[t.fromId]&&(f[t.fromId].x+=.5*i,f[t.fromId].y+=.5*o)));a=1;for(var v=0;v<d.length;v++){var m=d[v];l=Math.min(a,Math.max(-a,f[m].springFx)),u=Math.min(a,Math.max(-a,f[m].springFy)),f[m].x+=l,f[m].y+=u}for(var b=0,$=0,_=0;_<d.length;_++){var w=d[_];b+=f[w].x,$+=f[w].y}for(var E=b/d.length,x=$/d.length,T=0;T<d.length;T++){var S=d[T];f[S].x-=E,f[S].y-=x}}}]),e}(),CentralGravitySolver=function(){function e(t,r,n){classCallCheck$1(this,e),this.body=t,this.physicsBody=r,this.setOptions(n)}return createClass$1(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,r,n,i=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces,s=0;s<o.length;s++){e=-(n=i[o[s]]).x,t=-n.y,r=Math.sqrt(e*e+t*t),this._calculateForces(r,e,t,a,n)}}},{key:"_calculateForces",value:function(e,t,r,n,i){var o=0===e?0:this.options.centralGravity/e;n[i.id].x=t*o,n[i.id].y=r*o}}]),e}();function _createSuper$o(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$o()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$o(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var ForceAtlas2BasedRepulsionSolver=function(e){inherits$1(r,BarnesHutSolver);var t=_createSuper$o(r);function r(e,n,i){var o;return classCallCheck$1(this,r),(o=t.call(this,e,n,i))._rng=Alea("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return createClass$1(r,[{key:"_calculateForces",value:function(e,t,r,n,i){0===e&&(t=e=.1*this._rng()),this.overlapAvoidanceFactor<1&&n.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,e-n.shape.radius));var o=n.edges.length+1,a=this.options.gravitationalConstant*i.mass*n.options.mass*o/Math.pow(e,2),s=t*a,l=r*a;this.physicsBody.forces[n.id].x+=s,this.physicsBody.forces[n.id].y+=l}}]),r}();function _createSuper$p(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$p()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$p(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var ForceAtlas2BasedCentralGravitySolver=function(e){inherits$1(r,CentralGravitySolver);var t=_createSuper$p(r);function r(e,n,i){return classCallCheck$1(this,r),t.call(this,e,n,i)}return createClass$1(r,[{key:"_calculateForces",value:function(e,t,r,n,i){if(e>0){var o=i.edges.length+1,a=this.options.centralGravity*o*i.options.mass;n[i.id].x=t*a,n[i.id].y=r*a}}}]),r}(),PhysicsEngine=function(){function e(t){classCallCheck$1(this,e),this.body=t,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},extend$1(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return createClass$1(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("initPhysics",(function(){e.initPhysics()})),this.body.emitter.on("_layoutFailed",(function(){e.layoutFailed=!0})),this.body.emitter.on("resetPhysics",(function(){e.stopSimulation(),e.ready=!1})),this.body.emitter.on("disablePhysics",(function(){e.physicsEnabled=!1,e.stopSimulation()})),this.body.emitter.on("restorePhysics",(function(){e.setOptions(e.options),!0===e.ready&&e.startSimulation()})),this.body.emitter.on("startSimulation",(function(){!0===e.ready&&e.startSimulation()})),this.body.emitter.on("stopSimulation",(function(){e.stopSimulation()})),this.body.emitter.on("destroy",(function(){e.stopSimulation(!1),e.body.emitter.off()})),this.body.emitter.on("_dataChanged",(function(){e.updatePhysicsData()}))}},{key:"setOptions",value:function(e){if(void 0!==e)if(!1===e)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(!0===e)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,selectiveNotDeepExtend(["stabilization"],this.options,e),mergeOptions(this.options,e,"stabilization"),void 0===e.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());var t=this.options.wind;t&&(("number"!=typeof t.x||isNan$2(t.x))&&(t.x=0),("number"!=typeof t.y||isNan$2(t.y))&&(t.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var e;"forceAtlas2Based"===this.options.solver?(e=this.options.forceAtlas2Based,this.nodesSolver=new ForceAtlas2BasedRepulsionSolver(this.body,this.physicsBody,e),this.edgesSolver=new SpringSolver(this.body,this.physicsBody,e),this.gravitySolver=new ForceAtlas2BasedCentralGravitySolver(this.body,this.physicsBody,e)):"repulsion"===this.options.solver?(e=this.options.repulsion,this.nodesSolver=new RepulsionSolver(this.body,this.physicsBody,e),this.edgesSolver=new SpringSolver(this.body,this.physicsBody,e),this.gravitySolver=new CentralGravitySolver(this.body,this.physicsBody,e)):"hierarchicalRepulsion"===this.options.solver?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new HierarchicalRepulsionSolver(this.body,this.physicsBody,e),this.edgesSolver=new HierarchicalSpringSolver(this.body,this.physicsBody,e),this.gravitySolver=new CentralGravitySolver(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new BarnesHutSolver(this.body,this.physicsBody,e),this.edgesSolver=new SpringSolver(this.body,this.physicsBody,e),this.gravitySolver=new CentralGravitySolver(this.body,this.physicsBody,e)),this.modelOptions=e}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var e;!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=bind$2$1(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===e&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===e&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var e=now$2$1();this.physicsTick(),(now$2$1()-e<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&setTimeout$2((function(){e.body.emitter.emit("stabilized",{iterations:t}),e.startedStabilization=!1,e.stabilizationIterations=0}),0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),!0!==this.stabilized){if(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled)this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1;else this.timestep=this.options.timestep,this.physicsStep();!0===this.stabilized&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var e=this.body.nodes,t=this.body.edges;for(var r in e)e.hasOwnProperty(r)&&!0===e[r].options.physics&&this.physicsBody.physicsNodeIndices.push(e[r].id);for(var n in t)t.hasOwnProperty(n)&&!0===t[n].options.physics&&this.physicsBody.physicsEdgeIndices.push(t[n].id);for(var i=0;i<this.physicsBody.physicsNodeIndices.length;i++){var o=this.physicsBody.physicsNodeIndices[i];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var a in this.physicsBody.velocities)void 0===e[a]&&delete this.physicsBody.velocities[a]}},{key:"revert",value:function(){var e=keys$3$1(this.previousStates),t=this.body.nodes,r=this.physicsBody.velocities;this.referenceState={};for(var n=0;n<e.length;n++){var i=e[n];void 0!==t[i]?!0===t[i].options.physics&&(this.referenceState[i]={positions:{x:t[i].x,y:t[i].y}},r[i].x=this.previousStates[i].vx,r[i].y=this.previousStates[i].vy,t[i].x=this.previousStates[i].x,t[i].y=this.previousStates[i].y):delete this.previousStates[i]}}},{key:"_evaluateStepQuality",value:function(){var e,t,r=this.body.nodes,n=this.referenceState;for(var i in this.referenceState)if(this.referenceState.hasOwnProperty(i)&&void 0!==r[i]&&(e=r[i].x-n[i].positions.x,t=r[i].y-n[i].positions.y,Math.sqrt(Math.pow(e,2)+Math.pow(t,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var e=this.physicsBody.physicsNodeIndices,t=0,r=0,n=0;n<e.length;n++){var i=e[n],o=this._performStep(i);t=Math.max(t,o),r+=o}this.adaptiveTimestepEnabled=r/e.length<5,this.stabilized=t<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(e,t,r){e+=(t-this.modelOptions.damping*e)/r*this.timestep;var n=this.options.maxVelocity||1e9;return Math.abs(e)>n&&(e=e>0?n:-n),e}},{key:"_performStep",value:function(e){var t=this.body.nodes[e],r=this.physicsBody.forces[e];this.options.wind&&(r.x+=this.options.wind.x,r.y+=this.options.wind.y);var n=this.physicsBody.velocities[e];return this.previousStates[e]={x:t.x,y:t.y,vx:n.x,vy:n.y},!1===t.options.fixed.x?(n.x=this.calculateComponentVelocity(n.x,r.x,t.options.mass),t.x+=n.x*this.timestep):(r.x=0,n.x=0),!1===t.options.fixed.y?(n.y=this.calculateComponentVelocity(n.y,r.y,t.options.mass),t.y+=n.y*this.timestep):(r.y=0,n.y=0),Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}},{key:"_freezeNodes",value:function(){var e=this.body.nodes;for(var t in e)if(e.hasOwnProperty(t)&&e[t].x&&e[t].y){var r=e[t].options.fixed;this.freezeCache[t]={x:r.x,y:r.y},r.x=!0,r.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var e=this.body.nodes;for(var t in e)e.hasOwnProperty(t)&&void 0!==this.freezeCache[t]&&(e[t].options.fixed.x=this.freezeCache[t].x,e[t].options.fixed.y=this.freezeCache[t].y);this.freezeCache={}}},{key:"stabilize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!=typeof t&&(t=this.options.stabilization.iterations,console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",t)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=t,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,setTimeout$2((function(){return e._stabilizationBatch()}),0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var e=this,t=function(){return!1===e.stabilized&&e.stabilizationIterations<e.targetIterations},r=function(){e.body.emitter.emit("stabilizationProgress",{iterations:e.stabilizationIterations,total:e.targetIterations})};this._startStabilizing()&&r();for(var n,i=0;t()&&i<this.options.stabilization.updateInterval;)this.physicsTick(),i++;(r(),t())?setTimeout$2(bind$2$1(n=this._stabilizationBatch).call(n,this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(e){for(var t=0;t<this.physicsBody.physicsNodeIndices.length;t++){var r=this.physicsBody.physicsNodeIndices[t],n=this.body.nodes[r],i=this.physicsBody.forces[r],o=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.x,2)),a=Math.min(Math.max(5,o),15),s=3*a,l=HSVToHex((180-180*Math.min(1,Math.max(0,.03*o)))/360,1,1),u={x:n.x+20*i.x,y:n.y+20*i.y};e.lineWidth=a,e.strokeStyle=l,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(u.x,u.y),e.stroke();var c=Math.atan2(i.y,i.x);e.fillStyle=l,EndPoints.draw(e,{type:"arrow",point:u,angle:c,length:s}),fill$2(e).call(e)}}}]),e}(),nativeReverse=[].reverse,test$1$1=[1,2];_export$1({target:"Array",proto:!0,forced:String(test$1$1)===String(test$1$1.reverse())},{reverse:function(){return isArray$6(this)&&(this.length=this.length),nativeReverse.call(this)}});var reverse=entryVirtual$1("Array").reverse,ArrayPrototype$c$1=Array.prototype,reverse_1=function(e){var t=e.reverse;return e===ArrayPrototype$c$1||e instanceof Array&&t===ArrayPrototype$c$1.reverse?reverse:t},reverse$1=reverse_1,reverse$2=reverse$1,getRandomValues$1="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),rnds8$1=new Uint8Array(16);function rng$1(){if(!getRandomValues$1)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$1(rnds8$1)}for(var byteToHex$1=[],i$2=0;i$2<256;++i$2)byteToHex$1[i$2]=(i$2+256).toString(16).substr(1);function bytesToUuid$1(e,t){var r=t||0,n=byteToHex$1;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}function v4$1(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||rng$1)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||bytesToUuid$1(i)}var NetworkUtil=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,null,[{key:"getRange",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,i=-1e9,o=1e9,a=-1e9;if(r.length>0)for(var s=0;s<r.length;s++)o>(t=e[r[s]]).shape.boundingBox.left&&(o=t.shape.boundingBox.left),a<t.shape.boundingBox.right&&(a=t.shape.boundingBox.right),n>t.shape.boundingBox.top&&(n=t.shape.boundingBox.top),i<t.shape.boundingBox.bottom&&(i=t.shape.boundingBox.bottom);return 1e9===o&&-1e9===a&&1e9===n&&-1e9===i&&(n=0,i=0,o=0,a=0),{minX:o,maxX:a,minY:n,maxY:i}}},{key:"getRangeCore",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,i=-1e9,o=1e9,a=-1e9;if(r.length>0)for(var s=0;s<r.length;s++)o>(t=e[r[s]]).x&&(o=t.x),a<t.x&&(a=t.x),n>t.y&&(n=t.y),i<t.y&&(i=t.y);return 1e9===o&&-1e9===a&&1e9===n&&-1e9===i&&(n=0,i=0,o=0,a=0),{minX:o,maxX:a,minY:n,maxY:i}}},{key:"findCenter",value:function(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}},{key:"cloneOptions",value:function(e,t){var r={};return void 0===t||"node"===t?(deepExtend$1(r,e.options,!0),r.x=e.x,r.y=e.y,r.amountOfConnections=e.edges.length):deepExtend$1(r,e.options,!0),r}}]),e}();function _createSuper$q(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$q()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$q(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var Cluster=function(e){inherits$1(r,Node);var t=_createSuper$q(r);function r(e,n,i,o,a,s){var l;return classCallCheck$1(this,r),(l=t.call(this,e,n,i,o,a,s)).isCluster=!0,l.containedNodes={},l.containedEdges={},l}return createClass$1(r,[{key:"_openChildCluster",value:function(e){var t=this,r=this.body.nodes[e];if(void 0===this.containedNodes[e])throw new Error("node with id: "+e+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],forEach$3$1(r.edges,(function(e){delete t.containedEdges[e.id]})),forEach$3$1(r.containedNodes,(function(e,r){t.containedNodes[r]=e})),r.containedNodes={},forEach$3$1(r.containedEdges,(function(e,r){t.containedEdges[r]=e})),r.containedEdges={},forEach$3$1(r.edges,(function(e){forEach$3$1(t.edges,(function(r){var n,i,o=indexOf$3(n=r.clusteringEdgeReplacingIds).call(n,e.id);-1!==o&&(forEach$3$1(e.clusteringEdgeReplacingIds,(function(e){r.clusteringEdgeReplacingIds.push(e),t.body.edges[e].edgeReplacedById=r.id})),splice$2$1(i=r.clusteringEdgeReplacingIds).call(i,o,1))}))})),r.edges=[]}}]),r}(),ClusterEngine=function(){function e(t){var r=this;classCallCheck$1(this,e),this.body=t,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},extend$1(this.options,this.defaultOptions),this.body.emitter.on("_resetData",(function(){r.clusteredNodes={},r.clusteredEdges={}}))}return createClass$1(e,[{key:"clusterByHubsize",value:function(e,t){void 0===e?e=this._getHubSize():"object"===_typeof_1$1(e)&&(t=this._checkOptions(e),e=this._getHubSize());for(var r=[],n=0;n<this.body.nodeIndices.length;n++){var i=this.body.nodes[this.body.nodeIndices[n]];i.edges.length>=e&&r.push(i.id)}for(var o=0;o<r.length;o++)this.clusterByConnection(r[o],t,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===t.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");t=this._checkOptions(t);var n={},i={};forEach$3$1(this.body.nodes,(function(r,o){r.options&&!0===t.joinCondition(r.options)&&(n[o]=r,forEach$3$1(r.edges,(function(t){void 0===e.clusteredEdges[t.id]&&(i[t.id]=t)})))})),this._cluster(n,i,t,r)}},{key:"clusterByEdgeCount",value:function(e,t){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=this._checkOptions(t);for(var i,o,a,s=[],l={},u=function(n){var u={},c={},f=r.body.nodeIndices[n],p=r.body.nodes[f];if(void 0===l[f]){a=0,o=[];for(var g=0;g<p.edges.length;g++)i=p.edges[g],void 0===r.clusteredEdges[i.id]&&(i.toId!==i.fromId&&a++,o.push(i));if(a===e){h=function(e){if(void 0===t.joinCondition||null===t.joinCondition)return!0;var r=NetworkUtil.cloneOptions(e);return t.joinCondition(r)};for(var y=!0,v=0;v<o.length;v++){i=o[v];var m=r._getConnectedId(i,f);if(!h(p)){y=!1;break}c[i.id]=i,u[f]=p,u[m]=r.body.nodes[m],l[f]=!0}if(keys$3$1(u).length>0&&keys$3$1(c).length>0&&!0===y)if(void 0!==(d=function(){for(var e=0;e<s.length;++e)for(var t in u)if(void 0!==s[e].nodes[t])return s[e]}())){for(var b in u)void 0===d.nodes[b]&&(d.nodes[b]=u[b]);for(var $ in c)void 0===d.edges[$]&&(d.edges[$]=c[$])}else s.push({nodes:u,edges:c})}}},c=0;c<this.body.nodeIndices.length;c++){var h,d;u(c)}for(var f=0;f<s.length;f++)this._cluster(s[f].nodes,s[f].edges,t,!1);!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,e,t)}},{key:"clusterBridges",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,e,t)}},{key:"clusterByConnection",value:function(e,t){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===e)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[e])throw new Error("The nodeId given to clusterByConnection does not exist!");var i=this.body.nodes[e];void 0===(t=this._checkOptions(t,i)).clusterNodeProperties.x&&(t.clusterNodeProperties.x=i.x),void 0===t.clusterNodeProperties.y&&(t.clusterNodeProperties.y=i.y),void 0===t.clusterNodeProperties.fixed&&(t.clusterNodeProperties.fixed={},t.clusterNodeProperties.fixed.x=i.options.fixed.x,t.clusterNodeProperties.fixed.y=i.options.fixed.y);var o={},a={},s=i.id,l=NetworkUtil.cloneOptions(i);o[s]=i;for(var u=0;u<i.edges.length;u++){var c=i.edges[u];if(void 0===this.clusteredEdges[c.id]){var h=this._getConnectedId(c,s);if(void 0===this.clusteredNodes[h])if(h!==s)if(void 0===t.joinCondition)a[c.id]=c,o[h]=this.body.nodes[h];else{var d=NetworkUtil.cloneOptions(this.body.nodes[h]);!0===t.joinCondition(l,d)&&(a[c.id]=c,o[h]=this.body.nodes[h])}else a[c.id]=c}}var f=map$2$1(r=keys$3$1(o)).call(r,(function(e){return o[e].id}));for(p in o)if(o.hasOwnProperty(p))for(var p=o[p],g=0;g<p.edges.length;g++){var y=p.edges[g];indexOf$3(f).call(f,this._getConnectedId(y,p.id))>-1&&(a[y.id]=y)}this._cluster(o,a,t,n)}},{key:"_createClusterEdges",value:function(e,t,r,n){for(var i,o,a,s,l,u,c=keys$3$1(e),h=[],d=0;d<c.length;d++){a=e[o=c[d]];for(var f=0;f<a.edges.length;f++)i=a.edges[f],void 0===this.clusteredEdges[i.id]&&(i.toId==i.fromId?t[i.id]=i:i.toId==o?(s=r.id,u=l=i.fromId):(s=i.toId,l=r.id,u=s),void 0===e[u]&&h.push({edge:i,fromId:l,toId:s}))}for(var p=[],g=function(e){for(var t=0;t<p.length;t++){var r=p[t],n=e.fromId===r.fromId&&e.toId===r.toId,i=e.fromId===r.toId&&e.toId===r.fromId;if(n||i)return r}return null},y=0;y<h.length;y++){var v=h[y],m=v.edge,b=g(v);null===b?(b=this._createClusteredEdge(v.fromId,v.toId,m,n),p.push(b)):b.clusteringEdgeReplacingIds.push(m.id),this.body.edges[m.id].edgeReplacedById=b.id,this._backupEdgeOptions(m),m.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===e.clusterEdgeProperties&&(e.clusterEdgeProperties={}),void 0===e.clusterNodeProperties&&(e.clusterNodeProperties={}),e}},{key:"_cluster",value:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=[];for(var o in e)e.hasOwnProperty(o)&&void 0!==this.clusteredNodes[o]&&i.push(o);for(var a=0;a<i.length;++a)delete e[i[a]];if(0!=keys$3$1(e).length&&(1!=keys$3$1(e).length||1==r.clusterNodeProperties.allowSingleNodeCluster)){var s=deepExtend$1({},r.clusterNodeProperties);if(void 0!==r.processProperties){var l=[];for(var u in e)if(e.hasOwnProperty(u)){var c=NetworkUtil.cloneOptions(e[u]);l.push(c)}var h=[];for(var d in t)if(t.hasOwnProperty(d)&&"clusterEdge:"!==d.substr(0,12)){var f=NetworkUtil.cloneOptions(t[d],"edge");h.push(f)}if(!(s=r.processProperties(s,l,h)))throw new Error("The processProperties function does not return properties!")}void 0===s.id&&(s.id="cluster:"+v4$1());var p=s.id;void 0===s.label&&(s.label="cluster");var g=void 0;void 0===s.x&&(g=this._getClusterPosition(e),s.x=g.x),void 0===s.y&&(void 0===g&&(g=this._getClusterPosition(e)),s.y=g.y),s.id=p;var y=this.body.functions.createNode(s,Cluster);y.containedNodes=e,y.containedEdges=t,y.clusterEdgeProperties=r.clusterEdgeProperties,this.body.nodes[s.id]=y,this._clusterEdges(e,t,s,r.clusterEdgeProperties),s.id=void 0,!0===n&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(e){void 0===this.clusteredEdges[e.id]&&(this.clusteredEdges[e.id]={physics:e.options.physics})}},{key:"_restoreEdge",value:function(e){var t=this.clusteredEdges[e.id];void 0!==t&&(e.setOptions({physics:t.physics}),delete this.clusteredEdges[e.id])}},{key:"isCluster",value:function(e){return void 0!==this.body.nodes[e]?!0===this.body.nodes[e].isCluster:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(e){for(var t,r=keys$3$1(e),n=e[r[0]].x,i=e[r[0]].x,o=e[r[0]].y,a=e[r[0]].y,s=1;s<r.length;s++)n=(t=e[r[s]]).x<n?t.x:n,i=t.x>i?t.x:i,o=t.y<o?t.y:o,a=t.y>a?t.y:a;return{x:.5*(n+i),y:.5*(o+a)}}},{key:"openCluster",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===e)throw new Error("No clusterNodeId supplied to openCluster.");var n=this.body.nodes[e];if(void 0===n)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==n.isCluster||void 0===n.containedNodes||void 0===n.containedEdges)throw new Error("The node:"+e+" is not a valid cluster.");var i=this.findNode(e),o=indexOf$3(i).call(i,e)-1;if(o>=0){var a=i[o],s=this.body.nodes[a];return s._openChildCluster(e),delete this.body.nodes[e],void(!0===r&&this.body.emitter.emit("_dataChanged"))}var l=n.containedNodes,u=n.containedEdges;if(void 0!==t&&void 0!==t.releaseFunction&&"function"==typeof t.releaseFunction){var c={},h={x:n.x,y:n.y};for(var d in l)if(l.hasOwnProperty(d)){var f=this.body.nodes[d];c[d]={x:f.x,y:f.y}}var p=t.releaseFunction(h,c);for(var g in l)if(l.hasOwnProperty(g)){var y=this.body.nodes[g];void 0!==p[g]&&(y.x=void 0===p[g].x?n.x:p[g].x,y.y=void 0===p[g].y?n.y:p[g].y)}}else forEach$3$1(l,(function(e){!1===e.options.fixed.x&&(e.x=n.x),!1===e.options.fixed.y&&(e.y=n.y)}));for(var v in l)if(l.hasOwnProperty(v)){var m=this.body.nodes[v];m.vx=n.vx,m.vy=n.vy,m.setOptions({physics:!0}),delete this.clusteredNodes[v]}for(var b=[],$=0;$<n.edges.length;$++)b.push(n.edges[$]);for(var _=0;_<b.length;_++){for(var w=b[_],E=this._getConnectedId(w,e),x=this.clusteredNodes[E],T=0;T<w.clusteringEdgeReplacingIds.length;T++){var S=w.clusteringEdgeReplacingIds[T],O=this.body.edges[S];if(void 0!==O)if(void 0!==x){var C=this.body.nodes[x.clusterId];C.containedEdges[O.id]=O,delete u[O.id];var k=O.fromId,P=O.toId;O.toId==E?P=x.clusterId:k=x.clusterId,this._createClusteredEdge(k,P,O,C.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(O)}w.remove()}for(var A in u)u.hasOwnProperty(A)&&this._restoreEdge(u[A]);delete this.body.nodes[e],!0===r&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(e){var t=[];if(!0===this.isCluster(e)){var r=this.body.nodes[e].containedNodes;for(var n in r)r.hasOwnProperty(n)&&t.push(this.body.nodes[n].id)}return t}},{key:"findNode",value:function(e){for(var t,r=[],n=0;void 0!==this.clusteredNodes[e]&&n<100;){if(void 0===(t=this.body.nodes[e]))return[];r.push(t.id),e=this.clusteredNodes[e].clusterId,n++}return void 0===(t=this.body.nodes[e])?[]:(r.push(t.id),reverse$2(r).call(r),r)}},{key:"updateClusteredNode",value:function(e,t){if(void 0===e)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===t)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[e])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(t),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(e,t){if(void 0===e)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===t)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[e])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var r=this.getClusteredEdges(e),n=0;n<r.length;n++){this.body.edges[r[n]].setOptions(t)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(e){for(var t=[],r=0;void 0!==e&&void 0!==this.body.edges[e]&&r<100;)t.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,r++;return reverse$2(t).call(t),t}},{key:"getBaseEdge",value:function(e){return this.getBaseEdges(e)[0]}},{key:"getBaseEdges",value:function(e){for(var t=[e],r=[],n=[],i=0;t.length>0&&i<100;){var o=t.pop();if(void 0!==o){var a=this.body.edges[o];if(void 0!==a){i++;var s=a.clusteringEdgeReplacingIds;if(void 0===s)n.push(o);else for(var l=0;l<s.length;++l){var u=s[l];-1===indexOf$3(t).call(t,s)&&-1===indexOf$3(r).call(r,s)&&t.push(u)}r.push(o)}}}return n}},{key:"_getConnectedId",value:function(e,t){return e.toId!=t?e.toId:(e.fromId,e.fromId)}},{key:"_getHubSize",value:function(){for(var e=0,t=0,r=0,n=0,i=0;i<this.body.nodeIndices.length;i++){var o=this.body.nodes[this.body.nodeIndices[i]];o.edges.length>n&&(n=o.edges.length),e+=o.edges.length,t+=Math.pow(o.edges.length,2),r+=1}e/=r;var a=(t/=r)-Math.pow(e,2),s=Math.sqrt(a),l=Math.floor(e+2*s);return l>n&&(l=n),l}},{key:"_createClusteredEdge",value:function(e,t,r,n,i){var o=NetworkUtil.cloneOptions(r,"edge");deepExtend$1(o,n),o.from=e,o.to=t,o.id="clusterEdge:"+v4$1(),void 0!==i&&deepExtend$1(o,i);var a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[r.id],a.connect(),this.body.edges[a.id]=a,a}},{key:"_clusterEdges",value:function(e,t,r,n){if(t instanceof Edge){var i=t,o={};o[i.id]=i,t=o}if(e instanceof Node){var a=e,s={};s[a.id]=a,e=s}if(null==r)throw new Error("_clusterEdges: parameter clusterNode required");for(var l in void 0===n&&(n=r.clusterEdgeProperties),this._createClusterEdges(e,t,r,n),t)if(t.hasOwnProperty(l)&&void 0!==this.body.edges[l]){var u=this.body.edges[l];this._backupEdgeOptions(u),u.setOptions({physics:!1})}for(var c in e)e.hasOwnProperty(c)&&(this.clusteredNodes[c]={clusterId:r.id,node:this.body.nodes[c]},this.body.nodes[c].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(e){if(void 0!==e){var t=this.clusteredNodes[e];if(void 0!==t){var r=t.clusterId;if(void 0!==r)return this.body.nodes[r]}}}},{key:"_filter",value:function(e,t){var r=[];return forEach$3$1(e,(function(e){t(e)&&r.push(e)})),r}},{key:"_updateState",value:function(){var e,t=this,r=[],n={},i=function(e){forEach$3$1(t.body.nodes,(function(t){!0===t.isCluster&&e(t)}))};for(e in this.clusteredNodes){if(this.clusteredNodes.hasOwnProperty(e))void 0===this.body.nodes[e]&&r.push(e)}i((function(e){for(var t=0;t<r.length;t++)delete e.containedNodes[r[t]]}));for(var o=0;o<r.length;o++)delete this.clusteredNodes[r[o]];forEach$3$1(this.clusteredEdges,(function(e){var r=t.body.edges[e];void 0!==r&&r.endPointsValid()||(n[e]=e)})),i((function(e){forEach$3$1(e.containedEdges,(function(e,t){e.endPointsValid()||n[t]||(n[t]=t)}))})),forEach$3$1(this.body.edges,(function(e,r){var i=!0,o=e.clusteringEdgeReplacingIds;if(void 0!==o){var a=0;forEach$3$1(o,(function(e){var r=t.body.edges[e];void 0!==r&&r.endPointsValid()&&(a+=1)})),i=a>0}e.endPointsValid()&&i||(n[r]=r)})),i((function(e){forEach$3$1(n,(function(r){delete e.containedEdges[r],forEach$3$1(e.edges,(function(i,o){i.id!==r?i.clusteringEdgeReplacingIds=t._filter(i.clusteringEdgeReplacingIds,(function(e){return!n[e]})):e.edges[o]=null})),e.edges=t._filter(e.edges,(function(e){return null!==e}))}))})),forEach$3$1(n,(function(e){delete t.clusteredEdges[e]})),forEach$3$1(n,(function(e){delete t.body.edges[e]})),forEach$3$1(keys$3$1(this.body.edges),(function(e){var r=t.body.edges[e],n=t._isClusteredNode(r.fromId)||t._isClusteredNode(r.toId);if(n!==t._isClusteredEdge(r.id))if(n){var i=t._getClusterNodeForNode(r.fromId);void 0!==i&&t._clusterEdges(t.body.nodes[r.fromId],r,i);var o=t._getClusterNodeForNode(r.toId);void 0!==o&&t._clusterEdges(t.body.nodes[r.toId],r,o)}else delete t._clusterEdges[e],t._restoreEdge(r)}));for(var a=!1,s=!0,l=function(){var e=[];i((function(t){var r=keys$3$1(t.containedNodes).length,n=!0===t.options.allowSingleNodeCluster;(n&&r<1||!n&&r<2)&&e.push(t.id)}));for(var r=0;r<e.length;++r)t.openCluster(e[r],{},!1);s=e.length>0,a=a||s};s;)l();a&&this._updateState()}},{key:"_isClusteredNode",value:function(e){return void 0!==this.clusteredNodes[e]}},{key:"_isClusteredEdge",value:function(e){return void 0!==this.clusteredEdges[e]}}]),e}();function _initRequestAnimationFrame(){var e;void 0!==window&&(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===e?function(e){e()}:e}var CanvasRenderer$1=function(){function e(t,r){classCallCheck$1(this,e),_initRequestAnimationFrame(),this.body=t,this.canvas=r,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},extend$1(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return createClass$1(e,[{key:"bindEventListeners",value:function(){var e,t=this;this.body.emitter.on("dragStart",(function(){t.dragging=!0})),this.body.emitter.on("dragEnd",(function(){t.dragging=!1})),this.body.emitter.on("zoom",(function(){t.zooming=!0,window.clearTimeout(t.zoomTimeoutId),t.zoomTimeoutId=window.setTimeout((function(){var e;t.zooming=!1,bind$2$1(e=t._requestRedraw).call(e,t)()}),250)})),this.body.emitter.on("_resizeNodes",(function(){t._resizeNodes()})),this.body.emitter.on("_redraw",(function(){!1===t.renderingActive&&t._redraw()})),this.body.emitter.on("_blockRedraw",(function(){t.allowRedraw=!1})),this.body.emitter.on("_allowRedraw",(function(){t.allowRedraw=!0,t.redrawRequested=!1})),this.body.emitter.on("_requestRedraw",bind$2$1(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",(function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()})),this.body.emitter.on("_stopRendering",(function(){t.renderRequests-=1,t.renderingActive=t.renderRequests>0,t.renderTimer=void 0})),this.body.emitter.on("destroy",(function(){t.renderRequests=0,t.allowRedraw=!1,t.renderingActive=!1,!0===t.requiresTimeout?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()}))}},{key:"setOptions",value:function(e){if(void 0!==e){selectiveDeepExtend(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}}},{key:"_requestNextFrame",value:function(e,t){if("undefined"!=typeof window){var r,n=window;return!0===this.requiresTimeout?r=n.setTimeout(e,t):n.requestAnimationFrame&&(r=n.requestAnimationFrame(e)),r}}},{key:"_startRendering",value:function(){var e;!0===this.renderingActive&&(void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(bind$2$1(e=this._renderStep).call(e,this),this.simulationInterval)))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var e=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame((function(){e._redraw(!1)}),0))}},{key:"_redraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1,0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var t=this.canvas.getContext(),r=this.canvas.frame.canvas.clientWidth,n=this.canvas.frame.canvas.clientHeight;if(t.clearRect(0,0,r,n),0===this.canvas.frame.clientWidth)return;t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale),t.beginPath(),this.body.emitter.emit("beforeDrawing",t),t.closePath(),!1===e&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(t),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(t,e),t.beginPath(),this.body.emitter.emit("afterDrawing",t),t.closePath(),t.restore(),!0===e&&t.clearRect(0,0,r,n)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);var t,r=this.body.nodes;for(var n in r)r.hasOwnProperty(n)&&((t=r[n]).resize(e),t.updateBoundingBox(e,t.selected));e.restore()}},{key:"_drawNodes",value:function(e){for(var t,r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.nodes,o=this.body.nodeIndices,a=[],s=[],l=20,u=this.canvas.DOMtoCanvas({x:-l,y:-l}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),h={top:u.y,left:u.x,bottom:c.y,right:c.x},d=0;d<o.length;d++)(t=i[o[d]]).hover?s.push(o[d]):t.isSelected()?a.push(o[d]):!0===n||!0===t.isBoundingBoxOverlappingWith(h)?t.draw(e):t.updateBoundingBox(e,t.selected);var f=a.length,p=s.length;for(r=0;r<f;r++)(t=i[a[r]]).draw(e);for(r=0;r<p;r++)(t=i[s[r]]).draw(e)}},{key:"_drawEdges",value:function(e){for(var t,r=this.body.edges,n=this.body.edgeIndices,i=0;i<n.length;i++)!0===(t=r[n[i]]).connected&&t.draw(e)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var e=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,(-1!=indexOf$3(e).call(e,"msie 9.0")||-1!=indexOf$3(e).call(e,"safari")&&indexOf$3(e).call(e,"chrome")<=-1)&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),e}(),setInterval=path$1.setInterval,setInterval$1=setInterval,hammerUtil=createCommonjsModule$2((function(e,t){t.onTouch=function(e,t){t.inputHandler=function(e){e.isFirst&&t(e)},e.on("hammer.input",t.inputHandler)},t.onRelease=function(e,t){return t.inputHandler=function(e){e.isFinal&&t(e)},e.on("hammer.input",t.inputHandler)},t.offTouch=function(e,t){e.off("hammer.input",t.inputHandler)},t.offRelease=t.offTouch,t.disablePreventDefaultVertically=function(e){return e.getTouchAction=function(){return["pan-y"]},e}})),hammerUtil_1=hammerUtil.onTouch,hammerUtil_2=hammerUtil.onRelease,hammerUtil_3=hammerUtil.offTouch,hammerUtil_4=hammerUtil.offRelease,hammerUtil_5=hammerUtil.disablePreventDefaultVertically,Canvas=function(){function e(t){var r;classCallCheck$1(this,e),this.body=t,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=bind$2$1(r=this._onResize).call(r,this),this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},extend$1(this.options,this.defaultOptions),this.bindEventListeners()}return createClass$1(e,[{key:"bindEventListeners",value:function(){var e,t=this;this.body.emitter.once("resize",(function(e){0!==e.width&&(t.body.view.translation.x=.5*e.width),0!==e.height&&(t.body.view.translation.y=.5*e.height)})),this.body.emitter.on("setSize",bind$2$1(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",(function(){t.hammerFrame.destroy(),t.hammer.destroy(),t._cleanUp()}))}},{key:"setOptions",value:function(e){var t,r=this;if(void 0!==e){selectiveDeepExtend(["width","height","autoResize"],this.options,e)}!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=setInterval$1((function(){!0===r.setSize()&&r.body.emitter.emit("_requestRedraw")}),1e3),this.resizeFunction=bind$2$1(t=this._onResize).call(t,this),addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,t=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,r=this.cameraState.scale;1!=e&&1!=t?r=.5*this.cameraState.scale*(e+t):1!=e?r=this.cameraState.scale*e:1!=t&&(r=this.cameraState.scale*t),this.body.view.scale=r;var n=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),i={x:n.x-this.cameraState.position.x,y:n.y-this.cameraState.position.y};this.body.view.translation.x+=i.x*this.body.view.scale,this.body.view.translation.y+=i.y*this.body.view.scale}}},{key:"_prepareValue",value:function(e){if("number"==typeof e)return e+"px";if("string"==typeof e){if(-1!==indexOf$3(e).call(e,"%")||-1!==indexOf$3(e).call(e,"px"))return e;if(-1===indexOf$3(e).call(e,"%"))return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var e=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new hammer(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:hammer.DIRECTION_ALL}),hammerUtil.onTouch(this.hammer,(function(t){e.body.eventListeners.onTouch(t)})),this.hammer.on("tap",(function(t){e.body.eventListeners.onTap(t)})),this.hammer.on("doubletap",(function(t){e.body.eventListeners.onDoubleTap(t)})),this.hammer.on("press",(function(t){e.body.eventListeners.onHold(t)})),this.hammer.on("panstart",(function(t){e.body.eventListeners.onDragStart(t)})),this.hammer.on("panmove",(function(t){e.body.eventListeners.onDrag(t)})),this.hammer.on("panend",(function(t){e.body.eventListeners.onDragEnd(t)})),this.hammer.on("pinch",(function(t){e.body.eventListeners.onPinch(t)})),this.frame.canvas.addEventListener("wheel",(function(t){e.body.eventListeners.onMouseWheel(t)})),this.frame.canvas.addEventListener("mousemove",(function(t){e.body.eventListeners.onMouseMove(t)})),this.frame.canvas.addEventListener("contextmenu",(function(t){e.body.eventListeners.onContext(t)})),this.hammerFrame=new hammer(this.frame),hammerUtil.onRelease(this.hammerFrame,(function(t){e.body.eventListeners.onRelease(t)}))}},{key:"setSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;e=this._prepareValue(e),t=this._prepareValue(t);var r=!1,n=this.frame.canvas.width,i=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||t!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=t)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=t,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=t,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},r=!0;else{var a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),s=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===a&&this.frame.canvas.height===s||this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,r=!0),this.frame.canvas.height!==s&&(this.frame.canvas.height=s,r=!0)}return!0===r&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(n/this.pixelRatio),oldHeight:Math.round(i/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,r}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var e=this.getContext();if(void 0===e)throw new Error("Could not get canvax context");var t=1;return"undefined"!=typeof window&&(t=window.devicePixelRatio||1),t/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var e=this.getContext();if(void 0===e)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}},{key:"DOMtoCanvas",value:function(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}]),e}(),View=function(){function e(t,r){var n,i,o=this;classCallCheck$1(this,e),this.body=t,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",bind$2$1(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",(function(){o.body.emitter.emit("_stopRendering")})),this.body.emitter.on("unlockNode",bind$2$1(i=this.releaseNode).call(i,this))}return createClass$1(e,[{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e}},{key:"fit",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nodes:[]},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];void 0!==(r=assign$2$2({},r)).nodes&&0!==r.nodes.length||(r.nodes=this.body.nodeIndices);var i=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(0===i||0===o)t=1,e=NetworkUtil.getRange(this.body.nodes,r.nodes);else if(!0===n){var a=0;for(var s in this.body.nodes)if(this.body.nodes.hasOwnProperty(s)){var l=this.body.nodes[s];!0===l.predefinedPosition&&(a+=1)}if(a>.5*this.body.nodeIndices.length)return void this.fit(r,!1);e=NetworkUtil.getRange(this.body.nodes,r.nodes);var u=this.body.nodeIndices.length;t=12.662/(u+7.4147)+.0964822;var c=Math.min(i/600,o/600);t*=c}else{this.body.emitter.emit("_resizeNodes"),e=NetworkUtil.getRange(this.body.nodes,r.nodes);var h=1.1*Math.abs(e.maxX-e.minX),d=1.1*Math.abs(e.maxY-e.minY),f=i/h,p=o/d;t=f<=p?f:p}(t>1||0===t)&&(t=1);var g=NetworkUtil.findCenter(e),y={position:g,scale:t,animation:r.animation};this.moveTo(y)}},{key:"focus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[e]){var r={x:this.body.nodes[e].x,y:this.body.nodes[e].y};t.position=r,t.lockedOnNode=e,this.moveTo(t)}else console.log("Node: "+e+" cannot be found.")}},{key:"moveTo",value:function(e){if(void 0!==e){if(null!=e.offset){if(null!=e.offset.x){if(e.offset.x=+e.offset.x,!_isFinite$2(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(null!=e.offset.y){if(e.offset.y=+e.offset.y,!_isFinite$2(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(null!=e.position){if(null!=e.position.x){if(e.position.x=+e.position.x,!_isFinite$2(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(null!=e.position.y){if(e.position.y=+e.position.y,!_isFinite$2(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(null!=e.scale){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;void 0===e.animation&&(e.animation={duration:0}),!1===e.animation&&(e.animation={duration:0}),!0===e.animation&&(e.animation={}),void 0===e.animation.duration&&(e.animation.duration=1e3),void 0===e.animation.easingFunction&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}else e={}}},{key:"animateView",value:function(e){if(void 0!==e){this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),!0===e.locked&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;var t,r,n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=n.x-e.position.x,o=n.y-e.position.y;if(this.targetTranslation={x:this.sourceTranslation.x+i*this.targetScale+e.offset.x,y:this.sourceTranslation.y+o*this.targetScale+e.offset.y},0===e.animation.duration)if(null!=this.lockedOnNodeId)this.viewFunction=bind$2$1(t=this._lockedRedraw).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction);else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=bind$2$1(r=this._transitionRedraw).call(r,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}},{key:"_lockedRedraw",value:function(){var e=this.body.nodes[this.lockedOnNodeId].x,t=this.body.nodes[this.lockedOnNodeId].y,r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n=r.x-e,i=r.y-t,o=this.body.view.translation,a={x:o.x+n*this.body.view.scale+this.lockedOnNodeOffset.x,y:o.y+i*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=a}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===e?1:this.easingTime;var t=easingFunctions[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*t,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*t,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*t},this.easingTime>=1){var r;if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId)this.viewFunction=bind$2$1(r=this._lockedRedraw).call(r,this),this.body.emitter.on("initRedraw",this.viewFunction);this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}(),NavigationHandler=function(){function e(t,r){var n=this;classCallCheck$1(this,e),this.body=t,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",(function(){n.activated=!0,n.configureKeyboardBindings()})),this.body.emitter.on("deactivate",(function(){n.activated=!1,n.configureKeyboardBindings()})),this.body.emitter.on("destroy",(function(){void 0!==n.keycharm&&n.keycharm.destroy()})),this.options={}}return createClass$1(e,[{key:"setOptions",value:function(e){void 0!==e&&(this.options=e,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var e=this;this.cleanNavigation(),this.navigationDOM={};var t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var n=0;n<t.length;n++){this.navigationDOM[t[n]]=document.createElement("div"),this.navigationDOM[t[n]].className="vis-button vis-"+t[n],this.navigationDOM.wrapper.appendChild(this.navigationDOM[t[n]]);var i,o,a=new hammer(this.navigationDOM[t[n]]);if("_fit"===r[n])hammerUtil.onTouch(a,bind$2$1(i=this._fit).call(i,this));else hammerUtil.onTouch(a,bind$2$1(o=this.bindToRedraw).call(o,this,r[n]));this.navigationHammers.push(a)}var s=new hammer(this.canvas.frame);hammerUtil.onRelease(s,(function(){e._stopMovement()})),this.navigationHammers.push(s),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(e){var t;void 0===this.boundFunctions[e]&&(this.boundFunctions[e]=bind$2$1(t=this[e]).call(t,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(e){void 0!==this.boundFunctions[e]&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var e in this.boundFunctions)this.boundFunctions.hasOwnProperty(e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var e=this.body.view.scale,t=this.body.view.scale*(1+this.options.keyboard.speed.zoom),r=this.body.view.translation,n=t/e,i=(1-n)*this.canvas.canvasViewCenter.x+r.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+r.y*n;this.body.view.scale=t,this.body.view.translation={x:i,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var e=this.body.view.scale,t=this.body.view.scale/(1+this.options.keyboard.speed.zoom),r=this.body.view.translation,n=t/e,i=(1-n)*this.canvas.canvasViewCenter.x+r.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+r.y*n;this.body.view.scale=t,this.body.view.translation={x:i,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var e,t,r,n,i,o,a,s,l,u,c,h,d,f,p,g,y,v,m,b,$,_,w,E,x=this;(void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled)&&(!0===this.options.keyboard.bindToWindow?this.keycharm=keycharm({container:window,preventDefault:!0}):this.keycharm=keycharm({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(bind$2$1(e=this.keycharm).call(e,"up",(function(){x.bindToRedraw("_moveUp")}),"keydown"),bind$2$1(t=this.keycharm).call(t,"down",(function(){x.bindToRedraw("_moveDown")}),"keydown"),bind$2$1(r=this.keycharm).call(r,"left",(function(){x.bindToRedraw("_moveLeft")}),"keydown"),bind$2$1(n=this.keycharm).call(n,"right",(function(){x.bindToRedraw("_moveRight")}),"keydown"),bind$2$1(i=this.keycharm).call(i,"=",(function(){x.bindToRedraw("_zoomIn")}),"keydown"),bind$2$1(o=this.keycharm).call(o,"num+",(function(){x.bindToRedraw("_zoomIn")}),"keydown"),bind$2$1(a=this.keycharm).call(a,"num-",(function(){x.bindToRedraw("_zoomOut")}),"keydown"),bind$2$1(s=this.keycharm).call(s,"-",(function(){x.bindToRedraw("_zoomOut")}),"keydown"),bind$2$1(l=this.keycharm).call(l,"[",(function(){x.bindToRedraw("_zoomOut")}),"keydown"),bind$2$1(u=this.keycharm).call(u,"]",(function(){x.bindToRedraw("_zoomIn")}),"keydown"),bind$2$1(c=this.keycharm).call(c,"pageup",(function(){x.bindToRedraw("_zoomIn")}),"keydown"),bind$2$1(h=this.keycharm).call(h,"pagedown",(function(){x.bindToRedraw("_zoomOut")}),"keydown"),bind$2$1(d=this.keycharm).call(d,"up",(function(){x.unbindFromRedraw("_moveUp")}),"keyup"),bind$2$1(f=this.keycharm).call(f,"down",(function(){x.unbindFromRedraw("_moveDown")}),"keyup"),bind$2$1(p=this.keycharm).call(p,"left",(function(){x.unbindFromRedraw("_moveLeft")}),"keyup"),bind$2$1(g=this.keycharm).call(g,"right",(function(){x.unbindFromRedraw("_moveRight")}),"keyup"),bind$2$1(y=this.keycharm).call(y,"=",(function(){x.unbindFromRedraw("_zoomIn")}),"keyup"),bind$2$1(v=this.keycharm).call(v,"num+",(function(){x.unbindFromRedraw("_zoomIn")}),"keyup"),bind$2$1(m=this.keycharm).call(m,"num-",(function(){x.unbindFromRedraw("_zoomOut")}),"keyup"),bind$2$1(b=this.keycharm).call(b,"-",(function(){x.unbindFromRedraw("_zoomOut")}),"keyup"),bind$2$1($=this.keycharm).call($,"[",(function(){x.unbindFromRedraw("_zoomOut")}),"keyup"),bind$2$1(_=this.keycharm).call(_,"]",(function(){x.unbindFromRedraw("_zoomIn")}),"keyup"),bind$2$1(w=this.keycharm).call(w,"pageup",(function(){x.unbindFromRedraw("_zoomIn")}),"keyup"),bind$2$1(E=this.keycharm).call(E,"pagedown",(function(){x.unbindFromRedraw("_zoomOut")}),"keyup")))}}]),e}(),Popup=function(){function e(t,r){classCallCheck$1(this,e),this.container=t,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return createClass$1(e,[{key:"setPosition",value:function(e,t){this.x=_parseInt$2(e),this.y=_parseInt$2(t)}},{key:"setText",value:function(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=e}},{key:"show",value:function(e){if(void 0===e&&(e=!0),!0===e){var t=this.frame.clientHeight,r=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,i=this.frame.parentNode.clientWidth,o=0,a=0;if("flip"==this.overflowMethod){var s=!1,l=!0;this.y-t<this.padding&&(l=!1),this.x+r>i-this.padding&&(s=!0),o=s?this.x-r:this.x,a=l?this.y-t:this.y}else(a=this.y-t)+t+this.padding>n&&(a=n-t-this.padding),a<this.padding&&(a=this.padding),(o=this.x)+r+this.padding>i&&(o=i-r-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),InteractionHandler=function(){function e(t,r,n){var i,o,a,s,l,u,c,h,d,f,p,g,y;classCallCheck$1(this,e),this.body=t,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new NavigationHandler(t,r),this.body.eventListeners.onTap=bind$2$1(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=bind$2$1(o=this.onTouch).call(o,this),this.body.eventListeners.onDoubleTap=bind$2$1(a=this.onDoubleTap).call(a,this),this.body.eventListeners.onHold=bind$2$1(s=this.onHold).call(s,this),this.body.eventListeners.onDragStart=bind$2$1(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=bind$2$1(u=this.onDrag).call(u,this),this.body.eventListeners.onDragEnd=bind$2$1(c=this.onDragEnd).call(c,this),this.body.eventListeners.onMouseWheel=bind$2$1(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=bind$2$1(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=bind$2$1(f=this.onMouseMove).call(f,this),this.body.eventListeners.onRelease=bind$2$1(p=this.onRelease).call(p,this),this.body.eventListeners.onContext=bind$2$1(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=bind$2$1(y=this.getPointer).call(y,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},extend$1(this.options,this.defaultOptions),this.bindEventListeners()}return createClass$1(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("destroy",(function(){clearTimeout(e.popupTimer),delete e.body.functions.getPointer}))}},{key:"setOptions",value:function(e){if(void 0!==e){selectiveNotDeepExtend(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),mergeOptions(this.options,e,"keyboard"),e.tooltip&&(extend$1(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=parseColor(e.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(e){return{x:e.x-getAbsoluteLeft(this.canvas.frame.canvas),y:e.y-getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(e){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(e){var t=this.getPointer(e.center),r=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(t,e,r),this.selectionHandler._generateClickEvent("click",e,t)}},{key:"onDoubleTap",value:function(e){var t=this.getPointer(e.center);this.selectionHandler._generateClickEvent("doubleClick",e,t)}},{key:"onHold",value:function(e){var t=this.getPointer(e.center),r=this.selectionHandler.options.multiselect;this.checkSelectionChanges(t,e,r),this.selectionHandler._generateClickEvent("click",e,t),this.selectionHandler._generateClickEvent("hold",e,t)}},{key:"onRelease",value:function(e){if((new Date).valueOf()-this.touchTime>10){var t=this.getPointer(e.center);this.selectionHandler._generateClickEvent("release",e,t),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(e){var t=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler._generateClickEvent("oncontext",e,t)}},{key:"checkSelectionChanges",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.selectionHandler.getSelection(),i=!1;i=!0===r?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e);var o=this.selectionHandler.getSelection(),a=this._determineDifference(n,o),s=this._determineDifference(o,n);a.edges.length>0&&(this.selectionHandler._generateClickEvent("deselectEdge",t,e,n),i=!0),a.nodes.length>0&&(this.selectionHandler._generateClickEvent("deselectNode",t,e,n),i=!0),s.nodes.length>0&&(this.selectionHandler._generateClickEvent("selectNode",t,e),i=!0),s.edges.length>0&&(this.selectionHandler._generateClickEvent("selectEdge",t,e),i=!0),!0===i&&this.selectionHandler._generateClickEvent("select",t,e)}},{key:"_determineDifference",value:function(e,t){var r=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n];-1===indexOf$3(t).call(t,i)&&r.push(i)}return r};return{nodes:r(e.nodes,t.nodes),edges:r(e.edges,t.edges)}}},{key:"onDragStart",value:function(e){void 0===this.drag.pointer&&this.onTouch(e);var t=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=extend$1({},this.body.view.translation),this.drag.nodeId=void 0,void 0!==t&&!0===this.options.dragNodes){this.drag.nodeId=t.id,!1===t.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(t)),this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer);var r=this.selectionHandler.selectionObj.nodes;for(var n in r)if(r.hasOwnProperty(n)){var i=r[n],o={id:i.id,node:i,x:i.x,y:i.y,xFixed:i.options.fixed.x,yFixed:i.options.fixed.y};i.options.fixed.x=!0,i.options.fixed.y=!0,this.drag.selection.push(o)}}else this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(e){var t=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var r=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&!0===this.options.dragNodes){this.selectionHandler._generateClickEvent("dragging",e,r);var i=r.x-this.drag.pointer.x,o=r.y-this.drag.pointer.y;forEach$2$1(n).call(n,(function(e){var r=e.node;!1===e.xFixed&&(r.x=t.canvas._XconvertDOMtoCanvas(t.canvas._XconvertCanvasToDOM(e.x)+i)),!1===e.yFixed&&(r.y=t.canvas._YconvertDOMtoCanvas(t.canvas._YconvertCanvasToDOM(e.y)+o))})),this.body.emitter.emit("startSimulation")}else if(!0===this.options.dragView){if(this.selectionHandler._generateClickEvent("dragging",e,r,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(e);var a=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+a,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}},{key:"onDragEnd",value:function(e){this.drag.dragging=!1;var t=this.drag.selection;t&&t.length?(forEach$2$1(t).call(t,(function(e){e.node.options.fixed.x=e.xFixed,e.node.options.fixed.y=e.yFixed})),this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(e){var t=this.getPointer(e.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var r=this.pinch.scale*e.scale;this.zoom(r,t)}},{key:"zoom",value:function(e,t){if(!0===this.options.zoomView){var r=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);var n=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(n=this.canvas.DOMtoCanvas(this.drag.pointer));var i=this.body.view.translation,o=e/r,a=(1-o)*t.x+i.x*o,s=(1-o)*t.y+i.y*o;if(this.body.view.scale=e,this.body.view.translation={x:a,y:s},null!=n){var l=this.canvas.canvasToDOM(n);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),r<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:t}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:t})}}},{key:"onMouseWheel",value:function(e){if(!0===this.options.zoomView){if(0!==e.deltaY){var t=this.body.view.scale;t*=1+(e.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);var r=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(t,r)}e.preventDefault()}}},{key:"onMouseMove",value:function(e){var t=this,r=this.getPointer({x:e.clientX,y:e.clientY}),n=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(r),!1===this.popup.hidden&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===n&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout$2((function(){return t._checkShowPopup(r)}),this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(e,r)}},{key:"_checkShowPopup",value:function(e){var t=this.canvas._XconvertDOMtoCanvas(e.x),r=this.canvas._YconvertDOMtoCanvas(e.y),n={left:t,top:r,right:t,bottom:r},i=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,a="node";if(void 0===this.popupObj){for(var s,l=this.body.nodeIndices,u=this.body.nodes,c=[],h=0;h<l.length;h++)!0===(s=u[l[h]]).isOverlappingWith(n)&&(o=!0,void 0!==s.getTitle()&&c.push(l[h]));c.length>0&&(this.popupObj=u[c[c.length-1]],o=!0)}if(void 0===this.popupObj&&!1===o){for(var d,f=this.body.edgeIndices,p=this.body.edges,g=[],y=0;y<f.length;y++)!0===(d=p[f[y]]).isOverlappingWith(n)&&!0===d.connected&&void 0!==d.getTitle()&&g.push(f[y]);g.length>0&&(this.popupObj=p[g[g.length-1]],a="edge")}void 0!==this.popupObj?this.popupObj.id!==i&&(void 0===this.popup&&(this.popup=new Popup(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(e){var t=this.selectionHandler._pointerToPositionObject(e),r=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(r=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(t))){var n=this.selectionHandler.getNodeAt(e);r=void 0!==n&&n.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(e)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(r=this.body.edges[this.popup.popupTargetId].isOverlappingWith(t));!1===r&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}(),SelectionHandler=function(){function e(t,r){var n=this;classCallCheck$1(this,e),this.body=t,this.canvas=r,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},extend$1(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",(function(){n.updateSelection()}))}return createClass$1(e,[{key:"setOptions",value:function(e){if(void 0!==e){selectiveDeepExtend(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}}},{key:"selectOnPoint",value:function(e){var t=!1;if(!0===this.options.selectable){var r=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),void 0!==r&&(t=this.selectObject(r)),this.body.emitter.emit("_requestRedraw")}return t}},{key:"selectAdditionalOnPoint",value:function(e){var t=!1;if(!0===this.options.selectable){var r=this.getNodeAt(e)||this.getEdgeAt(e);void 0!==r&&(t=!0,!0===r.isSelected()?this.deselectObject(r):this.selectObject(r),this.body.emitter.emit("_requestRedraw"))}return t}},{key:"_initBaseEvent",value:function(e,t){var r={};return r.pointer={DOM:{x:t.x,y:t.y},canvas:this.canvas.DOMtoCanvas(t)},r.event=e,r}},{key:"_generateClickEvent",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this._initBaseEvent(t,r);if(!0===i)o.nodes=[],o.edges=[];else{var a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}void 0!==n&&(o.previousSelection=n),"click"==e&&(o.items=this.getClickedItems(r)),void 0!==t.controlEdge&&(o.controlEdge=t.controlEdge),this.body.emitter.emit(e,o)}},{key:"selectObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;return void 0!==e&&(e instanceof Node&&!0===t&&this._selectConnectedEdges(e),e.select(),this._addToSelection(e),!0)}},{key:"deselectObject",value:function(e){!0===e.isSelected()&&(e.selected=!1,this._removeFromSelection(e))}},{key:"_getAllNodesOverlappingWith",value:function(e){for(var t=[],r=this.body.nodes,n=0;n<this.body.nodeIndices.length;n++){var i=this.body.nodeIndices[n];r[i].isOverlappingWith(e)&&t.push(i)}return t}},{key:"_pointerToPositionObject",value:function(e){var t=this.canvas.DOMtoCanvas(e);return{left:t.x-1,top:t.y+1,right:t.x+1,bottom:t.y-1}}},{key:"getNodeAt",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._pointerToPositionObject(e),n=this._getAllNodesOverlappingWith(r);return n.length>0?!0===t?this.body.nodes[n[n.length-1]]:n[n.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(e,t){for(var r=this.body.edges,n=0;n<this.body.edgeIndices.length;n++){var i=this.body.edgeIndices[n];r[i].isOverlappingWith(e)&&t.push(i)}}},{key:"_getAllEdgesOverlappingWith",value:function(e){var t=[];return this._getEdgesOverlappingWith(e,t),t}},{key:"getEdgeAt",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.canvas.DOMtoCanvas(e),n=10,i=null,o=this.body.edges,a=0;a<this.body.edgeIndices.length;a++){var s=this.body.edgeIndices[a],l=o[s];if(l.connected){var u=l.from.x,c=l.from.y,h=l.to.x,d=l.to.y,f=l.edgeType.getDistanceToEdge(u,c,h,d,r.x,r.y);f<n&&(i=s,n=f)}}return null!==i?!0===t?this.body.edges[i]:i:void 0}},{key:"_addToSelection",value:function(e){e instanceof Node?this.selectionObj.nodes[e.id]=e:this.selectionObj.edges[e.id]=e}},{key:"_addToHover",value:function(e){e instanceof Node?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}},{key:"_removeFromSelection",value:function(e){e instanceof Node?(delete this.selectionObj.nodes[e.id],this._unselectConnectedEdges(e)):delete this.selectionObj.edges[e.id]}},{key:"unselectAll",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].unselect();for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&this.selectionObj.edges[t].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);return e}},{key:"_getSelectedNode",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return this.selectionObj.nodes[e]}},{key:"_getSelectedEdge",value:function(){for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return this.selectionObj.edges[e]}},{key:"_getSelectedEdgeCount",value:function(){var e=0;for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(e+=1);return e}},{key:"_getSelectedObjectCount",value:function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);for(var r in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(r)&&(e+=1);return e}},{key:"_selectionIsEmpty",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return!1;for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].clusterSize>1)return!0;return!1}},{key:"_selectConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var r=e.edges[t];r.select(),this._addToSelection(r)}}},{key:"_hoverConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var r=e.edges[t];r.hover=!0,this._addToHover(r)}}},{key:"_unselectConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var r=e.edges[t];r.unselect(),this._removeFromSelection(r)}}},{key:"emitBlurEvent",value:function(e,t,r){var n=this._initBaseEvent(e,t);!0===r.hover&&(r.hover=!1,r instanceof Node?(n.node=r.id,this.body.emitter.emit("blurNode",n)):(n.edge=r.id,this.body.emitter.emit("blurEdge",n)))}},{key:"emitHoverEvent",value:function(e,t,r){var n=this._initBaseEvent(e,t),i=!1;return!1===r.hover&&(r.hover=!0,this._addToHover(r),i=!0,r instanceof Node?(n.node=r.id,this.body.emitter.emit("hoverNode",n)):(n.edge=r.id,this.body.emitter.emit("hoverEdge",n))),i}},{key:"hoverObject",value:function(e,t){var r=this.getNodeAt(t);void 0===r&&(r=this.getEdgeAt(t));var n=!1;for(var i in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(i)&&(void 0===r||r instanceof Node&&r.id!=i||r instanceof Edge)&&(this.emitBlurEvent(e,t,this.hoverObj.nodes[i]),delete this.hoverObj.nodes[i],n=!0);for(var o in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(o)&&(!0===n?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):(void 0===r||r instanceof Edge&&r.id!=o||r instanceof Node&&!r.hover)&&(this.emitBlurEvent(e,t,this.hoverObj.edges[o]),delete this.hoverObj.edges[o],n=!0));if(void 0!==r){var a=keys$3$1(this.hoverObj.edges).length,s=keys$3$1(this.hoverObj.nodes).length;(n||r instanceof Edge&&0===a&&0===s||r instanceof Node&&0===a&&0===s)&&(n=this.emitHoverEvent(e,t,r)),r instanceof Node&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(r)}!0===n&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodes(),edges:this.getSelectedEdges()}}},{key:"getSelectedNodes",value:function(){var e=[];if(!0===this.options.selectable)for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&e.push(this.selectionObj.nodes[t].id);return e}},{key:"getSelectedEdges",value:function(){var e=[];if(!0===this.options.selectable)for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&e.push(this.selectionObj.edges[t].id);return e}},{key:"setSelection",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw"Selection must be an object with nodes and/or edges properties";if((n.unselectAll||void 0===n.unselectAll)&&this.unselectAll(),e.nodes)for(t=0;t<e.nodes.length;t++){r=e.nodes[t];var i=this.body.nodes[r];if(!i)throw new RangeError('Node with id "'+r+'" not found');this.selectObject(i,n.highlightEdges)}if(e.edges)for(t=0;t<e.edges.length;t++){r=e.edges[t];var o=this.body.edges[r];if(!o)throw new RangeError('Edge with id "'+r+'" not found');this.selectObject(o)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:t})}},{key:"selectEdges",value:function(e){if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({edges:e})}},{key:"updateSelection",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(this.body.nodes.hasOwnProperty(e)||delete this.selectionObj.nodes[e]);for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(this.body.edges.hasOwnProperty(t)||delete this.selectionObj.edges[t])}},{key:"getClickedItems",value:function(e){for(var t=this.canvas.DOMtoCanvas(e),r=[],n=this.body.nodeIndices,i=this.body.nodes,o=n.length-1;o>=0;o--){var a=i[n[o]].getItemsOnPoint(t);r.push.apply(r,a)}for(var s=this.body.edgeIndices,l=this.body.edges,u=s.length-1;u>=0;u--){var c=l[s[u]].getItemsOnPoint(t);r.push.apply(r,c)}return r}}]),e}(),freezing$1=!fails$1((function(){return Object.isExtensible(Object.preventExtensions({}))})),internalMetadata$1=createCommonjsModule$2((function(e){var t=objectDefineProperty$1.f,r=uid$1("meta"),n=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,r,{value:{objectID:"O"+ ++n,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!isObject$3(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!has$2(e,r)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[r].objectID},getWeakData:function(e,t){if(!has$2(e,r)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[r].weakData},onFreeze:function(e){return freezing$1&&a.REQUIRED&&i(e)&&!has$2(e,r)&&o(e),e}};hiddenKeys$2[r]=!0})),internalMetadata_1$1=internalMetadata$1.REQUIRED,internalMetadata_2$1=internalMetadata$1.fastKey,internalMetadata_3$1=internalMetadata$1.getWeakData,internalMetadata_4$1=internalMetadata$1.onFreeze,iterate_1$1=createCommonjsModule$2((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,r,n,i,o){var a,s,l,u,c,h,d,f=functionBindContext$1(r,n,i?2:1);if(o)a=e;else{if("function"!=typeof(s=getIteratorMethod$2(e)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod$1(s)){for(l=0,u=toLength$1(e.length);u>l;l++)if((c=i?f(anObject$1(d=e[l])[0],d[1]):f(e[l]))&&c instanceof t)return c;return new t(!1)}a=s.call(e)}for(h=a.next;!(d=h.call(a)).done;)if("object"==typeof(c=callWithSafeIterationClosing$1(a,f,d.value,i))&&c&&c instanceof t)return c;return new t(!1)}).stop=function(e){return new t(!0,e)}})),anInstance$1=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},defineProperty$9$1=objectDefineProperty$1.f,forEach$4$1=arrayIteration$1.forEach,setInternalState$3$1=internalState$1.set,internalStateGetterFor$2=internalState$1.getterFor,collection$2=function(e,t,r){var n,i=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),a=i?"set":"add",s=global_1$1[e],l=s&&s.prototype,u={};if(descriptors$1&&"function"==typeof s&&(o||l.forEach&&!fails$1((function(){(new s).entries().next()})))){n=t((function(t,r){setInternalState$3$1(anInstance$1(t,n,e),{type:e,collection:new s}),null!=r&&iterate_1$1(r,t[a],t,i)}));var c=internalStateGetterFor$2(e);forEach$4$1(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in l)||o&&"clear"==e||createNonEnumerableProperty$1(n.prototype,e,(function(r,n){var i=c(this).collection;if(!t&&o&&!isObject$3(r))return"get"==e&&void 0;var a=i[e](0===r?0:r,n);return t?this:a}))})),o||defineProperty$9$1(n.prototype,"size",{configurable:!0,get:function(){return c(this).collection.size}})}else n=r.getConstructor(t,e,i,a),internalMetadata$1.REQUIRED=!0;return setToStringTag$1(n,e,!1,!0),u[e]=n,_export$1({global:!0,forced:!0},u),o||r.setStrong(n,e,i),n},redefineAll$1=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:redefine$1(e,n,t[n],r);return e},SPECIES$3$1=wellKnownSymbol$1("species"),setSpecies$1=function(e){var t=getBuiltIn$1(e),r=objectDefineProperty$1.f;descriptors$1&&t&&!t[SPECIES$3$1]&&r(t,SPECIES$3$1,{configurable:!0,get:function(){return this}})},defineProperty$a$1=objectDefineProperty$1.f,fastKey$1=internalMetadata$1.fastKey,setInternalState$4$1=internalState$1.set,internalStateGetterFor$1$1=internalState$1.getterFor,collectionStrong$1={getConstructor:function(e,t,r,n){var i=e((function(e,o){anInstance$1(e,i,t),setInternalState$4$1(e,{type:t,index:objectCreate$2(null),first:void 0,last:void 0,size:0}),descriptors$1||(e.size=0),null!=o&&iterate_1$1(o,e[n],e,r)})),o=internalStateGetterFor$1$1(t),a=function(e,t,r){var n,i,a=o(e),l=s(e,t);return l?l.value=r:(a.last=l={index:i=fastKey$1(t,!0),key:t,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=l),n&&(n.next=l),descriptors$1?a.size++:e.size++,"F"!==i&&(a.index[i]=l)),e},s=function(e,t){var r,n=o(e),i=fastKey$1(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return redefineAll$1(i.prototype,{clear:function(){for(var e=o(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,descriptors$1?e.size=0:this.size=0},delete:function(e){var t=o(this),r=s(this,e);if(r){var n=r.next,i=r.previous;delete t.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),t.first==r&&(t.first=n),t.last==r&&(t.last=i),descriptors$1?t.size--:this.size--}return!!r},forEach:function(e){for(var t,r=o(this),n=functionBindContext$1(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),redefineAll$1(i.prototype,r?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),descriptors$1&&defineProperty$a$1(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=internalStateGetterFor$1$1(t),o=internalStateGetterFor$1$1(n);defineIterator$1(e,t,(function(e,t){setInternalState$4$1(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),setSpecies$1(t)}},es_map$1=collection$2("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),collectionStrong$1),map$3$1=path$1.Map,map$4$1=map$3$1,map$5$1=map$4$1,createMethod$5$1=function(e){return function(t,r,n,i){aFunction$2(r);var o=toObject$1(t),a=indexedObject$1(o),s=toLength$1(o.length),l=e?s-1:0,u=e?-1:1;if(n<2)for(;;){if(l in a){i=a[l],l+=u;break}if(l+=u,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=u)l in a&&(i=r(i,a[l],l,o));return i}},arrayReduce$2={left:createMethod$5$1(!1),right:createMethod$5$1(!0)},$reduce$1=arrayReduce$2.left,STRICT_METHOD$3$1=arrayMethodIsStrict$1("reduce"),USES_TO_LENGTH$8$1=arrayMethodUsesToLength$1("reduce",{1:0});_export$1({target:"Array",proto:!0,forced:!STRICT_METHOD$3$1||!USES_TO_LENGTH$8$1},{reduce:function(e){return $reduce$1(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var reduce$3=entryVirtual$1("Array").reduce,ArrayPrototype$d$1=Array.prototype,reduce_1$2=function(e){var t=e.reduce;return e===ArrayPrototype$d$1||e instanceof Array&&t===ArrayPrototype$d$1.reduce?reduce$3:t},reduce$1$2=reduce_1$2,reduce$2$1=reduce$1$2,test$2$1=[],nativeSort$1=test$2$1.sort,FAILS_ON_UNDEFINED$1=fails$1((function(){test$2$1.sort(void 0)})),FAILS_ON_NULL$1=fails$1((function(){test$2$1.sort(null)})),STRICT_METHOD$4$1=arrayMethodIsStrict$1("sort"),FORCED$6$1=FAILS_ON_UNDEFINED$1||!FAILS_ON_NULL$1||!STRICT_METHOD$4$1;_export$1({target:"Array",proto:!0,forced:FORCED$6$1},{sort:function(e){return void 0===e?nativeSort$1.call(toObject$1(this)):nativeSort$1.call(toObject$1(this),aFunction$2(e))}});var sort$3=entryVirtual$1("Array").sort,ArrayPrototype$e=Array.prototype,sort_1$2=function(e){var t=e.sort;return e===ArrayPrototype$e||e instanceof Array&&t===ArrayPrototype$e.sort?sort$3:t},sort$1$2=sort_1$2,sort$2$1=sort$1$2,timsort=createCommonjsModule$2((function(e,t){!function(e){e.__esModule=!0,e.sort=function(e,t,r,a){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");t?"function"!=typeof t&&(a=r,r=t,t=n):t=n,r||(r=0),a||(a=e.length);var s=a-r;if(!(s<2)){var u=0;if(s<32)return u=i(e,r,a,t),void o(e,r,a,r+u,t);var c=new l(e,t),h=function(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}(s);do{if((u=i(e,r,a,t))<h){var d=s;d>h&&(d=h),o(e,r,r+d,r+u,t),u=d}c.pushRun(r,u),c.mergeRuns(),s-=u,r+=u}while(0!==s);c.forceMergeRuns()}};var t=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function r(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function n(e,n){if(e===n)return 0;if(~~e===e&&~~n===n){if(0===e||0===n)return e<n?-1:1;if(e<0||n<0){if(n>=0)return-1;if(e>=0)return 1;e=-e,n=-n}var i=r(e),o=r(n),a=0;return i<o?(e*=t[o-i-1],n/=10,a=-1):i>o&&(n*=t[i-o-1],e/=10,a=1),e===n?a:e<n?-1:1}var s=String(e),l=String(n);return s===l?0:s<l?-1:1}function i(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;!function(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function o(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],a=t,s=n;a<s;){var l=a+s>>>1;i(o,e[l])<0?s=l:a=l+1}var u=n-a;switch(u){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;u>0;)e[a+u]=e[a+u-1],u--}e[a]=o}}function a(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])>0?a=c+1:l=c}return l}function s(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])<0?l=c:a=c+1}return l}var l=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.array=null,this.compare=null,this.minGallop=7,this.length=0,this.tmpStorageLength=256,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=t,this.compare=r,this.length=t.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return e.prototype.pushRun=function(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1},e.prototype.mergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}},e.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}},e.prototype.mergeAt=function(e){var t=this.compare,r=this.array,n=this.runStart[e],i=this.runLength[e],o=this.runStart[e+1],l=this.runLength[e+1];this.runLength[e]=i+l,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;var u=s(r[o],r,n,i,0,t);n+=u,0!=(i-=u)&&0!==(l=a(r[n+i-1],r,o,l,l-1,t))&&(i<=l?this.mergeLow(n,i,o,l):this.mergeHigh(n,i,o,l))},e.prototype.mergeLow=function(e,t,r,n){var i=this.compare,o=this.array,l=this.tmp,u=0;for(u=0;u<t;u++)l[u]=o[e+u];var c=0,h=r,d=e;if(o[d++]=o[h++],0!=--n)if(1!==t){for(var f=this.minGallop;;){var p=0,g=0,y=!1;do{if(i(o[h],l[c])<0){if(o[d++]=o[h++],g++,p=0,0==--n){y=!0;break}}else if(o[d++]=l[c++],p++,g=0,1==--t){y=!0;break}}while((p|g)<f);if(y)break;do{if(0!==(p=s(o[h],l,c,t,0,i))){for(u=0;u<p;u++)o[d+u]=l[c+u];if(d+=p,c+=p,(t-=p)<=1){y=!0;break}}if(o[d++]=o[h++],0==--n){y=!0;break}if(0!==(g=a(l[c],o,h,n,0,i))){for(u=0;u<g;u++)o[d+u]=o[h+u];if(d+=g,h+=g,0==(n-=g)){y=!0;break}}if(o[d++]=l[c++],1==--t){y=!0;break}f--}while(p>=7||g>=7);if(y)break;f<0&&(f=0),f+=2}if(this.minGallop=f,f<1&&(this.minGallop=1),1===t){for(u=0;u<n;u++)o[d+u]=o[h+u];o[d+n]=l[c]}else{if(0===t)throw new Error("mergeLow preconditions were not respected");for(u=0;u<t;u++)o[d+u]=l[c+u]}}else{for(u=0;u<n;u++)o[d+u]=o[h+u];o[d+n]=l[c]}else for(u=0;u<t;u++)o[d+u]=l[c+u]},e.prototype.mergeHigh=function(e,t,r,n){var i=this.compare,o=this.array,l=this.tmp,u=0;for(u=0;u<n;u++)l[u]=o[r+u];var c=e+t-1,h=n-1,d=r+n-1,f=0,p=0;if(o[d--]=o[c--],0!=--t)if(1!==n){for(var g=this.minGallop;;){var y=0,v=0,m=!1;do{if(i(l[h],o[c])<0){if(o[d--]=o[c--],y++,v=0,0==--t){m=!0;break}}else if(o[d--]=l[h--],v++,y=0,1==--n){m=!0;break}}while((y|v)<g);if(m)break;do{if(0!=(y=t-s(l[h],o,e,t,t-1,i))){for(t-=y,p=1+(d-=y),f=1+(c-=y),u=y-1;u>=0;u--)o[p+u]=o[f+u];if(0===t){m=!0;break}}if(o[d--]=l[h--],1==--n){m=!0;break}if(0!=(v=n-a(o[c],l,0,n,n-1,i))){for(n-=v,p=1+(d-=v),f=1+(h-=v),u=0;u<v;u++)o[p+u]=l[f+u];if(n<=1){m=!0;break}}if(o[d--]=o[c--],0==--t){m=!0;break}g--}while(y>=7||v>=7);if(m)break;g<0&&(g=0),g+=2}if(this.minGallop=g,g<1&&(this.minGallop=1),1===n){for(p=1+(d-=t),f=1+(c-=t),u=t-1;u>=0;u--)o[p+u]=o[f+u];o[d]=l[h]}else{if(0===n)throw new Error("mergeHigh preconditions were not respected");for(f=d-(n-1),u=0;u<n;u++)o[f+u]=l[u]}}else{for(p=1+(d-=t),f=1+(c-=t),u=t-1;u>=0;u--)o[p+u]=o[f+u];o[d]=l[h]}else for(f=d-(n-1),u=0;u<n;u++)o[f+u]=l[u]},e}()}(t)}));unwrapExports$1(timsort);var timsort$1=timsort,timsort_1=timsort$1.sort;function _createSuper$r(e){return function(){var t,r=getPrototypeOf$5$1(e);if(_isNativeReflectConstruct$r()){var n=getPrototypeOf$5$1(this).constructor;t=construct$3$1(r,arguments,n)}else t=r.apply(this,arguments);return possibleConstructorReturn$1(this,t)}}function _isNativeReflectConstruct$r(){if("undefined"==typeof Reflect||!construct$3$1)return!1;if(construct$3$1.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(construct$3$1(Date,[],(function(){}))),!0}catch(e){return!1}}var DirectionInterface=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(e){return this.fake_use(e),this.abstract()}},{key:"setPosition",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(e,t,r),this.abstract()}},{key:"getTreeSize",value:function(e){return this.fake_use(e),this.abstract()}},{key:"sort",value:function(e){this.fake_use(e),this.abstract()}},{key:"fix",value:function(e,t){this.fake_use(e,t),this.abstract()}},{key:"shift",value:function(e,t){this.fake_use(e,t),this.abstract()}}]),e}(),VerticalStrategy=function(e){inherits$1(r,DirectionInterface);var t=_createSuper$r(r);function r(e){var n;return classCallCheck$1(this,r),(n=t.call(this)).layout=e,n}return createClass$1(r,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(e){return e.x}},{key:"setPosition",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==r&&this.layout.hierarchical.addToOrdering(e,r),e.x=t}},{key:"getTreeSize",value:function(e){var t=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:t.min_x,max:t.max_x}}},{key:"sort",value:function(e){timsort_1(e,(function(e,t){return e.x-t.x}))}},{key:"fix",value:function(e,t){e.y=this.layout.options.hierarchical.levelSeparation*t,e.options.fixed.y=!0}},{key:"shift",value:function(e,t){this.layout.body.nodes[e].x+=t}}]),r}(),HorizontalStrategy=function(e){inherits$1(r,DirectionInterface);var t=_createSuper$r(r);function r(e){var n;return classCallCheck$1(this,r),(n=t.call(this)).layout=e,n}return createClass$1(r,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(e){return e.y}},{key:"setPosition",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==r&&this.layout.hierarchical.addToOrdering(e,r),e.y=t}},{key:"getTreeSize",value:function(e){var t=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:t.min_y,max:t.max_y}}},{key:"sort",value:function(e){timsort_1(e,(function(e,t){return e.y-t.y}))}},{key:"fix",value:function(e,t){e.x=this.layout.options.hierarchical.levelSeparation*t,e.options.fixed.x=!0}},{key:"shift",value:function(e,t){this.layout.body.nodes[e].y+=t}}]),r}(),$every=arrayIteration$1.every,STRICT_METHOD$5$1=arrayMethodIsStrict$1("every"),USES_TO_LENGTH$9=arrayMethodUsesToLength$1("every");_export$1({target:"Array",proto:!0,forced:!STRICT_METHOD$5$1||!USES_TO_LENGTH$9},{every:function(e){return $every(this,e,arguments.length>1?arguments[1]:void 0)}});var every=entryVirtual$1("Array").every,ArrayPrototype$f=Array.prototype,every_1=function(e){var t=e.every;return e===ArrayPrototype$f||e instanceof Array&&t===ArrayPrototype$f.every?every:t},every$1=every_1,every$2=every$1,es_set$1=collection$2("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),collectionStrong$1),set$1$1=path$1.Set,set$2$1=set$1$1,set$3$1=set$2$1;function _createForOfIteratorHelper$2$1(e){if(void 0===symbol$2$1||null==getIteratorMethod$1$1(e)){if(isArray$5$1(e)||(e=_unsupportedIterableToArray$3$1(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,a=!1;return{s:function(){n=getIterator$1$1(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray$3$1(e,t){var r;if(e){if("string"==typeof e)return _arrayLikeToArray$3$1(e,t);var n=slice$5$1(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?from_1$2$1(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$3$1(e,t):void 0}}function _arrayLikeToArray$3$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fillLevelsByDirectionCyclic(e,t){var r=new set$3$1;return forEach$2$1(e).call(e,(function(e){var t;forEach$2$1(t=e.edges).call(t,(function(e){e.connected&&r.add(e)}))})),forEach$2$1(r).call(r,(function(e){var r=e.from.id,n=e.to.id;null==t[r]&&(t[r]=0),(null==t[n]||t[r]>=t[n])&&(t[n]=t[r]+1)})),t}function fillLevelsByDirectionLeaves(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:create$2$1(null);return fillLevelsByDirection((function(t){var r,n;return every$2(r=filter$2$2(n=t.edges).call(n,(function(t){return e.has(t.toId)}))).call(r,(function(e){return e.to===t}))}),(function(e,t){return t>e}),"from",e,t)}function fillLevelsByDirectionRoots(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:create$2$1(null);return fillLevelsByDirection((function(t){var r,n;return every$2(r=filter$2$2(n=t.edges).call(n,(function(t){return e.has(t.toId)}))).call(r,(function(e){return e.from===t}))}),(function(e,t){return t<e}),"to",e,t)}function fillLevelsByDirection(e,t,r,n,i){var o,a=n.size,s=r+"Id",l="to"===r?1:-1,u=_createForOfIteratorHelper$2$1(n);try{var c=function(){var u=slicedToArray$1(o.value,2),c=u[0],h=u[1];if(!n.has(c)||!e(h))return"continue";i[c]=0;for(var d=[h],f=0,p=void 0,g=function(){var e,o;if(!n.has(c))return"continue";var u=i[p.id]+l;if(forEach$2$1(e=filter$2$2(o=p.edges).call(o,(function(e){return e.connected&&e.to!==e.from&&e[r]!==p&&n.has(e.toId)&&n.has(e.fromId)}))).call(e,(function(e){var n=e[s],o=i[n];(null==o||t(u,o))&&(i[n]=u,d.push(e[r]))})),f>a)return{v:{v:fillLevelsByDirectionCyclic(n,i)}};++f};p=d.pop();){var y=g();switch(y){case"continue":continue;default:if("object"===_typeof_1$1(y))return y.v}}};for(u.s();!(o=u.n()).done;){var h=c();switch(h){case"continue":continue;default:if("object"===_typeof_1$1(h))return h.v}}}catch(e){u.e(e)}finally{u.f()}return i}var HierarchicalStatus=function(){function e(){classCallCheck$1(this,e),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return createClass$1(e,[{key:"addRelation",value:function(e,t){void 0===this.childrenReference[e]&&(this.childrenReference[e]=[]),this.childrenReference[e].push(t),void 0===this.parentReference[t]&&(this.parentReference[t]=[]),this.parentReference[t].push(e)}},{key:"checkIfTree",value:function(){for(var e in this.parentReference)if(this.parentReference[e].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(e,t){void 0!==t&&void 0===this.trees[e.id]&&(this.trees[e.id]=t,this.treeIndex=Math.max(t,this.treeIndex))}},{key:"ensureLevel",value:function(e){void 0===this.levels[e]&&(this.levels[e]=0)}},{key:"getMaxLevel",value:function(e){var t=this,r={};return function e(n){if(void 0!==r[n])return r[n];var i=t.levels[n];if(t.childrenReference[n]){var o=t.childrenReference[n];if(o.length>0)for(var a=0;a<o.length;a++)i=Math.max(i,e(o[a]))}return r[n]=i,i}(e)}},{key:"levelDownstream",value:function(e,t){void 0===this.levels[t.id]&&(void 0===this.levels[e.id]&&(this.levels[e.id]=0),this.levels[t.id]=this.levels[e.id]+1)}},{key:"setMinLevelToZero",value:function(e){var t=1e9;for(var r in e)e.hasOwnProperty(r)&&void 0!==this.levels[r]&&(t=Math.min(this.levels[r],t));for(var n in e)e.hasOwnProperty(n)&&void 0!==this.levels[n]&&(this.levels[n]-=t)}},{key:"getTreeSize",value:function(e,t){var r=1e9,n=-1e9,i=1e9,o=-1e9;for(var a in this.trees)if(this.trees.hasOwnProperty(a)&&this.trees[a]===t){var s=e[a];r=Math.min(s.x,r),n=Math.max(s.x,n),i=Math.min(s.y,i),o=Math.max(s.y,o)}return{min_x:r,max_x:n,min_y:i,max_y:o}}},{key:"hasSameParent",value:function(e,t){var r=this.parentReference[e.id],n=this.parentReference[t.id];if(void 0===r||void 0===n)return!1;for(var i=0;i<r.length;i++)for(var o=0;o<n.length;o++)if(r[i]==n[o])return!0;return!1}},{key:"inSameSubNetwork",value:function(e,t){return this.trees[e.id]===this.trees[t.id]}},{key:"getLevels",value:function(){return keys$3$1(this.distributionOrdering)}},{key:"addToOrdering",value:function(e,t){void 0===this.distributionOrdering[t]&&(this.distributionOrdering[t]=[]);var r=!1,n=this.distributionOrdering[t];for(var i in n)if(n[i]===e){r=!0;break}r||(this.distributionOrdering[t].push(e),this.distributionIndex[e.id]=this.distributionOrdering[t].length-1)}}]),e}(),LayoutEngine=function(){function e(t){classCallCheck$1(this,e),this.body=t,this._resetRNG(Math.random()+":"+now$2$1()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},extend$1(this.options,this.defaultOptions),this.bindEventListeners()}return createClass$1(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_dataChanged",(function(){e.setupHierarchicalLayout()})),this.body.emitter.on("_dataLoaded",(function(){e.layoutNetwork()})),this.body.emitter.on("_resetHierarchicalLayout",(function(){e.setupHierarchicalLayout()})),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",(function(){if(!0===e.options.hierarchical.enabled){var t=e.direction.curveType();e.body.emitter.emit("_forceDisableDynamicCurves",t,!1)}}))}},{key:"setOptions",value:function(e,t){if(void 0!==e){var r=this.options.hierarchical,n=r.enabled;if(selectiveDeepExtend(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),mergeOptions(this.options,e,"hierarchical"),void 0!==e.randomSeed&&this._resetRNG(e.randomSeed),!0===r.enabled)return!0===n&&this.body.emitter.emit("refresh",!0),"RL"===r.direction||"DU"===r.direction?r.levelSeparation>0&&(r.levelSeparation*=-1):r.levelSeparation<0&&(r.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(t);if(!0===n)return this.body.emitter.emit("refresh"),deepExtend$1(t,this.optionsBackup)}return t}},{key:"_resetRNG",value:function(e){this.initialRandomSeed=e,this._rng=Alea(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(e){if(!0===this.options.hierarchical.enabled){var t=this.optionsBackup.physics;void 0===e.physics||!0===e.physics?(e.physics={enabled:void 0===t.enabled||t.enabled,solver:"hierarchicalRepulsion"},t.enabled=void 0===t.enabled||t.enabled,t.solver=t.solver||"barnesHut"):"object"===_typeof_1$1(e.physics)?(t.enabled=void 0===e.physics.enabled||e.physics.enabled,t.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):!1!==e.physics&&(t.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});var r=this.direction.curveType();if(void 0===e.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(void 0===e.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if("boolean"==typeof e.edges.smooth)this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:r};else{var n=e.edges.smooth;void 0!==n.type&&"dynamic"!==n.type&&(r=n.type),this.optionsBackup.edges={smooth:{enabled:void 0===n.enabled||n.enabled,type:void 0===n.type?"dynamic":n.type,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}},e.edges.smooth={enabled:void 0===n.enabled||n.enabled,type:r,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",r)}return e}},{key:"positionInitially",value:function(e){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var t=e.length+50,r=0;r<e.length;r++){var n=e[r],i=2*Math.PI*this._rng();void 0===n.x&&(n.x=t*Math.cos(i)),void 0===n.y&&(n.y=t*Math.sin(i))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var e=this.body.nodeIndices,t=0,r=0;r<e.length;r++){!0===this.body.nodes[e[r]].predefinedPosition&&(t+=1)}if(t<.5*e.length){var n=0,i=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>i){for(var a=e.length;e.length>i&&n<=10;){n+=1;var s=e.length;if(n%3==0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o),s==e.length&&n%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*a)})}n>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();for(var l=0;l<e.length;l++){var u=this.body.nodes[e[l]];!1===u.predefinedPosition&&(u.x+=70*(.5-this._rng()),u.y+=70*(.5-this._rng()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var e=NetworkUtil.getRangeCore(this.body.nodes,this.body.nodeIndices),t=NetworkUtil.findCenter(e),r=0;r<this.body.nodeIndices.length;r++){var n=this.body.nodes[this.body.nodeIndices[r]];n.x-=t.x,n.y-=t.y}}},{key:"_declusterAll",value:function(){for(var e=!0;!0===e;){e=!1;for(var t=0;t<this.body.nodeIndices.length;t++)!0===this.body.nodes[this.body.nodeIndices[t]].isCluster&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[t],{},!1));!0===e&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var e,t,r=!1,n=!1;for(t in this.lastNodeOnLevel={},this.hierarchical=new HierarchicalStatus,this.body.nodes)this.body.nodes.hasOwnProperty(t)&&(void 0!==(e=this.body.nodes[t]).options.level?(r=!0,this.hierarchical.levels[t]=e.options.level):n=!0);if(!0===n&&!0===r)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===n){var i=this.options.hierarchical.sortMethod;"hubsize"===i?this._determineLevelsByHubsize():"directed"===i?this._determineLevelsDirected():"custom"===i&&this._determineLevelsCustomCallback()}for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.hierarchical.ensureLevel(o);var a=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(a),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var e=this,t=!1,r={},n=function(t,r){var n=e.hierarchical.trees;for(var i in n)n.hasOwnProperty(i)&&n[i]===t&&e.direction.shift(i,r)},i=function(){for(var t=[],r=0;r<e.hierarchical.numTrees();r++)t.push(e.direction.getTreeSize(r));return t},o=function t(r,n){if(!n[r.id]&&(n[r.id]=!0,e.hierarchical.childrenReference[r.id])){var i=e.hierarchical.childrenReference[r.id];if(i.length>0)for(var o=0;o<i.length;o++)t(e.body.nodes[i[o]],n)}},a=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,n=1e9,i=1e9,o=1e9,a=-1e9;for(var s in t)if(t.hasOwnProperty(s)){var l=e.body.nodes[s],u=e.hierarchical.levels[l.id],c=e.direction.getPosition(l),h=e._getSpaceAroundNode(l,t),d=slicedToArray$1(h,2),f=d[0],p=d[1];n=Math.min(f,n),i=Math.min(p,i),u<=r&&(o=Math.min(c,o),a=Math.max(c,a))}return[o,a,n,i]},s=function(t,r){var n=e.hierarchical.getMaxLevel(t.id),i=e.hierarchical.getMaxLevel(r.id);return Math.min(n,i)},l=function(t,r,n){for(var i=e.hierarchical,o=0;o<r.length;o++){var a=r[o],s=i.distributionOrdering[a];if(s.length>1)for(var l=0;l<s.length-1;l++){var u=s[l],c=s[l+1];i.hasSameParent(u,c)&&i.inSameSubNetwork(u,c)&&t(u,c,n)}}},u=function(r,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=e.direction.getPosition(r),u=e.direction.getPosition(n),c=Math.abs(u-l),h=e.options.hierarchical.nodeSpacing;if(c>h){var d={},f={};o(r,d),o(n,f);var p=s(r,n),g=a(d,p),y=a(f,p),v=g[1],m=y[0],b=y[2],$=Math.abs(v-m);if($>h){var _=v-m+h;_<-b+h&&(_=-b+h),_<0&&(e._shiftBlock(n.id,_),t=!0,!0===i&&e._centerParent(n))}}},c=function(n,i){for(var s=i.id,l=i.edges,u=e.hierarchical.levels[i.id],c=e.options.hierarchical.levelSeparation*e.options.hierarchical.levelSeparation,h={},d=[],f=0;f<l.length;f++){var p=l[f];if(p.toId!=p.fromId){var g=p.toId==s?p.from:p.to;h[l[f].id]=g,e.hierarchical.levels[g.id]<u&&d.push(p)}}var y=function(t,r){for(var n=0,i=0;i<r.length;i++)if(void 0!==h[r[i].id]){var o=e.direction.getPosition(h[r[i].id])-t;n+=o/Math.sqrt(o*o+c)}return n},v=function(t,r){for(var n=0,i=0;i<r.length;i++)if(void 0!==h[r[i].id]){var o=e.direction.getPosition(h[r[i].id])-t;n-=c*Math.pow(o*o+c,-1.5)}return n},m=function(t,r){for(var n=e.direction.getPosition(i),o={},a=0;a<t;a++){var s=y(n,r),l=v(n,r);if(void 0!==o[n-=Math.max(-40,Math.min(40,Math.round(s/l)))])break;o[n]=a}return n},b=m(n,d);!function(n){var s=e.direction.getPosition(i);if(void 0===r[i.id]){var l={};o(i,l),r[i.id]=l}var u=a(r[i.id]),c=u[2],h=u[3],d=n-s,f=0;d>0?f=Math.min(d,h-e.options.hierarchical.nodeSpacing):d<0&&(f=-Math.min(-d,c-e.options.hierarchical.nodeSpacing)),0!=f&&(e._shiftBlock(i.id,f),t=!0)}(b),function(r){var n=e.direction.getPosition(i),o=e._getSpaceAroundNode(i),a=slicedToArray$1(o,2),s=a[0],l=a[1],u=r-n,c=n;u>0?c=Math.min(n+(l-e.options.hierarchical.nodeSpacing),r):u<0&&(c=Math.max(n-(s-e.options.hierarchical.nodeSpacing),r)),c!==n&&(e.direction.setPosition(i,c),t=!0)}(b=m(n,l))};!0===this.options.hierarchical.blockShifting&&(function(r){var n=e.hierarchical.getLevels();n=reverse$2(n).call(n);for(var i=0;i<r&&(t=!1,l(u,n,!0),!0===t);i++);}(5),function(){for(var t in e.body.nodes)e.body.nodes.hasOwnProperty(t)&&e._centerParent(e.body.nodes[t])}()),!0===this.options.hierarchical.edgeMinimization&&function(r){var n=e.hierarchical.getLevels();n=reverse$2(n).call(n);for(var i=0;i<r;i++){t=!1;for(var o=0;o<n.length;o++)for(var a=n[o],s=e.hierarchical.distributionOrdering[a],l=0;l<s.length;l++)c(1e3,s[l]);if(!0!==t)break}}(20),!0===this.options.hierarchical.parentCentralization&&function(){var t=e.hierarchical.getLevels();t=reverse$2(t).call(t);for(var r=0;r<t.length;r++)for(var n=t[r],i=e.hierarchical.distributionOrdering[n],o=0;o<i.length;o++)e._centerParent(i[o])}(),function(){for(var t=i(),r=0,o=0;o<t.length-1;o++){r+=t[o].max-t[o+1].min+e.options.hierarchical.treeSpacing,n(o+1,r)}}()}},{key:"_getSpaceAroundNode",value:function(e,t){var r=!0;void 0===t&&(r=!1);var n=this.hierarchical.levels[e.id];if(void 0!==n){var i=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),a=this.hierarchical.distributionOrdering[n],s=1e9,l=1e9;if(0!==i){var u=a[i-1];if(!0===r&&void 0===t[u.id]||!1===r)s=o-this.direction.getPosition(u)}if(i!=a.length-1){var c=a[i+1];if(!0===r&&void 0===t[c.id]||!1===r){var h=this.direction.getPosition(c);l=Math.min(l,h-o)}}return[s,l]}return[0,0]}},{key:"_centerParent",value:function(e){if(this.hierarchical.parentReference[e.id])for(var t=this.hierarchical.parentReference[e.id],r=0;r<t.length;r++){var n=t[r],i=this.body.nodes[n],o=this.hierarchical.childrenReference[n];if(void 0!==o){var a=this._getCenterPosition(o),s=this.direction.getPosition(i),l=this._getSpaceAroundNode(i),u=slicedToArray$1(l,2),c=u[0],h=u[1],d=s-a;(d<0&&Math.abs(d)<h-this.options.hierarchical.nodeSpacing||d>0&&Math.abs(d)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(i,a)}}}},{key:"_placeNodesByHierarchy",value:function(e){for(var t in this.positionedNodes={},e)if(e.hasOwnProperty(t)){var r,n=keys$3$1(e[t]);n=this._indexArrayToNodes(n),sort$2$1(r=this.direction).call(r,n);for(var i=0,o=0;o<n.length;o++){var a=n[o];if(void 0===this.positionedNodes[a.id]){var s=this.options.hierarchical.nodeSpacing,l=s*i;i>0&&(l=this.direction.getPosition(n[o-1])+s),this.direction.setPosition(a,l,t),this._validatePositionAndContinue(a,t,l),i++}}}}},{key:"_placeBranchNodes",value:function(e,t){var r,n=this.hierarchical.childrenReference[e];if(void 0!==n){for(var i=[],o=0;o<n.length;o++)i.push(this.body.nodes[n[o]]);sort$2$1(r=this.direction).call(r,i);for(var a=0;a<i.length;a++){var s=i[a],l=this.hierarchical.levels[s.id];if(!(l>t&&void 0===this.positionedNodes[s.id]))return;var u=this.options.hierarchical.nodeSpacing,c=void 0;c=0===a?this.direction.getPosition(this.body.nodes[e]):this.direction.getPosition(i[a-1])+u,this.direction.setPosition(s,c,l),this._validatePositionAndContinue(s,l,c)}var h=this._getCenterPosition(i);this.direction.setPosition(this.body.nodes[e],h,t)}}},{key:"_validatePositionAndContinue",value:function(e,t,r){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[t]){var n=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[t]]);if(r-n<this.options.hierarchical.nodeSpacing){var i=n+this.options.hierarchical.nodeSpacing-r,o=this._findCommonParent(this.lastNodeOnLevel[t],e.id);this._shiftBlock(o.withChild,i)}}this.lastNodeOnLevel[t]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,t)}}},{key:"_indexArrayToNodes",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.body.nodes[e[r]]);return t}},{key:"_getDistribution",value:function(){var e,t,r={};for(e in this.body.nodes)if(this.body.nodes.hasOwnProperty(e)){t=this.body.nodes[e];var n=void 0===this.hierarchical.levels[e]?0:this.hierarchical.levels[e];this.direction.fix(t,n),void 0===r[n]&&(r[n]={}),r[n][e]=t}return r}},{key:"_getActiveEdges",value:function(e){var t=this,r=[];return forEach$3$1(e.edges,(function(e){var n;-1!==indexOf$3(n=t.body.edgeIndices).call(n,e.id)&&r.push(e)})),r}},{key:"_getHubSizes",value:function(){var e=this,t={};forEach$3$1(this.body.nodeIndices,(function(r){var n=e.body.nodes[r],i=e._getActiveEdges(n).length;t[i]=!0}));var r=[];return forEach$3$1(t,(function(e){r.push(Number(e))})),sort$2$1(timsort$1).call(timsort$1,r,(function(e,t){return t-e})),r}},{key:"_determineLevelsByHubsize",value:function(){for(var e=this,t=function(t,r){e.hierarchical.levelDownstream(t,r)},r=this._getHubSizes(),n=function(n){var i=r[n];if(0===i)return"break";forEach$3$1(e.body.nodeIndices,(function(r){var n=e.body.nodes[r];i===e._getActiveEdges(n).length&&e._crawlNetwork(t,r)}))},i=0;i<r.length;++i){if("break"===n(i))break}}},{key:"_determineLevelsCustomCallback",value:function(){var e=this;this._crawlNetwork((function(t,r,n){var i=e.hierarchical.levels[t.id];void 0===i&&(i=e.hierarchical.levels[t.id]=1e5);var o=(NetworkUtil.cloneOptions(t,"node"),NetworkUtil.cloneOptions(r,"node"),void NetworkUtil.cloneOptions(n,"edge"));e.hierarchical.levels[r.id]=i+o})),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var e,t=this,r=reduce$2$1(e=this.body.nodeIndices).call(e,(function(e,r){return e.set(r,t.body.nodes[r]),e}),new map$5$1),n=this.hierarchical.levels;"roots"===this.options.hierarchical.shakeTowards?this.hierarchical.levels=fillLevelsByDirectionRoots(r,n):this.hierarchical.levels=fillLevelsByDirectionLeaves(r,n),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var e=this;this._crawlNetwork((function(t,r){e.hierarchical.levels[r.id]>e.hierarchical.levels[t.id]&&e.hierarchical.addRelation(t.id,r.id)})),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0,n={},i=function r(i,o){if(void 0===n[i.id]){var a;e.hierarchical.setTreeIndex(i,o),n[i.id]=!0;for(var s=e._getActiveEdges(i),l=0;l<s.length;l++){var u=s[l];!0===u.connected&&(a=u.toId==i.id?u.from:u.to,i.id!=a.id&&(t(i,a,u),r(a,o)))}}};if(void 0===r)for(var o=0,a=0;a<this.body.nodeIndices.length;a++){var s=this.body.nodeIndices[a];if(void 0===n[s]){var l=this.body.nodes[s];i(l,o),o+=1}}else{var u=this.body.nodes[r];if(void 0===u)return void console.error("Node not found:",r);i(u)}}},{key:"_shiftBlock",value:function(e,t){var r=this,n={};!function e(i){if(!n[i]){n[i]=!0,r.direction.shift(i,t);var o=r.hierarchical.childrenReference[i];if(void 0!==o)for(var a=0;a<o.length;a++)e(o[a])}}(e)}},{key:"_findCommonParent",value:function(e,t){var r=this,n={};return function e(t,n){var i=r.hierarchical.parentReference[n];if(void 0!==i)for(var o=0;o<i.length;o++){var a=i[o];t[a]=!0,e(t,a)}}(n,e),function e(t,n){var i=r.hierarchical.parentReference[n];if(void 0!==i)for(var o=0;o<i.length;o++){var a=i[o];if(void 0!==t[a])return{foundParent:a,withChild:n};var s=e(t,a);if(null!==s.foundParent)return s}return{foundParent:null,withChild:n}}(n,t)}},{key:"setDirectionStrategy",value:function(){var e="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=e?new VerticalStrategy(this):new HorizontalStrategy(this)}},{key:"_getCenterPosition",value:function(e){for(var t=1e9,r=-1e9,n=0;n<e.length;n++){var i=void 0;if(void 0!==e[n].id)i=e[n];else{var o=e[n];i=this.body.nodes[o]}var a=this.direction.getPosition(i);t=Math.min(t,a),r=Math.max(r,a)}return.5*(t+r)}}]),e}(),ManipulationSystem=function(){function e(t,r,n,i){var o,a,s=this;classCallCheck$1(this,e),this.body=t,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},extend$1(this.options,this.defaultOptions),this.body.emitter.on("destroy",(function(){s._clean()})),this.body.emitter.on("_dataChanged",bind$2$1(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",bind$2$1(a=this._restore).call(a,this))}return createClass$1(e,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(e,t,r){void 0!==t&&(void 0!==t.locale?this.options.locale=t.locale:this.options.locale=r.locale,void 0!==t.locales?this.options.locales=t.locales:this.options.locales=r.locales),void 0!==e&&("boolean"==typeof e?this.options.enabled=e:(this.options.enabled=!0,deepExtend$1(this.options,e)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){var e,t;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var r=this.selectionHandler._getSelectedNodeCount(),n=this.selectionHandler._getSelectedEdgeCount(),i=r+n,o=this.options.locales[this.options.locale],a=!1;!1!==this.options.addNode&&(this._createAddNodeButton(o),a=!0),!1!==this.options.addEdge&&(!0===a?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),1===r&&"function"==typeof this.options.editNode?(!0===a?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):1===n&&0===r&&!1!==this.options.editEdge&&(!0===a?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),0!==i&&(r>0&&!1!==this.options.deleteNode||0===r&&!1!==this.options.deleteEdge)&&(!0===a&&this._createSeperator(4),this._createDeleteButton(o)),this._bindHammerToDiv(this.closeDiv,bind$2$1(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",bind$2$1(t=this.showManipulatorToolbar).call(t,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var e;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var t,r=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(r),this._createSeperator(),this._createDescription(r.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,bind$2$1(t=this.toggleEditMode).call(t,this))}this._temporaryBindEvent("click",bind$2$1(e=this._performAddNode).call(e,this))}},{key:"editNode",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var t=this.selectionHandler._getSelectedNode();if(void 0!==t){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==t.isCluster){var r=deepExtend$1({},t.options,!1);if(r.x=t.x,r.y=t.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(r,(function(t){null!=t&&"editNode"===e.inMode&&e.body.data.nodes.getDataSet().update(t),e.showManipulatorToolbar()}))}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var e,t,r,n,i;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var o,a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,bind$2$1(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",bind$2$1(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",bind$2$1(t=this._finishConnect).call(t,this)),this._temporaryBindUI("onDrag",bind$2$1(r=this._dragControlNode).call(r,this)),this._temporaryBindUI("onRelease",bind$2$1(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDragStart",bind$2$1(i=this._dragStartEdge).call(i,this)),this._temporaryBindUI("onHold",(function(){}))}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==_typeof_1$1(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var e,t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,bind$2$1(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId){var r,n,i,o,a=this.body.edges[this.edgeBeingEditedId],s=this._getNewTargetNode(a.from.x,a.from.y),l=this._getNewTargetNode(a.to.x,a.to.y);this.temporaryIds.nodes.push(s.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",bind$2$1(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",(function(){})),this._temporaryBindUI("onHold",(function(){})),this._temporaryBindUI("onDragStart",bind$2$1(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",bind$2$1(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",bind$2$1(o=this._controlNodeDragEnd).call(o,this)),this._temporaryBindUI("onMouseMove",(function(){})),this._temporaryBindEvent("beforeDrawing",(function(e){var t=a.edgeType.findBorderPositions(e);!1===s.selected&&(s.x=t.from.x,s.y=t.from.y),!1===l.selected&&(l.x=t.to.x,l.y=t.to.y)})),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var u=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(u.from.id,u.to.id)}}},{key:"deleteSelected",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var t=this.selectionHandler.getSelectedNodes(),r=this.selectionHandler.getSelectedEdges(),n=void 0;if(t.length>0){for(var i=0;i<t.length;i++)if(!0===this.body.nodes[t[i]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(n=this.options.deleteNode)}else r.length>0&&"function"==typeof this.options.deleteEdge&&(n=this.options.deleteEdge);if("function"==typeof n){var o={nodes:t,edges:r};if(2!==n.length)throw new Error("The function for delete does not support two arguments (data, callback)");n(o,(function(t){null!=t&&"delete"===e.inMode?(e.body.data.edges.getDataSet().remove(t.edges),e.body.data.nodes.getDataSet().remove(t.nodes),e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar()):(e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(t),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(e,t){var r=deepExtend$1({},this.options.controlNodeStyle);r.id="targetNode"+v4$1(),r.hidden=!1,r.physics=!1,r.x=e,r.y=t;var n=this.body.functions.createNode(r);return n.shape.boundingBox={left:e,right:e,top:t,bottom:t},n}},{key:"_createEditButton",value:function(){var e;this._clean(),this.manipulationDOM={},recursiveDOMDelete(this.editModeDiv);var t=this.options.locales[this.options.locale],r=this._createButton("editMode","vis-button vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(r),this._bindHammerToDiv(r,bind$2$1(e=this.toggleEditMode).call(e,this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(recursiveDOMDelete(this.editModeDiv),recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var e=0;e<this.manipulationHammers.length;e++)this.manipulationHammers[e].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),recursiveDOMDelete(this.manipulationDiv),recursiveDOMDelete(this.editModeDiv),recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}},{key:"_createAddNodeButton",value:function(e){var t,r=this._createButton("addNode","vis-button vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,bind$2$1(t=this.addNodeMode).call(t,this))}},{key:"_createAddEdgeButton",value:function(e){var t,r=this._createButton("addEdge","vis-button vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,bind$2$1(t=this.addEdgeMode).call(t,this))}},{key:"_createEditNodeButton",value:function(e){var t,r=this._createButton("editNode","vis-button vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,bind$2$1(t=this.editNode).call(t,this))}},{key:"_createEditEdgeButton",value:function(e){var t,r=this._createButton("editEdge","vis-button vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,bind$2$1(t=this.editEdgeMode).call(t,this))}},{key:"_createDeleteButton",value:function(e){var t,r;r=this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete";var n=this._createButton("delete",r,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(n),this._bindHammerToDiv(n,bind$2$1(t=this.deleteSelected).call(t,this))}},{key:"_createBackButton",value:function(e){var t,r=this._createButton("back","vis-button vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,bind$2$1(t=this.showManipulatorToolbar).call(t,this))}},{key:"_createButton",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("div"),this.manipulationDOM[e+"Div"].className=t,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=n,this.manipulationDOM[e+"Label"].innerHTML=r,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}},{key:"_createDescription",value:function(e){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",e))}},{key:"_temporaryBindEvent",value:function(e,t){this.temporaryEventFunctions.push({event:e,boundFunction:t}),this.body.emitter.on(e,t)}},{key:"_temporaryBindUI",value:function(e,t){if(void 0===this.body.eventListeners[e])throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+stringify$2$1(keys$3$1(this.body.eventListeners)));this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=t}},{key:"_unbindTemporaryUIs",value:function(){for(var e in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var e=0;e<this.temporaryEventFunctions.length;e++){var t=this.temporaryEventFunctions[e].event,r=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(t,r)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(e,t){var r=new hammer(e,{});hammerUtil.onTouch(r,t),this.manipulationHammers.push(r)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var e=0;e<this.temporaryIds.edges.length;e++){var t;this.body.edges[this.temporaryIds.edges[e]].disconnect(),delete this.body.edges[this.temporaryIds.edges[e]];var r,n=indexOf$3(t=this.body.edgeIndices).call(t,this.temporaryIds.edges[e]);if(-1!==n)splice$2$1(r=this.body.edgeIndices).call(r,n,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){var o;delete this.body.nodes[this.temporaryIds.nodes[i]];var a,s=indexOf$3(o=this.body.nodeIndices).call(o,this.temporaryIds.nodes[i]);if(-1!==s)splice$2$1(a=this.body.nodeIndices).call(a,s,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=extend$1({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(e){var t=this.lastTouch,r=this.selectionHandler._pointerToPositionObject(t),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=n.isOverlappingWith(r),s=i.isOverlappingWith(r);!0===a?(this.selectedControlNode=n,o.edgeType.from=n):!0===s&&(this.selectedControlNode=i,o.edgeType.to=i),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(e){this.body.emitter.emit("disablePhysics");var t=this.body.functions.getPointer(e.center),r=this.canvas.DOMtoCanvas(t);void 0!==this.selectedControlNode?(this.selectedControlNode.x=r.x,this.selectedControlNode.y=r.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(e){var t=this.body.functions.getPointer(e.center),r=this.selectionHandler._pointerToPositionObject(t),n=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var i=this.selectionHandler._getAllNodesOverlappingWith(r),o=void 0,a=i.length-1;a>=0;a--)if(i[a]!==this.selectedControlNode.id){o=this.body.nodes[i[a]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(!0===o.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===s.id?this._performEditEdge(o.id,n.to.id):this._performEditEdge(n.from.id,o.id)}else n.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(e){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=extend$1({},this.body.view.translation);var t=this.lastTouch,r=this.selectionHandler.getNodeAt(t);if(void 0!==r)if(!0===r.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var n=this._getNewTargetNode(r.x,r.y);this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id);var i=this.body.functions.createEdge({id:"connectionEdge"+v4$1(),from:r.id,to:n.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[i.id]=i,this.body.edgeIndices.push(i.id),this.temporaryIds.nodes.push(n.id),this.temporaryIds.edges.push(i.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(e){var t=this.body.functions.getPointer(e.center),r=this.selectionHandler._pointerToPositionObject(t),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var i=this.selectionHandler._getAllNodesOverlappingWith(r),o=void 0,a=i.length-1;a>=0;a--){var s;if(-1===indexOf$3(s=this.temporaryIds.nodes).call(s,i[a])){o=this.body.nodes[i[a]];break}}if(e.controlEdge={from:n,to:o?o.id:void 0},this.selectionHandler._generateClickEvent("controlNodeDragging",e,t),void 0!==this.temporaryIds.nodes[0]){var l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(t.x),l.y=this.canvas._YconvertDOMtoCanvas(t.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}},{key:"_finishConnect",value:function(e){var t=this.body.functions.getPointer(e.center),r=this.selectionHandler._pointerToPositionObject(t),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var i=this.selectionHandler._getAllNodesOverlappingWith(r),o=void 0,a=i.length-1;a>=0;a--){var s;if(-1===indexOf$3(s=this.temporaryIds.nodes).call(s,i[a])){o=this.body.nodes[i[a]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(!0===o.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[n]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(n,o.id)),e.controlEdge={from:n,to:o?o.id:void 0},this.selectionHandler._generateClickEvent("controlNodeDragEnd",e,t),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(e){var t=this.lastTouch;this.selectionHandler._generateClickEvent("dragStart",e,t,void 0,!0)}},{key:"_performAddNode",value:function(e){var t=this,r={id:v4$1(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(r,(function(e){null!=e&&"addNode"===t.inMode&&t.body.data.nodes.getDataSet().add(e),t.showManipulatorToolbar()}))}else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(e,t){var r=this,n={from:e,to:t};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(n,(function(e){null!=e&&"addEdge"===r.inMode&&(r.body.data.edges.getDataSet().add(e),r.selectionHandler.unselectAll(),r.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(e,t){var r=this,n={id:this.edgeBeingEditedId,from:e,to:t,label:this.body.data.edges.get(this.edgeBeingEditedId).label},i=this.options.editEdge;if("object"===_typeof_1$1(i)&&(i=i.editWithoutDrag),"function"==typeof i){if(2!==i.length)throw new Error("The function for edit does not support two arguments (data, callback)");i(n,(function(e){null==e||"editEdge"!==r.inMode?(r.body.edges[n.id].updateEdgeType(),r.body.emitter.emit("_redraw"),r.showManipulatorToolbar()):(r.body.data.edges.getDataSet().update(e),r.selectionHandler.unselectAll(),r.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}(),htmlColors={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},ColorPicker=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;classCallCheck$1(this,e),this.pixelRatio=t,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return createClass$1(e,[{key:"insertTo",value:function(e){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=e}},{key:"setCloseCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=e}},{key:"_isColorString",value:function(e){if("string"==typeof e)return htmlColors[e]}},{key:"setColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==e){var r,n=this._isColorString(e);if(void 0!==n&&(e=n),!0===isString$2(e)){if(!0===isValidRGB(e)){var i=e.substr(4).substr(0,e.length-5).split(",");r={r:i[0],g:i[1],b:i[2],a:1}}else if(!0===isValidRGBA(e)){var o=e.substr(5).substr(0,e.length-6).split(",");r={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(!0===isValidHex(e)){var a=hexToRGB(e);r={r:a.r,g:a.g,b:a.b,a:1}}}else if(e instanceof Object&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b){var s=void 0!==e.a?e.a:"1.0";r={r:e.r,g:e.g,b:e.b,a:s}}if(void 0===r)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+stringify$2$1(e));this._setColor(r,t)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!0===t&&(this.previousColor=extend$1({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout$2((function(){void 0!==e.closeCallback&&(e.closeCallback(),e.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!0===t&&(this.initialColor=extend$1({},e)),this.color=e;var r=RGBToHSV(e.r,e.g,e.b),n=2*Math.PI,i=this.r*r.s,o=this.centerCoordinates.x+i*Math.sin(n*r.h),a=this.centerCoordinates.y+i*Math.cos(n*r.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}},{key:"_setOpacity",value:function(e){this.color.a=e/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(e){var t=RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;var r=HSVToRGB(t.h,t.s,t.v);r.a=this.color.a,this.color=r,this._updatePicker()}},{key:"_updatePicker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,t=RGBToHSV(e.r,e.g,e.b),r=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1)),r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;r.clearRect(0,0,n,i),r.putImageData(this.hueCircle,0,0),r.fillStyle="rgba(0,0,0,"+(1-t.v)+")",r.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),fill$2(r).call(r),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var e,t,r,n;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var i=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(e){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(e){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var a=this;this.opacityRange.onchange=function(){a._setOpacity(this.value)},this.opacityRange.oninput=function(){a._setOpacity(this.value)},this.brightnessRange.onchange=function(){a._setBrightness(this.value)},this.brightnessRange.oninput=function(){a._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=bind$2$1(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=bind$2$1(t=this._apply).call(t,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=bind$2$1(r=this._save).call(r,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=bind$2$1(n=this._loadLast).call(n,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new hammer(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),hammerUtil.onTouch(this.hammer,(function(t){e._moveSelector(t)})),this.hammer.on("tap",(function(t){e._moveSelector(t)})),this.hammer.on("panstart",(function(t){e._moveSelector(t)})),this.hammer.on("panmove",(function(t){e._moveSelector(t)})),this.hammer.on("panend",(function(t){e._moveSelector(t)}))}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var e=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var t,r,n,i,o=this.colorPickerCanvas.clientWidth,a=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,o,a),this.centerCoordinates={x:.5*o,y:.5*a},this.r=.49*o;var s,l=2*Math.PI/360,u=1/this.r;for(n=0;n<360;n++)for(i=0;i<this.r;i++)t=this.centerCoordinates.x+i*Math.sin(l*n),r=this.centerCoordinates.y+i*Math.cos(l*n),s=HSVToRGB(n*(1/360),i*u,1),e.fillStyle="rgb("+s.r+","+s.g+","+s.b+")",e.fillRect(t-.5,r-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,o,a)}this.generated=!0}},{key:"_moveSelector",value:function(e){var t=this.colorPickerDiv.getBoundingClientRect(),r=e.center.x-t.left,n=e.center.y-t.top,i=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=r-o,s=n-i,l=Math.atan2(a,s),u=.98*Math.min(Math.sqrt(a*a+s*s),o),c=Math.cos(l)*u+i,h=Math.sin(l)*u+o;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=h-.5*this.colorPickerSelector.clientWidth+"px";var d=l/(2*Math.PI);d=d<0?d+1:d;var f=u/this.r,p=RGBToHSV(this.color.r,this.color.g,this.color.b);p.h=d,p.s=f;var g=HSVToRGB(p.h,p.s,p.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}(),Configurator=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;classCallCheck$1(this,e),this.parent=t,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},extend$1(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new ColorPicker(i),this.wrapper=void 0}return createClass$1(e,[{key:"setOptions",value:function(e){if(void 0!==e){this.popupHistory={},this._removePopup();var t=!0;if("string"==typeof e)this.options.filter=e;else if(e instanceof Array)this.options.filter=e.join();else if("object"===_typeof_1$1(e)){if(null==e)throw new TypeError("options cannot be null");void 0!==e.container&&(this.options.container=e.container),void 0!==filter$2$2(e)&&(this.options.filter=filter$2$2(e)),void 0!==e.showButton&&(this.options.showButton=e.showButton),void 0!==e.enabled&&(t=e.enabled)}else"boolean"==typeof e?(this.options.filter=!0,t=e):"function"==typeof e&&(this.options.filter=e,t=!0);!1===filter$2$2(this.options)&&(t=!1),this.options.enabled=t}this._clean()}},{key:"setModuleOptions",value:function(e){this.moduleOptions=e,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var e=filter$2$2(this.options),t=0,r=!1;for(var n in this.configureOptions)this.configureOptions.hasOwnProperty(n)&&(this.allowCreation=!1,r=!1,"function"==typeof e?r=(r=e(n,[]))||this._handleObject(this.configureOptions[n],[n],!0):!0!==e&&-1===indexOf$3(e).call(e,n)||(r=!0),!1!==r&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),t++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(e){for(var t=this.moduleOptions,r=0;r<e.length;r++){if(void 0===t[e[r]]){t=void 0;break}t=t[e[r]]}return t}},{key:"_makeItem",value:function(e){if(!0===this.allowCreation){var t=document.createElement("div");t.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return forEach$2$1(n).call(n,(function(e){t.appendChild(e)})),this.domElements.push(t),this.domElements.length}return 0}},{key:"_makeHeader",value:function(e){var t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=e,this._makeItem([],t)}},{key:"_makeLabel",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+t.length,n.innerHTML=!0===r?"<i><b>"+e+":</b></i>":e+":",n}},{key:"_makeDropdown",value:function(e,t,r){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var i=0;void 0!==t&&-1!==indexOf$3(e).call(e,t)&&(i=indexOf$3(e).call(e,t));for(var o=0;o<e.length;o++){var a=document.createElement("option");a.value=e[o],o===i&&(a.selected="selected"),a.innerHTML=e[o],n.appendChild(a)}var s=this;n.onchange=function(){s._update(this.value,r)};var l=this._makeLabel(r[r.length-1],r);this._makeItem(r,l,n)}},{key:"_makeRange",value:function(e,t,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=document.createElement("input");s.className="vis-configuration vis-config-range";try{s.type="range",s.min=i,s.max=o}catch(e){}s.step=a;var l="",u=0;if(void 0!==t){t<0&&1.2*t<i?(s.min=Math.ceil(1.2*t),u=s.min,l="range increased"):t/1.2<i&&(s.min=Math.ceil(t/1.2),u=s.min,l="range increased"),1.2*t>o&&1!==o&&(s.max=Math.ceil(1.2*t),u=s.max,l="range increased"),s.value=t}else s.value=n;var c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=s.value;var h=this;s.onchange=function(){c.value=this.value,h._update(Number(this.value),r)},s.oninput=function(){c.value=this.value};var d=this._makeLabel(r[r.length-1],r),f=this._makeItem(r,d,s,c);""!==l&&this.popupHistory[f]!==u&&(this.popupHistory[f]=u,this._setupPopup(l,f))}},{key:"_makeButton",value:function(){var e=this;if(!0===this.options.showButton){var t=document.createElement("div");t.className="vis-configuration vis-config-button",t.innerHTML="generate options",t.onclick=function(){e._printOptions()},t.onmouseover=function(){t.className="vis-configuration vis-config-button hover"},t.onmouseout=function(){t.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(t)}}},{key:"_setupPopup",value:function(e,t){var r=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=e,n.onclick=function(){r._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:t}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var e=this;if(void 0!==this.popupDiv.html){var t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout$2((function(){e.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=setTimeout$2((function(){e._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(e,t,r){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=e,void 0!==t&&(n.checked=t,t!==e&&("object"===_typeof_1$1(e)?t!==e.enabled&&this.changedOptions.push({path:r,value:t}):this.changedOptions.push({path:r,value:t})));var i=this;n.onchange=function(){i._update(this.checked,r)};var o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,n)}},{key:"_makeTextInput",value:function(e,t,r){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=t,t!==e&&this.changedOptions.push({path:r,value:t});var i=this;n.onchange=function(){i._update(this.value,r)};var o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,n)}},{key:"_makeColorField",value:function(e,t,r){var n=this,i=e[1],o=document.createElement("div");"none"!==(t=void 0===t?i:t)?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=t):o.className="vis-configuration vis-config-colorBlock none",t=void 0===t?i:t,o.onclick=function(){n._showColorPicker(t,o,r)};var a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,o)}},{key:"_showColorPicker",value:function(e,t,r){var n=this;t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback((function(e){var i="rgba("+e.r+","+e.g+","+e.b+","+e.a+")";t.style.backgroundColor=i,n._update(i,r)})),this.colorPicker.setCloseCallback((function(){t.onclick=function(){n._showColorPicker(e,t,r)}}))}},{key:"_handleObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,i=filter$2$2(this.options),o=!1;for(var a in e)if(e.hasOwnProperty(a)){n=!0;var s=e[a],l=copyAndExtendArray(t,a);if("function"==typeof i&&!1===(n=i(a,t))&&!(s instanceof Array)&&"string"!=typeof s&&"boolean"!=typeof s&&s instanceof Object&&(this.allowCreation=!1,n=this._handleObject(s,l,!0),this.allowCreation=!1===r),!1!==n){o=!0;var u=this._getValue(l);if(s instanceof Array)this._handleArray(s,u,l);else if("string"==typeof s)this._makeTextInput(s,u,l);else if("boolean"==typeof s)this._makeCheckbox(s,u,l);else if(s instanceof Object){var c=!0;if(-1!==indexOf$3(t).call(t,"physics")&&this.moduleOptions.physics.solver!==a&&"wind"!==a&&(c=!1),!0===c)if(void 0!==s.enabled){var h=copyAndExtendArray(l,"enabled"),d=this._getValue(h);if(!0===d){var f=this._makeLabel(a,l,!0);this._makeItem(l,f),o=this._handleObject(s,l)||o}else this._makeCheckbox(s,d,l)}else{var p=this._makeLabel(a,l,!0);this._makeItem(l,p),o=this._handleObject(s,l)||o}}else console.error("dont know how to handle",s,a,l)}}return o}},{key:"_handleArray",value:function(e,t,r){"string"==typeof e[0]&&"color"===e[0]?(this._makeColorField(e,t,r),e[1]!==t&&this.changedOptions.push({path:r,value:t})):"string"==typeof e[0]?(this._makeDropdown(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:t})):"number"==typeof e[0]&&(this._makeRange(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:Number(t)}))}},{key:"_update",value:function(e,t){var r=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",r),this.initialized=!0,this.parent.setOptions(r)}},{key:"_constructOptions",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r;e="false"!==(e="true"===e||e)&&e;for(var i=0;i<t.length;i++)"global"!==t[i]&&(void 0===n[t[i]]&&(n[t[i]]={}),i!==t.length-1?n=n[t[i]]:n[t[i]]=e);return r}},{key:"_printOptions",value:function(){var e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+stringify$2$1(e,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var e={},t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}]),e}(),string$1="string",bool="boolean",number$2="number",array$1="array",object$1="object",dom="dom",any="any",endPoints=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],allOptions$1={configure:{enabled:{boolean:bool},filter:{boolean:bool,string:string$1,array:array$1,function:"function"},container:{dom:dom},showButton:{boolean:bool},__type__:{object:object$1,boolean:bool,string:string$1,array:array$1,function:"function"}},edges:{arrows:{to:{enabled:{boolean:bool},scaleFactor:{number:number$2},type:{string:endPoints},imageHeight:{number:number$2},imageWidth:{number:number$2},src:{string:string$1},__type__:{object:object$1,boolean:bool}},middle:{enabled:{boolean:bool},scaleFactor:{number:number$2},type:{string:endPoints},imageWidth:{number:number$2},imageHeight:{number:number$2},src:{string:string$1},__type__:{object:object$1,boolean:bool}},from:{enabled:{boolean:bool},scaleFactor:{number:number$2},type:{string:endPoints},imageWidth:{number:number$2},imageHeight:{number:number$2},src:{string:string$1},__type__:{object:object$1,boolean:bool}},__type__:{string:["from","to","middle"],object:object$1}},arrowStrikethrough:{boolean:bool},background:{enabled:{boolean:bool},color:{string:string$1},size:{number:number$2},dashes:{boolean:bool,array:array$1},__type__:{object:object$1,boolean:bool}},chosen:{label:{boolean:bool,function:"function"},edge:{boolean:bool,function:"function"},__type__:{object:object$1,boolean:bool}},color:{color:{string:string$1},highlight:{string:string$1},hover:{string:string$1},inherit:{string:["from","to","both"],boolean:bool},opacity:{number:number$2},__type__:{object:object$1,string:string$1}},dashes:{boolean:bool,array:array$1},font:{color:{string:string$1},size:{number:number$2},face:{string:string$1},background:{string:string$1},strokeWidth:{number:number$2},strokeColor:{string:string$1},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:number$2},multi:{boolean:bool,string:string$1},bold:{color:{string:string$1},size:{number:number$2},face:{string:string$1},mod:{string:string$1},vadjust:{number:number$2},__type__:{object:object$1,string:string$1}},boldital:{color:{string:string$1},size:{number:number$2},face:{string:string$1},mod:{string:string$1},vadjust:{number:number$2},__type__:{object:object$1,string:string$1}},ital:{color:{string:string$1},size:{number:number$2},face:{string:string$1},mod:{string:string$1},vadjust:{number:number$2},__type__:{object:object$1,string:string$1}},mono:{color:{string:string$1},size:{number:number$2},face:{string:string$1},mod:{string:string$1},vadjust:{number:number$2},__type__:{object:object$1,string:string$1}},__type__:{object:object$1,string:string$1}},hidden:{boolean:bool},hoverWidth:{function:"function",number:number$2},label:{string:string$1,undefined:"undefined"},labelHighlightBold:{boolean:bool},length:{number:number$2,undefined:"undefined"},physics:{boolean:bool},scaling:{min:{number:number$2},max:{number:number$2},label:{enabled:{boolean:bool},min:{number:number$2},max:{number:number$2},maxVisible:{number:number$2},drawThreshold:{number:number$2},__type__:{object:object$1,boolean:bool}},customScalingFunction:{function:"function"},__type__:{object:object$1}},selectionWidth:{function:"function",number:number$2},selfReferenceSize:{number:number$2},selfReference:{size:{number:number$2},angle:{number:number$2},renderBehindTheNode:{boolean:bool},__type__:{object:object$1}},shadow:{enabled:{boolean:bool},color:{string:string$1},size:{number:number$2},x:{number:number$2},y:{number:number$2},__type__:{object:object$1,boolean:bool}},smooth:{enabled:{boolean:bool},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:number$2},forceDirection:{string:["horizontal","vertical","none"],boolean:bool},__type__:{object:object$1,boolean:bool}},title:{string:string$1,undefined:"undefined"},width:{number:number$2},widthConstraint:{maximum:{number:number$2},__type__:{object:object$1,boolean:bool,number:number$2}},value:{number:number$2,undefined:"undefined"},__type__:{object:object$1}},groups:{useDefaultGroups:{boolean:bool},__any__:"get from nodes, will be overwritten below",__type__:{object:object$1}},interaction:{dragNodes:{boolean:bool},dragView:{boolean:bool},hideEdgesOnDrag:{boolean:bool},hideEdgesOnZoom:{boolean:bool},hideNodesOnDrag:{boolean:bool},hover:{boolean:bool},keyboard:{enabled:{boolean:bool},speed:{x:{number:number$2},y:{number:number$2},zoom:{number:number$2},__type__:{object:object$1}},bindToWindow:{boolean:bool},__type__:{object:object$1,boolean:bool}},multiselect:{boolean:bool},navigationButtons:{boolean:bool},selectable:{boolean:bool},selectConnectedEdges:{boolean:bool},hoverConnectedEdges:{boolean:bool},tooltipDelay:{number:number$2},zoomView:{boolean:bool},zoomSpeed:{number:number$2},__type__:{object:object$1}},layout:{randomSeed:{undefined:"undefined",number:number$2},improvedLayout:{boolean:bool},clusterThreshold:{number:number$2},hierarchical:{enabled:{boolean:bool},levelSeparation:{number:number$2},nodeSpacing:{number:number$2},treeSpacing:{number:number$2},blockShifting:{boolean:bool},edgeMinimization:{boolean:bool},parentCentralization:{boolean:bool},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:object$1,boolean:bool}},__type__:{object:object$1}},manipulation:{enabled:{boolean:bool},initiallyActive:{boolean:bool},addNode:{boolean:bool,function:"function"},addEdge:{boolean:bool,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:object$1,boolean:bool,function:"function"}},deleteNode:{boolean:bool,function:"function"},deleteEdge:{boolean:bool,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:object$1,boolean:bool}},nodes:{borderWidth:{number:number$2},borderWidthSelected:{number:number$2,undefined:"undefined"},brokenImage:{string:string$1,undefined:"undefined"},chosen:{label:{boolean:bool,function:"function"},node:{boolean:bool,function:"function"},__type__:{object:object$1,boolean:bool}},color:{border:{string:string$1},background:{string:string$1},highlight:{border:{string:string$1},background:{string:string$1},__type__:{object:object$1,string:string$1}},hover:{border:{string:string$1},background:{string:string$1},__type__:{object:object$1,string:string$1}},__type__:{object:object$1,string:string$1}},opacity:{number:number$2,undefined:"undefined"},fixed:{x:{boolean:bool},y:{boolean:bool},__type__:{object:object$1,boolean:bool}},font:{align:{string:string$1},color:{string:string$1},size:{number:number$2},face:{string:string$1},background:{string:string$1},strokeWidth:{number:number$2},strokeColor:{string:string$1},vadjust:{number:number$2},multi:{boolean:bool,string:string$1},bold:{color:{string:string$1},size:{number:number$2},face:{string:string$1},mod:{string:string$1},vadjust:{number:number$2},__type__:{object:object$1,string:string$1}},boldital:{color:{string:string$1},size:{number:number$2},face:{string:string$1},mod:{string:string$1},vadjust:{number:number$2},__type__:{object:object$1,string:string$1}},ital:{color:{string:string$1},size:{number:number$2},face:{string:string$1},mod:{string:string$1},vadjust:{number:number$2},__type__:{object:object$1,string:string$1}},mono:{color:{string:string$1},size:{number:number$2},face:{string:string$1},mod:{string:string$1},vadjust:{number:number$2},__type__:{object:object$1,string:string$1}},__type__:{object:object$1,string:string$1}},group:{string:string$1,number:number$2,undefined:"undefined"},heightConstraint:{minimum:{number:number$2},valign:{string:string$1},__type__:{object:object$1,boolean:bool,number:number$2}},hidden:{boolean:bool},icon:{face:{string:string$1},code:{string:string$1},size:{number:number$2},color:{string:string$1},weight:{string:string$1,number:number$2},__type__:{object:object$1}},id:{string:string$1,number:number$2},image:{selected:{string:string$1,undefined:"undefined"},unselected:{string:string$1,undefined:"undefined"},__type__:{object:object$1,string:string$1}},imagePadding:{top:{number:number$2},right:{number:number$2},bottom:{number:number$2},left:{number:number$2},__type__:{object:object$1,number:number$2}},label:{string:string$1,undefined:"undefined"},labelHighlightBold:{boolean:bool},level:{number:number$2,undefined:"undefined"},margin:{top:{number:number$2},right:{number:number$2},bottom:{number:number$2},left:{number:number$2},__type__:{object:object$1,number:number$2}},mass:{number:number$2},physics:{boolean:bool},scaling:{min:{number:number$2},max:{number:number$2},label:{enabled:{boolean:bool},min:{number:number$2},max:{number:number$2},maxVisible:{number:number$2},drawThreshold:{number:number$2},__type__:{object:object$1,boolean:bool}},customScalingFunction:{function:"function"},__type__:{object:object$1}},shadow:{enabled:{boolean:bool},color:{string:string$1},size:{number:number$2},x:{number:number$2},y:{number:number$2},__type__:{object:object$1,boolean:bool}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},shapeProperties:{borderDashes:{boolean:bool,array:array$1},borderRadius:{number:number$2},interpolation:{boolean:bool},useImageSize:{boolean:bool},useBorderWithImage:{boolean:bool},__type__:{object:object$1}},size:{number:number$2},title:{string:string$1,dom:dom,undefined:"undefined"},value:{number:number$2,undefined:"undefined"},widthConstraint:{minimum:{number:number$2},maximum:{number:number$2},__type__:{object:object$1,boolean:bool,number:number$2}},x:{number:number$2},y:{number:number$2},__type__:{object:object$1}},physics:{enabled:{boolean:bool},barnesHut:{theta:{number:number$2},gravitationalConstant:{number:number$2},centralGravity:{number:number$2},springLength:{number:number$2},springConstant:{number:number$2},damping:{number:number$2},avoidOverlap:{number:number$2},__type__:{object:object$1}},forceAtlas2Based:{theta:{number:number$2},gravitationalConstant:{number:number$2},centralGravity:{number:number$2},springLength:{number:number$2},springConstant:{number:number$2},damping:{number:number$2},avoidOverlap:{number:number$2},__type__:{object:object$1}},repulsion:{centralGravity:{number:number$2},springLength:{number:number$2},springConstant:{number:number$2},nodeDistance:{number:number$2},damping:{number:number$2},__type__:{object:object$1}},hierarchicalRepulsion:{centralGravity:{number:number$2},springLength:{number:number$2},springConstant:{number:number$2},nodeDistance:{number:number$2},damping:{number:number$2},avoidOverlap:{number:number$2},__type__:{object:object$1}},maxVelocity:{number:number$2},minVelocity:{number:number$2},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:bool},iterations:{number:number$2},updateInterval:{number:number$2},onlyDynamicEdges:{boolean:bool},fit:{boolean:bool},__type__:{object:object$1,boolean:bool}},timestep:{number:number$2},adaptiveTimestep:{boolean:bool},wind:{x:{number:number$2},y:{number:number$2},__type__:{object:object$1}},__type__:{object:object$1,boolean:bool}},autoResize:{boolean:bool},clickToUse:{boolean:bool},locale:{string:string$1},locales:{__any__:{any:any},__type__:{object:object$1}},height:{string:string$1},width:{string:string$1},__type__:{object:object$1}};allOptions$1.groups.__any__=allOptions$1.nodes,allOptions$1.manipulation.controlNodeStyle=allOptions$1.nodes;var configureOptions={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},FloydWarshall=function(){function e(){classCallCheck$1(this,e)}return createClass$1(e,[{key:"getDistances",value:function(e,t,r){for(var n={},i=e.edges,o=0;o<t.length;o++){var a={};n[t[o]]=a;for(var s=0;s<t.length;s++)a[t[s]]=o==s?0:1e9}for(var l=0;l<r.length;l++){var u=i[r[l]];!0===u.connected&&void 0!==n[u.fromId]&&void 0!==n[u.toId]&&(n[u.fromId][u.toId]=1,n[u.toId][u.fromId]=1)}for(var c=t.length,h=0;h<c;h++)for(var d=t[h],f=n[d],p=0;p<c-1;p++)for(var g=t[p],y=n[g],v=p+1;v<c;v++){var m=t[v],b=n[m],$=Math.min(y[m],y[d]+f[m]);y[m]=$,b[g]=$}return n}}]),e}(),KamadaKawai=function(){function e(t,r,n){classCallCheck$1(this,e),this.body=t,this.springLength=r,this.springConstant=n,this.distanceSolver=new FloydWarshall}return createClass$1(e,[{key:"setOptions",value:function(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}},{key:"solve",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.distanceSolver.getDistances(this.body,e,t);this._createL_matrix(n),this._createK_matrix(n),this._createE_matrix();for(var i=.01,o=1,a=0,s=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),l=5,u=1e9,c=0,h=0,d=0,f=0,p=0;u>i&&a<s;){a+=1;var g=this._getHighestEnergyNode(r),y=slicedToArray$1(g,4);for(c=y[0],u=y[1],h=y[2],d=y[3],f=u,p=0;f>o&&p<l;){p+=1,this._moveNode(c,h,d);var v=this._getEnergy(c),m=slicedToArray$1(v,3);f=m[0],h=m[1],d=m[2]}}}},{key:"_getHighestEnergyNode",value:function(e){for(var t=this.body.nodeIndices,r=this.body.nodes,n=0,i=t[0],o=0,a=0,s=0;s<t.length;s++){var l=t[s];if(!1===r[l].predefinedPosition||!0===r[l].isCluster&&!0===e||!0===r[l].options.fixed.x||!0===r[l].options.fixed.y){var u=this._getEnergy(l),c=slicedToArray$1(u,3),h=c[0],d=c[1],f=c[2];n<h&&(n=h,i=l,o=d,a=f)}}return[i,n,o,a]}},{key:"_getEnergy",value:function(e){var t=slicedToArray$1(this.E_sums[e],2),r=t[0],n=t[1];return[Math.sqrt(Math.pow(r,2)+Math.pow(n,2)),r,n]}},{key:"_moveNode",value:function(e,t,r){for(var n=this.body.nodeIndices,i=this.body.nodes,o=0,a=0,s=0,l=i[e].x,u=i[e].y,c=this.K_matrix[e],h=this.L_matrix[e],d=0;d<n.length;d++){var f=n[d];if(f!==e){var p=i[f].x,g=i[f].y,y=c[f],v=h[f],m=1/Math.pow(Math.pow(l-p,2)+Math.pow(u-g,2),1.5);o+=y*(1-v*Math.pow(u-g,2)*m),a+=y*(v*(l-p)*(u-g)*m),s+=y*(1-v*Math.pow(l-p,2)*m)}}var b=(t/o+r/a)/(a/o-s/a),$=-(a*b+t)/o;i[e].x+=$,i[e].y+=b,this._updateE_matrix(e)}},{key:"_createL_matrix",value:function(e){var t=this.body.nodeIndices,r=this.springLength;this.L_matrix=[];for(var n=0;n<t.length;n++){this.L_matrix[t[n]]={};for(var i=0;i<t.length;i++)this.L_matrix[t[n]][t[i]]=r*e[t[n]][t[i]]}}},{key:"_createK_matrix",value:function(e){var t=this.body.nodeIndices,r=this.springConstant;this.K_matrix=[];for(var n=0;n<t.length;n++){this.K_matrix[t[n]]={};for(var i=0;i<t.length;i++)this.K_matrix[t[n]][t[i]]=r*Math.pow(e[t[n]][t[i]],-2)}}},{key:"_createE_matrix",value:function(){var e=this.body.nodeIndices,t=this.body.nodes;this.E_matrix={},this.E_sums={};for(var r=0;r<e.length;r++)this.E_matrix[e[r]]=[];for(var n=0;n<e.length;n++){for(var i=e[n],o=t[i].x,a=t[i].y,s=0,l=0,u=n;u<e.length;u++){var c=e[u];if(c!==i){var h=t[c].x,d=t[c].y,f=1/Math.sqrt(Math.pow(o-h,2)+Math.pow(a-d,2));this.E_matrix[i][u]=[this.K_matrix[i][c]*(o-h-this.L_matrix[i][c]*(o-h)*f),this.K_matrix[i][c]*(a-d-this.L_matrix[i][c]*(a-d)*f)],this.E_matrix[c][n]=this.E_matrix[i][u],s+=this.E_matrix[i][u][0],l+=this.E_matrix[i][u][1]}}this.E_sums[i]=[s,l]}}},{key:"_updateE_matrix",value:function(e){for(var t=this.body.nodeIndices,r=this.body.nodes,n=this.E_matrix[e],i=this.K_matrix[e],o=this.L_matrix[e],a=r[e].x,s=r[e].y,l=0,u=0,c=0;c<t.length;c++){var h=t[c];if(h!==e){var d=n[c],f=d[0],p=d[1],g=r[h].x,y=r[h].y,v=1/Math.sqrt(Math.pow(a-g,2)+Math.pow(s-y,2)),m=i[h]*(a-g-o[h]*(a-g)*v),b=i[h]*(s-y-o[h]*(s-y)*v);n[c]=[m,b],l+=m,u+=b;var $=this.E_sums[h];$[0]+=m-f,$[1]+=b-p}}this.E_sums[e]=[l,u]}}]),e}();function Network(e,t,r){var n,i,o,a,s=this;if(!(this instanceof Network))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:locales,clickToUse:!1},extend$1(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:bind$2$1(n=this.on).call(n,this),off:bind$2$1(i=this.off).call(i,this),emit:bind$2$1(o=this.emit).call(o,this),once:bind$2$1(a=this.once).call(a,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new Images((function(){return s.body.emitter.emit("_requestRedraw")})),this.groups=new Groups,this.canvas=new Canvas(this.body),this.selectionHandler=new SelectionHandler(this.body,this.canvas),this.interactionHandler=new InteractionHandler(this.body,this.canvas,this.selectionHandler),this.view=new View(this.body,this.canvas),this.renderer=new CanvasRenderer$1(this.body,this.canvas),this.physics=new PhysicsEngine(this.body),this.layoutEngine=new LayoutEngine(this.body),this.clustering=new ClusterEngine(this.body),this.manipulation=new ManipulationSystem(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new NodesHandler(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new EdgesHandler(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new KamadaKawai(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(t)}componentEmitter(Network.prototype),Network.prototype.setOptions=function(e){var t=this;if(null===e&&(e=void 0),void 0!==e){!0===Validator.validate(e,allOptions$1)&&console.log("%cErrors have been found in the supplied options object.",printStyle);if(selectiveDeepExtend(["locale","locales","clickToUse"],this.options,e),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),void 0!==e.groups&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new Configurator(this,this.body.container,configureOptions,this.canvas.pixelRatio)),this.configurator.setOptions(e.configure)),this.configurator&&!0===this.configurator.options.enabled){var r={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};deepExtend$1(r.nodes,this.nodesHandler.options),deepExtend$1(r.edges,this.edgesHandler.options),deepExtend$1(r.layout,this.layoutEngine.options),deepExtend$1(r.interaction,this.selectionHandler.options),deepExtend$1(r.interaction,this.renderer.options),deepExtend$1(r.interaction,this.interactionHandler.options),deepExtend$1(r.manipulation,this.manipulation.options),deepExtend$1(r.physics,this.physics.options),deepExtend$1(r.global,this.canvas.options),deepExtend$1(r.global,this.options),this.configurator.setModuleOptions(r)}void 0!==e.clickToUse?!0===e.clickToUse?void 0===this.activator&&(this.activator=new Activator_1(this.canvas.frame),this.activator.on("change",(function(){t.body.emitter.emit("activate")}))):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},Network.prototype._updateVisibleIndices=function(){var e=this.body.nodes,t=this.body.edges;for(var r in this.body.nodeIndices=[],this.body.edgeIndices=[],e)e.hasOwnProperty(r)&&(this.clustering._isClusteredNode(r)||!1!==e[r].options.hidden||this.body.nodeIndices.push(e[r].id));for(var n in t)if(t.hasOwnProperty(n)){var i=t[n],o=e[i.fromId],a=e[i.toId],s=void 0!==o&&void 0!==a;!this.clustering._isClusteredEdge(n)&&!1===i.options.hidden&&s&&!1===o.options.hidden&&!1===a.options.hidden&&this.body.edgeIndices.push(i.id)}},Network.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",(function(){e.edgesHandler._updateState(),e.body.emitter.emit("_dataUpdated")})),this.body.emitter.on("_dataUpdated",(function(){e.clustering._updateState(),e._updateVisibleIndices(),e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")}))},Network.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var t=dotparser.DOTToGraph(e.dot);this.setData(t)}else if(e&&e.gephi){console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var r=parseGephi(e.gephi);this.setData(r)}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},Network.prototype.destroy=function(){for(var e in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)this.body.nodes.hasOwnProperty(e)&&delete this.body.nodes[e];for(var t in this.body.edges)this.body.edges.hasOwnProperty(t)&&delete this.body.edges[t];recursiveDOMDelete(this.body.container)},Network.prototype._updateValueRange=function(e){var t,r=void 0,n=void 0,i=0;for(t in e)if(e.hasOwnProperty(t)){var o=e[t].getValue();void 0!==o&&(r=void 0===r?o:Math.min(o,r),n=void 0===n?o:Math.max(o,n),i+=o)}if(void 0!==r&&void 0!==n)for(t in e)e.hasOwnProperty(t)&&e[t].setValueRange(r,n,i)},Network.prototype.isActive=function(){return!this.activator||this.activator.active},Network.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},Network.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},Network.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},Network.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},Network.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},Network.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},Network.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},Network.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},Network.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},Network.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},Network.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},Network.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},Network.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},Network.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},Network.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},Network.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},Network.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},Network.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},Network.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},Network.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},Network.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},Network.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},Network.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},Network.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},Network.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},Network.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},Network.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)},Network.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},Network.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},Network.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},Network.prototype.getConnectedNodes=function(e){return void 0!==this.body.nodes[e]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},Network.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},Network.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},Network.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},Network.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},Network.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},Network.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},Network.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},Network.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},Network.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},Network.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},Network.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},Network.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},Network.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},Network.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},Network.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},Network.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},Network.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},Network.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},Network.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},Network.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},Network.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e};class VisLibrary extends Library{constructor(e,t){super(e);const{type:r,...n}=t;this.options={edges:{smooth:!1},physics:{forceAtlas2Based:{...n},solver:"forceAtlas2Based"}}}getTransformedToLibraryNodes(e){return e.map(e=>{const t={...e};return t.x&&t.y&&(t.fixed=!0),t})}getTransformedToLibraryEdges(e){return e.map(e=>{const t={...e};return t.from=t.source,t.to=t.target,t.arrows=t.isBidirected?void 0:"to",delete t.source,delete t.target,t})}getTransformedToMainTypeNodes(e){return e.map(e=>{const t={...e};return delete t.fixed,t})}getTransformedToMainTypeEdges(e){return e.map(e=>{const t={...e};return t.source=t.from,t.target=t.to,delete t.from,delete t.to,delete t.id,delete t.arrows,t})}async visualize(){return this.instance=new Network(this.container,this.internalData,this.options),await new Promise((e,t)=>{this.instance.on("stabilized",()=>{const t=this.instance.getPositions();this.internalData.nodes=this.internalData.nodes.map(e=>({...e,...t[e.id]})),e()})}),this.transformToMainType(this.internalData)}}class Config{constructor(e){this.container=e,this.graph=null,this.inputGraph=null,this.markedNodes={},this.rules=[],this.ruleCombiner={layout:null,subset:null},this.exportConfig=null}resetRuleCombiner(){this.ruleCombiner={layout:null,subset:null}}setMarkOnNodes(){var e;for(const t of null===(e=this.inputGraph)||void 0===e?void 0:e.nodes)for(const{subset:e,layout:r}of this.rules)if(GraphHelper.isFitSubset(t,e)){const{id:e}=t;this.markedNodes[e]||(this.markedNodes[e]={...t,markedLayouts:[]}),this.markedNodes[e].markedLayouts.push(null==r?void 0:r.type)}}checkStructureRules(){for(const e in this.markedNodes)this.checkRule(COSE_AVSDF_INTERSECTION_RULE,{node:this.markedNodes[e]});const e=Object.values(this.markedNodes),t=this.rules.filter(({layout:e})=>(null==e?void 0:e.type)===exports.Layouts.Avsdf).map(({subset:e})=>e);this.checkRule(AVSDF_INTERSECTION_RULE,{nodes:e,avsdfSubsets:t});const r=this.rules.filter(({layout:e})=>(null==e?void 0:e.type)===exports.Layouts.Dagre).map(({subset:e})=>e);for(const n of r){const{edges:r}=this.inputGraph,i=this.getFilteredNodes(e,n),o=this.getFilteredEdges(r,i);this.checkRule(ACYCLE_RULE,{edges:o});for(const r of t)this.checkRule(DARGE_AVSDF_INTERSECTION_RULE,{markedNodes:e,avsdfSubset:r,dagreSubset:n})}}checkLayoutRules(e,t){const{type:r,...n}=t,i=LayoutSettingsRules[r];for(const t of i)this.checkRule(t,{settings:n,subGraph:e})}checkRule({name:e,checkFunction:t},r){t(r)||console.warn(`Rule "${e}" is failed with params \n${JSON.stringify(r)}`)}getNeededLibrary(e){const{type:t}=e;switch(t){case exports.Layouts.Fa2:return new VisLibrary(this.container,e);case exports.Layouts.Avsdf:case exports.Layouts.Cose:case exports.Layouts.Dagre:return new CytoscapeLibrary(this.container,e);default:return new Error("Choosed library isn't implemented")}}getSubGraph(e,t){const{type:r,nodes:n,edges:i,groups:o=[]}=this.inputGraph,a=this.getFilteredNodes(n,e),s=this.getFilteredEdges(i,a);return{type:r,groups:t===exports.Layouts.Cose?this.getFilteredGroups(o,a):[],nodes:a,edges:s}}getFilteredNodes(e,t){return e.filter(e=>GraphHelper.isFitSubset(e,t))}getFilteredEdges(e,t){const r=t.map(e=>e.id);return e.filter(({source:e,target:t})=>{var n,i;const o=null===(n=this.graph)||void 0===n?void 0:n.nodes.find(t=>t.id===e),a=null===(i=this.graph)||void 0===i?void 0:i.nodes.find(e=>e.id===t);let s=!1,l=!1;for(const n of r){if(e===n){if(a)return!0;s=!0}if(t===n){if(o)return!0;l=!0}if(s&&l)return!0}return!1})}getFilteredGroups(e,t){const r=t.filter(e=>Boolean(e.group)).map(e=>e.group);return e.filter(e=>r.includes(e.id))}async finalDraw(){const e=this.getNeededLibrary({type:exports.Layouts.Cose});e instanceof Error||(e.setBaseGraph(this.graph),await e.visualize(!0))}get(e){return this.ruleCombiner.subset=e,this}useLayout(e){this.ruleCombiner.layout=e,this.rules.push(this.ruleCombiner),this.resetRuleCombiner()}useFor(e){this.inputGraph=e}export(e,t){this.exportConfig={name:e,type:t}}async build(){this.setMarkOnNodes(),this.checkStructureRules();for(const{subset:e,layout:t}of this.rules){const r=this.getSubGraph(e,null==t?void 0:t.type),n=this.getNeededLibrary(t);this.checkLayoutRules(r,t),n instanceof Error||(n.setBaseGraph(this.graph),n.addSubgraph(r),this.graph=await n.visualize())}if(await this.finalDraw(),this.exportConfig){const e=this.container.querySelector("canvas");if(e){const{name:t,type:r}=this.exportConfig;FileSaver.saveCanvasAs(e,t,r)}}}}exports.ACYCLE_RULE=ACYCLE_RULE,exports.AVSDF_INTERSECTION_RULE=AVSDF_INTERSECTION_RULE,exports.AVSDF_LAYOUT_SETTINGS_RULES=AVSDF_LAYOUT_SETTINGS_RULES,exports.COSE_AVSDF_INTERSECTION_RULE=COSE_AVSDF_INTERSECTION_RULE,exports.COSE_LAYOUT_SETTINGS_RULES=COSE_LAYOUT_SETTINGS_RULES,exports.Config=Config,exports.CytoscapeLibrary=CytoscapeLibrary,exports.DARGE_AVSDF_INTERSECTION_RULE=DARGE_AVSDF_INTERSECTION_RULE,exports.DARGE_LAYOUT_SETTINGS_RULES=DARGE_LAYOUT_SETTINGS_RULES,exports.FA2_LAYOUT_SETTINGS_RULES=FA2_LAYOUT_SETTINGS_RULES,exports.FileSaver=FileSaver,exports.GraphHelper=GraphHelper,exports.LayoutSettingsRules=LayoutSettingsRules,exports.Library=Library,exports.VisLibrary=VisLibrary;
//# sourceMappingURL=index.js.map
